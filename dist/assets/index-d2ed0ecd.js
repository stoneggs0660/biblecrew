function Yy(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Gy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cg={exports:{}},ea={},ug={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uo=Symbol.for("react.element"),Qy=Symbol.for("react.portal"),Ky=Symbol.for("react.fragment"),qy=Symbol.for("react.strict_mode"),Xy=Symbol.for("react.profiler"),Jy=Symbol.for("react.provider"),Zy=Symbol.for("react.context"),ev=Symbol.for("react.forward_ref"),tv=Symbol.for("react.suspense"),nv=Symbol.for("react.memo"),rv=Symbol.for("react.lazy"),Wf=Symbol.iterator;function iv(t){return t===null||typeof t!="object"?null:(t=Wf&&t[Wf]||t["@@iterator"],typeof t=="function"?t:null)}var dg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fg=Object.assign,hg={};function Gi(t,e,n){this.props=t,this.context=e,this.refs=hg,this.updater=n||dg}Gi.prototype.isReactComponent={};Gi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function pg(){}pg.prototype=Gi.prototype;function Ku(t,e,n){this.props=t,this.context=e,this.refs=hg,this.updater=n||dg}var qu=Ku.prototype=new pg;qu.constructor=Ku;fg(qu,Gi.prototype);qu.isPureReactComponent=!0;var Uf=Array.isArray,gg=Object.prototype.hasOwnProperty,Xu={current:null},mg={key:!0,ref:!0,__self:!0,__source:!0};function yg(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)gg.call(e,r)&&!mg.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:uo,type:t,key:s,ref:o,props:i,_owner:Xu.current}}function sv(t,e){return{$$typeof:uo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ju(t){return typeof t=="object"&&t!==null&&t.$$typeof===uo}function ov(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Hf=/\/+/g;function $a(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ov(""+t.key):e.toString(36)}function el(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case uo:case Qy:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+$a(o,0):r,Uf(i)?(n="",t!=null&&(n=t.replace(Hf,"$&/")+"/"),el(i,e,n,"",function(u){return u})):i!=null&&(Ju(i)&&(i=sv(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Hf,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Uf(t))for(var a=0;a<t.length;a++){s=t[a];var c=r+$a(s,a);o+=el(s,e,n,c,i)}else if(c=iv(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=r+$a(s,a++),o+=el(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Fo(t,e,n){if(t==null)return t;var r=[],i=0;return el(t,r,"","",function(s){return e.call(n,s,i++)}),r}function lv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},tl={transition:null},av={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:tl,ReactCurrentOwner:Xu};function vg(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Fo,forEach:function(t,e,n){Fo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Fo(t,function(){e++}),e},toArray:function(t){return Fo(t,function(e){return e})||[]},only:function(t){if(!Ju(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=Gi;le.Fragment=Ky;le.Profiler=Xy;le.PureComponent=Ku;le.StrictMode=qy;le.Suspense=tv;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=av;le.act=vg;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=fg({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Xu.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)gg.call(e,c)&&!mg.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:uo,type:t.type,key:i,ref:s,props:r,_owner:o}};le.createContext=function(t){return t={$$typeof:Zy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Jy,_context:t},t.Consumer=t};le.createElement=yg;le.createFactory=function(t){var e=yg.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:ev,render:t}};le.isValidElement=Ju;le.lazy=function(t){return{$$typeof:rv,_payload:{_status:-1,_result:t},_init:lv}};le.memo=function(t,e){return{$$typeof:nv,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=tl.transition;tl.transition={};try{t()}finally{tl.transition=e}};le.unstable_act=vg;le.useCallback=function(t,e){return _t.current.useCallback(t,e)};le.useContext=function(t){return _t.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};le.useEffect=function(t,e){return _t.current.useEffect(t,e)};le.useId=function(){return _t.current.useId()};le.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return _t.current.useMemo(t,e)};le.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};le.useRef=function(t){return _t.current.useRef(t)};le.useState=function(t){return _t.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return _t.current.useTransition()};le.version="18.3.1";ug.exports=le;var _=ug.exports;const xg=Gy(_),cv=Yy({__proto__:null,default:xg},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv=_,dv=Symbol.for("react.element"),fv=Symbol.for("react.fragment"),hv=Object.prototype.hasOwnProperty,pv=uv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gv={key:!0,ref:!0,__self:!0,__source:!0};function _g(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)hv.call(e,r)&&!gv.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:dv,type:t,key:s,ref:o,props:i,_owner:pv.current}}ea.Fragment=fv;ea.jsx=_g;ea.jsxs=_g;cg.exports=ea;var l=cg.exports;var bg={exports:{}},Dt={},Sg={exports:{}},wg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,B){var W=N.length;N.push(B);e:for(;0<W;){var X=W-1>>>1,ee=N[X];if(0<i(ee,B))N[X]=B,N[W]=ee,W=X;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var B=N[0],W=N.pop();if(W!==B){N[0]=W;e:for(var X=0,ee=N.length,Pe=ee>>>1;X<Pe;){var Ce=2*(X+1)-1,Be=N[Ce],Xe=Ce+1,Te=N[Xe];if(0>i(Be,W))Xe<ee&&0>i(Te,Be)?(N[X]=Te,N[Xe]=W,X=Xe):(N[X]=Be,N[Ce]=W,X=Ce);else if(Xe<ee&&0>i(Te,W))N[X]=Te,N[Xe]=W,X=Xe;else break e}}return B}function i(N,B){var W=N.sortIndex-B.sortIndex;return W!==0?W:N.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],f=1,d=null,h=3,x=!1,v=!1,w=!1,k=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(N){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=N)r(u),B.sortIndex=B.expirationTime,e(c,B);else break;B=n(u)}}function b(N){if(w=!1,y(N),!v)if(n(c)!==null)v=!0,O(T);else{var B=n(u);B!==null&&G(b,B.startTime-N)}}function T(N,B){v=!1,w&&(w=!1,m(j),j=-1),x=!0;var W=h;try{for(y(B),d=n(c);d!==null&&(!(d.expirationTime>B)||N&&!M());){var X=d.callback;if(typeof X=="function"){d.callback=null,h=d.priorityLevel;var ee=X(d.expirationTime<=B);B=t.unstable_now(),typeof ee=="function"?d.callback=ee:d===n(c)&&r(c),y(B)}else r(c);d=n(c)}if(d!==null)var Pe=!0;else{var Ce=n(u);Ce!==null&&G(b,Ce.startTime-B),Pe=!1}return Pe}finally{d=null,h=W,x=!1}}var S=!1,C=null,j=-1,P=5,I=-1;function M(){return!(t.unstable_now()-I<P)}function A(){if(C!==null){var N=t.unstable_now();I=N;var B=!0;try{B=C(!0,N)}finally{B?H():(S=!1,C=null)}}else S=!1}var H;if(typeof g=="function")H=function(){g(A)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,se=q.port2;q.port1.onmessage=A,H=function(){se.postMessage(null)}}else H=function(){k(A,0)};function O(N){C=N,S||(S=!0,H())}function G(N,B){j=k(function(){N(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){v||x||(v=!0,O(T))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(N){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var W=h;h=B;try{return N()}finally{h=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,B){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var W=h;h=N;try{return B()}finally{h=W}},t.unstable_scheduleCallback=function(N,B,W){var X=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?X+W:X):W=X,N){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=W+ee,N={id:f++,callback:B,priorityLevel:N,startTime:W,expirationTime:ee,sortIndex:-1},W>X?(N.sortIndex=W,e(u,N),n(c)===null&&N===n(u)&&(w?(m(j),j=-1):w=!0,G(b,W-X))):(N.sortIndex=ee,e(c,N),v||x||(v=!0,O(T))),N},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(N){var B=h;return function(){var W=h;h=B;try{return N.apply(this,arguments)}finally{h=W}}}})(wg);Sg.exports=wg;var mv=Sg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv=_,Nt=mv;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cg=new Set,Fs={};function Qr(t,e){Ni(t,e),Ni(t+"Capture",e)}function Ni(t,e){for(Fs[t]=e,t=0;t<e.length;t++)Cg.add(e[t])}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nc=Object.prototype.hasOwnProperty,vv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vf={},Yf={};function xv(t){return Nc.call(Yf,t)?!0:Nc.call(Vf,t)?!1:vv.test(t)?Yf[t]=!0:(Vf[t]=!0,!1)}function _v(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function bv(t,e,n,r){if(e===null||typeof e>"u"||_v(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zu=/[\-:]([a-z])/g;function ed(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zu,ed);ct[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zu,ed);ct[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zu,ed);ct[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function td(t,e,n,r){var i=ct.hasOwnProperty(e)?ct[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(bv(e,n,i,r)&&(n=null),r||i===null?xv(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var On=yv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mo=Symbol.for("react.element"),ci=Symbol.for("react.portal"),ui=Symbol.for("react.fragment"),nd=Symbol.for("react.strict_mode"),Dc=Symbol.for("react.profiler"),Eg=Symbol.for("react.provider"),kg=Symbol.for("react.context"),rd=Symbol.for("react.forward_ref"),Pc=Symbol.for("react.suspense"),Fc=Symbol.for("react.suspense_list"),id=Symbol.for("react.memo"),Un=Symbol.for("react.lazy"),Tg=Symbol.for("react.offscreen"),Gf=Symbol.iterator;function os(t){return t===null||typeof t!="object"?null:(t=Gf&&t[Gf]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,Wa;function vs(t){if(Wa===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Wa=e&&e[1]||""}return`
`+Wa+t}var Ua=!1;function Ha(t,e){if(!t||Ua)return"";Ua=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{Ua=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?vs(t):""}function Sv(t){switch(t.tag){case 5:return vs(t.type);case 16:return vs("Lazy");case 13:return vs("Suspense");case 19:return vs("SuspenseList");case 0:case 2:case 15:return t=Ha(t.type,!1),t;case 11:return t=Ha(t.type.render,!1),t;case 1:return t=Ha(t.type,!0),t;default:return""}}function Mc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ui:return"Fragment";case ci:return"Portal";case Dc:return"Profiler";case nd:return"StrictMode";case Pc:return"Suspense";case Fc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kg:return(t.displayName||"Context")+".Consumer";case Eg:return(t._context.displayName||"Context")+".Provider";case rd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case id:return e=t.displayName||null,e!==null?e:Mc(t.type)||"Memo";case Un:e=t._payload,t=t._init;try{return Mc(t(e))}catch{}}return null}function wv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mc(e);case 8:return e===nd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ur(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Rg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Cv(t){var e=Rg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Oo(t){t._valueTracker||(t._valueTracker=Cv(t))}function jg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Rg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function fl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Oc(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Qf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ur(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ig(t,e){e=e.checked,e!=null&&td(t,"checked",e,!1)}function Bc(t,e){Ig(t,e);var n=ur(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zc(t,e.type,n):e.hasOwnProperty("defaultValue")&&zc(t,e.type,ur(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Kf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function zc(t,e,n){(e!=="number"||fl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xs=Array.isArray;function Si(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ur(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Lc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(L(92));if(xs(n)){if(1<n.length)throw Error(L(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ur(n)}}function Ag(t,e){var n=ur(e.value),r=ur(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Xf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ng(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $c(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ng(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bo,Dg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bo=Bo||document.createElement("div"),Bo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ms(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ss={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ev=["Webkit","ms","Moz","O"];Object.keys(Ss).forEach(function(t){Ev.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ss[e]=Ss[t]})});function Pg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ss.hasOwnProperty(t)&&Ss[t]?(""+e).trim():e+"px"}function Fg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Pg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var kv=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wc(t,e){if(e){if(kv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function Uc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hc=null;function sd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vc=null,wi=null,Ci=null;function Jf(t){if(t=po(t)){if(typeof Vc!="function")throw Error(L(280));var e=t.stateNode;e&&(e=sa(e),Vc(t.stateNode,t.type,e))}}function Mg(t){wi?Ci?Ci.push(t):Ci=[t]:wi=t}function Og(){if(wi){var t=wi,e=Ci;if(Ci=wi=null,Jf(t),e)for(t=0;t<e.length;t++)Jf(e[t])}}function Bg(t,e){return t(e)}function zg(){}var Va=!1;function Lg(t,e,n){if(Va)return t(e,n);Va=!0;try{return Bg(t,e,n)}finally{Va=!1,(wi!==null||Ci!==null)&&(zg(),Og())}}function Os(t,e){var n=t.stateNode;if(n===null)return null;var r=sa(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(L(231,e,typeof n));return n}var Yc=!1;if(An)try{var ls={};Object.defineProperty(ls,"passive",{get:function(){Yc=!0}}),window.addEventListener("test",ls,ls),window.removeEventListener("test",ls,ls)}catch{Yc=!1}function Tv(t,e,n,r,i,s,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var ws=!1,hl=null,pl=!1,Gc=null,Rv={onError:function(t){ws=!0,hl=t}};function jv(t,e,n,r,i,s,o,a,c){ws=!1,hl=null,Tv.apply(Rv,arguments)}function Iv(t,e,n,r,i,s,o,a,c){if(jv.apply(this,arguments),ws){if(ws){var u=hl;ws=!1,hl=null}else throw Error(L(198));pl||(pl=!0,Gc=u)}}function Kr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $g(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zf(t){if(Kr(t)!==t)throw Error(L(188))}function Av(t){var e=t.alternate;if(!e){if(e=Kr(t),e===null)throw Error(L(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Zf(i),t;if(s===r)return Zf(i),e;s=s.sibling}throw Error(L(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?t:e}function Wg(t){return t=Av(t),t!==null?Ug(t):null}function Ug(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ug(t);if(e!==null)return e;t=t.sibling}return null}var Hg=Nt.unstable_scheduleCallback,eh=Nt.unstable_cancelCallback,Nv=Nt.unstable_shouldYield,Dv=Nt.unstable_requestPaint,Le=Nt.unstable_now,Pv=Nt.unstable_getCurrentPriorityLevel,od=Nt.unstable_ImmediatePriority,Vg=Nt.unstable_UserBlockingPriority,gl=Nt.unstable_NormalPriority,Fv=Nt.unstable_LowPriority,Yg=Nt.unstable_IdlePriority,ta=null,hn=null;function Mv(t){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(ta,t,void 0,(t.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:zv,Ov=Math.log,Bv=Math.LN2;function zv(t){return t>>>=0,t===0?32:31-(Ov(t)/Bv|0)|0}var zo=64,Lo=4194304;function _s(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ml(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=_s(a):(s&=o,s!==0&&(r=_s(s)))}else o=n&~i,o!==0?r=_s(o):s!==0&&(r=_s(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-tn(e),i=1<<n,r|=t[n],e&=~i;return r}function Lv(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $v(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-tn(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=Lv(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function Qc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Gg(){var t=zo;return zo<<=1,!(zo&4194240)&&(zo=64),t}function Ya(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tn(e),t[e]=n}function Wv(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-tn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ld(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-tn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var me=0;function Qg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Kg,ad,qg,Xg,Jg,Kc=!1,$o=[],Jn=null,Zn=null,er=null,Bs=new Map,zs=new Map,Vn=[],Uv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function th(t,e){switch(t){case"focusin":case"focusout":Jn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":Bs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zs.delete(e.pointerId)}}function as(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=po(e),e!==null&&ad(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Hv(t,e,n,r,i){switch(e){case"focusin":return Jn=as(Jn,t,e,n,r,i),!0;case"dragenter":return Zn=as(Zn,t,e,n,r,i),!0;case"mouseover":return er=as(er,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Bs.set(s,as(Bs.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,zs.set(s,as(zs.get(s)||null,t,e,n,r,i)),!0}return!1}function Zg(t){var e=Nr(t.target);if(e!==null){var n=Kr(e);if(n!==null){if(e=n.tag,e===13){if(e=$g(n),e!==null){t.blockedOn=e,Jg(t.priority,function(){qg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Hc=r,n.target.dispatchEvent(r),Hc=null}else return e=po(n),e!==null&&ad(e),t.blockedOn=n,!1;e.shift()}return!0}function nh(t,e,n){nl(t)&&n.delete(e)}function Vv(){Kc=!1,Jn!==null&&nl(Jn)&&(Jn=null),Zn!==null&&nl(Zn)&&(Zn=null),er!==null&&nl(er)&&(er=null),Bs.forEach(nh),zs.forEach(nh)}function cs(t,e){t.blockedOn===e&&(t.blockedOn=null,Kc||(Kc=!0,Nt.unstable_scheduleCallback(Nt.unstable_NormalPriority,Vv)))}function Ls(t){function e(i){return cs(i,t)}if(0<$o.length){cs($o[0],t);for(var n=1;n<$o.length;n++){var r=$o[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Jn!==null&&cs(Jn,t),Zn!==null&&cs(Zn,t),er!==null&&cs(er,t),Bs.forEach(e),zs.forEach(e),n=0;n<Vn.length;n++)r=Vn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Vn.length&&(n=Vn[0],n.blockedOn===null);)Zg(n),n.blockedOn===null&&Vn.shift()}var Ei=On.ReactCurrentBatchConfig,yl=!0;function Yv(t,e,n,r){var i=me,s=Ei.transition;Ei.transition=null;try{me=1,cd(t,e,n,r)}finally{me=i,Ei.transition=s}}function Gv(t,e,n,r){var i=me,s=Ei.transition;Ei.transition=null;try{me=4,cd(t,e,n,r)}finally{me=i,Ei.transition=s}}function cd(t,e,n,r){if(yl){var i=qc(t,e,n,r);if(i===null)nc(t,e,r,vl,n),th(t,r);else if(Hv(i,t,e,n,r))r.stopPropagation();else if(th(t,r),e&4&&-1<Uv.indexOf(t)){for(;i!==null;){var s=po(i);if(s!==null&&Kg(s),s=qc(t,e,n,r),s===null&&nc(t,e,r,vl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else nc(t,e,r,null,n)}}var vl=null;function qc(t,e,n,r){if(vl=null,t=sd(r),t=Nr(t),t!==null)if(e=Kr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$g(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vl=t,null}function em(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pv()){case od:return 1;case Vg:return 4;case gl:case Fv:return 16;case Yg:return 536870912;default:return 16}default:return 16}}var Gn=null,ud=null,rl=null;function tm(){if(rl)return rl;var t,e=ud,n=e.length,r,i="value"in Gn?Gn.value:Gn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return rl=i.slice(t,1<r?1-r:void 0)}function il(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wo(){return!0}function rh(){return!1}function Pt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Wo:rh,this.isPropagationStopped=rh,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wo)},persist:function(){},isPersistent:Wo}),e}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dd=Pt(Qi),ho=De({},Qi,{view:0,detail:0}),Qv=Pt(ho),Ga,Qa,us,na=De({},ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==us&&(us&&t.type==="mousemove"?(Ga=t.screenX-us.screenX,Qa=t.screenY-us.screenY):Qa=Ga=0,us=t),Ga)},movementY:function(t){return"movementY"in t?t.movementY:Qa}}),ih=Pt(na),Kv=De({},na,{dataTransfer:0}),qv=Pt(Kv),Xv=De({},ho,{relatedTarget:0}),Ka=Pt(Xv),Jv=De({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),Zv=Pt(Jv),ex=De({},Qi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tx=Pt(ex),nx=De({},Qi,{data:0}),sh=Pt(nx),rx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ix={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ox(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=sx[t])?!!e[t]:!1}function fd(){return ox}var lx=De({},ho,{key:function(t){if(t.key){var e=rx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=il(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ix[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fd,charCode:function(t){return t.type==="keypress"?il(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?il(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ax=Pt(lx),cx=De({},na,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oh=Pt(cx),ux=De({},ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fd}),dx=Pt(ux),fx=De({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),hx=Pt(fx),px=De({},na,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gx=Pt(px),mx=[9,13,27,32],hd=An&&"CompositionEvent"in window,Cs=null;An&&"documentMode"in document&&(Cs=document.documentMode);var yx=An&&"TextEvent"in window&&!Cs,nm=An&&(!hd||Cs&&8<Cs&&11>=Cs),lh=String.fromCharCode(32),ah=!1;function rm(t,e){switch(t){case"keyup":return mx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function im(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var di=!1;function vx(t,e){switch(t){case"compositionend":return im(e);case"keypress":return e.which!==32?null:(ah=!0,lh);case"textInput":return t=e.data,t===lh&&ah?null:t;default:return null}}function xx(t,e){if(di)return t==="compositionend"||!hd&&rm(t,e)?(t=tm(),rl=ud=Gn=null,di=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return nm&&e.locale!=="ko"?null:e.data;default:return null}}var _x={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ch(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_x[t.type]:e==="textarea"}function sm(t,e,n,r){Mg(r),e=xl(e,"onChange"),0<e.length&&(n=new dd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Es=null,$s=null;function bx(t){mm(t,0)}function ra(t){var e=pi(t);if(jg(e))return t}function Sx(t,e){if(t==="change")return e}var om=!1;if(An){var qa;if(An){var Xa="oninput"in document;if(!Xa){var uh=document.createElement("div");uh.setAttribute("oninput","return;"),Xa=typeof uh.oninput=="function"}qa=Xa}else qa=!1;om=qa&&(!document.documentMode||9<document.documentMode)}function dh(){Es&&(Es.detachEvent("onpropertychange",lm),$s=Es=null)}function lm(t){if(t.propertyName==="value"&&ra($s)){var e=[];sm(e,$s,t,sd(t)),Lg(bx,e)}}function wx(t,e,n){t==="focusin"?(dh(),Es=e,$s=n,Es.attachEvent("onpropertychange",lm)):t==="focusout"&&dh()}function Cx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ra($s)}function Ex(t,e){if(t==="click")return ra(e)}function kx(t,e){if(t==="input"||t==="change")return ra(e)}function Tx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sn=typeof Object.is=="function"?Object.is:Tx;function Ws(t,e){if(sn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Nc.call(e,i)||!sn(t[i],e[i]))return!1}return!0}function fh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hh(t,e){var n=fh(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fh(n)}}function am(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?am(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cm(){for(var t=window,e=fl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=fl(t.document)}return e}function pd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Rx(t){var e=cm(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&am(n.ownerDocument.documentElement,n)){if(r!==null&&pd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=hh(n,s);var o=hh(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var jx=An&&"documentMode"in document&&11>=document.documentMode,fi=null,Xc=null,ks=null,Jc=!1;function ph(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jc||fi==null||fi!==fl(r)||(r=fi,"selectionStart"in r&&pd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ks&&Ws(ks,r)||(ks=r,r=xl(Xc,"onSelect"),0<r.length&&(e=new dd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=fi)))}function Uo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var hi={animationend:Uo("Animation","AnimationEnd"),animationiteration:Uo("Animation","AnimationIteration"),animationstart:Uo("Animation","AnimationStart"),transitionend:Uo("Transition","TransitionEnd")},Ja={},um={};An&&(um=document.createElement("div").style,"AnimationEvent"in window||(delete hi.animationend.animation,delete hi.animationiteration.animation,delete hi.animationstart.animation),"TransitionEvent"in window||delete hi.transitionend.transition);function ia(t){if(Ja[t])return Ja[t];if(!hi[t])return t;var e=hi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in um)return Ja[t]=e[n];return t}var dm=ia("animationend"),fm=ia("animationiteration"),hm=ia("animationstart"),pm=ia("transitionend"),gm=new Map,gh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mr(t,e){gm.set(t,e),Qr(e,[t])}for(var Za=0;Za<gh.length;Za++){var ec=gh[Za],Ix=ec.toLowerCase(),Ax=ec[0].toUpperCase()+ec.slice(1);mr(Ix,"on"+Ax)}mr(dm,"onAnimationEnd");mr(fm,"onAnimationIteration");mr(hm,"onAnimationStart");mr("dblclick","onDoubleClick");mr("focusin","onFocus");mr("focusout","onBlur");mr(pm,"onTransitionEnd");Ni("onMouseEnter",["mouseout","mouseover"]);Ni("onMouseLeave",["mouseout","mouseover"]);Ni("onPointerEnter",["pointerout","pointerover"]);Ni("onPointerLeave",["pointerout","pointerover"]);Qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nx=new Set("cancel close invalid load scroll toggle".split(" ").concat(bs));function mh(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Iv(r,e,void 0,t),t.currentTarget=null}function mm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;mh(i,a,u),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;mh(i,a,u),s=c}}}if(pl)throw t=Gc,pl=!1,Gc=null,t}function Ee(t,e){var n=e[ru];n===void 0&&(n=e[ru]=new Set);var r=t+"__bubble";n.has(r)||(ym(e,t,2,!1),n.add(r))}function tc(t,e,n){var r=0;e&&(r|=4),ym(n,t,r,e)}var Ho="_reactListening"+Math.random().toString(36).slice(2);function Us(t){if(!t[Ho]){t[Ho]=!0,Cg.forEach(function(n){n!=="selectionchange"&&(Nx.has(n)||tc(n,!1,t),tc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ho]||(e[Ho]=!0,tc("selectionchange",!1,e))}}function ym(t,e,n,r){switch(em(e)){case 1:var i=Yv;break;case 4:i=Gv;break;default:i=cd}n=i.bind(null,e,n,t),i=void 0,!Yc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function nc(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Nr(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Lg(function(){var u=s,f=sd(n),d=[];e:{var h=gm.get(t);if(h!==void 0){var x=dd,v=t;switch(t){case"keypress":if(il(n)===0)break e;case"keydown":case"keyup":x=ax;break;case"focusin":v="focus",x=Ka;break;case"focusout":v="blur",x=Ka;break;case"beforeblur":case"afterblur":x=Ka;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=ih;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=qv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=dx;break;case dm:case fm:case hm:x=Zv;break;case pm:x=hx;break;case"scroll":x=Qv;break;case"wheel":x=gx;break;case"copy":case"cut":case"paste":x=tx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=oh}var w=(e&4)!==0,k=!w&&t==="scroll",m=w?h!==null?h+"Capture":null:h;w=[];for(var g=u,y;g!==null;){y=g;var b=y.stateNode;if(y.tag===5&&b!==null&&(y=b,m!==null&&(b=Os(g,m),b!=null&&w.push(Hs(g,b,y)))),k)break;g=g.return}0<w.length&&(h=new x(h,v,null,n,f),d.push({event:h,listeners:w}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",h&&n!==Hc&&(v=n.relatedTarget||n.fromElement)&&(Nr(v)||v[Nn]))break e;if((x||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,x?(v=n.relatedTarget||n.toElement,x=u,v=v?Nr(v):null,v!==null&&(k=Kr(v),v!==k||v.tag!==5&&v.tag!==6)&&(v=null)):(x=null,v=u),x!==v)){if(w=ih,b="onMouseLeave",m="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(w=oh,b="onPointerLeave",m="onPointerEnter",g="pointer"),k=x==null?h:pi(x),y=v==null?h:pi(v),h=new w(b,g+"leave",x,n,f),h.target=k,h.relatedTarget=y,b=null,Nr(f)===u&&(w=new w(m,g+"enter",v,n,f),w.target=y,w.relatedTarget=k,b=w),k=b,x&&v)t:{for(w=x,m=v,g=0,y=w;y;y=oi(y))g++;for(y=0,b=m;b;b=oi(b))y++;for(;0<g-y;)w=oi(w),g--;for(;0<y-g;)m=oi(m),y--;for(;g--;){if(w===m||m!==null&&w===m.alternate)break t;w=oi(w),m=oi(m)}w=null}else w=null;x!==null&&yh(d,h,x,w,!1),v!==null&&k!==null&&yh(d,k,v,w,!0)}}e:{if(h=u?pi(u):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var T=Sx;else if(ch(h))if(om)T=kx;else{T=Cx;var S=wx}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=Ex);if(T&&(T=T(t,u))){sm(d,T,n,f);break e}S&&S(t,h,u),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&zc(h,"number",h.value)}switch(S=u?pi(u):window,t){case"focusin":(ch(S)||S.contentEditable==="true")&&(fi=S,Xc=u,ks=null);break;case"focusout":ks=Xc=fi=null;break;case"mousedown":Jc=!0;break;case"contextmenu":case"mouseup":case"dragend":Jc=!1,ph(d,n,f);break;case"selectionchange":if(jx)break;case"keydown":case"keyup":ph(d,n,f)}var C;if(hd)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else di?rm(t,n)&&(j="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(nm&&n.locale!=="ko"&&(di||j!=="onCompositionStart"?j==="onCompositionEnd"&&di&&(C=tm()):(Gn=f,ud="value"in Gn?Gn.value:Gn.textContent,di=!0)),S=xl(u,j),0<S.length&&(j=new sh(j,t,null,n,f),d.push({event:j,listeners:S}),C?j.data=C:(C=im(n),C!==null&&(j.data=C)))),(C=yx?vx(t,n):xx(t,n))&&(u=xl(u,"onBeforeInput"),0<u.length&&(f=new sh("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=C))}mm(d,e)})}function Hs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Os(t,n),s!=null&&r.unshift(Hs(t,s,i)),s=Os(t,e),s!=null&&r.push(Hs(t,s,i))),t=t.return}return r}function oi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function yh(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,i?(c=Os(n,s),c!=null&&o.unshift(Hs(n,c,a))):i||(c=Os(n,s),c!=null&&o.push(Hs(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Dx=/\r\n?/g,Px=/\u0000|\uFFFD/g;function vh(t){return(typeof t=="string"?t:""+t).replace(Dx,`
`).replace(Px,"")}function Vo(t,e,n){if(e=vh(e),vh(t)!==e&&n)throw Error(L(425))}function _l(){}var Zc=null,eu=null;function tu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nu=typeof setTimeout=="function"?setTimeout:void 0,Fx=typeof clearTimeout=="function"?clearTimeout:void 0,xh=typeof Promise=="function"?Promise:void 0,Mx=typeof queueMicrotask=="function"?queueMicrotask:typeof xh<"u"?function(t){return xh.resolve(null).then(t).catch(Ox)}:nu;function Ox(t){setTimeout(function(){throw t})}function rc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ls(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ls(e)}function tr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _h(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ki=Math.random().toString(36).slice(2),fn="__reactFiber$"+Ki,Vs="__reactProps$"+Ki,Nn="__reactContainer$"+Ki,ru="__reactEvents$"+Ki,Bx="__reactListeners$"+Ki,zx="__reactHandles$"+Ki;function Nr(t){var e=t[fn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Nn]||n[fn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=_h(t);t!==null;){if(n=t[fn])return n;t=_h(t)}return e}t=n,n=t.parentNode}return null}function po(t){return t=t[fn]||t[Nn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function pi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function sa(t){return t[Vs]||null}var iu=[],gi=-1;function yr(t){return{current:t}}function ke(t){0>gi||(t.current=iu[gi],iu[gi]=null,gi--)}function Se(t,e){gi++,iu[gi]=t.current,t.current=e}var dr={},gt=yr(dr),kt=yr(!1),Lr=dr;function Di(t,e){var n=t.type.contextTypes;if(!n)return dr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Tt(t){return t=t.childContextTypes,t!=null}function bl(){ke(kt),ke(gt)}function bh(t,e,n){if(gt.current!==dr)throw Error(L(168));Se(gt,e),Se(kt,n)}function vm(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(L(108,wv(t)||"Unknown",i));return De({},n,r)}function Sl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||dr,Lr=gt.current,Se(gt,t),Se(kt,kt.current),!0}function Sh(t,e,n){var r=t.stateNode;if(!r)throw Error(L(169));n?(t=vm(t,e,Lr),r.__reactInternalMemoizedMergedChildContext=t,ke(kt),ke(gt),Se(gt,t)):ke(kt),Se(kt,n)}var En=null,oa=!1,ic=!1;function xm(t){En===null?En=[t]:En.push(t)}function Lx(t){oa=!0,xm(t)}function vr(){if(!ic&&En!==null){ic=!0;var t=0,e=me;try{var n=En;for(me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}En=null,oa=!1}catch(i){throw En!==null&&(En=En.slice(t+1)),Hg(od,vr),i}finally{me=e,ic=!1}}return null}var mi=[],yi=0,wl=null,Cl=0,Bt=[],zt=0,$r=null,kn=1,Tn="";function Rr(t,e){mi[yi++]=Cl,mi[yi++]=wl,wl=t,Cl=e}function _m(t,e,n){Bt[zt++]=kn,Bt[zt++]=Tn,Bt[zt++]=$r,$r=t;var r=kn;t=Tn;var i=32-tn(r)-1;r&=~(1<<i),n+=1;var s=32-tn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,kn=1<<32-tn(e)+i|n<<i|r,Tn=s+t}else kn=1<<s|n<<i|r,Tn=t}function gd(t){t.return!==null&&(Rr(t,1),_m(t,1,0))}function md(t){for(;t===wl;)wl=mi[--yi],mi[yi]=null,Cl=mi[--yi],mi[yi]=null;for(;t===$r;)$r=Bt[--zt],Bt[zt]=null,Tn=Bt[--zt],Bt[zt]=null,kn=Bt[--zt],Bt[zt]=null}var At=null,It=null,Ie=!1,Jt=null;function bm(t,e){var n=Lt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function wh(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,At=t,It=tr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,At=t,It=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=$r!==null?{id:kn,overflow:Tn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Lt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,At=t,It=null,!0):!1;default:return!1}}function su(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ou(t){if(Ie){var e=It;if(e){var n=e;if(!wh(t,e)){if(su(t))throw Error(L(418));e=tr(n.nextSibling);var r=At;e&&wh(t,e)?bm(r,n):(t.flags=t.flags&-4097|2,Ie=!1,At=t)}}else{if(su(t))throw Error(L(418));t.flags=t.flags&-4097|2,Ie=!1,At=t}}}function Ch(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;At=t}function Yo(t){if(t!==At)return!1;if(!Ie)return Ch(t),Ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tu(t.type,t.memoizedProps)),e&&(e=It)){if(su(t))throw Sm(),Error(L(418));for(;e;)bm(t,e),e=tr(e.nextSibling)}if(Ch(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){It=tr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}It=null}}else It=At?tr(t.stateNode.nextSibling):null;return!0}function Sm(){for(var t=It;t;)t=tr(t.nextSibling)}function Pi(){It=At=null,Ie=!1}function yd(t){Jt===null?Jt=[t]:Jt.push(t)}var $x=On.ReactCurrentBatchConfig;function ds(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,t))}return t}function Go(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Eh(t){var e=t._init;return e(t._payload)}function wm(t){function e(m,g){if(t){var y=m.deletions;y===null?(m.deletions=[g],m.flags|=16):y.push(g)}}function n(m,g){if(!t)return null;for(;g!==null;)e(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function i(m,g){return m=sr(m,g),m.index=0,m.sibling=null,m}function s(m,g,y){return m.index=y,t?(y=m.alternate,y!==null?(y=y.index,y<g?(m.flags|=2,g):y):(m.flags|=2,g)):(m.flags|=1048576,g)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,g,y,b){return g===null||g.tag!==6?(g=dc(y,m.mode,b),g.return=m,g):(g=i(g,y),g.return=m,g)}function c(m,g,y,b){var T=y.type;return T===ui?f(m,g,y.props.children,b,y.key):g!==null&&(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Un&&Eh(T)===g.type)?(b=i(g,y.props),b.ref=ds(m,g,y),b.return=m,b):(b=dl(y.type,y.key,y.props,null,m.mode,b),b.ref=ds(m,g,y),b.return=m,b)}function u(m,g,y,b){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=fc(y,m.mode,b),g.return=m,g):(g=i(g,y.children||[]),g.return=m,g)}function f(m,g,y,b,T){return g===null||g.tag!==7?(g=Or(y,m.mode,b,T),g.return=m,g):(g=i(g,y),g.return=m,g)}function d(m,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=dc(""+g,m.mode,y),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Mo:return y=dl(g.type,g.key,g.props,null,m.mode,y),y.ref=ds(m,null,g),y.return=m,y;case ci:return g=fc(g,m.mode,y),g.return=m,g;case Un:var b=g._init;return d(m,b(g._payload),y)}if(xs(g)||os(g))return g=Or(g,m.mode,y,null),g.return=m,g;Go(m,g)}return null}function h(m,g,y,b){var T=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return T!==null?null:a(m,g,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Mo:return y.key===T?c(m,g,y,b):null;case ci:return y.key===T?u(m,g,y,b):null;case Un:return T=y._init,h(m,g,T(y._payload),b)}if(xs(y)||os(y))return T!==null?null:f(m,g,y,b,null);Go(m,y)}return null}function x(m,g,y,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(y)||null,a(g,m,""+b,T);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Mo:return m=m.get(b.key===null?y:b.key)||null,c(g,m,b,T);case ci:return m=m.get(b.key===null?y:b.key)||null,u(g,m,b,T);case Un:var S=b._init;return x(m,g,y,S(b._payload),T)}if(xs(b)||os(b))return m=m.get(y)||null,f(g,m,b,T,null);Go(g,b)}return null}function v(m,g,y,b){for(var T=null,S=null,C=g,j=g=0,P=null;C!==null&&j<y.length;j++){C.index>j?(P=C,C=null):P=C.sibling;var I=h(m,C,y[j],b);if(I===null){C===null&&(C=P);break}t&&C&&I.alternate===null&&e(m,C),g=s(I,g,j),S===null?T=I:S.sibling=I,S=I,C=P}if(j===y.length)return n(m,C),Ie&&Rr(m,j),T;if(C===null){for(;j<y.length;j++)C=d(m,y[j],b),C!==null&&(g=s(C,g,j),S===null?T=C:S.sibling=C,S=C);return Ie&&Rr(m,j),T}for(C=r(m,C);j<y.length;j++)P=x(C,m,j,y[j],b),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?j:P.key),g=s(P,g,j),S===null?T=P:S.sibling=P,S=P);return t&&C.forEach(function(M){return e(m,M)}),Ie&&Rr(m,j),T}function w(m,g,y,b){var T=os(y);if(typeof T!="function")throw Error(L(150));if(y=T.call(y),y==null)throw Error(L(151));for(var S=T=null,C=g,j=g=0,P=null,I=y.next();C!==null&&!I.done;j++,I=y.next()){C.index>j?(P=C,C=null):P=C.sibling;var M=h(m,C,I.value,b);if(M===null){C===null&&(C=P);break}t&&C&&M.alternate===null&&e(m,C),g=s(M,g,j),S===null?T=M:S.sibling=M,S=M,C=P}if(I.done)return n(m,C),Ie&&Rr(m,j),T;if(C===null){for(;!I.done;j++,I=y.next())I=d(m,I.value,b),I!==null&&(g=s(I,g,j),S===null?T=I:S.sibling=I,S=I);return Ie&&Rr(m,j),T}for(C=r(m,C);!I.done;j++,I=y.next())I=x(C,m,j,I.value,b),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?j:I.key),g=s(I,g,j),S===null?T=I:S.sibling=I,S=I);return t&&C.forEach(function(A){return e(m,A)}),Ie&&Rr(m,j),T}function k(m,g,y,b){if(typeof y=="object"&&y!==null&&y.type===ui&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Mo:e:{for(var T=y.key,S=g;S!==null;){if(S.key===T){if(T=y.type,T===ui){if(S.tag===7){n(m,S.sibling),g=i(S,y.props.children),g.return=m,m=g;break e}}else if(S.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Un&&Eh(T)===S.type){n(m,S.sibling),g=i(S,y.props),g.ref=ds(m,S,y),g.return=m,m=g;break e}n(m,S);break}else e(m,S);S=S.sibling}y.type===ui?(g=Or(y.props.children,m.mode,b,y.key),g.return=m,m=g):(b=dl(y.type,y.key,y.props,null,m.mode,b),b.ref=ds(m,g,y),b.return=m,m=b)}return o(m);case ci:e:{for(S=y.key;g!==null;){if(g.key===S)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(m,g.sibling),g=i(g,y.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else e(m,g);g=g.sibling}g=fc(y,m.mode,b),g.return=m,m=g}return o(m);case Un:return S=y._init,k(m,g,S(y._payload),b)}if(xs(y))return v(m,g,y,b);if(os(y))return w(m,g,y,b);Go(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(m,g.sibling),g=i(g,y),g.return=m,m=g):(n(m,g),g=dc(y,m.mode,b),g.return=m,m=g),o(m)):n(m,g)}return k}var Fi=wm(!0),Cm=wm(!1),El=yr(null),kl=null,vi=null,vd=null;function xd(){vd=vi=kl=null}function _d(t){var e=El.current;ke(El),t._currentValue=e}function lu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ki(t,e){kl=t,vd=vi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ct=!0),t.firstContext=null)}function Ut(t){var e=t._currentValue;if(vd!==t)if(t={context:t,memoizedValue:e,next:null},vi===null){if(kl===null)throw Error(L(308));vi=t,kl.dependencies={lanes:0,firstContext:t}}else vi=vi.next=t;return e}var Dr=null;function bd(t){Dr===null?Dr=[t]:Dr.push(t)}function Em(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,bd(e)):(n.next=i.next,i.next=n),e.interleaved=n,Dn(t,r)}function Dn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Hn=!1;function Sd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function km(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function nr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Dn(t,n)}return i=r.interleaved,i===null?(e.next=e,bd(r)):(e.next=i.next,i.next=e),r.interleaved=e,Dn(t,n)}function sl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ld(t,n)}}function kh(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Tl(t,e,n,r){var i=t.updateQueue;Hn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=u:a.next=u,f.lastBaseUpdate=c))}if(s!==null){var d=i.baseState;o=0,f=u=c=null,a=s;do{var h=a.lane,x=a.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:x,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,w=a;switch(h=e,x=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){d=v.call(x,d,h);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,h=typeof v=="function"?v.call(x,d,h):v,h==null)break e;d=De({},d,h);break e;case 2:Hn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else x={eventTime:x,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(u=f=x,c=d):f=f.next=x,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(f===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ur|=o,t.lanes=o,t.memoizedState=d}}function Th(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(L(191,i));i.call(r)}}}var go={},pn=yr(go),Ys=yr(go),Gs=yr(go);function Pr(t){if(t===go)throw Error(L(174));return t}function wd(t,e){switch(Se(Gs,e),Se(Ys,t),Se(pn,go),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$c(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$c(e,t)}ke(pn),Se(pn,e)}function Mi(){ke(pn),ke(Ys),ke(Gs)}function Tm(t){Pr(Gs.current);var e=Pr(pn.current),n=$c(e,t.type);e!==n&&(Se(Ys,t),Se(pn,n))}function Cd(t){Ys.current===t&&(ke(pn),ke(Ys))}var Ae=yr(0);function Rl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sc=[];function Ed(){for(var t=0;t<sc.length;t++)sc[t]._workInProgressVersionPrimary=null;sc.length=0}var ol=On.ReactCurrentDispatcher,oc=On.ReactCurrentBatchConfig,Wr=0,Ne=null,Ye=null,tt=null,jl=!1,Ts=!1,Qs=0,Wx=0;function ft(){throw Error(L(321))}function kd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sn(t[n],e[n]))return!1;return!0}function Td(t,e,n,r,i,s){if(Wr=s,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ol.current=t===null||t.memoizedState===null?Yx:Gx,t=n(r,i),Ts){s=0;do{if(Ts=!1,Qs=0,25<=s)throw Error(L(301));s+=1,tt=Ye=null,e.updateQueue=null,ol.current=Qx,t=n(r,i)}while(Ts)}if(ol.current=Il,e=Ye!==null&&Ye.next!==null,Wr=0,tt=Ye=Ne=null,jl=!1,e)throw Error(L(300));return t}function Rd(){var t=Qs!==0;return Qs=0,t}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Ne.memoizedState=tt=t:tt=tt.next=t,tt}function Ht(){if(Ye===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=tt===null?Ne.memoizedState:tt.next;if(e!==null)tt=e,Ye=t;else{if(t===null)throw Error(L(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},tt===null?Ne.memoizedState=tt=t:tt=tt.next=t}return tt}function Ks(t,e){return typeof e=="function"?e(t):e}function lc(t){var e=Ht(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=Ye,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,u=s;do{var f=u.lane;if((Wr&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Ne.lanes|=f,Ur|=f}u=u.next}while(u!==null&&u!==s);c===null?o=r:c.next=a,sn(r,e.memoizedState)||(Ct=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ne.lanes|=s,Ur|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ac(t){var e=Ht(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);sn(s,e.memoizedState)||(Ct=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Rm(){}function jm(t,e){var n=Ne,r=Ht(),i=e(),s=!sn(r.memoizedState,i);if(s&&(r.memoizedState=i,Ct=!0),r=r.queue,jd(Nm.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,qs(9,Am.bind(null,n,r,i,e),void 0,null),rt===null)throw Error(L(349));Wr&30||Im(n,e,i)}return i}function Im(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Am(t,e,n,r){e.value=n,e.getSnapshot=r,Dm(e)&&Pm(t)}function Nm(t,e,n){return n(function(){Dm(e)&&Pm(t)})}function Dm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sn(t,n)}catch{return!0}}function Pm(t){var e=Dn(t,1);e!==null&&nn(e,t,1,-1)}function Rh(t){var e=dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:t},e.queue=t,t=t.dispatch=Vx.bind(null,Ne,t),[e.memoizedState,t]}function qs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Fm(){return Ht().memoizedState}function ll(t,e,n,r){var i=dn();Ne.flags|=t,i.memoizedState=qs(1|e,n,void 0,r===void 0?null:r)}function la(t,e,n,r){var i=Ht();r=r===void 0?null:r;var s=void 0;if(Ye!==null){var o=Ye.memoizedState;if(s=o.destroy,r!==null&&kd(r,o.deps)){i.memoizedState=qs(e,n,s,r);return}}Ne.flags|=t,i.memoizedState=qs(1|e,n,s,r)}function jh(t,e){return ll(8390656,8,t,e)}function jd(t,e){return la(2048,8,t,e)}function Mm(t,e){return la(4,2,t,e)}function Om(t,e){return la(4,4,t,e)}function Bm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zm(t,e,n){return n=n!=null?n.concat([t]):null,la(4,4,Bm.bind(null,e,t),n)}function Id(){}function Lm(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function $m(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Wm(t,e,n){return Wr&21?(sn(n,e)||(n=Gg(),Ne.lanes|=n,Ur|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ct=!0),t.memoizedState=n)}function Ux(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var r=oc.transition;oc.transition={};try{t(!1),e()}finally{me=n,oc.transition=r}}function Um(){return Ht().memoizedState}function Hx(t,e,n){var r=ir(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Hm(t))Vm(e,n);else if(n=Em(t,e,n,r),n!==null){var i=vt();nn(n,t,r,i),Ym(n,e,r)}}function Vx(t,e,n){var r=ir(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hm(t))Vm(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,sn(a,o)){var c=e.interleaved;c===null?(i.next=i,bd(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=Em(t,e,i,r),n!==null&&(i=vt(),nn(n,t,r,i),Ym(n,e,r))}}function Hm(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function Vm(t,e){Ts=jl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ym(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ld(t,n)}}var Il={readContext:Ut,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},Yx={readContext:Ut,useCallback:function(t,e){return dn().memoizedState=[t,e===void 0?null:e],t},useContext:Ut,useEffect:jh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ll(4194308,4,Bm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ll(4194308,4,t,e)},useInsertionEffect:function(t,e){return ll(4,2,t,e)},useMemo:function(t,e){var n=dn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=dn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Hx.bind(null,Ne,t),[r.memoizedState,t]},useRef:function(t){var e=dn();return t={current:t},e.memoizedState=t},useState:Rh,useDebugValue:Id,useDeferredValue:function(t){return dn().memoizedState=t},useTransition:function(){var t=Rh(!1),e=t[0];return t=Ux.bind(null,t[1]),dn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ne,i=dn();if(Ie){if(n===void 0)throw Error(L(407));n=n()}else{if(n=e(),rt===null)throw Error(L(349));Wr&30||Im(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,jh(Nm.bind(null,r,s,t),[t]),r.flags|=2048,qs(9,Am.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=dn(),e=rt.identifierPrefix;if(Ie){var n=Tn,r=kn;n=(r&~(1<<32-tn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Qs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Wx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Gx={readContext:Ut,useCallback:Lm,useContext:Ut,useEffect:jd,useImperativeHandle:zm,useInsertionEffect:Mm,useLayoutEffect:Om,useMemo:$m,useReducer:lc,useRef:Fm,useState:function(){return lc(Ks)},useDebugValue:Id,useDeferredValue:function(t){var e=Ht();return Wm(e,Ye.memoizedState,t)},useTransition:function(){var t=lc(Ks)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:Rm,useSyncExternalStore:jm,useId:Um,unstable_isNewReconciler:!1},Qx={readContext:Ut,useCallback:Lm,useContext:Ut,useEffect:jd,useImperativeHandle:zm,useInsertionEffect:Mm,useLayoutEffect:Om,useMemo:$m,useReducer:ac,useRef:Fm,useState:function(){return ac(Ks)},useDebugValue:Id,useDeferredValue:function(t){var e=Ht();return Ye===null?e.memoizedState=t:Wm(e,Ye.memoizedState,t)},useTransition:function(){var t=ac(Ks)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:Rm,useSyncExternalStore:jm,useId:Um,unstable_isNewReconciler:!1};function Kt(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function au(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var aa={isMounted:function(t){return(t=t._reactInternals)?Kr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vt(),i=ir(t),s=jn(r,i);s.payload=e,n!=null&&(s.callback=n),e=nr(t,s,i),e!==null&&(nn(e,t,i,r),sl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vt(),i=ir(t),s=jn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=nr(t,s,i),e!==null&&(nn(e,t,i,r),sl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vt(),r=ir(t),i=jn(n,r);i.tag=2,e!=null&&(i.callback=e),e=nr(t,i,r),e!==null&&(nn(e,t,r,n),sl(e,t,r))}};function Ih(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ws(n,r)||!Ws(i,s):!0}function Gm(t,e,n){var r=!1,i=dr,s=e.contextType;return typeof s=="object"&&s!==null?s=Ut(s):(i=Tt(e)?Lr:gt.current,r=e.contextTypes,s=(r=r!=null)?Di(t,i):dr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=aa,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ah(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&aa.enqueueReplaceState(e,e.state,null)}function cu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Sd(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ut(s):(s=Tt(e)?Lr:gt.current,i.context=Di(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(au(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&aa.enqueueReplaceState(i,i.state,null),Tl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Oi(t,e){try{var n="",r=e;do n+=Sv(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function cc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function uu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Kx=typeof WeakMap=="function"?WeakMap:Map;function Qm(t,e,n){n=jn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Nl||(Nl=!0,_u=r),uu(t,e)},n}function Km(t,e,n){n=jn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){uu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){uu(t,e),typeof r!="function"&&(rr===null?rr=new Set([this]):rr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Nh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Kx;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=c_.bind(null,t,e,n),e.then(t,t))}function Dh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ph(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=jn(-1,1),e.tag=2,nr(n,e,1))),n.lanes|=1),t)}var qx=On.ReactCurrentOwner,Ct=!1;function mt(t,e,n,r){e.child=t===null?Cm(e,null,n,r):Fi(e,t.child,n,r)}function Fh(t,e,n,r,i){n=n.render;var s=e.ref;return ki(e,i),r=Td(t,e,n,r,s,i),n=Rd(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pn(t,e,i)):(Ie&&n&&gd(e),e.flags|=1,mt(t,e,r,i),e.child)}function Mh(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Bd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,qm(t,e,s,r,i)):(t=dl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ws,n(o,r)&&t.ref===e.ref)return Pn(t,e,i)}return e.flags|=1,t=sr(s,r),t.ref=e.ref,t.return=e,e.child=t}function qm(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ws(s,r)&&t.ref===e.ref)if(Ct=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ct=!0);else return e.lanes=t.lanes,Pn(t,e,i)}return du(t,e,n,r,i)}function Xm(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(_i,jt),jt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Se(_i,jt),jt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Se(_i,jt),jt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Se(_i,jt),jt|=r;return mt(t,e,i,n),e.child}function Jm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function du(t,e,n,r,i){var s=Tt(n)?Lr:gt.current;return s=Di(e,s),ki(e,i),n=Td(t,e,n,r,s,i),r=Rd(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pn(t,e,i)):(Ie&&r&&gd(e),e.flags|=1,mt(t,e,n,i),e.child)}function Oh(t,e,n,r,i){if(Tt(n)){var s=!0;Sl(e)}else s=!1;if(ki(e,i),e.stateNode===null)al(t,e),Gm(e,n,r),cu(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ut(u):(u=Tt(n)?Lr:gt.current,u=Di(e,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&Ah(e,o,r,u),Hn=!1;var h=e.memoizedState;o.state=h,Tl(e,r,o,i),c=e.memoizedState,a!==r||h!==c||kt.current||Hn?(typeof f=="function"&&(au(e,n,f,r),c=e.memoizedState),(a=Hn||Ih(e,n,a,r,h,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,km(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Kt(e.type,a),o.props=u,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ut(c):(c=Tt(n)?Lr:gt.current,c=Di(e,c));var x=n.getDerivedStateFromProps;(f=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&Ah(e,o,r,c),Hn=!1,h=e.memoizedState,o.state=h,Tl(e,r,o,i);var v=e.memoizedState;a!==d||h!==v||kt.current||Hn?(typeof x=="function"&&(au(e,n,x,r),v=e.memoizedState),(u=Hn||Ih(e,n,u,r,h,v,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return fu(t,e,n,r,s,i)}function fu(t,e,n,r,i,s){Jm(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Sh(e,n,!1),Pn(t,e,s);r=e.stateNode,qx.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Fi(e,t.child,null,s),e.child=Fi(e,null,a,s)):mt(t,e,a,s),e.memoizedState=r.state,i&&Sh(e,n,!0),e.child}function Zm(t){var e=t.stateNode;e.pendingContext?bh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&bh(t,e.context,!1),wd(t,e.containerInfo)}function Bh(t,e,n,r,i){return Pi(),yd(i),e.flags|=256,mt(t,e,n,r),e.child}var hu={dehydrated:null,treeContext:null,retryLane:0};function pu(t){return{baseLanes:t,cachePool:null,transitions:null}}function e1(t,e,n){var r=e.pendingProps,i=Ae.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Se(Ae,i&1),t===null)return ou(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=da(o,r,0,null),t=Or(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=pu(n),e.memoizedState=hu,t):Ad(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Xx(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=sr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=sr(a,s):(s=Or(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?pu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=hu,r}return s=t.child,t=s.sibling,r=sr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ad(t,e){return e=da({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qo(t,e,n,r){return r!==null&&yd(r),Fi(e,t.child,null,n),t=Ad(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xx(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=cc(Error(L(422))),Qo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=da({mode:"visible",children:r.children},i,0,null),s=Or(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Fi(e,t.child,null,o),e.child.memoizedState=pu(o),e.memoizedState=hu,s);if(!(e.mode&1))return Qo(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(L(419)),r=cc(s,r,void 0),Qo(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ct||a){if(r=rt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Dn(t,i),nn(r,t,i,-1))}return Od(),r=cc(Error(L(421))),Qo(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=u_.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,It=tr(i.nextSibling),At=e,Ie=!0,Jt=null,t!==null&&(Bt[zt++]=kn,Bt[zt++]=Tn,Bt[zt++]=$r,kn=t.id,Tn=t.overflow,$r=e),e=Ad(e,r.children),e.flags|=4096,e)}function zh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lu(t.return,e,n)}function uc(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function t1(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(mt(t,e,r.children,n),r=Ae.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zh(t,n,e);else if(t.tag===19)zh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Se(Ae,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Rl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),uc(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Rl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}uc(e,!0,n,null,s);break;case"together":uc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function al(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ur|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,n=sr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=sr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Jx(t,e,n){switch(e.tag){case 3:Zm(e),Pi();break;case 5:Tm(e);break;case 1:Tt(e.type)&&Sl(e);break;case 4:wd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Se(El,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Se(Ae,Ae.current&1),e.flags|=128,null):n&e.child.childLanes?e1(t,e,n):(Se(Ae,Ae.current&1),t=Pn(t,e,n),t!==null?t.sibling:null);Se(Ae,Ae.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return t1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Se(Ae,Ae.current),r)break;return null;case 22:case 23:return e.lanes=0,Xm(t,e,n)}return Pn(t,e,n)}var n1,gu,r1,i1;n1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gu=function(){};r1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Pr(pn.current);var s=null;switch(n){case"input":i=Oc(t,i),r=Oc(t,r),s=[];break;case"select":i=De({},i,{value:void 0}),r=De({},r,{value:void 0}),s=[];break;case"textarea":i=Lc(t,i),r=Lc(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=_l)}Wc(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Fs.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Fs.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ee("scroll",t),s||a===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};i1=function(t,e,n,r){n!==r&&(e.flags|=4)};function fs(t,e){if(!Ie)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Zx(t,e,n){var r=e.pendingProps;switch(md(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(e),null;case 1:return Tt(e.type)&&bl(),ht(e),null;case 3:return r=e.stateNode,Mi(),ke(kt),ke(gt),Ed(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Yo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jt!==null&&(wu(Jt),Jt=null))),gu(t,e),ht(e),null;case 5:Cd(e);var i=Pr(Gs.current);if(n=e.type,t!==null&&e.stateNode!=null)r1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(L(166));return ht(e),null}if(t=Pr(pn.current),Yo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[fn]=e,r[Vs]=s,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(i=0;i<bs.length;i++)Ee(bs[i],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":Qf(r,s),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ee("invalid",r);break;case"textarea":qf(r,s),Ee("invalid",r)}Wc(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Vo(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Vo(r.textContent,a,t),i=["children",""+a]):Fs.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ee("scroll",r)}switch(n){case"input":Oo(r),Kf(r,s,!0);break;case"textarea":Oo(r),Xf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=_l)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ng(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[fn]=e,t[Vs]=r,n1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Uc(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),i=r;break;case"iframe":case"object":case"embed":Ee("load",t),i=r;break;case"video":case"audio":for(i=0;i<bs.length;i++)Ee(bs[i],t);i=r;break;case"source":Ee("error",t),i=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),i=r;break;case"details":Ee("toggle",t),i=r;break;case"input":Qf(t,r),i=Oc(t,r),Ee("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=De({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":qf(t,r),i=Lc(t,r),Ee("invalid",t);break;default:i=r}Wc(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?Fg(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Dg(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ms(t,c):typeof c=="number"&&Ms(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Fs.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Ee("scroll",t):c!=null&&td(t,s,c,o))}switch(n){case"input":Oo(t),Kf(t,r,!1);break;case"textarea":Oo(t),Xf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ur(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Si(t,!!r.multiple,s,!1):r.defaultValue!=null&&Si(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=_l)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ht(e),null;case 6:if(t&&e.stateNode!=null)i1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(L(166));if(n=Pr(Gs.current),Pr(pn.current),Yo(e)){if(r=e.stateNode,n=e.memoizedProps,r[fn]=e,(s=r.nodeValue!==n)&&(t=At,t!==null))switch(t.tag){case 3:Vo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vo(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fn]=e,e.stateNode=r}return ht(e),null;case 13:if(ke(Ae),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ie&&It!==null&&e.mode&1&&!(e.flags&128))Sm(),Pi(),e.flags|=98560,s=!1;else if(s=Yo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(L(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(L(317));s[fn]=e}else Pi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ht(e),s=!1}else Jt!==null&&(wu(Jt),Jt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ae.current&1?Ke===0&&(Ke=3):Od())),e.updateQueue!==null&&(e.flags|=4),ht(e),null);case 4:return Mi(),gu(t,e),t===null&&Us(e.stateNode.containerInfo),ht(e),null;case 10:return _d(e.type._context),ht(e),null;case 17:return Tt(e.type)&&bl(),ht(e),null;case 19:if(ke(Ae),s=e.memoizedState,s===null)return ht(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)fs(s,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Rl(t),o!==null){for(e.flags|=128,fs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Se(Ae,Ae.current&1|2),e.child}t=t.sibling}s.tail!==null&&Le()>Bi&&(e.flags|=128,r=!0,fs(s,!1),e.lanes=4194304)}else{if(!r)if(t=Rl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),fs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ie)return ht(e),null}else 2*Le()-s.renderingStartTime>Bi&&n!==1073741824&&(e.flags|=128,r=!0,fs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Le(),e.sibling=null,n=Ae.current,Se(Ae,r?n&1|2:n&1),e):(ht(e),null);case 22:case 23:return Md(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?jt&1073741824&&(ht(e),e.subtreeFlags&6&&(e.flags|=8192)):ht(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function e_(t,e){switch(md(e),e.tag){case 1:return Tt(e.type)&&bl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Mi(),ke(kt),ke(gt),Ed(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cd(e),null;case 13:if(ke(Ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));Pi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Ae),null;case 4:return Mi(),null;case 10:return _d(e.type._context),null;case 22:case 23:return Md(),null;case 24:return null;default:return null}}var Ko=!1,pt=!1,t_=typeof WeakSet=="function"?WeakSet:Set,U=null;function xi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function mu(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var Lh=!1;function n_(t,e){if(Zc=yl,t=cm(),pd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,f=0,d=t,h=null;t:for(;;){for(var x;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(x=d.firstChild)!==null;)h=d,d=x;for(;;){if(d===t)break t;if(h===n&&++u===i&&(a=o),h===s&&++f===r&&(c=o),(x=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=x}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(eu={focusedElem:t,selectionRange:n},yl=!1,U=e;U!==null;)if(e=U,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,U=t;else for(;U!==null;){e=U;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,k=v.memoizedState,m=e.stateNode,g=m.getSnapshotBeforeUpdate(e.elementType===e.type?w:Kt(e.type,w),k);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(b){Fe(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}return v=Lh,Lh=!1,v}function Rs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&mu(e,n,s)}i=i.next}while(i!==r)}}function ca(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function yu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function s1(t){var e=t.alternate;e!==null&&(t.alternate=null,s1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fn],delete e[Vs],delete e[ru],delete e[Bx],delete e[zx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function o1(t){return t.tag===5||t.tag===3||t.tag===4}function $h(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||o1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=_l));else if(r!==4&&(t=t.child,t!==null))for(vu(t,e,n),t=t.sibling;t!==null;)vu(t,e,n),t=t.sibling}function xu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(xu(t,e,n),t=t.sibling;t!==null;)xu(t,e,n),t=t.sibling}var ot=null,qt=!1;function Ln(t,e,n){for(n=n.child;n!==null;)l1(t,e,n),n=n.sibling}function l1(t,e,n){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(ta,n)}catch{}switch(n.tag){case 5:pt||xi(n,e);case 6:var r=ot,i=qt;ot=null,Ln(t,e,n),ot=r,qt=i,ot!==null&&(qt?(t=ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(qt?(t=ot,n=n.stateNode,t.nodeType===8?rc(t.parentNode,n):t.nodeType===1&&rc(t,n),Ls(t)):rc(ot,n.stateNode));break;case 4:r=ot,i=qt,ot=n.stateNode.containerInfo,qt=!0,Ln(t,e,n),ot=r,qt=i;break;case 0:case 11:case 14:case 15:if(!pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&mu(n,e,o),i=i.next}while(i!==r)}Ln(t,e,n);break;case 1:if(!pt&&(xi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Fe(n,e,a)}Ln(t,e,n);break;case 21:Ln(t,e,n);break;case 22:n.mode&1?(pt=(r=pt)||n.memoizedState!==null,Ln(t,e,n),pt=r):Ln(t,e,n);break;default:Ln(t,e,n)}}function Wh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new t_),e.forEach(function(r){var i=d_.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Qt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ot=a.stateNode,qt=!1;break e;case 3:ot=a.stateNode.containerInfo,qt=!0;break e;case 4:ot=a.stateNode.containerInfo,qt=!0;break e}a=a.return}if(ot===null)throw Error(L(160));l1(s,o,i),ot=null,qt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Fe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)a1(e,t),e=e.sibling}function a1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qt(e,t),un(t),r&4){try{Rs(3,t,t.return),ca(3,t)}catch(w){Fe(t,t.return,w)}try{Rs(5,t,t.return)}catch(w){Fe(t,t.return,w)}}break;case 1:Qt(e,t),un(t),r&512&&n!==null&&xi(n,n.return);break;case 5:if(Qt(e,t),un(t),r&512&&n!==null&&xi(n,n.return),t.flags&32){var i=t.stateNode;try{Ms(i,"")}catch(w){Fe(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Ig(i,s),Uc(a,o);var u=Uc(a,s);for(o=0;o<c.length;o+=2){var f=c[o],d=c[o+1];f==="style"?Fg(i,d):f==="dangerouslySetInnerHTML"?Dg(i,d):f==="children"?Ms(i,d):td(i,f,d,u)}switch(a){case"input":Bc(i,s);break;case"textarea":Ag(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var x=s.value;x!=null?Si(i,!!s.multiple,x,!1):h!==!!s.multiple&&(s.defaultValue!=null?Si(i,!!s.multiple,s.defaultValue,!0):Si(i,!!s.multiple,s.multiple?[]:"",!1))}i[Vs]=s}catch(w){Fe(t,t.return,w)}}break;case 6:if(Qt(e,t),un(t),r&4){if(t.stateNode===null)throw Error(L(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){Fe(t,t.return,w)}}break;case 3:if(Qt(e,t),un(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ls(e.containerInfo)}catch(w){Fe(t,t.return,w)}break;case 4:Qt(e,t),un(t);break;case 13:Qt(e,t),un(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Pd=Le())),r&4&&Wh(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(pt=(u=pt)||f,Qt(e,t),pt=u):Qt(e,t),un(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(U=t,f=t.child;f!==null;){for(d=U=f;U!==null;){switch(h=U,x=h.child,h.tag){case 0:case 11:case 14:case 15:Rs(4,h,h.return);break;case 1:xi(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){Fe(r,n,w)}}break;case 5:xi(h,h.return);break;case 22:if(h.memoizedState!==null){Hh(d);continue}}x!==null?(x.return=h,U=x):Hh(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Pg("display",o))}catch(w){Fe(t,t.return,w)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){Fe(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Qt(e,t),un(t),r&4&&Wh(t);break;case 21:break;default:Qt(e,t),un(t)}}function un(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(o1(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ms(i,""),r.flags&=-33);var s=$h(t);xu(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=$h(t);vu(t,a,o);break;default:throw Error(L(161))}}catch(c){Fe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function r_(t,e,n){U=t,c1(t)}function c1(t,e,n){for(var r=(t.mode&1)!==0;U!==null;){var i=U,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ko;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||pt;a=Ko;var u=pt;if(Ko=o,(pt=c)&&!u)for(U=i;U!==null;)o=U,c=o.child,o.tag===22&&o.memoizedState!==null?Vh(i):c!==null?(c.return=o,U=c):Vh(i);for(;s!==null;)U=s,c1(s),s=s.sibling;U=i,Ko=a,pt=u}Uh(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,U=s):Uh(t)}}function Uh(t){for(;U!==null;){var e=U;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pt||ca(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Kt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Th(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Th(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Ls(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}pt||e.flags&512&&yu(e)}catch(h){Fe(e,e.return,h)}}if(e===t){U=null;break}if(n=e.sibling,n!==null){n.return=e.return,U=n;break}U=e.return}}function Hh(t){for(;U!==null;){var e=U;if(e===t){U=null;break}var n=e.sibling;if(n!==null){n.return=e.return,U=n;break}U=e.return}}function Vh(t){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ca(4,e)}catch(c){Fe(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Fe(e,i,c)}}var s=e.return;try{yu(e)}catch(c){Fe(e,s,c)}break;case 5:var o=e.return;try{yu(e)}catch(c){Fe(e,o,c)}}}catch(c){Fe(e,e.return,c)}if(e===t){U=null;break}var a=e.sibling;if(a!==null){a.return=e.return,U=a;break}U=e.return}}var i_=Math.ceil,Al=On.ReactCurrentDispatcher,Nd=On.ReactCurrentOwner,Wt=On.ReactCurrentBatchConfig,ce=0,rt=null,We=null,at=0,jt=0,_i=yr(0),Ke=0,Xs=null,Ur=0,ua=0,Dd=0,js=null,wt=null,Pd=0,Bi=1/0,Cn=null,Nl=!1,_u=null,rr=null,qo=!1,Qn=null,Dl=0,Is=0,bu=null,cl=-1,ul=0;function vt(){return ce&6?Le():cl!==-1?cl:cl=Le()}function ir(t){return t.mode&1?ce&2&&at!==0?at&-at:$x.transition!==null?(ul===0&&(ul=Gg()),ul):(t=me,t!==0||(t=window.event,t=t===void 0?16:em(t.type)),t):1}function nn(t,e,n,r){if(50<Is)throw Is=0,bu=null,Error(L(185));fo(t,n,r),(!(ce&2)||t!==rt)&&(t===rt&&(!(ce&2)&&(ua|=n),Ke===4&&Yn(t,at)),Rt(t,r),n===1&&ce===0&&!(e.mode&1)&&(Bi=Le()+500,oa&&vr()))}function Rt(t,e){var n=t.callbackNode;$v(t,e);var r=ml(t,t===rt?at:0);if(r===0)n!==null&&eh(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&eh(n),e===1)t.tag===0?Lx(Yh.bind(null,t)):xm(Yh.bind(null,t)),Mx(function(){!(ce&6)&&vr()}),n=null;else{switch(Qg(r)){case 1:n=od;break;case 4:n=Vg;break;case 16:n=gl;break;case 536870912:n=Yg;break;default:n=gl}n=y1(n,u1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function u1(t,e){if(cl=-1,ul=0,ce&6)throw Error(L(327));var n=t.callbackNode;if(Ti()&&t.callbackNode!==n)return null;var r=ml(t,t===rt?at:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Pl(t,r);else{e=r;var i=ce;ce|=2;var s=f1();(rt!==t||at!==e)&&(Cn=null,Bi=Le()+500,Mr(t,e));do try{l_();break}catch(a){d1(t,a)}while(1);xd(),Al.current=s,ce=i,We!==null?e=0:(rt=null,at=0,e=Ke)}if(e!==0){if(e===2&&(i=Qc(t),i!==0&&(r=i,e=Su(t,i))),e===1)throw n=Xs,Mr(t,0),Yn(t,r),Rt(t,Le()),n;if(e===6)Yn(t,r);else{if(i=t.current.alternate,!(r&30)&&!s_(i)&&(e=Pl(t,r),e===2&&(s=Qc(t),s!==0&&(r=s,e=Su(t,s))),e===1))throw n=Xs,Mr(t,0),Yn(t,r),Rt(t,Le()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(L(345));case 2:jr(t,wt,Cn);break;case 3:if(Yn(t,r),(r&130023424)===r&&(e=Pd+500-Le(),10<e)){if(ml(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){vt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=nu(jr.bind(null,t,wt,Cn),e);break}jr(t,wt,Cn);break;case 4:if(Yn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-tn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*i_(r/1960))-r,10<r){t.timeoutHandle=nu(jr.bind(null,t,wt,Cn),r);break}jr(t,wt,Cn);break;case 5:jr(t,wt,Cn);break;default:throw Error(L(329))}}}return Rt(t,Le()),t.callbackNode===n?u1.bind(null,t):null}function Su(t,e){var n=js;return t.current.memoizedState.isDehydrated&&(Mr(t,e).flags|=256),t=Pl(t,e),t!==2&&(e=wt,wt=n,e!==null&&wu(e)),t}function wu(t){wt===null?wt=t:wt.push.apply(wt,t)}function s_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!sn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yn(t,e){for(e&=~Dd,e&=~ua,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-tn(e),r=1<<n;t[n]=-1,e&=~r}}function Yh(t){if(ce&6)throw Error(L(327));Ti();var e=ml(t,0);if(!(e&1))return Rt(t,Le()),null;var n=Pl(t,e);if(t.tag!==0&&n===2){var r=Qc(t);r!==0&&(e=r,n=Su(t,r))}if(n===1)throw n=Xs,Mr(t,0),Yn(t,e),Rt(t,Le()),n;if(n===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,jr(t,wt,Cn),Rt(t,Le()),null}function Fd(t,e){var n=ce;ce|=1;try{return t(e)}finally{ce=n,ce===0&&(Bi=Le()+500,oa&&vr())}}function Hr(t){Qn!==null&&Qn.tag===0&&!(ce&6)&&Ti();var e=ce;ce|=1;var n=Wt.transition,r=me;try{if(Wt.transition=null,me=1,t)return t()}finally{me=r,Wt.transition=n,ce=e,!(ce&6)&&vr()}}function Md(){jt=_i.current,ke(_i)}function Mr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Fx(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(md(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bl();break;case 3:Mi(),ke(kt),ke(gt),Ed();break;case 5:Cd(r);break;case 4:Mi();break;case 13:ke(Ae);break;case 19:ke(Ae);break;case 10:_d(r.type._context);break;case 22:case 23:Md()}n=n.return}if(rt=t,We=t=sr(t.current,null),at=jt=e,Ke=0,Xs=null,Dd=ua=Ur=0,wt=js=null,Dr!==null){for(e=0;e<Dr.length;e++)if(n=Dr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Dr=null}return t}function d1(t,e){do{var n=We;try{if(xd(),ol.current=Il,jl){for(var r=Ne.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}jl=!1}if(Wr=0,tt=Ye=Ne=null,Ts=!1,Qs=0,Nd.current=null,n===null||n.return===null){Ke=1,Xs=e,We=null;break}e:{var s=t,o=n.return,a=n,c=e;if(e=at,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=a,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var x=Dh(o);if(x!==null){x.flags&=-257,Ph(x,o,a,s,e),x.mode&1&&Nh(s,u,e),e=x,c=u;var v=e.updateQueue;if(v===null){var w=new Set;w.add(c),e.updateQueue=w}else v.add(c);break e}else{if(!(e&1)){Nh(s,u,e),Od();break e}c=Error(L(426))}}else if(Ie&&a.mode&1){var k=Dh(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Ph(k,o,a,s,e),yd(Oi(c,a));break e}}s=c=Oi(c,a),Ke!==4&&(Ke=2),js===null?js=[s]:js.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=Qm(s,c,e);kh(s,m);break e;case 1:a=c;var g=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(rr===null||!rr.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=Km(s,a,e);kh(s,b);break e}}s=s.return}while(s!==null)}p1(n)}catch(T){e=T,We===n&&n!==null&&(We=n=n.return);continue}break}while(1)}function f1(){var t=Al.current;return Al.current=Il,t===null?Il:t}function Od(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),rt===null||!(Ur&268435455)&&!(ua&268435455)||Yn(rt,at)}function Pl(t,e){var n=ce;ce|=2;var r=f1();(rt!==t||at!==e)&&(Cn=null,Mr(t,e));do try{o_();break}catch(i){d1(t,i)}while(1);if(xd(),ce=n,Al.current=r,We!==null)throw Error(L(261));return rt=null,at=0,Ke}function o_(){for(;We!==null;)h1(We)}function l_(){for(;We!==null&&!Nv();)h1(We)}function h1(t){var e=m1(t.alternate,t,jt);t.memoizedProps=t.pendingProps,e===null?p1(t):We=e,Nd.current=null}function p1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=e_(n,e),n!==null){n.flags&=32767,We=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,We=null;return}}else if(n=Zx(n,e,jt),n!==null){We=n;return}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);Ke===0&&(Ke=5)}function jr(t,e,n){var r=me,i=Wt.transition;try{Wt.transition=null,me=1,a_(t,e,n,r)}finally{Wt.transition=i,me=r}return null}function a_(t,e,n,r){do Ti();while(Qn!==null);if(ce&6)throw Error(L(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Wv(t,s),t===rt&&(We=rt=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qo||(qo=!0,y1(gl,function(){return Ti(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Wt.transition,Wt.transition=null;var o=me;me=1;var a=ce;ce|=4,Nd.current=null,n_(t,n),a1(n,t),Rx(eu),yl=!!Zc,eu=Zc=null,t.current=n,r_(n),Dv(),ce=a,me=o,Wt.transition=s}else t.current=n;if(qo&&(qo=!1,Qn=t,Dl=i),s=t.pendingLanes,s===0&&(rr=null),Mv(n.stateNode),Rt(t,Le()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Nl)throw Nl=!1,t=_u,_u=null,t;return Dl&1&&t.tag!==0&&Ti(),s=t.pendingLanes,s&1?t===bu?Is++:(Is=0,bu=t):Is=0,vr(),null}function Ti(){if(Qn!==null){var t=Qg(Dl),e=Wt.transition,n=me;try{if(Wt.transition=null,me=16>t?16:t,Qn===null)var r=!1;else{if(t=Qn,Qn=null,Dl=0,ce&6)throw Error(L(331));var i=ce;for(ce|=4,U=t.current;U!==null;){var s=U,o=s.child;if(U.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(U=u;U!==null;){var f=U;switch(f.tag){case 0:case 11:case 15:Rs(8,f,s)}var d=f.child;if(d!==null)d.return=f,U=d;else for(;U!==null;){f=U;var h=f.sibling,x=f.return;if(s1(f),f===u){U=null;break}if(h!==null){h.return=x,U=h;break}U=x}}}var v=s.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var k=w.sibling;w.sibling=null,w=k}while(w!==null)}}U=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,U=o;else e:for(;U!==null;){if(s=U,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Rs(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,U=m;break e}U=s.return}}var g=t.current;for(U=g;U!==null;){o=U;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,U=y;else e:for(o=g;U!==null;){if(a=U,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ca(9,a)}}catch(T){Fe(a,a.return,T)}if(a===o){U=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,U=b;break e}U=a.return}}if(ce=i,vr(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(ta,t)}catch{}r=!0}return r}finally{me=n,Wt.transition=e}}return!1}function Gh(t,e,n){e=Oi(n,e),e=Qm(t,e,1),t=nr(t,e,1),e=vt(),t!==null&&(fo(t,1,e),Rt(t,e))}function Fe(t,e,n){if(t.tag===3)Gh(t,t,n);else for(;e!==null;){if(e.tag===3){Gh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(rr===null||!rr.has(r))){t=Oi(n,t),t=Km(e,t,1),e=nr(e,t,1),t=vt(),e!==null&&(fo(e,1,t),Rt(e,t));break}}e=e.return}}function c_(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vt(),t.pingedLanes|=t.suspendedLanes&n,rt===t&&(at&n)===n&&(Ke===4||Ke===3&&(at&130023424)===at&&500>Le()-Pd?Mr(t,0):Dd|=n),Rt(t,e)}function g1(t,e){e===0&&(t.mode&1?(e=Lo,Lo<<=1,!(Lo&130023424)&&(Lo=4194304)):e=1);var n=vt();t=Dn(t,e),t!==null&&(fo(t,e,n),Rt(t,n))}function u_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),g1(t,n)}function d_(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(e),g1(t,n)}var m1;m1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kt.current)Ct=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ct=!1,Jx(t,e,n);Ct=!!(t.flags&131072)}else Ct=!1,Ie&&e.flags&1048576&&_m(e,Cl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;al(t,e),t=e.pendingProps;var i=Di(e,gt.current);ki(e,n),i=Td(null,e,r,t,i,n);var s=Rd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tt(r)?(s=!0,Sl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Sd(e),i.updater=aa,e.stateNode=i,i._reactInternals=e,cu(e,r,t,n),e=fu(null,e,r,!0,s,n)):(e.tag=0,Ie&&s&&gd(e),mt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(al(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=h_(r),t=Kt(r,t),i){case 0:e=du(null,e,r,t,n);break e;case 1:e=Oh(null,e,r,t,n);break e;case 11:e=Fh(null,e,r,t,n);break e;case 14:e=Mh(null,e,r,Kt(r.type,t),n);break e}throw Error(L(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kt(r,i),du(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kt(r,i),Oh(t,e,r,i,n);case 3:e:{if(Zm(e),t===null)throw Error(L(387));r=e.pendingProps,s=e.memoizedState,i=s.element,km(t,e),Tl(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Oi(Error(L(423)),e),e=Bh(t,e,r,n,i);break e}else if(r!==i){i=Oi(Error(L(424)),e),e=Bh(t,e,r,n,i);break e}else for(It=tr(e.stateNode.containerInfo.firstChild),At=e,Ie=!0,Jt=null,n=Cm(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pi(),r===i){e=Pn(t,e,n);break e}mt(t,e,r,n)}e=e.child}return e;case 5:return Tm(e),t===null&&ou(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,tu(r,i)?o=null:s!==null&&tu(r,s)&&(e.flags|=32),Jm(t,e),mt(t,e,o,n),e.child;case 6:return t===null&&ou(e),null;case 13:return e1(t,e,n);case 4:return wd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Fi(e,null,r,n):mt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kt(r,i),Fh(t,e,r,i,n);case 7:return mt(t,e,e.pendingProps,n),e.child;case 8:return mt(t,e,e.pendingProps.children,n),e.child;case 12:return mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Se(El,r._currentValue),r._currentValue=o,s!==null)if(sn(s.value,o)){if(s.children===i.children&&!kt.current){e=Pn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=jn(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),lu(s.return,n,e),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(L(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),lu(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}mt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ki(e,n),i=Ut(i),r=r(i),e.flags|=1,mt(t,e,r,n),e.child;case 14:return r=e.type,i=Kt(r,e.pendingProps),i=Kt(r.type,i),Mh(t,e,r,i,n);case 15:return qm(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kt(r,i),al(t,e),e.tag=1,Tt(r)?(t=!0,Sl(e)):t=!1,ki(e,n),Gm(e,r,i),cu(e,r,i,n),fu(null,e,r,!0,t,n);case 19:return t1(t,e,n);case 22:return Xm(t,e,n)}throw Error(L(156,e.tag))};function y1(t,e){return Hg(t,e)}function f_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(t,e,n,r){return new f_(t,e,n,r)}function Bd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function h_(t){if(typeof t=="function")return Bd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===rd)return 11;if(t===id)return 14}return 2}function sr(t,e){var n=t.alternate;return n===null?(n=Lt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function dl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Bd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ui:return Or(n.children,i,s,e);case nd:o=8,i|=8;break;case Dc:return t=Lt(12,n,e,i|2),t.elementType=Dc,t.lanes=s,t;case Pc:return t=Lt(13,n,e,i),t.elementType=Pc,t.lanes=s,t;case Fc:return t=Lt(19,n,e,i),t.elementType=Fc,t.lanes=s,t;case Tg:return da(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Eg:o=10;break e;case kg:o=9;break e;case rd:o=11;break e;case id:o=14;break e;case Un:o=16,r=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=Lt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Or(t,e,n,r){return t=Lt(7,t,r,e),t.lanes=n,t}function da(t,e,n,r){return t=Lt(22,t,r,e),t.elementType=Tg,t.lanes=n,t.stateNode={isHidden:!1},t}function dc(t,e,n){return t=Lt(6,t,null,e),t.lanes=n,t}function fc(t,e,n){return e=Lt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function p_(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ya(0),this.expirationTimes=Ya(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ya(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zd(t,e,n,r,i,s,o,a,c){return t=new p_(t,e,n,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Lt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sd(s),t}function g_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ci,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function v1(t){if(!t)return dr;t=t._reactInternals;e:{if(Kr(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var n=t.type;if(Tt(n))return vm(t,n,e)}return e}function x1(t,e,n,r,i,s,o,a,c){return t=zd(n,r,!0,t,i,s,o,a,c),t.context=v1(null),n=t.current,r=vt(),i=ir(n),s=jn(r,i),s.callback=e??null,nr(n,s,i),t.current.lanes=i,fo(t,i,r),Rt(t,r),t}function fa(t,e,n,r){var i=e.current,s=vt(),o=ir(i);return n=v1(n),e.context===null?e.context=n:e.pendingContext=n,e=jn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=nr(i,e,o),t!==null&&(nn(t,i,o,s),sl(t,i,o)),o}function Fl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ld(t,e){Qh(t,e),(t=t.alternate)&&Qh(t,e)}function m_(){return null}var _1=typeof reportError=="function"?reportError:function(t){console.error(t)};function $d(t){this._internalRoot=t}ha.prototype.render=$d.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));fa(t,e,null,null)};ha.prototype.unmount=$d.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Hr(function(){fa(null,t,null,null)}),e[Nn]=null}};function ha(t){this._internalRoot=t}ha.prototype.unstable_scheduleHydration=function(t){if(t){var e=Xg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Vn.length&&e!==0&&e<Vn[n].priority;n++);Vn.splice(n,0,t),n===0&&Zg(t)}};function Wd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Kh(){}function y_(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Fl(o);s.call(u)}}var o=x1(e,r,t,0,null,!1,!1,"",Kh);return t._reactRootContainer=o,t[Nn]=o.current,Us(t.nodeType===8?t.parentNode:t),Hr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Fl(c);a.call(u)}}var c=zd(t,0,!1,null,null,!1,!1,"",Kh);return t._reactRootContainer=c,t[Nn]=c.current,Us(t.nodeType===8?t.parentNode:t),Hr(function(){fa(e,c,n,r)}),c}function ga(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=Fl(o);a.call(c)}}fa(e,o,t,i)}else o=y_(n,e,t,i,r);return Fl(o)}Kg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=_s(e.pendingLanes);n!==0&&(ld(e,n|1),Rt(e,Le()),!(ce&6)&&(Bi=Le()+500,vr()))}break;case 13:Hr(function(){var r=Dn(t,1);if(r!==null){var i=vt();nn(r,t,1,i)}}),Ld(t,1)}};ad=function(t){if(t.tag===13){var e=Dn(t,134217728);if(e!==null){var n=vt();nn(e,t,134217728,n)}Ld(t,134217728)}};qg=function(t){if(t.tag===13){var e=ir(t),n=Dn(t,e);if(n!==null){var r=vt();nn(n,t,e,r)}Ld(t,e)}};Xg=function(){return me};Jg=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};Vc=function(t,e,n){switch(e){case"input":if(Bc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=sa(r);if(!i)throw Error(L(90));jg(r),Bc(r,i)}}}break;case"textarea":Ag(t,n);break;case"select":e=n.value,e!=null&&Si(t,!!n.multiple,e,!1)}};Bg=Fd;zg=Hr;var v_={usingClientEntryPoint:!1,Events:[po,pi,sa,Mg,Og,Fd]},hs={findFiberByHostInstance:Nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},x_={bundleType:hs.bundleType,version:hs.version,rendererPackageName:hs.rendererPackageName,rendererConfig:hs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:On.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Wg(t),t===null?null:t.stateNode},findFiberByHostInstance:hs.findFiberByHostInstance||m_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xo.isDisabled&&Xo.supportsFiber)try{ta=Xo.inject(x_),hn=Xo}catch{}}Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v_;Dt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wd(e))throw Error(L(200));return g_(t,e,null,n)};Dt.createRoot=function(t,e){if(!Wd(t))throw Error(L(299));var n=!1,r="",i=_1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=zd(t,1,!1,null,null,n,!1,r,i),t[Nn]=e.current,Us(t.nodeType===8?t.parentNode:t),new $d(e)};Dt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=Wg(e),t=t===null?null:t.stateNode,t};Dt.flushSync=function(t){return Hr(t)};Dt.hydrate=function(t,e,n){if(!pa(e))throw Error(L(200));return ga(null,t,e,!0,n)};Dt.hydrateRoot=function(t,e,n){if(!Wd(t))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=_1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=x1(e,null,t,1,n??null,i,!1,s,o),t[Nn]=e.current,Us(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ha(e)};Dt.render=function(t,e,n){if(!pa(e))throw Error(L(200));return ga(null,t,e,!1,n)};Dt.unmountComponentAtNode=function(t){if(!pa(t))throw Error(L(40));return t._reactRootContainer?(Hr(function(){ga(null,null,t,!1,function(){t._reactRootContainer=null,t[Nn]=null})}),!0):!1};Dt.unstable_batchedUpdates=Fd;Dt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!pa(n))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return ga(t,e,n,!1,r)};Dt.version="18.3.1-next-f1338f8080-20240426";function b1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(b1)}catch(t){console.error(t)}}b1(),bg.exports=Dt;var __=bg.exports,S1,qh=__;S1=qh.createRoot,qh.hydrateRoot;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $=function(t,e){if(!t)throw qi(e)},qi=function(t){return new Error("Firebase Database ("+w1.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},b_=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Ud={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,f=s>>2,d=(s&3)<<4|a>>4;let h=(a&15)<<2|u>>6,x=u&63;c||(x=64,o||(h=64)),r.push(n[f],n[d],n[h],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(C1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):b_(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new S_;const h=s<<2|a>>4;if(r.push(h),u!==64){const x=a<<4&240|u>>2;if(r.push(x),d!==64){const v=u<<6&192|d;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class S_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const E1=function(t){const e=C1(t);return Ud.encodeByteArray(e,!0)},Ml=function(t){return E1(t).replace(/\./g,"")},Cu=function(t){try{return Ud.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(t){return k1(void 0,t)}function k1(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!C_(n)||(t[n]=k1(t[n],e[n]));return t}function C_(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_=()=>E_().__FIREBASE_DEFAULTS__,T_=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},R_=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Cu(t[1]);return e&&JSON.parse(e)},T1=()=>{try{return k_()||T_()||R_()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},j_=t=>{var e,n;return(n=(e=T1())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},I_=t=>{const e=j_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},R1=()=>{var t;return(t=T1())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Ml(JSON.stringify(n)),Ml(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function j1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(N_())}function D_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function I1(){return w1.NODE_ADMIN===!0}function P_(){try{return typeof indexedDB=="object"}catch{return!1}}function F_(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="FirebaseError";class yo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=M_,Object.setPrototypeOf(this,yo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,A1.prototype.create)}}class A1{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?O_(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new yo(i,a,r)}}function O_(t,e){return t.replace(B_,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const B_=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(t){return JSON.parse(t)}function Qe(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Js(Cu(s[0])||""),n=Js(Cu(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},z_=function(t){const e=N1(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},L_=function(t){const e=N1(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function zi(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Xh(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ol(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Eu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Jh(s)&&Jh(o)){if(!Eu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Jh(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,f;for(let d=0;d<80;d++){d<40?d<20?(u=a^s&(o^a),f=1518500249):(u=s^o^a,f=1859775393):d<60?(u=s&o|a&(s|o),f=2400959708):(u=s^o^a,f=3395469782);const h=(i<<5|i>>>27)+u+c+f+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function ma(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,$(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ya=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(t){return t&&t._delegate?t._delegate:t}class Zs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new mo;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Y_(e))try{this.getOrInitializeService({instanceIdentifier:Ir})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ir){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ir){return this.instances.has(e)}getOptions(e=Ir){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:V_(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ir){return this.component?this.component.multipleInstances?e:Ir:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function V_(t){return t===Ir?void 0:t}function Y_(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new H_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const Q_={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},K_=_e.INFO,q_={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},X_=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=q_[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class D1{constructor(e){this.name=e,this._logLevel=K_,this._logHandler=X_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Q_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const J_=(t,e)=>e.some(n=>t instanceof n);let Zh,ep;function Z_(){return Zh||(Zh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eb(){return ep||(ep=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const P1=new WeakMap,ku=new WeakMap,F1=new WeakMap,hc=new WeakMap,Hd=new WeakMap;function tb(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(or(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&P1.set(n,t)}).catch(()=>{}),Hd.set(e,t),e}function nb(t){if(ku.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ku.set(t,e)}let Tu={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ku.get(t);if(e==="objectStoreNames")return t.objectStoreNames||F1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return or(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rb(t){Tu=t(Tu)}function ib(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(pc(this),e,...n);return F1.set(r,e.sort?e.sort():[e]),or(r)}:eb().includes(t)?function(...e){return t.apply(pc(this),e),or(P1.get(this))}:function(...e){return or(t.apply(pc(this),e))}}function sb(t){return typeof t=="function"?ib(t):(t instanceof IDBTransaction&&nb(t),J_(t,Z_())?new Proxy(t,Tu):t)}function or(t){if(t instanceof IDBRequest)return tb(t);if(hc.has(t))return hc.get(t);const e=sb(t);return e!==t&&(hc.set(t,e),Hd.set(e,t)),e}const pc=t=>Hd.get(t);function ob(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=or(o);return r&&o.addEventListener("upgradeneeded",c=>{r(or(o.result),c.oldVersion,c.newVersion,or(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const lb=["get","getKey","getAll","getAllKeys","count"],ab=["put","add","delete","clear"],gc=new Map;function tp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gc.get(e))return gc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=ab.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||lb.includes(n)))return;const s=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&c.done]))[0]};return gc.set(e,s),s}rb(t=>({...t,get:(e,n,r)=>tp(e,n)||t.get(e,n,r),has:(e,n)=>!!tp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ub(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ub(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ru="@firebase/app",np="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn=new D1("@firebase/app"),db="@firebase/app-compat",fb="@firebase/analytics-compat",hb="@firebase/analytics",pb="@firebase/app-check-compat",gb="@firebase/app-check",mb="@firebase/auth",yb="@firebase/auth-compat",vb="@firebase/database",xb="@firebase/data-connect",_b="@firebase/database-compat",bb="@firebase/functions",Sb="@firebase/functions-compat",wb="@firebase/installations",Cb="@firebase/installations-compat",Eb="@firebase/messaging",kb="@firebase/messaging-compat",Tb="@firebase/performance",Rb="@firebase/performance-compat",jb="@firebase/remote-config",Ib="@firebase/remote-config-compat",Ab="@firebase/storage",Nb="@firebase/storage-compat",Db="@firebase/firestore",Pb="@firebase/vertexai-preview",Fb="@firebase/firestore-compat",Mb="firebase",Ob="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju="[DEFAULT]",Bb={[Ru]:"fire-core",[db]:"fire-core-compat",[hb]:"fire-analytics",[fb]:"fire-analytics-compat",[gb]:"fire-app-check",[pb]:"fire-app-check-compat",[mb]:"fire-auth",[yb]:"fire-auth-compat",[vb]:"fire-rtdb",[xb]:"fire-data-connect",[_b]:"fire-rtdb-compat",[bb]:"fire-fn",[Sb]:"fire-fn-compat",[wb]:"fire-iid",[Cb]:"fire-iid-compat",[Eb]:"fire-fcm",[kb]:"fire-fcm-compat",[Tb]:"fire-perf",[Rb]:"fire-perf-compat",[jb]:"fire-rc",[Ib]:"fire-rc-compat",[Ab]:"fire-gcs",[Nb]:"fire-gcs-compat",[Db]:"fire-fst",[Fb]:"fire-fst-compat",[Pb]:"fire-vertex","fire-js":"fire-js",[Mb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl=new Map,zb=new Map,Iu=new Map;function rp(t,e){try{t.container.addComponent(e)}catch(n){Fn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zl(t){const e=t.name;if(Iu.has(e))return Fn.debug(`There were multiple attempts to register component ${e}.`),!1;Iu.set(e,t);for(const n of Bl.values())rp(n,t);for(const n of zb.values())rp(n,t);return!0}function Lb(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},lr=new A1("app","Firebase",$b);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=Ob;function M1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ju,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw lr.create("bad-app-name",{appName:String(i)});if(n||(n=R1()),!n)throw lr.create("no-options");const s=Bl.get(i);if(s){if(Eu(n,s.options)&&Eu(r,s.config))return s;throw lr.create("duplicate-app",{appName:i})}const o=new G_(i);for(const c of Iu.values())o.addComponent(c);const a=new Wb(n,r,o);return Bl.set(i,a),a}function Hb(t=ju){const e=Bl.get(t);if(!e&&t===ju&&R1())return M1();if(!e)throw lr.create("no-app",{appName:t});return e}function Ri(t,e,n){var r;let i=(r=Bb[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fn.warn(a.join(" "));return}zl(new Zs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="firebase-heartbeat-database",Yb=1,eo="firebase-heartbeat-store";let mc=null;function O1(){return mc||(mc=ob(Vb,Yb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(eo)}catch(n){console.warn(n)}}}}).catch(t=>{throw lr.create("idb-open",{originalErrorMessage:t.message})})),mc}async function Gb(t){try{const n=(await O1()).transaction(eo),r=await n.objectStore(eo).get(B1(t));return await n.done,r}catch(e){if(e instanceof yo)Fn.warn(e.message);else{const n=lr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fn.warn(n.message)}}}async function ip(t,e){try{const r=(await O1()).transaction(eo,"readwrite");await r.objectStore(eo).put(e,B1(t)),await r.done}catch(n){if(n instanceof yo)Fn.warn(n.message);else{const r=lr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fn.warn(r.message)}}}function B1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=1024,Kb=30*24*60*60*1e3;class qb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Jb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=sp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Kb}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Fn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=sp(),{heartbeatsToSend:r,unsentEntries:i}=Xb(this._heartbeatsCache.heartbeats),s=Ml(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Fn.warn(n),""}}}function sp(){return new Date().toISOString().substring(0,10)}function Xb(t,e=Qb){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),op(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),op(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Jb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return P_()?F_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Gb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ip(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ip(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function op(t){return Ml(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(t){zl(new Zs("platform-logger",e=>new cb(e),"PRIVATE")),zl(new Zs("heartbeat",e=>new qb(e),"PRIVATE")),Ri(Ru,np,t),Ri(Ru,np,"esm2017"),Ri("fire-js","")}Zb("");var e2="firebase",t2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ri(e2,t2,"app");const lp="@firebase/database",ap="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z1="";function n2(t){z1=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Qe(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Js(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return gn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new r2(e)}}catch{}return new i2},Fr=L1("localStorage"),Au=L1("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji=new D1("@firebase/database"),s2=function(){let t=1;return function(){return t++}}(),$1=function(t){const e=U_(t),n=new W_;n.update(e);const r=n.digest();return Ud.encodeByteArray(r)},vo=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=vo.apply(null,r):typeof r=="object"?e+=Qe(r):e+=r,e+=" "}return e};let Br=null,cp=!0;const o2=function(t,e){$(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ji.logLevel=_e.VERBOSE,Br=ji.log.bind(ji),e&&Au.set("logging_enabled",!0)):typeof t=="function"?Br=t:(Br=null,Au.remove("logging_enabled"))},lt=function(...t){if(cp===!0&&(cp=!1,Br===null&&Au.get("logging_enabled")===!0&&o2(!0)),Br){const e=vo.apply(null,t);Br(e)}},xo=function(t){return function(...e){lt(t,...e)}},Nu=function(...t){const e="FIREBASE INTERNAL ERROR: "+vo(...t);ji.error(e)},Mn=function(...t){const e=`FIREBASE FATAL ERROR: ${vo(...t)}`;throw ji.error(e),new Error(e)},xt=function(...t){const e="FIREBASE WARNING: "+vo(...t);ji.warn(e)},l2=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&xt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Vd=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},a2=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Li="[MIN_NAME]",Vr="[MAX_NAME]",Xr=function(t,e){if(t===e)return 0;if(t===Li||e===Vr)return-1;if(e===Li||t===Vr)return 1;{const n=up(t),r=up(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},c2=function(t,e){return t===e?0:t<e?-1:1},ps=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Qe(e))},Yd=function(t){if(typeof t!="object"||t===null)return Qe(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Qe(e[r]),n+=":",n+=Yd(t[e[r]]);return n+="}",n},W1=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function ut(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const U1=function(t){$(!Vd(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const f=u.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(f.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},u2=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},d2=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function f2(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const h2=new RegExp("^-?(0*)\\d{1,10}$"),p2=-2147483648,g2=2147483647,up=function(t){if(h2.test(t)){const e=Number(t);if(e>=p2&&e<=g2)return e}return null},Xi=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw xt("Exception was thrown by user callback.",n),e},Math.floor(0))}},m2=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},As=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){xt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(lt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xt(e)}}class Ii{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ii.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="5",H1="v",V1="s",Y1="r",G1="f",Q1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,K1="ls",q1="p",Du="ac",X1="websocket",J1="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Fr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Fr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function x2(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function e0(t,e,n){$(typeof e=="string","typeof type must == string"),$(typeof n=="object","typeof params must == object");let r;if(e===X1)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===J1)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);x2(t)&&(n.ns=t.namespace);const i=[];return ut(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this.counters_={}}incrementCounter(e,n=1){gn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return w_(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc={},vc={};function Qd(t){const e=t.toString();return yc[e]||(yc[e]=new _2),yc[e]}function b2(t,e){const n=t.toString();return vc[n]||(vc[n]=e()),vc[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Xi(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="start",w2="close",C2="pLPCommand",E2="pRTLPCB",t0="id",n0="pw",r0="ser",k2="cb",T2="seg",R2="ts",j2="d",I2="dframe",i0=1870,s0=30,A2=i0-s0,N2=25e3,D2=3e4;class bi{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=xo(e),this.stats_=Qd(n),this.urlFn=c=>(this.appCheckToken&&(c[Du]=this.appCheckToken),e0(n,J1,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new S2(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(D2)),a2(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Kd((...s)=>{const[o,a,c,u,f]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===dp)this.id=a,this.password=c;else if(o===w2)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[dp]="t",r[r0]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[k2]=this.scriptTagHolder.uniqueCallbackIdentifier),r[H1]=Gd,this.transportSessionId&&(r[V1]=this.transportSessionId),this.lastSessionId&&(r[K1]=this.lastSessionId),this.applicationId&&(r[q1]=this.applicationId),this.appCheckToken&&(r[Du]=this.appCheckToken),typeof location<"u"&&location.hostname&&Q1.test(location.hostname)&&(r[Y1]=G1);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){bi.forceAllow_=!0}static forceDisallow(){bi.forceDisallow_=!0}static isAvailable(){return bi.forceAllow_?!0:!bi.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!u2()&&!d2()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Qe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=E1(n),i=W1(r,A2);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[I2]="t",r[t0]=e,r[n0]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Qe(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Kd{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=s2(),window[C2+this.uniqueCallbackIdentifier]=e,window[E2+this.uniqueCallbackIdentifier]=n,this.myIFrame=Kd.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){lt("frame writing exception"),a.stack&&lt(a.stack),lt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||lt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[t0]=this.myID,e[n0]=this.myPW,e[r0]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+s0+r.length<=i0;){const o=this.pendingSegs.shift();r=r+"&"+T2+i+"="+o.seg+"&"+R2+i+"="+o.ts+"&"+j2+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(N2)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{lt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=16384,F2=45e3;let Ll=null;typeof MozWebSocket<"u"?Ll=MozWebSocket:typeof WebSocket<"u"&&(Ll=WebSocket);class Zt{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=xo(this.connId),this.stats_=Qd(n),this.connURL=Zt.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[H1]=Gd,typeof location<"u"&&location.hostname&&Q1.test(location.hostname)&&(o[Y1]=G1),n&&(o[V1]=n),r&&(o[K1]=r),i&&(o[Du]=i),s&&(o[q1]=s),e0(e,X1,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Fr.set("previous_websocket_failure",!0);try{let r;I1(),this.mySock=new Ll(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Zt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Ll!==null&&!Zt.forceDisallow_}static previouslyFailed(){return Fr.isInMemoryStorage||Fr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Fr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Js(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if($(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Qe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=W1(n,P2);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(F2))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Zt.responsesRequiredToBeHealthy=2;Zt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[bi,Zt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Zt&&Zt.isAvailable();let r=n&&!Zt.previouslyFailed();if(e.webSocketOnly&&(n||xt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Zt];else{const i=this.transports_=[];for(const s of to.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);to.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}to.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=6e4,O2=5e3,B2=10*1024,z2=100*1024,xc="t",fp="d",L2="s",hp="r",$2="e",pp="o",gp="a",mp="n",yp="p",W2="h";class U2{constructor(e,n,r,i,s,o,a,c,u,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=xo("c:"+this.id+":"),this.transportManager_=new to(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=As(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>z2?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>B2?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(xc in e){const n=e[xc];n===gp?this.upgradeIfSecondaryHealthy_():n===hp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===pp&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ps("t",e),r=ps("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:yp,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:gp,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:mp,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ps("t",e),r=ps("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ps(xc,e);if(fp in e){const r=e[fp];if(n===W2){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===mp){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===L2?this.onConnectionShutdown_(r):n===hp?this.onReset_(r):n===$2?Nu("Server Error: "+r):n===pp?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Nu("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Gd!==r&&xt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),As(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(M2))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):As(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(O2))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:yp,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Fr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e){this.allowedEvents_=e,this.listeners_={},$(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){$(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l extends l0{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!j1()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new $l}getInitialEvent(e){return $(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp=32,xp=768;class ye{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function fe(){return new ye("")}function re(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function fr(t){return t.pieces_.length-t.pieceNum_}function be(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ye(t.pieces_,e)}function qd(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function H2(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function no(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function a0(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ye(e,0)}function Me(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ye)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ye(n,0)}function oe(t){return t.pieceNum_>=t.pieces_.length}function yt(t,e){const n=re(t),r=re(e);if(n===null)return e;if(n===r)return yt(be(t),be(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function V2(t,e){const n=no(t,0),r=no(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=Xr(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function Xd(t,e){if(fr(t)!==fr(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function $t(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(fr(t)>fr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Y2{constructor(e,n){this.errorPrefix_=n,this.parts_=no(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=ya(this.parts_[r]);c0(this)}}function G2(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=ya(e),c0(t)}function Q2(t){const e=t.parts_.pop();t.byteLength_-=ya(e),t.parts_.length>0&&(t.byteLength_-=1)}function c0(t){if(t.byteLength_>xp)throw new Error(t.errorPrefix_+"has a key path longer than "+xp+" bytes ("+t.byteLength_+").");if(t.parts_.length>vp)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+vp+") or object contains a cycle "+Ar(t))}function Ar(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd extends l0{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Jd}getInitialEvent(e){return $(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=1e3,K2=60*5*1e3,_p=30*1e3,q2=1.3,X2=3e4,J2="server_kill",bp=3;class In extends o0{constructor(e,n,r,i,s,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=In.nextPersistentConnectionId_++,this.log_=xo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=gs,this.maxReconnectDelay_=K2,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!I1())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Jd.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&$l.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Qe(s)),$(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new mo,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),$(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),$(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const c=a.d,u=a.s;In.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&gn(e,"w")){const r=zi(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();xt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||L_(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=_p)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=z_(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),$(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Qe(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Nu("Unrecognized action received from server: "+Qe(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){$(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=gs,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=gs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>X2&&(this.reconnectDelay_=gs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*q2)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+In.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},u=function(d){$(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:u};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);o?lt("getToken() completed but was canceled"):(lt("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new U2(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,x=>{xt(x+" ("+this.repoInfo_.toString()+")"),this.interrupt(J2)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&xt(d),c())}}}interrupt(e){lt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){lt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Xh(this.interruptReasons_)&&(this.reconnectDelay_=gs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Yd(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new ye(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){lt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=bp&&(this.reconnectDelay_=_p,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){lt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=bp&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+z1.replace(/\./g,"-")]=1,j1()?e["framework.cordova"]=1:D_()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=$l.getInstance().currentlyOnline();return Xh(this.interruptReasons_)&&e}}In.nextPersistentConnectionId_=0;In.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ie(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ie(Li,e),i=new ie(Li,n);return this.compare(r,i)!==0}minPost(){return ie.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jo;class u0 extends va{static get __EMPTY_NODE(){return Jo}static set __EMPTY_NODE(e){Jo=e}compare(e,n){return Xr(e.name,n.name)}isDefinedOn(e){throw qi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ie.MIN}maxPost(){return new ie(Vr,Jo)}makePost(e,n){return $(typeof e=="string","KeyIndex indexValue must always be a string."),new ie(e,Jo)}toString(){return".key"}}const Ai=new u0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class nt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??nt.RED,this.left=i??Et.EMPTY_NODE,this.right=s??Et.EMPTY_NODE}copy(e,n,r,i,s){return new nt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Et.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Et.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}nt.RED=!0;nt.BLACK=!1;class Z2{copy(e,n,r,i,s){return this}insert(e,n,r){return new nt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Et{constructor(e,n=Et.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Et(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,nt.BLACK,null,null))}remove(e){return new Et(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,nt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Zo(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Zo(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Zo(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Zo(this.root_,null,this.comparator_,!0,e)}}Et.EMPTY_NODE=new Z2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(t,e){return Xr(t.name,e.name)}function Zd(t,e){return Xr(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pu;function tS(t){Pu=t}const d0=function(t){return typeof t=="number"?"number:"+U1(t):"string:"+t},f0=function(t){if(t.isLeafNode()){const e=t.val();$(typeof e=="string"||typeof e=="number"||typeof e=="object"&&gn(e,".sv"),"Priority must be a string or number.")}else $(t===Pu||t.isEmpty(),"priority of unexpected type.");$(t===Pu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sp;class et{constructor(e,n=et.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,$(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),f0(this.priorityNode_)}static set __childrenNodeConstructor(e){Sp=e}static get __childrenNodeConstructor(){return Sp}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new et(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:et.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return oe(e)?this:re(e)===".priority"?this.priorityNode_:et.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:et.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=re(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:($(r!==".priority"||fr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,et.__childrenNodeConstructor.EMPTY_NODE.updateChild(be(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+d0(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=U1(this.value_):e+=this.value_,this.lazyHash_=$1(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===et.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof et.__childrenNodeConstructor?-1:($(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=et.VALUE_TYPE_ORDER.indexOf(n),s=et.VALUE_TYPE_ORDER.indexOf(r);return $(i>=0,"Unknown leaf type: "+n),$(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}et.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h0,p0;function nS(t){h0=t}function rS(t){p0=t}class iS extends va{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Xr(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ie.MIN}maxPost(){return new ie(Vr,new et("[PRIORITY-POST]",p0))}makePost(e,n){const r=h0(e);return new ie(n,new et("[PRIORITY-POST]",r))}toString(){return".priority"}}const Oe=new iS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS=Math.log(2);class oS{constructor(e){const n=s=>parseInt(Math.log(s)/sS,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Wl=function(t,e,n,r){t.sort(e);const i=function(c,u){const f=u-c;let d,h;if(f===0)return null;if(f===1)return d=t[c],h=n?n(d):d,new nt(h,d.node,nt.BLACK,null,null);{const x=parseInt(f/2,10)+c,v=i(c,x),w=i(x+1,u);return d=t[x],h=n?n(d):d,new nt(h,d.node,nt.BLACK,v,w)}},s=function(c){let u=null,f=null,d=t.length;const h=function(v,w){const k=d-v,m=d;d-=v;const g=i(k+1,m),y=t[k],b=n?n(y):y;x(new nt(b,y.node,w,null,g))},x=function(v){u?(u.left=v,u=v):(f=v,u=v)};for(let v=0;v<c.count;++v){const w=c.nextBitIsOne(),k=Math.pow(2,c.count-(v+1));w?h(k,nt.BLACK):(h(k,nt.BLACK),h(k,nt.RED))}return f},o=new oS(t.length),a=s(o);return new Et(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _c;const li={};class Rn{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return $(li&&Oe,"ChildrenNode.ts has not been loaded"),_c=_c||new Rn({".priority":li},{".priority":Oe}),_c}get(e){const n=zi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Et?n:null}hasIndex(e){return gn(this.indexSet_,e.toString())}addIndex(e,n){$(e!==Ai,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(ie.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Wl(r,e.getCompare()):a=li;const c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;const f=Object.assign({},this.indexes_);return f[c]=a,new Rn(f,u)}addToIndexes(e,n){const r=Ol(this.indexes_,(i,s)=>{const o=zi(this.indexSet_,s);if($(o,"Missing index implementation for "+s),i===li)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(ie.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),Wl(a,o.getCompare())}else return li;else{const a=n.get(e.name);let c=i;return a&&(c=c.remove(new ie(e.name,a))),c.insert(e,e.node)}});return new Rn(r,this.indexSet_)}removeFromIndexes(e,n){const r=Ol(this.indexes_,i=>{if(i===li)return i;{const s=n.get(e.name);return s?i.remove(new ie(e.name,s)):i}});return new Rn(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ms;class K{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&f0(this.priorityNode_),this.children_.isEmpty()&&$(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ms||(ms=new K(new Et(Zd),null,Rn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ms}updatePriority(e){return this.children_.isEmpty()?this:new K(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ms:n}}getChild(e){const n=re(e);return n===null?this:this.getImmediateChild(n).getChild(be(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if($(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new ie(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?ms:this.priorityNode_;return new K(i,o,s)}}updateChild(e,n){const r=re(e);if(r===null)return n;{$(re(e)!==".priority"||fr(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(be(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Oe,(o,a)=>{n[o]=a.val(e),r++,s&&K.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+d0(this.getPriority().val())+":"),this.forEachChild(Oe,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":$1(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new ie(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ie(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ie(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,ie.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,ie.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===_o?-1:0}withIndex(e){if(e===Ai||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new K(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ai||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Oe),i=n.getIterator(Oe);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ai?null:this.indexMap_.get(e.toString())}}K.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class lS extends K{constructor(){super(new Et(Zd),K.EMPTY_NODE,Rn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return K.EMPTY_NODE}isEmpty(){return!1}}const _o=new lS;Object.defineProperties(ie,{MIN:{value:new ie(Li,K.EMPTY_NODE)},MAX:{value:new ie(Vr,_o)}});u0.__EMPTY_NODE=K.EMPTY_NODE;et.__childrenNodeConstructor=K;tS(_o);rS(_o);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS=!0;function Ge(t,e=null){if(t===null)return K.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),$(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new et(n,Ge(e))}if(!(t instanceof Array)&&aS){const n=[];let r=!1;if(ut(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=Ge(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new ie(o,c)))}}),n.length===0)return K.EMPTY_NODE;const s=Wl(n,eS,o=>o.name,Zd);if(r){const o=Wl(n,Oe.getCompare());return new K(s,Ge(e),new Rn({".priority":o},{".priority":Oe}))}else return new K(s,Ge(e),Rn.Default)}else{let n=K.EMPTY_NODE;return ut(t,(r,i)=>{if(gn(t,r)&&r.substring(0,1)!=="."){const s=Ge(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Ge(e))}}nS(Ge);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS extends va{constructor(e){super(),this.indexPath_=e,$(!oe(e)&&re(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Xr(e.name,n.name):s}makePost(e,n){const r=Ge(e),i=K.EMPTY_NODE.updateChild(this.indexPath_,r);return new ie(n,i)}maxPost(){const e=K.EMPTY_NODE.updateChild(this.indexPath_,_o);return new ie(Vr,e)}toString(){return no(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS extends va{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Xr(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ie.MIN}maxPost(){return ie.MAX}makePost(e,n){const r=Ge(e);return new ie(n,r)}toString(){return".value"}}const dS=new uS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(t){return{type:"value",snapshotNode:t}}function $i(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ro(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function io(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function fS(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){$(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(ro(n,a)):$(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange($i(n,r)):o.trackChildChange(io(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Oe,(i,s)=>{n.hasChild(i)||r.trackChildChange(ro(i,s))}),n.isLeafNode()||n.forEachChild(Oe,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(io(i,s,o))}else r.trackChildChange($i(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?K.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this.indexedFilter_=new ef(e.getIndex()),this.index_=e.getIndex(),this.startPost_=so.getStartPost_(e),this.endPost_=so.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new ie(n,r))||(r=K.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=K.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(K.EMPTY_NODE);const s=this;return n.forEachChild(Oe,(o,a)=>{s.matches(new ie(o,a))||(i=i.updateImmediateChild(o,K.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new so(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new ie(n,r))||(r=K.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=K.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=K.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(K.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,K.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,x)=>d(x,h)}else o=this.index_.getCompare();const a=e;$(a.numChildren()===this.limit_,"");const c=new ie(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),f=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=i.getChildAfterChild(this.index_,u,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const x=h==null?1:o(h,c);if(f&&!r.isEmpty()&&x>=0)return s!=null&&s.trackChildChange(io(n,r,d)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(ro(n,d));const w=a.updateImmediateChild(n,K.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s!=null&&s.trackChildChange($i(h.name,h.node)),w.updateImmediateChild(h.name,h.node)):w}}else return r.isEmpty()?e:f&&o(u,c)>=0?(s!=null&&(s.trackChildChange(ro(u.name,u.node)),s.trackChildChange($i(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,K.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Oe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return $(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return $(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Li}hasEnd(){return this.endSet_}getIndexEndValue(){return $(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return $(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Vr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return $(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Oe}copy(){const e=new tf;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function pS(t){return t.loadsAllData()?new ef(t.getIndex()):t.hasLimit()?new hS(t):new so(t)}function wp(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Oe?n="$priority":t.index_===dS?n="$value":t.index_===Ai?n="$key":($(t.index_ instanceof cS,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Qe(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Qe(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Qe(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Qe(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Qe(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Cp(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Oe&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul extends o0{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=xo("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:($(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Ul.getListenId_(e,r),a={};this.listens_[o]=a;const c=wp(e._queryParams);this.restRequest_(s+".json",c,(u,f)=>{let d=f;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),zi(this.listens_,o)===a){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",i(h,null)}})}unlisten(e,n){const r=Ul.getListenId_(e,n);delete this.listens_[r]}get(e){const n=wp(e._queryParams),r=e._path.toString(),i=new mo;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+$_(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Js(a.responseText)}catch{xt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&xt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(){this.rootNode_=K.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(){return{value:null,children:new Map}}function m0(t,e,n){if(oe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=re(e);t.children.has(r)||t.children.set(r,Hl());const i=t.children.get(r);e=be(e),m0(i,e,n)}}function Fu(t,e,n){t.value!==null?n(e,t.value):mS(t,(r,i)=>{const s=new ye(e.toString()+"/"+r);Fu(i,s,n)})}function mS(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ut(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep=10*1e3,vS=30*1e3,xS=5*60*1e3;class _S{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new yS(e);const r=Ep+(vS-Ep)*Math.random();As(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;ut(e,(i,s)=>{s>0&&gn(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),As(this.reportStats_.bind(this),Math.floor(Math.random()*2*xS))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var en;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(en||(en={}));function nf(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function rf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function sf(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=en.ACK_USER_WRITE,this.source=nf()}operationForChild(e){if(oe(this.path)){if(this.affectedTree.value!=null)return $(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ye(e));return new Vl(fe(),n,this.revert)}}else return $(re(this.path)===e,"operationForChild called for unrelated child."),new Vl(be(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n){this.source=e,this.path=n,this.type=en.LISTEN_COMPLETE}operationForChild(e){return oe(this.path)?new oo(this.source,fe()):new oo(this.source,be(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=en.OVERWRITE}operationForChild(e){return oe(this.path)?new Yr(this.source,fe(),this.snap.getImmediateChild(e)):new Yr(this.source,be(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=en.MERGE}operationForChild(e){if(oe(this.path)){const n=this.children.subtree(new ye(e));return n.isEmpty()?null:n.value?new Yr(this.source,fe(),n.value):new Wi(this.source,fe(),n)}else return $(re(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Wi(this.source,be(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(oe(e))return this.isFullyInitialized()&&!this.filtered_;const n=re(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function SS(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(fS(o.childName,o.snapshotNode))}),ys(t,i,"child_removed",e,r,n),ys(t,i,"child_added",e,r,n),ys(t,i,"child_moved",s,r,n),ys(t,i,"child_changed",e,r,n),ys(t,i,"value",e,r,n),i}function ys(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,c)=>CS(t,a,c)),o.forEach(a=>{const c=wS(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function wS(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function CS(t,e,n){if(e.childName==null||n.childName==null)throw qi("Should only compare child_ events.");const r=new ie(e.childName,e.snapshotNode),i=new ie(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(t,e){return{eventCache:t,serverCache:e}}function Ns(t,e,n,r){return xa(new hr(e,n,r),t.serverCache)}function y0(t,e,n,r){return xa(t.eventCache,new hr(e,n,r))}function Yl(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Gr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bc;const ES=()=>(bc||(bc=new Et(c2)),bc);class xe{constructor(e,n=ES()){this.value=e,this.children=n}static fromObject(e){let n=new xe(null);return ut(e,(r,i)=>{n=n.set(new ye(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:fe(),value:this.value};if(oe(e))return null;{const r=re(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(be(e),n);return s!=null?{path:Me(new ye(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(oe(e))return this;{const n=re(e),r=this.children.get(n);return r!==null?r.subtree(be(e)):new xe(null)}}set(e,n){if(oe(e))return new xe(n,this.children);{const r=re(e),s=(this.children.get(r)||new xe(null)).set(be(e),n),o=this.children.insert(r,s);return new xe(this.value,o)}}remove(e){if(oe(e))return this.children.isEmpty()?new xe(null):new xe(null,this.children);{const n=re(e),r=this.children.get(n);if(r){const i=r.remove(be(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new xe(null):new xe(this.value,s)}else return this}}get(e){if(oe(e))return this.value;{const n=re(e),r=this.children.get(n);return r?r.get(be(e)):null}}setTree(e,n){if(oe(e))return n;{const r=re(e),s=(this.children.get(r)||new xe(null)).setTree(be(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new xe(this.value,o)}}fold(e){return this.fold_(fe(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Me(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,fe(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(oe(e))return null;{const s=re(e),o=this.children.get(s);return o?o.findOnPath_(be(e),Me(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,fe(),n)}foreachOnPath_(e,n,r){if(oe(e))return this;{this.value&&r(n,this.value);const i=re(e),s=this.children.get(i);return s?s.foreachOnPath_(be(e),Me(n,i),r):new xe(null)}}foreach(e){this.foreach_(fe(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Me(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.writeTree_=e}static empty(){return new rn(new xe(null))}}function Ds(t,e,n){if(oe(e))return new rn(new xe(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=yt(i,e);return s=s.updateChild(o,n),new rn(t.writeTree_.set(i,s))}else{const i=new xe(n),s=t.writeTree_.setTree(e,i);return new rn(s)}}}function Mu(t,e,n){let r=t;return ut(n,(i,s)=>{r=Ds(r,Me(e,i),s)}),r}function kp(t,e){if(oe(e))return rn.empty();{const n=t.writeTree_.setTree(e,new xe(null));return new rn(n)}}function Ou(t,e){return Jr(t,e)!=null}function Jr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(yt(n.path,e)):null}function Tp(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Oe,(r,i)=>{e.push(new ie(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new ie(r,i.value))}),e}function ar(t,e){if(oe(e))return t;{const n=Jr(t,e);return n!=null?new rn(new xe(n)):new rn(t.writeTree_.subtree(e))}}function Bu(t){return t.writeTree_.isEmpty()}function Ui(t,e){return v0(fe(),t.writeTree_,e)}function v0(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?($(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=v0(Me(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Me(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(t,e){return S0(e,t)}function kS(t,e,n,r,i){$(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ds(t.visibleWrites,e,n)),t.lastWriteId=r}function TS(t,e,n,r){$(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Mu(t.visibleWrites,e,n),t.lastWriteId=r}function RS(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function jS(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);$(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&IS(a,r.path)?i=!1:$t(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return AS(t),!0;if(r.snap)t.visibleWrites=kp(t.visibleWrites,r.path);else{const a=r.children;ut(a,c=>{t.visibleWrites=kp(t.visibleWrites,Me(r.path,c))})}return!0}else return!1}function IS(t,e){if(t.snap)return $t(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&$t(Me(t.path,n),e))return!0;return!1}function AS(t){t.visibleWrites=x0(t.allWrites,NS,fe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function NS(t){return t.visible}function x0(t,e,n){let r=rn.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)$t(n,o)?(a=yt(n,o),r=Ds(r,a,s.snap)):$t(o,n)&&(a=yt(o,n),r=Ds(r,fe(),s.snap.getChild(a)));else if(s.children){if($t(n,o))a=yt(n,o),r=Mu(r,a,s.children);else if($t(o,n))if(a=yt(o,n),oe(a))r=Mu(r,fe(),s.children);else{const c=zi(s.children,re(a));if(c){const u=c.getChild(be(a));r=Ds(r,fe(),u)}}}else throw qi("WriteRecord should have .snap or .children")}}return r}function _0(t,e,n,r,i){if(!r&&!i){const s=Jr(t.visibleWrites,e);if(s!=null)return s;{const o=ar(t.visibleWrites,e);if(Bu(o))return n;if(n==null&&!Ou(o,fe()))return null;{const a=n||K.EMPTY_NODE;return Ui(o,a)}}}else{const s=ar(t.visibleWrites,e);if(!i&&Bu(s))return n;if(!i&&n==null&&!Ou(s,fe()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&($t(u.path,e)||$t(e,u.path))},a=x0(t.allWrites,o,e),c=n||K.EMPTY_NODE;return Ui(a,c)}}}function DS(t,e,n){let r=K.EMPTY_NODE;const i=Jr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Oe,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=ar(t.visibleWrites,e);return n.forEachChild(Oe,(o,a)=>{const c=Ui(ar(s,new ye(o)),a);r=r.updateImmediateChild(o,c)}),Tp(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=ar(t.visibleWrites,e);return Tp(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function PS(t,e,n,r,i){$(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Me(e,n);if(Ou(t.visibleWrites,s))return null;{const o=ar(t.visibleWrites,s);return Bu(o)?i.getChild(n):Ui(o,i.getChild(n))}}function FS(t,e,n,r){const i=Me(e,n),s=Jr(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=ar(t.visibleWrites,i);return Ui(o,r.getNode().getImmediateChild(n))}else return null}function MS(t,e){return Jr(t.visibleWrites,e)}function OS(t,e,n,r,i,s,o){let a;const c=ar(t.visibleWrites,e),u=Jr(c,fe());if(u!=null)a=u;else if(n!=null)a=Ui(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const f=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let x=h.getNext();for(;x&&f.length<i;)d(x,r)!==0&&f.push(x),x=h.getNext();return f}else return[]}function BS(){return{visibleWrites:rn.empty(),allWrites:[],lastWriteId:-1}}function Gl(t,e,n,r){return _0(t.writeTree,t.treePath,e,n,r)}function of(t,e){return DS(t.writeTree,t.treePath,e)}function Rp(t,e,n,r){return PS(t.writeTree,t.treePath,e,n,r)}function Ql(t,e){return MS(t.writeTree,Me(t.treePath,e))}function zS(t,e,n,r,i,s){return OS(t.writeTree,t.treePath,e,n,r,i,s)}function lf(t,e,n){return FS(t.writeTree,t.treePath,e,n)}function b0(t,e){return S0(Me(t.treePath,e),t.writeTree)}function S0(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;$(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),$(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,io(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,ro(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,$i(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,io(r,e.snapshotNode,i.oldSnap));else throw qi("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const w0=new $S;class af{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new hr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return lf(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Gr(this.viewCache_),s=zS(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(t){return{filter:t}}function US(t,e){$(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),$(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function HS(t,e,n,r,i){const s=new LS;let o,a;if(n.type===en.OVERWRITE){const u=n;u.source.fromUser?o=zu(t,e,u.path,u.snap,r,i,s):($(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!oe(u.path),o=Kl(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===en.MERGE){const u=n;u.source.fromUser?o=YS(t,e,u.path,u.children,r,i,s):($(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=Lu(t,e,u.path,u.children,r,i,a,s))}else if(n.type===en.ACK_USER_WRITE){const u=n;u.revert?o=KS(t,e,u.path,r,i,s):o=GS(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===en.LISTEN_COMPLETE)o=QS(t,e,n.path,r,s);else throw qi("Unknown operation type: "+n.type);const c=s.getChanges();return VS(e,o,c),{viewCache:o,changes:c}}function VS(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Yl(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(g0(Yl(e)))}}function C0(t,e,n,r,i,s){const o=e.eventCache;if(Ql(r,n)!=null)return e;{let a,c;if(oe(n))if($(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Gr(e),f=u instanceof K?u:K.EMPTY_NODE,d=of(r,f);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const u=Gl(r,Gr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=re(n);if(u===".priority"){$(fr(n)===1,"Can't have a priority with additional path components");const f=o.getNode();c=e.serverCache.getNode();const d=Rp(r,n,f,c);d!=null?a=t.filter.updatePriority(f,d):a=o.getNode()}else{const f=be(n);let d;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();const h=Rp(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(u).updateChild(f,h):d=o.getNode().getImmediateChild(u)}else d=lf(r,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,f,i,s):a=o.getNode()}}return Ns(e,a,o.isFullyInitialized()||oe(n),t.filter.filtersNodes())}}function Kl(t,e,n,r,i,s,o,a){const c=e.serverCache;let u;const f=o?t.filter:t.filter.getIndexedFilter();if(oe(n))u=f.updateFullNode(c.getNode(),r,null);else if(f.filtersNodes()&&!c.isFiltered()){const x=c.getNode().updateChild(n,r);u=f.updateFullNode(c.getNode(),x,null)}else{const x=re(n);if(!c.isCompleteForPath(n)&&fr(n)>1)return e;const v=be(n),k=c.getNode().getImmediateChild(x).updateChild(v,r);x===".priority"?u=f.updatePriority(c.getNode(),k):u=f.updateChild(c.getNode(),x,k,v,w0,null)}const d=y0(e,u,c.isFullyInitialized()||oe(n),f.filtersNodes()),h=new af(i,d,s);return C0(t,d,n,i,h,a)}function zu(t,e,n,r,i,s,o){const a=e.eventCache;let c,u;const f=new af(i,e,s);if(oe(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Ns(e,u,!0,t.filter.filtersNodes());else{const d=re(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=Ns(e,u,a.isFullyInitialized(),a.isFiltered());else{const h=be(n),x=a.getNode().getImmediateChild(d);let v;if(oe(h))v=r;else{const w=f.getCompleteChild(d);w!=null?qd(h)===".priority"&&w.getChild(a0(h)).isEmpty()?v=w:v=w.updateChild(h,r):v=K.EMPTY_NODE}if(x.equals(v))c=e;else{const w=t.filter.updateChild(a.getNode(),d,v,h,f,o);c=Ns(e,w,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function jp(t,e){return t.eventCache.isCompleteForChild(e)}function YS(t,e,n,r,i,s,o){let a=e;return r.foreach((c,u)=>{const f=Me(n,c);jp(e,re(f))&&(a=zu(t,a,f,u,i,s,o))}),r.foreach((c,u)=>{const f=Me(n,c);jp(e,re(f))||(a=zu(t,a,f,u,i,s,o))}),a}function Ip(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Lu(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;oe(n)?u=r:u=new xe(null).setTree(n,r);const f=e.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(f.hasChild(d)){const x=e.serverCache.getNode().getImmediateChild(d),v=Ip(t,x,h);c=Kl(t,c,new ye(d),v,i,s,o,a)}}),u.children.inorderTraversal((d,h)=>{const x=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!f.hasChild(d)&&!x){const v=e.serverCache.getNode().getImmediateChild(d),w=Ip(t,v,h);c=Kl(t,c,new ye(d),w,i,s,o,a)}}),c}function GS(t,e,n,r,i,s,o){if(Ql(i,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(oe(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Kl(t,e,n,c.getNode().getChild(n),i,s,a,o);if(oe(n)){let u=new xe(null);return c.getNode().forEachChild(Ai,(f,d)=>{u=u.set(new ye(f),d)}),Lu(t,e,n,u,i,s,a,o)}else return e}else{let u=new xe(null);return r.foreach((f,d)=>{const h=Me(n,f);c.isCompleteForPath(h)&&(u=u.set(f,c.getNode().getChild(h)))}),Lu(t,e,n,u,i,s,a,o)}}function QS(t,e,n,r,i){const s=e.serverCache,o=y0(e,s.getNode(),s.isFullyInitialized()||oe(n),s.isFiltered());return C0(t,o,n,r,w0,i)}function KS(t,e,n,r,i,s){let o;if(Ql(r,n)!=null)return e;{const a=new af(r,e,i),c=e.eventCache.getNode();let u;if(oe(n)||re(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=Gl(r,Gr(e));else{const d=e.serverCache.getNode();$(d instanceof K,"serverChildren would be complete if leaf node"),f=of(r,d)}f=f,u=t.filter.updateFullNode(c,f,s)}else{const f=re(n);let d=lf(r,f,e.serverCache);d==null&&e.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),d!=null?u=t.filter.updateChild(c,f,d,be(n),a,s):e.eventCache.getNode().hasChild(f)?u=t.filter.updateChild(c,f,K.EMPTY_NODE,be(n),a,s):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Gl(r,Gr(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||Ql(r,fe())!=null,Ns(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new ef(r.getIndex()),s=pS(r);this.processor_=WS(s);const o=n.serverCache,a=n.eventCache,c=i.updateFullNode(K.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(K.EMPTY_NODE,a.getNode(),null),f=new hr(c,o.isFullyInitialized(),i.filtersNodes()),d=new hr(u,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=xa(d,f),this.eventGenerator_=new bS(this.query_)}get query(){return this.query_}}function XS(t){return t.viewCache_.serverCache.getNode()}function JS(t){return Yl(t.viewCache_)}function ZS(t,e){const n=Gr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!oe(e)&&!n.getImmediateChild(re(e)).isEmpty())?n.getChild(e):null}function Ap(t){return t.eventRegistrations_.length===0}function ew(t,e){t.eventRegistrations_.push(e)}function Np(t,e,n){const r=[];if(n){$(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Dp(t,e,n,r){e.type===en.MERGE&&e.source.queryId!==null&&($(Gr(t.viewCache_),"We should always have a full cache before handling merges"),$(Yl(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=HS(t.processor_,i,e,n,r);return US(t.processor_,s.viewCache),$(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,E0(t,s.changes,s.viewCache.eventCache.getNode(),null)}function tw(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Oe,(s,o)=>{r.push($i(s,o))}),n.isFullyInitialized()&&r.push(g0(n.getNode())),E0(t,r,n.getNode(),e)}function E0(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return SS(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ql;class k0{constructor(){this.views=new Map}}function nw(t){$(!ql,"__referenceConstructor has already been defined"),ql=t}function rw(){return $(ql,"Reference.ts has not been loaded"),ql}function iw(t){return t.views.size===0}function cf(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return $(s!=null,"SyncTree gave us an op for an invalid query."),Dp(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(Dp(o,e,n,r));return s}}function T0(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Gl(n,i?r:null),c=!1;a?c=!0:r instanceof K?(a=of(n,r),c=!1):(a=K.EMPTY_NODE,c=!1);const u=xa(new hr(a,c,!1),new hr(r,i,!1));return new qS(e,u)}return o}function sw(t,e,n,r,i,s){const o=T0(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),ew(o,n),tw(o,n)}function ow(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=pr(t);if(i==="default")for(const[c,u]of t.views.entries())o=o.concat(Np(u,n,r)),Ap(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||s.push(u.query));else{const c=t.views.get(i);c&&(o=o.concat(Np(c,n,r)),Ap(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!pr(t)&&s.push(new(rw())(e._repo,e._path)),{removed:s,events:o}}function R0(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function cr(t,e){let n=null;for(const r of t.views.values())n=n||ZS(r,e);return n}function j0(t,e){if(e._queryParams.loadsAllData())return ba(t);{const r=e._queryIdentifier;return t.views.get(r)}}function I0(t,e){return j0(t,e)!=null}function pr(t){return ba(t)!=null}function ba(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xl;function lw(t){$(!Xl,"__referenceConstructor has already been defined"),Xl=t}function aw(){return $(Xl,"Reference.ts has not been loaded"),Xl}let cw=1;class Pp{constructor(e){this.listenProvider_=e,this.syncPointTree_=new xe(null),this.pendingWriteTree_=BS(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function A0(t,e,n,r,i){return kS(t.pendingWriteTree_,e,n,r,i),i?Ji(t,new Yr(nf(),e,n)):[]}function uw(t,e,n,r){TS(t.pendingWriteTree_,e,n,r);const i=xe.fromObject(n);return Ji(t,new Wi(nf(),e,i))}function Kn(t,e,n=!1){const r=RS(t.pendingWriteTree_,e);if(jS(t.pendingWriteTree_,e)){let s=new xe(null);return r.snap!=null?s=s.set(fe(),!0):ut(r.children,o=>{s=s.set(new ye(o),!0)}),Ji(t,new Vl(r.path,s,n))}else return[]}function bo(t,e,n){return Ji(t,new Yr(rf(),e,n))}function dw(t,e,n){const r=xe.fromObject(n);return Ji(t,new Wi(rf(),e,r))}function fw(t,e){return Ji(t,new oo(rf(),e))}function hw(t,e,n){const r=df(t,n);if(r){const i=ff(r),s=i.path,o=i.queryId,a=yt(s,e),c=new oo(sf(o),a);return hf(t,s,c)}else return[]}function Jl(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||I0(o,e))){const c=ow(o,e,n,r);iw(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=c.removed;if(a=c.events,!i){const f=u.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(h,x)=>pr(x));if(f&&!d){const h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){const x=mw(h);for(let v=0;v<x.length;++v){const w=x[v],k=w.query,m=F0(t,w);t.listenProvider_.startListening(Ps(k),lo(t,k),m.hashFn,m.onComplete)}}}!d&&u.length>0&&!r&&(f?t.listenProvider_.stopListening(Ps(e),null):u.forEach(h=>{const x=t.queryToTagMap.get(Sa(h));t.listenProvider_.stopListening(Ps(h),x)}))}yw(t,u)}return a}function N0(t,e,n,r){const i=df(t,r);if(i!=null){const s=ff(i),o=s.path,a=s.queryId,c=yt(o,e),u=new Yr(sf(a),c,n);return hf(t,o,u)}else return[]}function pw(t,e,n,r){const i=df(t,r);if(i){const s=ff(i),o=s.path,a=s.queryId,c=yt(o,e),u=xe.fromObject(n),f=new Wi(sf(a),c,u);return hf(t,o,f)}else return[]}function $u(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,x)=>{const v=yt(h,i);s=s||cr(x,v),o=o||pr(x)});let a=t.syncPointTree_.get(i);a?(o=o||pr(a),s=s||cr(a,fe())):(a=new k0,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=K.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((x,v)=>{const w=cr(v,fe());w&&(s=s.updateImmediateChild(x,w))}));const u=I0(a,e);if(!u&&!e._queryParams.loadsAllData()){const h=Sa(e);$(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const x=vw();t.queryToTagMap.set(h,x),t.tagToQueryMap.set(x,h)}const f=_a(t.pendingWriteTree_,i);let d=sw(a,e,n,f,s,c);if(!u&&!o&&!r){const h=j0(a,e);d=d.concat(xw(t,e,h))}return d}function uf(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=yt(o,e),u=cr(a,c);if(u)return u});return _0(i,e,s,n,!0)}function gw(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,f)=>{const d=yt(u,n);r=r||cr(f,d)});let i=t.syncPointTree_.get(n);i?r=r||cr(i,fe()):(i=new k0,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new hr(r,!0,!1):null,a=_a(t.pendingWriteTree_,e._path),c=T0(i,e,a,s?o.getNode():K.EMPTY_NODE,s);return JS(c)}function Ji(t,e){return D0(e,t.syncPointTree_,null,_a(t.pendingWriteTree_,fe()))}function D0(t,e,n,r){if(oe(t.path))return P0(t,e,n,r);{const i=e.get(fe());n==null&&i!=null&&(n=cr(i,fe()));let s=[];const o=re(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const u=n?n.getImmediateChild(o):null,f=b0(r,o);s=s.concat(D0(a,c,u,f))}return i&&(s=s.concat(cf(i,t,r,n))),s}}function P0(t,e,n,r){const i=e.get(fe());n==null&&i!=null&&(n=cr(i,fe()));let s=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,u=b0(r,o),f=t.operationForChild(o);f&&(s=s.concat(P0(f,a,c,u)))}),i&&(s=s.concat(cf(i,t,r,n))),s}function F0(t,e){const n=e.query,r=lo(t,n);return{hashFn:()=>(XS(e)||K.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?hw(t,n._path,r):fw(t,n._path);{const s=f2(i,n);return Jl(t,n,null,s)}}}}function lo(t,e){const n=Sa(e);return t.queryToTagMap.get(n)}function Sa(t){return t._path.toString()+"$"+t._queryIdentifier}function df(t,e){return t.tagToQueryMap.get(e)}function ff(t){const e=t.indexOf("$");return $(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ye(t.substr(0,e))}}function hf(t,e,n){const r=t.syncPointTree_.get(e);$(r,"Missing sync point for query tag that we're tracking");const i=_a(t.pendingWriteTree_,e);return cf(r,n,i,null)}function mw(t){return t.fold((e,n,r)=>{if(n&&pr(n))return[ba(n)];{let i=[];return n&&(i=R0(n)),ut(r,(s,o)=>{i=i.concat(o)}),i}})}function Ps(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(aw())(t._repo,t._path):t}function yw(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=Sa(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function vw(){return cw++}function xw(t,e,n){const r=e._path,i=lo(t,e),s=F0(t,n),o=t.listenProvider_.startListening(Ps(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)$(!pr(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((u,f,d)=>{if(!oe(u)&&f&&pr(f))return[ba(f).query];{let h=[];return f&&(h=h.concat(R0(f).map(x=>x.query))),ut(d,(x,v)=>{h=h.concat(v)}),h}});for(let u=0;u<c.length;++u){const f=c[u];t.listenProvider_.stopListening(Ps(f),lo(t,f))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new pf(n)}node(){return this.node_}}class gf{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Me(this.path_,e);return new gf(this.syncTree_,n)}node(){return uf(this.syncTree_,this.path_)}}const _w=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Fp=function(t,e,n){if(!t||typeof t!="object")return t;if($(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return bw(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Sw(t[".sv"],e);$(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},bw=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:$(!1,"Unexpected server value: "+t)}},Sw=function(t,e,n){t.hasOwnProperty("increment")||$(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&$(!1,"Unexpected increment value: "+r);const i=e.node();if($(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},M0=function(t,e,n,r){return mf(e,new gf(n,t),r)},O0=function(t,e,n){return mf(t,new pf(e),n)};function mf(t,e,n){const r=t.getPriority().val(),i=Fp(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=Fp(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new et(a,Ge(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new et(i))),o.forEachChild(Oe,(a,c)=>{const u=mf(c,e.getImmediateChild(a),n);u!==c&&(s=s.updateImmediateChild(a,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function vf(t,e){let n=e instanceof ye?e:new ye(e),r=t,i=re(n);for(;i!==null;){const s=zi(r.node.children,i)||{children:{},childCount:0};r=new yf(i,r,s),n=be(n),i=re(n)}return r}function Zi(t){return t.node.value}function B0(t,e){t.node.value=e,Wu(t)}function z0(t){return t.node.childCount>0}function ww(t){return Zi(t)===void 0&&!z0(t)}function wa(t,e){ut(t.node.children,(n,r)=>{e(new yf(n,t,r))})}function L0(t,e,n,r){n&&!r&&e(t),wa(t,i=>{L0(i,e,!0,r)}),n&&r&&e(t)}function Cw(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function So(t){return new ye(t.parent===null?t.name:So(t.parent)+"/"+t.name)}function Wu(t){t.parent!==null&&Ew(t.parent,t.name,t)}function Ew(t,e,n){const r=ww(n),i=gn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Wu(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Wu(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw=/[\[\].#$\/\u0000-\u001F\u007F]/,Tw=/[\[\].#$\u0000-\u001F\u007F]/,Sc=10*1024*1024,xf=function(t){return typeof t=="string"&&t.length!==0&&!kw.test(t)},$0=function(t){return typeof t=="string"&&t.length!==0&&!Tw.test(t)},Rw=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),$0(t)},jw=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Vd(t)||t&&typeof t=="object"&&gn(t,".sv")},W0=function(t,e,n,r){r&&e===void 0||Ca(ma(t,"value"),e,n)},Ca=function(t,e,n){const r=n instanceof ye?new Y2(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ar(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ar(r)+" with contents = "+e.toString());if(Vd(e))throw new Error(t+"contains "+e.toString()+" "+Ar(r));if(typeof e=="string"&&e.length>Sc/3&&ya(e)>Sc)throw new Error(t+"contains a string greater than "+Sc+" utf8 bytes "+Ar(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(ut(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!xf(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ar(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);G2(r,o),Ca(t,a,r),Q2(r)}),i&&s)throw new Error(t+' contains ".value" child '+Ar(r)+" in addition to actual children.")}},Iw=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=no(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!xf(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(V2);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&$t(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},Aw=function(t,e,n,r){if(r&&e===void 0)return;const i=ma(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];ut(e,(o,a)=>{const c=new ye(o);if(Ca(i,a,Me(n,c)),qd(c)===".priority"&&!jw(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(c)}),Iw(i,s)},U0=function(t,e,n,r){if(!(r&&n===void 0)&&!$0(n))throw new Error(ma(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Nw=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),U0(t,e,n,r)},H0=function(t,e){if(re(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Dw=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!xf(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Rw(n))throw new Error(ma(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ea(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Xd(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function V0(t,e,n){Ea(t,n),Y0(t,r=>Xd(r,e))}function Vt(t,e,n){Ea(t,n),Y0(t,r=>$t(r,e)||$t(e,r))}function Y0(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(Fw(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Fw(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Br&&lt("event: "+n.toString()),Xi(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="repo_interrupt",Ow=25;class Bw{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Pw,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Hl(),this.transactionQueueTree_=new yf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function zw(t,e,n){if(t.stats_=Qd(t.repoInfo_),t.forceRestClient_||m2())t.server_=new Ul(t.repoInfo_,(r,i,s,o)=>{Mp(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Op(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Qe(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new In(t.repoInfo_,e,(r,i,s,o)=>{Mp(t,r,i,s,o)},r=>{Op(t,r)},r=>{Lw(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=b2(t.repoInfo_,()=>new _S(t.stats_,t.server_)),t.infoData_=new gS,t.infoSyncTree_=new Pp({startListening:(r,i,s,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=bo(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),_f(t,"connected",!1),t.serverSyncTree_=new Pp({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{const u=o(a,c);Vt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function G0(t){const n=t.infoData_.getNode(new ye(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ka(t){return _w({timestamp:G0(t)})}function Mp(t,e,n,r,i){t.dataUpdateCount++;const s=new ye(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const c=Ol(n,u=>Ge(u));o=pw(t.serverSyncTree_,s,c,i)}else{const c=Ge(n);o=N0(t.serverSyncTree_,s,c,i)}else if(r){const c=Ol(n,u=>Ge(u));o=dw(t.serverSyncTree_,s,c)}else{const c=Ge(n);o=bo(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Hi(t,s)),Vt(t.eventQueue_,a,o)}function Op(t,e){_f(t,"connected",e),e===!1&&Hw(t)}function Lw(t,e){ut(e,(n,r)=>{_f(t,n,r)})}function _f(t,e,n){const r=new ye("/.info/"+e),i=Ge(n);t.infoData_.updateSnapshot(r,i);const s=bo(t.infoSyncTree_,r,i);Vt(t.eventQueue_,r,s)}function bf(t){return t.nextWriteId_++}function $w(t,e,n){const r=gw(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=Ge(i).withIndex(e._queryParams.getIndex());$u(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=bo(t.serverSyncTree_,e._path,s);else{const a=lo(t.serverSyncTree_,e);o=N0(t.serverSyncTree_,e._path,s,a)}return Vt(t.eventQueue_,e._path,o),Jl(t.serverSyncTree_,e,n,null,!0),s},i=>(wo(t,"get for query "+Qe(e)+" failed: "+i),Promise.reject(new Error(i))))}function Ww(t,e,n,r,i){wo(t,"set",{path:e.toString(),value:n,priority:r});const s=ka(t),o=Ge(n,r),a=uf(t.serverSyncTree_,e),c=O0(o,a,s),u=bf(t),f=A0(t.serverSyncTree_,e,c,u,!0);Ea(t.eventQueue_,f),t.server_.put(e.toString(),o.val(!0),(h,x)=>{const v=h==="ok";v||xt("set at "+e+" failed: "+h);const w=Kn(t.serverSyncTree_,u,!v);Vt(t.eventQueue_,e,w),Uu(t,i,h,x)});const d=wf(t,e);Hi(t,d),Vt(t.eventQueue_,d,[])}function Uw(t,e,n,r){wo(t,"update",{path:e.toString(),value:n});let i=!0;const s=ka(t),o={};if(ut(n,(a,c)=>{i=!1,o[a]=M0(Me(e,a),Ge(c),t.serverSyncTree_,s)}),i)lt("update() called with empty data.  Don't do anything."),Uu(t,r,"ok",void 0);else{const a=bf(t),c=uw(t.serverSyncTree_,e,o,a);Ea(t.eventQueue_,c),t.server_.merge(e.toString(),n,(u,f)=>{const d=u==="ok";d||xt("update at "+e+" failed: "+u);const h=Kn(t.serverSyncTree_,a,!d),x=h.length>0?Hi(t,e):e;Vt(t.eventQueue_,x,h),Uu(t,r,u,f)}),ut(n,u=>{const f=wf(t,Me(e,u));Hi(t,f)}),Vt(t.eventQueue_,e,[])}}function Hw(t){wo(t,"onDisconnectEvents");const e=ka(t),n=Hl();Fu(t.onDisconnect_,fe(),(i,s)=>{const o=M0(i,s,t.serverSyncTree_,e);m0(n,i,o)});let r=[];Fu(n,fe(),(i,s)=>{r=r.concat(bo(t.serverSyncTree_,i,s));const o=wf(t,i);Hi(t,o)}),t.onDisconnect_=Hl(),Vt(t.eventQueue_,fe(),r)}function Vw(t,e,n){let r;re(e._path)===".info"?r=$u(t.infoSyncTree_,e,n):r=$u(t.serverSyncTree_,e,n),V0(t.eventQueue_,e._path,r)}function Bp(t,e,n){let r;re(e._path)===".info"?r=Jl(t.infoSyncTree_,e,n):r=Jl(t.serverSyncTree_,e,n),V0(t.eventQueue_,e._path,r)}function Yw(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Mw)}function wo(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),lt(n,...e)}function Uu(t,e,n,r){e&&Xi(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function Q0(t,e,n){return uf(t.serverSyncTree_,e,n)||K.EMPTY_NODE}function Sf(t,e=t.transactionQueueTree_){if(e||Ta(t,e),Zi(e)){const n=q0(t,e);$(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&Gw(t,So(e),n)}else z0(e)&&wa(e,n=>{Sf(t,n)})}function Gw(t,e,n){const r=n.map(u=>u.currentWriteId),i=Q0(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const f=n[u];$(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const d=yt(e,f.path);s=s.updateChild(d,f.currentOutputSnapshotRaw)}const a=s.val(!0),c=e;t.server_.put(c.toString(),a,u=>{wo(t,"transaction put response",{path:c.toString(),status:u});let f=[];if(u==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,f=f.concat(Kn(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Ta(t,vf(t.transactionQueueTree_,e)),Sf(t,t.transactionQueueTree_),Vt(t.eventQueue_,e,f);for(let h=0;h<d.length;h++)Xi(d[h])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{xt("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}Hi(t,e)}},o)}function Hi(t,e){const n=K0(t,e),r=So(n),i=q0(t,n);return Qw(t,i,r),r}function Qw(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],u=yt(n,c.path);let f=!1,d;if($(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)f=!0,d=c.abortReason,i=i.concat(Kn(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Ow)f=!0,d="maxretry",i=i.concat(Kn(t.serverSyncTree_,c.currentWriteId,!0));else{const h=Q0(t,c.path,o);c.currentInputSnapshot=h;const x=e[a].update(h.val());if(x!==void 0){Ca("transaction failed: Data returned ",x,c.path);let v=Ge(x);typeof x=="object"&&x!=null&&gn(x,".priority")||(v=v.updatePriority(h.getPriority()));const k=c.currentWriteId,m=ka(t),g=O0(v,h,m);c.currentOutputSnapshotRaw=v,c.currentOutputSnapshotResolved=g,c.currentWriteId=bf(t),o.splice(o.indexOf(k),1),i=i.concat(A0(t.serverSyncTree_,c.path,g,c.currentWriteId,c.applyLocally)),i=i.concat(Kn(t.serverSyncTree_,k,!0))}else f=!0,d="nodata",i=i.concat(Kn(t.serverSyncTree_,c.currentWriteId,!0))}Vt(t.eventQueue_,n,i),i=[],f&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Ta(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Xi(r[a]);Sf(t,t.transactionQueueTree_)}function K0(t,e){let n,r=t.transactionQueueTree_;for(n=re(e);n!==null&&Zi(r)===void 0;)r=vf(r,n),e=be(e),n=re(e);return r}function q0(t,e){const n=[];return X0(t,e,n),n.sort((r,i)=>r.order-i.order),n}function X0(t,e,n){const r=Zi(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);wa(e,i=>{X0(t,i,n)})}function Ta(t,e){const n=Zi(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,B0(e,n.length>0?n:void 0)}wa(e,r=>{Ta(t,r)})}function wf(t,e){const n=So(K0(t,e)),r=vf(t.transactionQueueTree_,e);return Cw(r,i=>{wc(t,i)}),wc(t,r),L0(r,i=>{wc(t,i)}),n}function wc(t,e){const n=Zi(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?($(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):($(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Kn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?B0(e,void 0):n.length=s+1,Vt(t.eventQueue_,So(e),i);for(let o=0;o<r.length;o++)Xi(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function qw(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):xt(`Invalid query segment '${n}' in query '${t}'`)}return e}const zp=function(t,e){const n=Xw(t),r=n.namespace;n.domain==="firebase.com"&&Mn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Mn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||l2();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Z1(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new ye(n.pathString)}},Xw=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let f=t.indexOf("/");f===-1&&(f=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(f,d)),f<d&&(i=Kw(t.substring(f,d)));const h=qw(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const x=e.slice(0,u);if(x.toLowerCase()==="localhost")n="localhost";else if(x.split(".").length<=2)n=x;else{const v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Jw=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Lp.charAt(n%64),n=Math.floor(n/64);$(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=Lp.charAt(e[i]);return $(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Qe(this.snapshot.exportVal())}}class Z0{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return $(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return oe(this._path)?null:qd(this._path)}get ref(){return new mn(this._repo,this._path)}get _queryIdentifier(){const e=Cp(this._queryParams),n=Yd(e);return n==="{}"?"default":n}get _queryObject(){return Cp(this._queryParams)}isEqual(e){if(e=qr(e),!(e instanceof Cf))return!1;const n=this._repo===e._repo,r=Xd(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+H2(this._path)}}class mn extends Cf{constructor(e,n){super(e,n,new tf,!1)}get parent(){const e=a0(this._path);return e===null?null:new mn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Vi{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ye(e),r=Yi(this.ref,e);return new Vi(this._node.getChild(n),r,Oe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Vi(i,Yi(this.ref,r),Oe)))}hasChild(e){const n=new ye(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function F(t,e){return t=qr(t),t._checkNotDeleted("ref"),e!==void 0?Yi(t._root,e):t._root}function Yi(t,e){return t=qr(t),re(t._path)===null?Nw("child","path",e,!1):U0("child","path",e,!1),new mn(t._repo,Me(t._path,e))}function Zw(t,e){t=qr(t),H0("push",t._path),W0("push",e,t._path,!0);const n=G0(t._repo),r=Jw(n),i=Yi(t,r),s=Yi(t,r);let o;return e!=null?o=V(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function V(t,e){t=qr(t),H0("set",t._path),W0("set",e,t._path,!1);const n=new mo;return Ww(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Zr(t,e){Aw("update",e,t._path,!1);const n=new mo;return Uw(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function pe(t){t=qr(t);const e=new ey(()=>{}),n=new Ra(e);return $w(t._repo,t,n).then(r=>new Vi(r,new mn(t._repo,t._path),t._queryParams.getIndex()))}class Ra{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new J0("value",this,new Vi(e.snapshotNode,new mn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Z0(this,e,n):null}matches(e){return e instanceof Ra?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Ef{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Z0(this,e,n):null}createEvent(e,n){$(e.childName!=null,"Child events should have a childName.");const r=Yi(new mn(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new J0(e.type,this,new Vi(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Ef?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function eC(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const c=n,u=(f,d)=>{Bp(t._repo,t,a),c(f,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new ey(n,s||void 0),a=e==="value"?new Ra(o):new Ef(e,o);return Vw(t._repo,t,a),()=>Bp(t._repo,t,a)}function we(t,e,n,r){return eC(t,"value",e,n,r)}nw(mn);lw(mn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="FIREBASE_DATABASE_EMULATOR_HOST",Hu={};let nC=!1;function rC(t,e,n,r){t.repoInfo_=new Z1(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function iC(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Mn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),lt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=zp(s,i),a=o.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[tC]),u?(c=!0,s=`http://${u}?ns=${a.namespace}`,o=zp(s,i),a=o.repoInfo):c=!o.repoInfo.secure;const f=i&&c?new Ii(Ii.OWNER):new v2(t.name,t.options,e);Dw("Invalid Firebase Database URL",o),oe(o.path)||Mn("Database URL must point to the root of a Firebase Database (not including a child path).");const d=oC(a,t,f,new y2(t.name,n));return new lC(d,t)}function sC(t,e){const n=Hu[e];(!n||n[t.key]!==t)&&Mn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Yw(t),delete n[t.key]}function oC(t,e,n,r){let i=Hu[e.name];i||(i={},Hu[e.name]=i);let s=i[t.toURLString()];return s&&Mn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Bw(t,nC,n,r),i[t.toURLString()]=s,s}class lC{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(zw(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new mn(this._repo,fe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(sC(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Mn("Cannot call "+e+" on a deleted database.")}}function ne(t=Hb(),e){const n=Lb(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=I_("database");r&&aC(n,...r)}return n}function aC(t,e,n,r={}){t=qr(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Mn("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Mn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ii(Ii.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:A_(r.mockUserToken,t.app.options.projectId);s=new Ii(o)}rC(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(t){n2(Ub),zl(new Zs("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return iC(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Ri(lp,ap,t),Ri(lp,ap,"esm2017")}In.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};In.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};cC();const uC={apiKey:"AIzaSyBWHR3Nu1jaQO_Z9wZOSzMF7S11DbZK1f8",authDomain:"biblecrew-dev.firebaseapp.com",databaseURL:"https://biblecrew-dev-default-rtdb.firebaseio.com",projectId:"biblecrew-dev",storageBucket:"biblecrew-dev.firebasestorage.app",messagingSenderId:"983375235150",appId:"1:983375235150:web:1d743658a6fa7abe16db1f",measurementId:"G-97Z8886EPP"},dC=M1(uC),ue=ne(dC),kf=[{crewKey:"",label:"(40)"},{crewKey:"",label:"(30)"},{crewKey:"(A)",label:"A(15)"},{crewKey:"(B)",label:"B(15)"},{crewKey:"",label:"(9)"},{crewKey:"",label:"(9)"},{crewKey:"",label:"(5)"}],he=kf.map(t=>t.crewKey);function Ve(t){const e=kf.find(n=>n.crewKey===t);return e?e.label:t}function fC(t){const e=F(ue,"classNotices");return we(e,r=>t(r.val()||{}))}async function hC(t){if(!t)return null;const e=ne();return(await pe(F(e,`classNotices/${t}`))).val()||null}async function pC(t,e){if(!t||!e)return 0;const n=ne(),i=(await pe(F(n,`users/${t}/seenNotices/${e}`))).val();return typeof i=="number"?i:parseInt(i||"0",10)||0}async function gC(t,e,n){if(!t||!e)return!1;const r=typeof n=="number"?n:parseInt(n||"0",10)||0,i=ne();return await V(F(i,`users/${t}/seenNotices/${e}`),r),!0}async function mC(t,e){if(!t)return!1;const n=ne(),r=!!(e!=null&&e.enabled),i=((e==null?void 0:e.content)||"").toString(),s=((e==null?void 0:e.title)||"").toString(),o=Date.now();if(t==="all"){const c=(await pe(F(n,"classNotices/all"))).val()||{},u=(parseInt(c.version||"0",10)||0)+1,f={enabled:r,title:s,content:i,version:u,updatedAt:o},d={};d["classNotices/all"]=f;for(const h of he){const v=(await pe(F(n,`classNotices/${h}`))).val()||{},w=(parseInt(v.version||"0",10)||0)+1;d[`classNotices/${h}`]={enabled:r,title:s,content:i,version:w,updatedAt:o}}return await Zr(F(n),d),f}else{const c=(await pe(F(n,`classNotices/${t}`))).val()||{},u=(parseInt(c.version||"0",10)||0)+1,f={enabled:r,title:s,content:i,version:u,updatedAt:o};return await V(F(n,`classNotices/${t}`),f),f}}function ty(t,e,n){const r=F(ue,`crews/${t}/users/${e}/checks`);return we(r,s=>n(s.val()||{}))}function yC(t,e){if(!t)return()=>{};const n=F(ue,`crews/${t}`);return we(n,i=>e(i.val()||{}))}function ny(t,e,n,r){const i=F(ue,`crews/${t}/users/${e}/checks/${n}`);return V(i,r)}function $p(t,e,n){const r=F(ue,`crews/${t}/users/${e}/checks`);return we(r,s=>n(s.val()||{}))}function ja(t){const e=F(ue,"users");return we(e,r=>t(r.val()||{}))}function vC(t,e){const n=F(ue,`users/${t}/crew`),r=F(ue,`users/${t}/hiddenUnassigned`),i=F(ue,`users/${t}/status`);return Promise.all([V(n,e),V(r,!1),V(i,"active")])}function xC(t){const e=F(ue,`users/${t}/crew`),n=F(ue,`users/${t}/hiddenUnassigned`),r=F(ue,`users/${t}/status`);return Promise.all([V(e,null),V(n,!1),pe(r).then(i=>i.val()==="inactive"?!0:V(r,"active"))])}async function _C(t){const e=ne(),n=F(e,`users/${t}`),s={...(await pe(n)).val()||{},crew:null,hiddenUnassigned:!1,status:"inactive",deactivatedAt:Date.now()};return await V(n,s),{uid:t,...s}}async function bC(t){const e=ne(),n=F(e,`users/${t}`),s={...(await pe(n)).val()||{},hiddenUnassigned:!1,status:"active",restoredAt:Date.now()};return await V(n,s),{uid:t,...s}}async function SC(t){const e=ne(),n=[];return n.push(V(F(e,`users/${t}`),null)),he.forEach(r=>{n.push(V(F(e,`crews/${r}/users/${t}`),null))}),n.push(V(F(e,`userBookmarks/${t}`),null)),await Promise.all(n),!0}function wC(t,e){const n=F(ue,`comments/${t}`),r=Zw(n);return V(r,e)}function CC(t,e,n){if(!t||!e)return Promise.resolve(!1);const r=F(ue,`comments/${t}/${e}`);return Zr(r,n||{})}function EC(t,e){if(!t||!e)return Promise.resolve(!1);const n=F(ue,`comments/${t}/${e}`);return V(n,null)}function kC(t){if(!t)return Promise.resolve(!1);const e=F(ue,`comments/${t}`);return V(e,null)}function TC(t,e){const n=F(ue,`comments/${t}`);return we(n,i=>{const s=i.val()||{},o=Object.entries(s).map(([a,c])=>({id:a,...c}));o.sort((a,c)=>(c.timestamp||0)-(a.timestamp||0)),e(o.slice(0,300))})}function RC(t){const e=F(ue,"comments");return we(e,r=>{const i=r.val()||{},s=[];Object.entries(i).forEach(([o,a])=>{Object.entries(a||{}).forEach(([c,u])=>{s.push({id:`${o}_${c}`,crew:o,...u})})}),s.sort((o,a)=>(a.timestamp||0)-(o.timestamp||0)),t(s.slice(0,500))})}async function jC(t=3){const e=Math.max(1,Number(t)||3),n=Date.now()-e*24*60*60*1e3,r=ne(),s=(await pe(F(r,"comments"))).val()||{},o={};return Object.entries(s).forEach(([a,c])=>{Object.entries(c||{}).forEach(([u,f])=>{const d=f&&f.timestamp||0;d&&d<n&&(o[`comments/${a}/${u}`]=null)})}),Object.keys(o).length===0?{deleted:0}:(await Zr(F(r),o),{deleted:Object.keys(o).length})}function IC(){const t=F(ue,"comments");return V(t,null)}function ry(t){const e=F(ue,"crews");return we(e,r=>t(r.val()||{}))}function AC(t,e){if(!t)return()=>{};const n=F(ue,`hallOfFame/${t}`);return we(n,i=>e(i.val()||{}))}function iy(t,e){if(!t)return()=>{};const n=F(ue,`hallOfFame/monthly/${t}`);return we(n,i=>e(i.val()||{}))}function NC(t,e){return iy(t,e)}async function Vu(t,e,n,r=[]){const i=ne(),s=String(e).padStart(2,"0"),o=`${t}-${s}`,a={gold:[],silver:[],bronze:[]},c={gold:{},silver:{},bronze:{}},u=[];for(const f of n||[]){if(!f.medal||!f.uid)continue;const d=f.medal,h=f.name||"",x=f.crew||"";a[d].push({name:h,crew:x}),c[d][f.uid]={name:h,crew:x,chapters:f.chapters||0};const v=`${o}_${x}`,w=F(i,`users/${f.uid}/earnedMedals/${v}`),k=F(i,`users/${f.uid}/medals/${d}`),g=(await pe(w)).val();if(g!==d)if(g&&g!==d){const y=F(i,`users/${f.uid}/medals/${g}`);u.push((async()=>{const b=await pe(y),T=await pe(k);await V(y,Math.max(0,(b.val()||0)-1)),await V(k,(T.val()||0)+1),await V(w,d)})())}else u.push((async()=>{const y=await pe(k);await V(k,(y.val()||0)+1),await V(w,d)})())}for(const f of["gold","silver","bronze"])u.push(V(F(i,`hallOfFame/${t}/monthlyResults/${s}/${f}`),a[f]));return u.push(V(F(i,`hallOfFame/${t}/monthlyResults/${s}/dokAchievers`),r)),u.push(V(F(i,`hallOfFame/monthly/${t}/${e}`),c)),await Promise.all(u),!0}async function DC(t,e,n,r,i){if(!t||!e||!n||!i)return!1;const s=ne(),o=String(e).padStart(2,"0"),a=`${t}-${o}`,c=`${a}_${i}`,u=F(s,`monthlyReports/${a}`),d=(await pe(u)).val()||null,h=F(s,`hallOfFame/monthly/${t}/${e}`),v=(await pe(h)).val()||{gold:{},silver:{},bronze:{}},w=F(s,`hallOfFame/${t}/monthlyResults/${o}`),m=(await pe(w)).val()||{gold:[],silver:[],bronze:[]},g=["gold","silver","bronze"],y=F(s,`users/${n}/earnedMedals/${c}`),T=(await pe(y)).val();let S=n;const j=(await pe(F(s,`users/${n}`))).val()||{};S=j.name||n,g.forEach(I=>{v[I]&&v[I][n]&&v[I][n].crew===i&&delete v[I][n],Array.isArray(m[I])&&(m[I]=m[I].filter(M=>{const A=typeof M=="object"?M.name:M,H=typeof M=="object"?M.crew:"";return!(A===S&&H===i)}))}),r&&r!=="none"&&(v[r]||(v[r]={}),v[r][n]={name:S,crew:i,chapters:0},Array.isArray(m[r])||(m[r]=[]),m[r].push({name:S,crew:i}));const P=[];if(T&&g.includes(T)){const I=F(s,`users/${n}/medals/${T}`);P.push(pe(I).then(M=>{const A=M.val()||0;return V(I,Math.max(0,A-1))}))}if(r&&r!=="none"&&g.includes(r)){const I=F(s,`users/${n}/medals/${r}`);P.push(pe(I).then(M=>{const A=M.val()||0;return V(I,A+1)})),P.push(V(y,r))}else r==="none"&&P.push(V(y,null));if(P.push(V(h,v)),P.push(V(w,m)),d&&d[n]){const I=r&&r!=="none",M={...d[n],stateLabel:I?"":""};if(j.medals){const A={...j.medals};T&&A[T]>0&&A[T]--,I&&(A[r]=(A[r]||0)+1),M.totalMedals=(A.gold||0)+(A.silver||0)+(A.bronze||0)}P.push(V(F(s,`monthlyReports/${a}/${n}`),M))}return await Promise.all(P),!0}function sy(){const t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0");return`${e}-${n}`}function Co(){const t=new Date;let e=t.getFullYear(),n=t.getMonth()+2;n>12&&(e+=1,n=1);const r=String(n).padStart(2,"0");return`${e}-${r}`}function Yu(t,e,n){const r=F(ue,`approvals/${e}/${t}`);return we(r,s=>{n(s.val()||{})})}function qn(t){return(t||"").toString().trim().replace(/^[,\s]+/,"").replace(/\s+/g,"")}async function PC(t,e,n){if(!n||n.length===0)return;const r=ne(),i={};return n.forEach(s=>{const o=qn(s.name);o&&(i[`approvals/${e}/${t}/${o}`]=!0,s.uid&&(i[`applicationHistory/${e}/${s.uid}/${t}`]={name:s.name,crew:t,ymKey:e,createdAt:Date.now(),method:"manual_approval_immediate"},i[`users/${s.uid}/crew`]=t,i[`users/${s.uid}/hiddenUnassigned`]=!1,i[`users/${s.uid}/status`]="active"))}),Zr(F(r),i)}function FC(t,e){const n=F(ue,`approvals/${e}/${t}`);return V(n,null)}function MC(t,e,n,r){const i=F(ue,`approvals/${e}/${t}/${n}`);return we(i,o=>{r(!!o.val())})}async function OC(t,e){if(!t||!/^[-a-zA-Z]+$/.test(t)){const d=new Error("     . (, ,  )");throw d.code="INVALID_NAME",d}const r=ne(),i=t,s=F(r,`users/${i}`);let a=(await pe(s)).val();const c=e!=null?String(e):"",u=c.trim();if(!a){if(!u){const h=new Error("     .");throw h.code="EMPTY_PASSWORD",h}const d={name:t,password:u,crew:null,status:"active",isAdmin:!1,hiddenUnassigned:!1,mustChangePassword:!1,createdAt:Date.now()};return await V(s,d),{uid:i,...d}}const f=!!a.isAdmin;if(a.password){if(a.password!==c&&a.password!==u){const d=new Error("  .");throw d.code="WRONG_PASSWORD",d}}else{if(!u){const d=new Error("  .");throw d.code="EMPTY_PASSWORD",d}a.password=u,a.mustChangePassword=!1,await V(s,a)}return{uid:i,isAdmin:f,...a}}async function BC(t){const e=ne(),n=F(e,`users/${t}`),s={...(await pe(n)).val()||{},password:"0000",mustChangePassword:!0};return await V(n,s),{uid:t,...s}}async function zC(t,e){const n=ne(),r=F(n,`users/${t}`),o={...(await pe(r)).val()||{},password:e,mustChangePassword:!1};return await V(r,o),{uid:t,...o}}const LC="8395";async function $C(t){if(t===LC)return{ok:!0,usedMaster:!0};const e=ne(),n=F(e,"/admin/password"),s=(await pe(n)).val()||"1234";if(t===s)return{ok:!0,usedMaster:!1};const o=new Error("   .");throw o.code="WRONG_ADMIN_PASSWORD",o}async function WC(t){const e=ne(),n=F(e,"/admin/password");return await V(n,t),!0}async function UC(t,e){if(!t)return!1;const n=ne();return await Zr(F(n,`users/${t}`),{isAdmin:!!e}),!0}async function HC(t,e,n){if(!(!t||!e))return await Tf(e,null),oy(t,e,n)}function oy(t,e,n){if(!t||!e)return Promise.resolve();const r=ne(),i=Co(),s={name:n||"",crew:t,ymKey:i,createdAt:Date.now()},o=F(r,`/nextMonthApplications/${i}/${t}/${e}`),a=F(r,`/nextMonthApplicationsByUser/${i}/${e}/${t}`),c=F(r,`/applicationHistory/${i}/${e}/${t}`),u=qn(n),f=F(r,`/approvals/${i}/${t}/${u}`);return Promise.all([V(o,s),V(a,s),V(c,s),u?V(f,!0):Promise.resolve()])}function VC(t,e){if(!t)return e(null),()=>{};const n=ne(),r=Co(),i=F(n,`/nextMonthApplicationsByUser/${r}/${t}`);return we(i,s=>{e(s.val()||null)})}function Tf(t,e=null){if(!t)return Promise.resolve();const n=ne(),r=Co();if(e){const s=F(n,`/nextMonthApplications/${r}/${e}/${t}`),o=F(n,`/nextMonthApplicationsByUser/${r}/${t}/${e}`),a=F(n,`/applicationHistory/${r}/${t}/${e}`);return pe(o).then(c=>{const u=c.val(),f=u?u.name:"",d=qn(f),h=F(n,`/approvals/${r}/${e}/${d}`);return Promise.all([V(s,null),V(o,null),V(a,null),d?V(h,null):Promise.resolve()])})}const i=F(n,`/nextMonthApplicationsByUser/${r}/${t}`);return pe(i).then(s=>{const o=s.val()||{},a=[];return a.push(V(i,null)),Object.keys(o).forEach(c=>{const u=F(n,`/nextMonthApplications/${r}/${c}/${t}`),f=F(n,`/applicationHistory/${r}/${t}/${c}`),d=o[c]?o[c].name:"",h=qn(d);if(h){const x=F(n,`/approvals/${r}/${c}/${h}`);a.push(V(x,null))}a.push(V(u,null)),a.push(V(f,null))}),Promise.all(a)})}function YC(t){const e=ne(),n=Co(),r=F(e,`/nextMonthApplications/${n}`);return we(r,i=>{t(i.val()||{})})}async function GC(t,e){const n=ne(),r={},i=Date.now();for(const[s,o]of Object.entries(e))!o||!Array.isArray(o)||o.forEach(a=>{r[`users/${a}/crew`]=s,r[`users/${a}/hiddenUnassigned`]=!1,r[`users/${a}/status`]="active"});return r[`applicationHistory/${t}/snapshot`]=e,r[`applicationHistory/${t}/appliedAt`]=i,await Zr(F(n),r),!0}function QC(t,e){const n=ne(),r=F(n,`/applicationHistory/${t}/appliedAt`);return we(r,i=>e(i.val()||null))}async function Wp(t){const e=ne();return(await pe(F(e,`/applicationHistory/${t}/snapshot`))).val()||{}}function ly(t){const e=ne(),n=F(e,"/notice");return we(n,r=>t(r.val()||null))}function KC(t,e){const n=ne(),r=F(n,"/notice"),i={title:t||"",content:e||"",timestamp:Date.now()};return V(r,i)}function qC(t,e){if(!t)return e({}),()=>{};const n=ne(),r=F(n,`/users/${t}/medals`);return we(r,i=>{e(i.val()||{})})}function XC(t,e){const n=ne();return V(F(n,`/settings/approval/${t}`),e)}function JC(t){const e=ne(),n=F(e,"/settings/approval");return we(n,r=>t(r.val()||{}))}function Rf(t){const e=ne(),n=F(e,"/settings");return we(n,r=>t(r.val()||{}))}function ZC(t){const e=ne();return V(F(e,"/settings/churchName"),t)}function eE(t){const e=ne();return V(F(e,"/settings/appDescription"),t)}function tE(t){const e=ne();return V(F(e,"/settings/bulletinUrl"),t||"")}function nE(t,e){if(!t)return Promise.resolve();const n=F(ue,`userBookmarks/${t}`);return V(n,{bookId:e.bookId,chapter:e.chapter,updatedAt:Date.now()})}function rE(t,e){if(!t)return e(null),()=>{};const n=F(ue,`userBookmarks/${t}`),r=we(n,i=>{e(i.val()||null)},i=>e(null));return()=>r()}async function Up(t,e,n){const r=ne(),i=F(r,`monthlyReports/${t}-${String(e).padStart(2,"0")}`);return await V(i,n),!0}async function Cc(){const t=ne(),e=F(t,"monthlyReports"),r=(await pe(e)).val()||{};return Object.keys(r).sort().reverse()}async function iE(t){const e=ne(),n=F(e,`monthlyReports/${t}`);return(await pe(n)).val()||{}}async function sE(t){const e=ne(),n=F(e,`hallOfFame/${t}/monthlyResults`);return(await pe(n)).val()||{}}/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ao(){return ao=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ao.apply(this,arguments)}var Xn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Xn||(Xn={}));const Hp="popstate";function oE(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:c=""}=ei(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Gu("",{pathname:o,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let c=i.location.href,u=c.indexOf("#");a=u===-1?c:c.slice(0,u)}return a+"#"+(typeof s=="string"?s:ay(s))}function r(i,s){Ia(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return aE(e,n,r,t)}function qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ia(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lE(){return Math.random().toString(36).substr(2,8)}function Vp(t,e){return{usr:t.state,key:t.key,idx:e}}function Gu(t,e,n,r){return n===void 0&&(n=null),ao({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ei(e):e,{state:n,key:e&&e.key||r||lE()})}function ay(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ei(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function aE(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Xn.Pop,c=null,u=f();u==null&&(u=0,o.replaceState(ao({},o.state,{idx:u}),""));function f(){return(o.state||{idx:null}).idx}function d(){a=Xn.Pop;let k=f(),m=k==null?null:k-u;u=k,c&&c({action:a,location:w.location,delta:m})}function h(k,m){a=Xn.Push;let g=Gu(w.location,k,m);n&&n(g,k),u=f()+1;let y=Vp(g,u),b=w.createHref(g);try{o.pushState(y,"",b)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(b)}s&&c&&c({action:a,location:w.location,delta:1})}function x(k,m){a=Xn.Replace;let g=Gu(w.location,k,m);n&&n(g,k),u=f();let y=Vp(g,u),b=w.createHref(g);o.replaceState(y,"",b),s&&c&&c({action:a,location:w.location,delta:0})}function v(k){let m=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof k=="string"?k:ay(k);return g=g.replace(/ $/,"%20"),qe(m,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,m)}let w={get action(){return a},get location(){return t(i,o)},listen(k){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Hp,d),c=k,()=>{i.removeEventListener(Hp,d),c=null}},createHref(k){return e(i,k)},createURL:v,encodeLocation(k){let m=v(k);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:x,go(k){return o.go(k)}};return w}var Yp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Yp||(Yp={}));function cE(t,e,n){return n===void 0&&(n="/"),uE(t,e,n,!1)}function uE(t,e,n,r){let i=typeof e=="string"?ei(e):e,s=dy(i.pathname||"/",n);if(s==null)return null;let o=cy(t);dE(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=SE(s);a=_E(o[c],u,r)}return a}function cy(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let c={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(qe(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=zr([r,c.relativePath]),f=n.concat(c);s.children&&s.children.length>0&&(qe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),cy(s.children,e,f,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:vE(u,s.index),routesMeta:f})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let c of uy(s.path))i(s,o,c)}),e}function uy(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=uy(r.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function dE(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:xE(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const fE=/^:[\w-]+$/,hE=3,pE=2,gE=1,mE=10,yE=-2,Gp=t=>t==="*";function vE(t,e){let n=t.split("/"),r=n.length;return n.some(Gp)&&(r+=yE),e&&(r+=pE),n.filter(i=>!Gp(i)).reduce((i,s)=>i+(fE.test(s)?hE:s===""?gE:mE),r)}function xE(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function _E(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",d=Qp({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),h=c.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=Qp({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:zr([s,d.pathname]),pathnameBase:jE(zr([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=zr([s,d.pathnameBase]))}return o}function Qp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=bE(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,f,d)=>{let{paramName:h,isOptional:x}=f;if(h==="*"){let w=a[d]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const v=a[d];return x&&!v?u[h]=void 0:u[h]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function bE(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ia(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function SE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ia(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function dy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const wE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,CE=t=>wE.test(t);function EE(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ei(t):t,s;if(n)if(CE(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Ia(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=Kp(n.substring(1),"/"):s=Kp(n,e)}else s=e;return{pathname:s,search:IE(r),hash:AE(i)}}function Kp(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ec(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function TE(t,e){let n=kE(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function RE(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ei(t):(i=ao({},t),qe(!i.pathname||!i.pathname.includes("?"),Ec("?","pathname","search",i)),qe(!i.pathname||!i.pathname.includes("#"),Ec("#","pathname","hash",i)),qe(!i.search||!i.search.includes("#"),Ec("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=EE(i,a),u=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const zr=t=>t.join("/").replace(/\/\/+/g,"/"),jE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),IE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,AE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function NE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const fy=["post","put","patch","delete"];new Set(fy);const DE=["get",...fy];new Set(DE);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function co(){return co=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},co.apply(this,arguments)}const jf=_.createContext(null),PE=_.createContext(null),Aa=_.createContext(null),Na=_.createContext(null),es=_.createContext({outlet:null,matches:[],isDataRoute:!1}),hy=_.createContext(null);function Da(){return _.useContext(Na)!=null}function If(){return Da()||qe(!1),_.useContext(Na).location}function py(t){_.useContext(Aa).static||_.useLayoutEffect(t)}function yn(){let{isDataRoute:t}=_.useContext(es);return t?GE():FE()}function FE(){Da()||qe(!1);let t=_.useContext(jf),{basename:e,future:n,navigator:r}=_.useContext(Aa),{matches:i}=_.useContext(es),{pathname:s}=If(),o=JSON.stringify(TE(i,n.v7_relativeSplatPath)),a=_.useRef(!1);return py(()=>{a.current=!0}),_.useCallback(function(u,f){if(f===void 0&&(f={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let d=RE(u,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:zr([e,d.pathname])),(f.replace?r.replace:r.push)(d,f.state,f)},[e,r,o,s,t])}function ME(t,e){return OE(t,e)}function OE(t,e,n,r){Da()||qe(!1);let{navigator:i}=_.useContext(Aa),{matches:s}=_.useContext(es),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=If(),f;if(e){var d;let k=typeof e=="string"?ei(e):e;c==="/"||(d=k.pathname)!=null&&d.startsWith(c)||qe(!1),f=k}else f=u;let h=f.pathname||"/",x=h;if(c!=="/"){let k=c.replace(/^\//,"").split("/");x="/"+h.replace(/^\//,"").split("/").slice(k.length).join("/")}let v=cE(t,{pathname:x}),w=WE(v&&v.map(k=>Object.assign({},k,{params:Object.assign({},a,k.params),pathname:zr([c,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?c:zr([c,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),s,n,r);return e&&w?_.createElement(Na.Provider,{value:{location:co({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Xn.Pop}},w):w}function BE(){let t=YE(),e=NE(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:i},n):null,s)}const zE=_.createElement(BE,null);class LE extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(es.Provider,{value:this.props.routeContext},_.createElement(hy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $E(t){let{routeContext:e,match:n,children:r}=t,i=_.useContext(jf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(es.Provider,{value:e},r)}function WE(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let f=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);f>=0||qe(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let d=o[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=f),d.route.id){let{loaderData:h,errors:x}=n,v=d.route.loader&&h[d.route.id]===void 0&&(!x||x[d.route.id]===void 0);if(d.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((f,d,h)=>{let x,v=!1,w=null,k=null;n&&(x=a&&d.route.id?a[d.route.id]:void 0,w=d.route.errorElement||zE,c&&(u<0&&h===0?(QE("route-fallback",!1),v=!0,k=null):u===h&&(v=!0,k=d.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,h+1)),g=()=>{let y;return x?y=w:v?y=k:d.route.Component?y=_.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=f,_.createElement($E,{match:d,routeContext:{outlet:f,matches:m,isDataRoute:n!=null},children:y})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?_.createElement(LE,{location:n.location,revalidation:n.revalidation,component:w,error:x,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var gy=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(gy||{}),Zl=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Zl||{});function UE(t){let e=_.useContext(jf);return e||qe(!1),e}function HE(t){let e=_.useContext(PE);return e||qe(!1),e}function VE(t){let e=_.useContext(es);return e||qe(!1),e}function my(t){let e=VE(),n=e.matches[e.matches.length-1];return n.route.id||qe(!1),n.route.id}function YE(){var t;let e=_.useContext(hy),n=HE(Zl.UseRouteError),r=my(Zl.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function GE(){let{router:t}=UE(gy.UseNavigateStable),e=my(Zl.UseNavigateStable),n=_.useRef(!1);return py(()=>{n.current=!0}),_.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,co({fromRouteId:e},s)))},[t,e])}const qp={};function QE(t,e,n){!e&&!qp[t]&&(qp[t]=!0)}function KE(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function $e(t){qe(!1)}function qE(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Xn.Pop,navigator:s,static:o=!1,future:a}=t;Da()&&qe(!1);let c=e.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:c,navigator:s,static:o,future:co({v7_relativeSplatPath:!1},a)}),[c,a,s,o]);typeof r=="string"&&(r=ei(r));let{pathname:f="/",search:d="",hash:h="",state:x=null,key:v="default"}=r,w=_.useMemo(()=>{let k=dy(f,c);return k==null?null:{location:{pathname:k,search:d,hash:h,state:x,key:v},navigationType:i}},[c,f,d,h,x,v,i]);return w==null?null:_.createElement(Aa.Provider,{value:u},_.createElement(Na.Provider,{children:n,value:w}))}function XE(t){let{children:e,location:n}=t;return ME(Qu(e),n)}new Promise(()=>{});function Qu(t,e){e===void 0&&(e=[]);let n=[];return _.Children.forEach(t,(r,i)=>{if(!_.isValidElement(r))return;let s=[...e,i];if(r.type===_.Fragment){n.push.apply(n,Qu(r.props.children,s));return}r.type!==$e&&qe(!1),!r.props.index||!r.props.children||qe(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Qu(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const JE="6";try{window.__reactRouterVersion=JE}catch{}const ZE="startTransition",Xp=cv[ZE];function ek(t){let{basename:e,children:n,future:r,window:i}=t,s=_.useRef();s.current==null&&(s.current=oE({window:i,v5Compat:!0}));let o=s.current,[a,c]=_.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},f=_.useCallback(d=>{u&&Xp?Xp(()=>c(d)):c(d)},[c,u]);return _.useLayoutEffect(()=>o.listen(f),[o,f]),_.useEffect(()=>KE(r),[r]),_.createElement(qE,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var Jp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Jp||(Jp={}));var Zp;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Zp||(Zp={}));function Xt(t={}){const e={:0,:0,"(A)":0,"(B)":0,:0};Object.keys(t).forEach(s=>{const o=s.split("_");if(o.length<2)return;const a=o[1];e.hasOwnProperty(a)&&e[a]++});let n=0,r={...e};for(;r.>0;)n++,r.--;for(;r.>0&&r.>0;)n++,r.--,r.--;for(;r["(A)"]>0&&r["(B)"]>0&&r.>0;)n++,r["(A)"]--,r["(B)"]--,r.--;const i=Object.entries(r).filter(([s,o])=>o>0).map(([s,o])=>({name:s,count:o}));return{totalDok:n,fragments:i,remaining:r}}function tk({user:t}){const e=yn(),[n,r]=_.useState([]),[i,s]=_.useState(!1),[o,a]=_.useState(null);_.useEffect(()=>{const P=RC(r),I=ly(a);return()=>{typeof P=="function"&&P(),typeof I=="function"&&I()}},[]);const c=(n||[]).slice(0,20),u=new Date;u.setHours(0,0,0,0);const f=u.getTime(),d=(n||[]).filter(P=>(P.timestamp||0)>=f),h=i?d:c,x=(t==null?void 0:t.name)||"",[v,w]=_.useState(!1),[k,m]=_.useState(""),[g,y]=_.useState(null);_.useEffect(()=>{if(!t||!t.uid)return;const P=VC(t.uid,I=>{y(I||{})});return()=>{typeof P=="function"&&P()}},[t]);function b(){if(!t||!t.uid){alert("   .");return}if(!k){alert("   .");return}const P=` '${k}'() ?
(       .)`;window.confirm(P)&&HC(k,t.uid,t.name||"").then(()=>{alert(`${k}  .`),m("")})}function T(){!t||!t.uid||window.confirm("     ?")&&Tf(t.uid,null).then(()=>{alert(".")})}const S=Object.keys(g||{}),C=S.length>0;function j(P){if(!P)return"";const I=new Date(P),M=I.getFullYear(),A=String(I.getMonth()+1).padStart(2,"0"),H=String(I.getDate()).padStart(2,"0"),q=String(I.getHours()).padStart(2,"0"),se=String(I.getMinutes()).padStart(2,"0");return`${M}-${A}-${H} ${q}:${se}`}return l.jsxs("div",{style:{padding:25,minHeight:"100vh",background:"#E5F3E6",color:"#034732"},children:[l.jsx("h1",{style:{fontSize:32,marginBottom:10,textAlign:"center"},children:" "}),l.jsxs("p",{style:{textAlign:"center",marginBottom:20},children:[", ",x,""]}),!t&&l.jsxs("p",{style:{textAlign:"center",marginBottom:20},children:[" ",l.jsx("button",{onClick:()=>e("/login"),style:{textDecoration:"underline",cursor:"pointer",background:"none",border:"none",padding:0,color:"#0B8457"},children:""}),"  ."]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:30},children:[l.jsx("button",{style:Ot("#1B9C5A"),onClick:()=>e("/"),children:" (40)"}),l.jsx("button",{style:Ot("#1B9C5A"),onClick:()=>e("/"),children:" (30)"}),l.jsx("button",{style:Ot("#136F63"),onClick:()=>e("/A"),children:" A(15)"}),l.jsx("button",{style:Ot("#136F63"),onClick:()=>e("/B"),children:" B(15)"}),l.jsx("button",{style:Ot("#136F63"),onClick:()=>e("/"),children:" (9)"}),l.jsx("button",{style:Ot("#FF9F1C"),onClick:()=>e("/"),children:"  "}),l.jsx("button",{style:Ot("#0B4F6C"),onClick:()=>e("/"),children:" (5)"}),l.jsx("button",{style:Ot("#0B4F6C"),onClick:()=>e("/"),children:" (9)"}),l.jsx("button",{style:Ot("#0F3455"),onClick:()=>e("/records"),children:"  "}),l.jsx("button",{style:Ot("#0F3455"),onClick:()=>{t!=null&&t.isAdmin?e("/admin"):e("/admin-login")},children:"  "})]}),l.jsx("button",{style:{...Ot("#0B4F6C"),marginBottom:8},onClick:()=>w(P=>!P),children:"   "}),v&&l.jsxs("div",{style:{marginTop:4,marginBottom:24,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)"},children:[l.jsx("h3",{style:{marginTop:0,marginBottom:8},children:"   "}),l.jsx("p",{style:{fontSize:12,color:"#555",marginBottom:12},children:"     . (     )"}),l.jsxs("div",{style:{display:"flex",gap:8,marginBottom:12},children:[l.jsxs("select",{value:k,onChange:P=>m(P.target.value),style:{flex:1,padding:8,borderRadius:8,border:"1px solid #ccc"},children:[l.jsx("option",{value:"",children:" "}),l.jsx("option",{value:"",children:"(40)"}),l.jsx("option",{value:"",children:"(30)"}),l.jsx("option",{value:"(A)",children:"A(15)"}),l.jsx("option",{value:"(B)",children:"B(15)"}),l.jsx("option",{value:"",children:"(9)"}),l.jsx("option",{value:"",children:"(9)"}),l.jsx("option",{value:"",children:"(5)"})]}),l.jsx("button",{type:"button",onClick:b,style:{padding:"0 20px",borderRadius:8,border:"none",background:"#0B8457",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:"()"})]}),C?l.jsxs("div",{style:{marginTop:16,borderTop:"1px solid #eee",paddingTop:10},children:[l.jsx("div",{style:{fontSize:13,fontWeight:"bold",color:"#333",marginBottom:6},children:"   "}),l.jsx("div",{style:{marginBottom:10,color:"#0B8457",fontWeight:600},children:S.map(P=>Ve(P)).join(", ")}),l.jsx("button",{onClick:T,style:{width:"100%",padding:"10px",borderRadius:8,border:"1px solid #ccc",background:"#f5f5f5",color:"#333",cursor:"pointer",fontWeight:"bold"},children:" "})]}):l.jsx("div",{style:{fontSize:13,color:"#999",marginTop:10},children:"  ."})]}),l.jsxs("div",{style:{marginTop:10,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 10px rgba(0,0,0,0.06)"},children:[o&&l.jsxs("div",{style:{marginBottom:12,padding:12,borderRadius:8,background:"#FFF3CD",border:"1px solid #FFEEBA"},children:[l.jsxs("div",{style:{fontWeight:"bold",marginBottom:4},children:["<>"," ",o.title||""]}),l.jsx("div",{style:{fontSize:14,whiteSpace:"pre-line"},children:o.content||""})]}),l.jsx("button",{style:{...Ot("#1E7F74"),marginBottom:12,padding:14,fontSize:16},onClick:()=>e("/crew-members"),children:"   "}),l.jsx("h3",{style:{marginTop:0,marginBottom:10},children:"  "}),h.length===0&&l.jsx("p",{style:{color:"#666"},children:"   .       ."}),l.jsxs("div",{style:{display:"flex",gap:8,marginBottom:8},children:[l.jsx("button",{onClick:()=>s(P=>!P),style:{padding:"8px 12px",borderRadius:10,border:"1px solid #0B8457",background:i?"#0B8457":"#fff",color:i?"#fff":"#0B8457",cursor:"pointer",fontWeight:700},children:i?"":" ()"}),i&&l.jsx("div",{style:{fontSize:12,color:"#555",alignSelf:"center"},children:"    ."})]}),l.jsx("ul",{style:{paddingLeft:18},children:h.map(P=>l.jsxs("li",{style:{marginBottom:4},children:[l.jsxs("span",{style:{fontWeight:"bold"},children:["[",P.crew,"] ",P.user]}),": ",P.text,P.timestamp&&l.jsxs("span",{style:{fontSize:12,color:"#555",marginLeft:4},children:["(",j(P.timestamp),")"]})]},P.id))})]})]})}function Ot(t){return{width:"100%",height:63,padding:"0 6px",borderRadius:12,border:"none",fontSize:17,fontWeight:"bold",background:t,color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",wordBreak:"keep-all",lineHeight:1.2}}function on(t,e){const n=[],r=new Date(t,e,0).getDate();for(let i=1;i<=r;i++){const s=`${t}-${String(e).padStart(2,"0")}-${String(i).padStart(2,"0")}`;n.push(s)}return n}function nk(){const[t,e]=_.useState(null),[n,r]=_.useState(null),[i,s]=_.useState({}),[o,a]=_.useState([]),[c,u]=_.useState(null),[f,d]=_.useState(null),[h,x]=_.useState([]),[v,w]=_.useState({}),k=_.useRef(new Set);_.useRef(new Set),_.useEffect(()=>{const S=new Date().getFullYear(),C=F(ue,"settings/currentHallOfFameYear"),j=we(C,async P=>{const I=P.val();if(typeof I!="number"){await V(C,S);return}if(I!==S){await V(C,S);return}u(I)});return()=>{typeof j=="function"&&j()}},[]),_.useEffect(()=>{const S=F(ue,"hallOfFame"),C=F(ue,"hallOfFame/monthly"),j=[],P=(A,H)=>{const q=new Date().getFullYear(),se=[...A||[],...H||[],q].filter(O=>Number.isFinite(O));return Array.from(new Set(se)).sort((O,G)=>G-O)};let I=[],M=[];return j.push(we(S,A=>{const H=A.val()||{};I=Object.keys(H).map(q=>parseInt(q,10)).filter(q=>Number.isFinite(q)),x(P(I,M))})),j.push(we(C,A=>{const H=A.val()||{};M=Object.keys(H).map(q=>parseInt(q,10)).filter(q=>Number.isFinite(q)),x(P(I,M))})),()=>j.forEach(A=>typeof A=="function"?A():null)},[]),_.useEffect(()=>{const S=ja(C=>w(C||{}));return()=>{typeof S=="function"&&S()}},[]),_.useEffect(()=>{c&&d(S=>S??c)},[c]),_.useEffect(()=>{if(!f)return;e(null),r(null);const S=AC(f,j=>{e(j||null)}),C=iy(f,j=>{r(j||null)});return()=>{typeof S=="function"&&S(),typeof C=="function"&&C()}},[f]),_.useEffect(()=>{if(!c||!f)return;if(c!==f){s({});return}const S=new Date,C=S.getFullYear(),j=S.getMonth()+1,P=on(C,j),I=`${C}-${String(j).padStart(2,"0")}-${String(S.getDate()).padStart(2,"0")}`,M=P.filter(se=>se<=I),A={gold:[""],silver:[""],bronze:he.filter(se=>String(se).includes("")||String(se).includes(""))},H=F(ue,"crews"),q=we(H,se=>{const O=se.val()||{},G={gold:{challengers:0,success:0,fail:0},silver:{challengers:0,success:0,fail:0},bronze:{challengers:0,success:0,fail:0}};if(["gold","silver","bronze"].forEach(N=>{(A[N]||[]).forEach(W=>{var ee;const X=((ee=O==null?void 0:O[W])==null?void 0:ee.users)||{};Object.entries(X).forEach(([Pe,Ce])=>{Ce&&Ce.name,G[N].challengers+=1;const Be=Ce&&Ce.checks||{};M.every(Te=>!!Be[Te])?G[N].success+=1:G[N].fail+=1})})}),s(G),S.getDate()===1){const N=new Date(C,j-2,1),B=N.getFullYear(),W=N.getMonth()+1,X=String(W).padStart(2,"0"),ee=`${B}-${X}`;if(!k.current.has(ee)){k.current.add(ee);const Pe=on(B,W),Ce={gold:[],silver:[],bronze:[]};["gold","silver","bronze"].forEach(Be=>{(A[Be]||[]).forEach(Te=>{var _r;const xr=((_r=O==null?void 0:O[Te])==null?void 0:_r.users)||{};Object.entries(xr).forEach(([ti,Bn])=>{const br=Bn&&Bn.name||ti,ts=Bn&&Bn.checks||{};Pe.every(Sr=>!!ts[Sr])&&Ce[Be].push({name:br,crew:Te})})})}),(async()=>{const Be=[];["gold","silver","bronze"].forEach(Xe=>{(Ce[Xe]||[]).forEach(Te=>{Be.push({uid:Te.name,name:Te.name,crew:Te.crew,medal:Xe})})}),Be.length>0&&await Vu(B,W,Be)})().catch(()=>{})}}});return()=>{typeof q=="function"&&q()}},[c,f]),_.useEffect(()=>{if(!f){a([]);return}const S=t&&t.monthlyResults?t.monthlyResults:null,C={};S&&typeof S=="object"?Object.entries(S).forEach(([M,A])=>{!A||typeof A!="object"||(C[M]={gold:Array.isArray(A.gold)?A.gold.filter(Boolean):[],silver:Array.isArray(A.silver)?A.silver.filter(Boolean):[],bronze:Array.isArray(A.bronze)?A.bronze.filter(Boolean):[]})}):n&&typeof n=="object"&&Object.entries(n).forEach(([M,A])=>{const H=String(M).padStart(2,"0");if(!A||typeof A!="object")return;const q=se=>!se||typeof se!="object"?[]:Object.values(se).map(O=>O==null?void 0:O.name).filter(Boolean);C[H]={gold:q(A.gold),silver:q(A.silver),bronze:q(A.bronze)}});const j={},P=(M,A)=>{if(!M)return;const H=typeof M=="string"?M:M.name;H&&(j[H]||(j[H]={name:H,gold:0,silver:0,bronze:0,points:0}),A==="gold"&&(j[H].gold+=1,j[H].points+=3),A==="silver"&&(j[H].silver+=1,j[H].points+=2),A==="bronze"&&(j[H].bronze+=1,j[H].points+=1))};Object.values(C).forEach(M=>{(M.gold||[]).forEach(A=>P(A,"gold")),(M.silver||[]).forEach(A=>P(A,"silver")),(M.bronze||[]).forEach(A=>P(A,"bronze"))});const I=Object.values(j).map(M=>{let A=v[M.name];A||(A=Object.values(v).find(q=>q.name===M.name));const H=Xt((A==null?void 0:A.earnedMedals)||{});return{...M,totalDok:H.totalDok}});I.sort((M,A)=>A.totalDok!==M.totalDok?A.totalDok-M.totalDok:A.points!==M.points?A.points-M.points:A.gold!==M.gold?A.gold-M.gold:A.silver!==M.silver?A.silver-M.silver:A.bronze!==M.bronze?A.bronze-M.bronze:String(M.name).localeCompare(String(A.name),"ko")),a(I.slice(0,10))},[t,n,f,v]);const m=_.useMemo(()=>[1,2,3,4,5,6,7,8,9,10,11,12],[]),[g,y]=_.useState(new Date().getMonth()+1),b=_.useMemo(()=>{if(!(t!=null&&t.monthlyResults))return null;const S=String(g).padStart(2,"0");return t.monthlyResults[S]||null},[t,g]),T=_.useMemo(()=>(b==null?void 0:b.dokAchievers)||[],[b]);return l.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0F172A 0%, #1E293B 100%)",color:"#F8FAFC",padding:"40px 20px",fontFamily:"'Outfit', 'Roboto', sans-serif"},children:l.jsxs("div",{style:{maxWidth:800,margin:"0 auto"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:40},children:[l.jsx("h1",{style:{fontSize:42,fontWeight:900,background:"linear-gradient(to right, #F59E0B, #FBBF24, #F59E0B)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",letterSpacing:-1,marginBottom:10},children:"  "}),l.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:15},children:[l.jsx("select",{value:f||"",onChange:S=>d(Number(S.target.value)),style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"#fff",padding:"8px 16px",borderRadius:12,fontSize:18,fontWeight:700,cursor:"pointer"},children:h.map(S=>l.jsxs("option",{value:S,style:{color:"#000"},children:[S,""]},S))}),l.jsx("div",{style:{fontSize:20,color:"#94A3B8",fontWeight:500},children:"  "})]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:30},children:[l.jsxs("section",{style:{background:"rgba(255,255,255,0.03)",borderRadius:24,padding:30,border:"1px solid rgba(255,255,255,0.05)",boxShadow:"0 20px 50px rgba(0,0,0,0.3)"},children:[l.jsxs("h2",{style:{fontSize:24,fontWeight:800,marginBottom:5,display:"flex",alignItems:"center",gap:10},children:[l.jsx("span",{style:{color:"#F59E0B"},children:""})," ",f,"   (TOP 10)"]}),l.jsx("p",{style:{fontSize:14,color:"#94A3B8",marginBottom:20,marginLeft:34},children:"  -   "}),o.length===0?l.jsx("p",{style:{color:"#64748B",textAlign:"center"},children:"   ."}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:o.map((S,C)=>l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px 20px",background:C===0?"linear-gradient(90deg, rgba(245,158,11,0.15) 0%, rgba(245,158,11,0.05) 100%)":"rgba(255,255,255,0.02)",borderRadius:16,border:C===0?"1px solid rgba(245,158,11,0.3)":"1px solid rgba(255,255,255,0.05)"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:15},children:[l.jsx("div",{style:{width:34,height:34,display:"flex",alignItems:"center",justifyContent:"center",fontSize:C<3?24:14,color:C<3?"inherit":"#64748B",fontWeight:900,background:C<3?"transparent":"rgba(255,255,255,0.05)",borderRadius:8},children:C===0?"":C===1?"":C===2?"":C+1}),l.jsx("div",{style:{fontSize:18,fontWeight:C<3?800:600},children:S.name})]}),l.jsx("div",{style:{display:"flex",alignItems:"center",gap:15},children:l.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[l.jsxs("div",{style:{display:"flex",gap:4},children:[S.gold>0&&l.jsxs("span",{children:["",S.gold]}),S.silver>0&&l.jsxs("span",{children:["",S.silver]}),S.bronze>0&&l.jsxs("span",{children:["",S.bronze]})]}),(()=>{let j=v[S.name];j||(j=Object.values(v).find(I=>I.name===S.name));const P=Xt((j==null?void 0:j.earnedMedals)||{});return P.totalDok>0?l.jsxs("span",{style:{fontSize:13,fontWeight:800,color:"#E9C46A",background:"rgba(233,196,106,0.1)",padding:"2px 8px",borderRadius:6},children:[" ",P.totalDok,""]}):null})()]})})]},S.name))})]}),l.jsxs("section",{children:[l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:20,justifyContent:"center"},children:m.map(S=>l.jsxs("button",{onClick:()=>y(S),style:{padding:"8px 14px",borderRadius:10,border:"none",background:g===S?"#F59E0B":"rgba(255,255,255,0.05)",color:g===S?"#000":"#94A3B8",fontWeight:800,cursor:"pointer",transition:"0.2s"},children:[S,""]},S))}),l.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:24,padding:30,border:"1px solid rgba(255,255,255,0.05)"},children:[l.jsxs("h3",{style:{fontSize:22,fontWeight:800,marginBottom:25,textAlign:"center"},children:[" ",g,"  "]}),b?l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:30},children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:20},children:[l.jsx(kc,{title:"  ()",items:b.gold,color:"#F59E0B"}),l.jsx(kc,{title:"  ()",items:b.silver,color:"#94A3B8"}),l.jsx(kc,{title:"  (/)",items:b.bronze,color:"#B45309"})]}),l.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.05)",paddingTop:20},children:[l.jsx("h4",{style:{fontSize:18,fontWeight:800,marginBottom:15,color:"#E9C46A"},children:"   "}),l.jsx("p",{style:{fontSize:14,color:"#94A3B8",marginBottom:12},children:"*    1  ."}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:10},children:T.length===0?l.jsx("span",{style:{color:"#64748B",fontSize:14},children:"    ."}):T.map((S,C)=>l.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(233,196,106,0.2) 0%, rgba(233,196,106,0.05) 100%)",padding:"10px 18px",borderRadius:12,border:"1px solid rgba(233,196,106,0.3)",display:"flex",alignItems:"center",gap:8},children:[l.jsx("span",{style:{fontSize:16,fontWeight:800,color:"#E9C46A"},children:S.name}),l.jsxs("span",{style:{fontSize:12,fontWeight:900,background:"#E9C46A",color:"#000",padding:"2px 6px",borderRadius:4},children:[S.dokCount," "]})]},C))})]})]}):l.jsx("div",{style:{textAlign:"center",padding:"40px 0",color:"#64748B"},children:"    ."})]})]})]}),l.jsx("div",{style:{marginTop:50,textAlign:"center"},children:l.jsx("button",{onClick:()=>window.history.back(),style:{padding:"12px 30px",borderRadius:999,border:"1px solid rgba(255,255,255,0.2)",background:"transparent",color:"#fff",fontWeight:700,cursor:"pointer"},children:"  "})})]})})}function kc({title:t,items:e,color:n}){return!e||e.length===0?null:l.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",padding:20,borderRadius:18,border:`1px solid ${n}33`},children:[l.jsx("div",{style:{fontSize:16,fontWeight:800,color:n,marginBottom:12,borderBottom:`1px solid ${n}22`,paddingBottom:8},children:t}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6},children:e.map((r,i)=>{const s=typeof r=="string"?r:r.name,o=typeof r=="string"?"":r.crew;return l.jsxs("div",{style:{fontSize:14,fontWeight:600},children:[s," ",o&&l.jsxs("span",{style:{fontSize:11,color:"#64748B",fontWeight:400},children:["(",o.replace("",""),")"]})]},i)})})]})}const rk=[{day:1,mainTitle:"  ",sections:[{subTitle:" ",bibleRef:" 1-3"},{subTitle:" ,  ",bibleRef:" 4-5"},{subTitle:"   ",bibleRef:" 6-9"}]},{day:2,mainTitle:"  ",sections:[{subTitle:"   ",bibleRef:" 11-13"},{subTitle:"   ",bibleRef:" 14-16"},{subTitle:"    ",bibleRef:" 17-18"}]},{day:3,mainTitle:"   ",sections:[{subTitle:"   ",bibleRef:" 19-21"},{subTitle:"    ",bibleRef:" 22-24"},{subTitle:"    ",bibleRef:" 27-28"}]},{day:4,mainTitle:"  ",sections:[{subTitle:"    ",bibleRef:" 29-31"},{subTitle:"    ",bibleRef:" 32-33"},{subTitle:"    ",bibleRef:" 35-37"}]},{day:5,mainTitle:"   ",sections:[{subTitle:"   ",bibleRef:" 38-39"},{subTitle:"    ",bibleRef:" 40-41"},{subTitle:"   ",bibleRef:" 42-44"}]},{day:6,mainTitle:" ",sections:[{subTitle:"    ",bibleRef:" 45-47"},{subTitle:"   ",bibleRef:" 48-50"},{subTitle:"   ",bibleRef:" 1-3"}]},{day:7,mainTitle:"   ",sections:[{subTitle:"    ",bibleRef:" 4-7"},{subTitle:"    ",bibleRef:" 8-11"},{subTitle:"  ",bibleRef:" 12"}]},{day:8,mainTitle:"   ",sections:[{subTitle:"    ",bibleRef:" 13-16"},{subTitle:"   ",bibleRef:" 17-20"},{subTitle:" ",bibleRef:" 24"}]},{day:9,mainTitle:"  ",sections:[{subTitle:"   ",bibleRef:" 32-34"},{subTitle:"  ",bibleRef:" 40"},{subTitle:"   ",bibleRef:" 11, 16, 19, 23,  6"}]},{day:10,mainTitle:"  ",sections:[{subTitle:"   ",bibleRef:" 11-12"},{subTitle:"12  40 ",bibleRef:" 13-14"},{subTitle:"     ",bibleRef:" 16-17, 20"}]},{day:11,mainTitle:"  ",sections:[{subTitle:"   ",bibleRef:" 21-24"},{subTitle:"   ",bibleRef:" 6, 8, 30, 34"},{subTitle:" ",bibleRef:" 1"}]},{day:12,mainTitle:"  ",sections:[{subTitle:"  ",bibleRef:" 2-8"},{subTitle:"    ",bibleRef:" 9-11"},{subTitle:"  ",bibleRef:" 14, 20"}]},{day:13,mainTitle:"  ",sections:[{subTitle:"    ",bibleRef:" 23-24,  2"},{subTitle:", , ",bibleRef:" 4, 6-7, 13-16"},{subTitle:"  ",bibleRef:" 1-4"}]},{day:14,mainTitle:"  ",sections:[{subTitle:"   ",bibleRef:" 1-3"},{subTitle:"   ",bibleRef:" 4-7"},{subTitle:"    ",bibleRef:" 8-10"}]},{day:15,mainTitle:"   ",sections:[{subTitle:"   ",bibleRef:" 13, 15-16"},{subTitle:"    ",bibleRef:" 17-19"},{subTitle:"    ",bibleRef:" 20, 24, 26"}]},{day:16,mainTitle:"  ",sections:[{subTitle:"   ",bibleRef:" 31,  1-2, 5"},{subTitle:"   ",bibleRef:" 6-7"},{subTitle:"   ",bibleRef:" 9-10"}]},{day:17,mainTitle:"  ",sections:[{subTitle:"    ",bibleRef:" 11-12"},{subTitle:"   ",bibleRef:" 13, 15-18"},{subTitle:"   ",bibleRef:" 24,  22, 29"}]},{day:18,mainTitle:"  :   ",sections:[{subTitle:"   ",bibleRef:" 3-6, 8"},{subTitle:":  ",bibleRef:" 1-4"}]},{day:19,mainTitle:" :  ,  ",sections:[{subTitle:":     ",bibleRef:" 1-3, 12"},{subTitle:":  ",bibleRef:" 2"},{subTitle:":   ",bibleRef:" 1-2, 38, 42"}]},{day:20,mainTitle:" ",sections:[{subTitle:":     ",bibleRef:" 1, 19, 23, 51, 103, 150"},{subTitle:"   ",bibleRef:" 11-12"},{subTitle:" ",bibleRef:" 13"}]},{day:21,mainTitle:"  :   ",sections:[{subTitle:"   ",bibleRef:" 17-18"},{subTitle:"  ",bibleRef:" 19"},{subTitle:"   ",bibleRef:" 2, 4-5, 6"}]},{day:22,mainTitle:"  :   ",sections:[{subTitle:":   ",bibleRef:" 1-4"},{subTitle:":  ",bibleRef:" 5, 9"},{subTitle:":   ",bibleRef:" 1-3"},{subTitle:" ",bibleRef:" 17"}]},{day:23,mainTitle:" ",sections:[{subTitle:"   ",bibleRef:" 18-20"},{subTitle:"   ",bibleRef:" 1, 6-7, 9, 11, 36"}]},{day:24,mainTitle:" 2 :   ",sections:[{subTitle:"  ",bibleRef:" 40, 43"},{subTitle:"  ",bibleRef:" 53, 55"},{subTitle:"  ",bibleRef:" 60-61, 65-66"}]},{day:25,mainTitle:"   :  ",sections:[{subTitle:"   ",bibleRef:" 21-23"},{subTitle:"   ",bibleRef:" 1, 7"},{subTitle:"  ",bibleRef:" 1-3,  3"}]},{day:26,mainTitle:"   :  ",sections:[{subTitle:"   ",bibleRef:" 24-25"},{subTitle:"    ",bibleRef:" 29, 31, 33, 52"},{subTitle:":   ",bibleRef:" 3"}]},{day:27,mainTitle:"  :  ",sections:[{subTitle:"   ",bibleRef:" 1, 3, 6, 9"},{subTitle:":     ",bibleRef:" 1, 36, 37, 47"}]},{day:28,mainTitle:"   :  ",sections:[{subTitle:"  1 ",bibleRef:" 1, 3-4"},{subTitle:"   ",bibleRef:" 1-2,  4, 9"},{subTitle:" ",bibleRef:" 6"}]},{day:29,mainTitle:"  :   ",sections:[{subTitle:"   ",bibleRef:" 1-9"},{subTitle:" 2   ",bibleRef:" 7, 9-10"}]},{day:30,mainTitle:"  :   ",sections:[{subTitle:"  ",bibleRef:" 1-4, 6"},{subTitle:"   ",bibleRef:" 8, 13"},{subTitle:":   ",bibleRef:" 1, 3-4"}]}],ik=[{day:1,mainTitle:" ",sections:[{subTitle:"  ",bibleRef:" 1"},{subTitle:"  ",bibleRef:" 1-2"},{subTitle:" ",bibleRef:" 2"}]},{day:2,mainTitle:" ",sections:[{subTitle:"  ",bibleRef:" 3-4"},{subTitle:"   ",bibleRef:" 2"},{subTitle:" ",bibleRef:" 3"}]},{day:3,mainTitle:" ",sections:[{subTitle:" ",bibleRef:" 4"},{subTitle:"   ",bibleRef:" 5"},{subTitle:"  ",bibleRef:" 5"}]},{day:4,mainTitle:"",sections:[{subTitle:"  ",bibleRef:" 5"},{subTitle:", , ",bibleRef:" 6"},{subTitle:"  ",bibleRef:" 7"},{subTitle:" ",bibleRef:" 7"}]},{day:5,mainTitle:" ",sections:[{subTitle:" ",bibleRef:" 4"},{subTitle:"   ",bibleRef:" 5"},{subTitle:"  ",bibleRef:" 10"},{subTitle:"    ",bibleRef:" 11-12"}]},{day:6,mainTitle:"  ",sections:[{subTitle:"    ",bibleRef:" 13"},{subTitle:"   ",bibleRef:" 14"},{subTitle:" ",bibleRef:" 6"}]},{day:7,mainTitle:" ",sections:[{subTitle:" ",bibleRef:" 16"},{subTitle:" ",bibleRef:" 17"},{subTitle:"   ",bibleRef:" 9"}]},{day:8,mainTitle:"  ",sections:[{subTitle:"  ",bibleRef:" 10"},{subTitle:" , , ",bibleRef:" 15"},{subTitle:"  ",bibleRef:" 16"}]},{day:9,mainTitle:" ",sections:[{subTitle:" ",bibleRef:" 11"},{subTitle:"  ",bibleRef:" 12"},{subTitle:" ",bibleRef:" 19"},{subTitle:"   ",bibleRef:" 21"}]},{day:10,mainTitle:"  ",sections:[{subTitle:"   ",bibleRef:" 22"},{subTitle:"   ",bibleRef:" 23"},{subTitle:" ",bibleRef:" 24"},{subTitle:"   ",bibleRef:" 25"}]},{day:11,mainTitle:" ",sections:[{subTitle:"  ",bibleRef:" 13"},{subTitle:"  ",bibleRef:" 14"},{subTitle:" ",bibleRef:" 15"},{subTitle:"   ",bibleRef:" 16-17"}]},{day:12,mainTitle:"  ",sections:[{subTitle:"  ",bibleRef:" 26"},{subTitle:"  ",bibleRef:" 27"}]},{day:13,mainTitle:" ",sections:[{subTitle:"   ",bibleRef:" 20"},{subTitle:"  ",bibleRef:" 21"},{subTitle:"  ",bibleRef:" 24"},{subTitle:" ",bibleRef:" 28"}]},{day:14,mainTitle:" ",sections:[{subTitle:"  ",bibleRef:" 1"},{subTitle:"  ",bibleRef:" 2"},{subTitle:"  ",bibleRef:" 3"},{subTitle:"  ",bibleRef:" 4"}]},{day:15,mainTitle:" ",sections:[{subTitle:" ",bibleRef:" 5"},{subTitle:"   ",bibleRef:" 6-7"},{subTitle:"  ",bibleRef:" 8"},{subTitle:" ",bibleRef:" 9"}]},{day:16,mainTitle:"  ",sections:[{subTitle:"  ",bibleRef:" 10"},{subTitle:"   ",bibleRef:" 11"},{subTitle:":  ",bibleRef:" 1-2"}]},{day:17,mainTitle:"1   :  ",sections:[{subTitle:"  ",bibleRef:" 13"},{subTitle:" ",bibleRef:" 14"},{subTitle:":   ",bibleRef:" 1-3"}]},{day:18,mainTitle:"2   :  ",sections:[{subTitle:" ",bibleRef:" 15"},{subTitle:"  ",bibleRef:" 16"},{subTitle:"  ",bibleRef:" 17"},{subTitle:":  ",bibleRef:" 4"}]},{day:19,mainTitle:"3   :   ",sections:[{subTitle:"  ",bibleRef:" 18"},{subTitle:"  ",bibleRef:" 19"},{subTitle:":  ",bibleRef:" 1, 13, 15"}]},{day:20,mainTitle:" :   ",sections:[{subTitle:"  ",bibleRef:" 20"},{subTitle:":  ",bibleRef:" 4-5"},{subTitle:"   ",bibleRef:" 12"}]},{day:21,mainTitle:" 1 :  ",sections:[{subTitle:"   ",bibleRef:" 1-2"},{subTitle:"   ",bibleRef:" 3"},{subTitle:"  ",bibleRef:" 4-5"}]},{day:22,mainTitle:" 2 :  ",sections:[{subTitle:"   ",bibleRef:" 6"},{subTitle:"   ",bibleRef:" 8"},{subTitle:"    ",bibleRef:" 12"}]},{day:23,mainTitle:"  :  ",sections:[{subTitle:"   ",bibleRef:" 21-22"},{subTitle:"    ",bibleRef:" 23"},{subTitle:"   ",bibleRef:" 26"}]},{day:24,mainTitle:"   :  ",sections:[{subTitle:"  ",bibleRef:" 27"},{subTitle:"   ",bibleRef:" 28"},{subTitle:":   ",bibleRef:" 1, 3"}]},{day:25,mainTitle:"  :  ",sections:[{subTitle:":    ",bibleRef:" 1-2"},{subTitle:" ",bibleRef:" 6"},{subTitle:":  ",bibleRef:" 1"}]},{day:26,mainTitle:" :  ",sections:[{subTitle:"  ",bibleRef:" 1"},{subTitle:" ",bibleRef:" 2"},{subTitle:" ",bibleRef:" 3"},{subTitle:"    ",bibleRef:" 4"}]},{day:27,mainTitle:"  :   ",sections:[{subTitle:":  ",bibleRef:" 6"},{subTitle:":    ",bibleRef:" 1-2"},{subTitle:"   ",bibleRef:" 4"}]},{day:28,mainTitle:" :   ",sections:[{subTitle:"  ",bibleRef:" 1"},{subTitle:"  ",bibleRef:" 4"},{subTitle:"  ",bibleRef:" 11"},{subTitle:"    ",bibleRef:" 12"}]},{day:29,mainTitle:" :  ",sections:[{subTitle:":  ",bibleRef:" 1"},{subTitle:":   ",bibleRef:" 1"},{subTitle:" ",bibleRef:" 4"},{subTitle:":   ",bibleRef:" 3-5"}]},{day:30,mainTitle:" :  ",sections:[{subTitle:" ",bibleRef:" 1"},{subTitle:" ",bibleRef:" 4"},{subTitle:"   ",bibleRef:" 21"},{subTitle:"   ",bibleRef:" 22"}]}],Pa=[{name:"",chapters:50},{name:"",chapters:40},{name:"",chapters:27},{name:"",chapters:36},{name:"",chapters:34},{name:"",chapters:24},{name:"",chapters:21},{name:"",chapters:4},{name:"",chapters:31},{name:"",chapters:24},{name:"",chapters:22},{name:"",chapters:25},{name:"",chapters:29},{name:"",chapters:36},{name:"",chapters:10},{name:"",chapters:13},{name:"",chapters:10},{name:"",chapters:42},{name:"",chapters:150},{name:"",chapters:31},{name:"",chapters:12},{name:"",chapters:8},{name:"",chapters:66},{name:"",chapters:52},{name:"",chapters:5},{name:"",chapters:48},{name:"",chapters:12},{name:"",chapters:14},{name:"",chapters:3},{name:"",chapters:9},{name:"",chapters:1},{name:"",chapters:4},{name:"",chapters:7},{name:"",chapters:3},{name:"",chapters:3},{name:"",chapters:3},{name:"",chapters:2},{name:"",chapters:14},{name:"",chapters:4},{name:"",chapters:28},{name:"",chapters:16},{name:"",chapters:24},{name:"",chapters:21},{name:"",chapters:28},{name:"",chapters:16},{name:"",chapters:16},{name:"",chapters:13},{name:"",chapters:6},{name:"",chapters:6},{name:"",chapters:4},{name:"",chapters:4},{name:"",chapters:5},{name:"",chapters:3},{name:"",chapters:6},{name:"",chapters:4},{name:"",chapters:3},{name:"",chapters:1},{name:"",chapters:13},{name:"",chapters:5},{name:"",chapters:5},{name:"",chapters:3},{name:"1",chapters:5},{name:"2",chapters:1},{name:"3",chapters:1},{name:"",chapters:1},{name:"",chapters:22}],sk=Pa.slice(0,39),yy=Pa.slice(39),vy=sk.reduce((t,e)=>t+e.chapters,0),xy=yy.reduce((t,e)=>t+e.chapters,0),ok=vy+xy,lk=461,ak=468;function ck(t){if(t<=0)return[];if(t===1)return[Array.from({length:31},(s,o)=>o+1)];const n=[],r=Math.max(0,t-1);for(let s=1;s<=r;s++)n.push([s]);const i=[];for(let s=r+1;s<=31;s++)i.push(s);return n.push(i),n}const uk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",1:"",2:"",3:"",:"",:""};function eg(t){return uk[t]||t}function dk(t){return Pa.find(e=>e.name===t)}function fk(t,e){const n=[];for(let r=1;r<=e;r++)n.push({book:t,chapter:r});return n}function hk(t){const e=[];return t.forEach(n=>{n&&e.push(...fk(n.name,n.chapters))}),e}function tg(t){if(!t||t.length===0)return"";const e=[];let n={book:t[0].book,start:t[0].chapter,end:t[0].chapter};for(let i=1;i<t.length;i++){const s=t[i];s.book===n.book&&s.chapter===n.end+1?n.end=s.chapter:(e.push(n),n={book:s.book,start:s.chapter,end:s.chapter})}return e.push(n),e.map(i=>i.start===i.end?`${i.book} ${i.start}`:`${i.book} ${i.start}~${i.end}`).join(" / ")}function pk(t,e){const n=Math.floor(t/e);let r=t%e;const i=[];for(let s=0;s<e;s++)i.push(n+(r>0?1:0)),r>0&&r--;return i}function gk(t,e){const n=e.length,r=pk(t.length,n);let i=0;const s=[];for(let o=0;o<n;o++){const a=r[o],c=t.slice(i,i+a);i+=a,s.push({date:e[o],items:c})}return s}const _y=["","","","","","","","","","","","","","",""],by=["","","","","","","","","","","","","","","","","","","","","","",""],mk=[..._y,...by],ng=[...Pa.filter(t=>t.name!=="").map(t=>t.name)],yk=yy.map(t=>t.name);function ai(t){return hk(t.map(dk))}const Tc={};function vk(t){if(Tc[t])return Tc[t];let e=[];return t===""?e=ai(ng):t===""?e=ai(mk):t===""?e=ai(yk):t==="(A)"?e=ai(_y):t==="(B)"?e=ai(by):e=ai(ng),Tc[t]=e,e}function xk(t){return t===""||t===""||t==="(B)"}function _k(t){const e=[],n=t.split(",");let r="";for(let i of n){if(i=i.trim(),!i)continue;i=i.replace(/\([^)]*\)/g,"").trim();const s=i.match(/^([-]+(?:\s?[-]+)?)/);if(s&&(r=s[1].trim(),i=i.substring(r.length).trim()),i=i.replace(//g,"").trim(),i.includes("-")){const[o,a]=i.split("-"),c=parseInt(o,10),u=parseInt(a,10);if(!isNaN(c)&&!isNaN(u))for(let f=c;f<=u;f++)r&&e.push({book:r,chapter:f})}else{const o=parseInt(i,10);isNaN(o)||r&&e.push({book:r,chapter:o})}}return e}function Rc(t,e){return t?e?{day:t.day,mainTitle:`${t.mainTitle} & ${e.mainTitle}`,sections:[...t.sections||[],...e.sections||[]]}:t:e}function gr(t,e){if(t===""||t===""){const o=t===""?rk:ik,a=e.length;let c=[];if(a===31)c=[...o,{day:31,mainTitle:"  ",sections:[{subTitle:"    ",bibleRef:""}]}];else if(a===30)c=[...o];else if(a===29){const u=Rc(o[25],o[26]);c=[...o.slice(0,25),u,...o.slice(27)]}else if(a===28){const u=Rc(o[4],o[5]),f=Rc(o[25],o[26]);c=[...o.slice(0,4),u,...o.slice(6,25),f,...o.slice(27,30)]}else c=o.slice(0,a);return e.map((u,f)=>{const d=f;if(d>=c.length)return{date:u,items:[],chapters:0,label:" "};const h=c[d];let x=[];const v=h.sections.map(m=>{const g=_k(m.bibleRef);return x=[...x,...g],{...m,items:g}}),w=x.filter((m,g,y)=>y.findIndex(b=>b.book===m.book&&b.chapter===m.chapter)===g),k=tg(w);return{date:u,items:w,chapters:w.length,label:`[${h.mainTitle}] ${k}`,panorama:{...h,parsedSections:v}}})}const n=vk(t),r=gk(n,e),i=xk(t),s=i?ck(e.length):[];return r.map((o,a)=>{let c=o.items;if(i){const x=(s[a]||[]).map(v=>({book:"",chapter:v}));c=[...c,...x]}const u=c.length,d=`${tg(c)} ( ${u})`;return{date:o.date,items:c,chapters:u,label:d}})}function rg(t={},e={},n,r){const i=on(n,r);if(!i||i.length===0)return{ranking:[],medalCounts:{gold:0,silver:0,bronze:0}};const s=he,o={};s.forEach(f=>{const d=gr(f,i),h={};(d||[]).forEach(x=>{!x||!x.date||(h[x.date]=x)}),o[f]=h});const a={};s.forEach(f=>{const d=t&&t[f],h=d&&d.users;if(!h)return;const x=o[f]||{};Object.entries(h).forEach(([v,w])=>{const k=w&&w.checks||{};let m=0;i.forEach(g=>{if(k[g]){const y=x[g];y&&typeof y.chapters=="number"&&y.chapters>0&&(m+=y.chapters)}}),a[v]||(a[v]={uid:v,crew:f,chapters:0}),a[v].chapters+=m})});const c=Object.values(a).map(f=>{const d=e[f.uid]||{},h=d.crew||f.crew;let x=null;const v=o[h]||{};let w=0;return Object.values(v).forEach(m=>{w+=m.chapters||0}),f.chapters>=w&&w>0&&(h===""?x="gold":h===""?x="silver":(h===""||h.includes("")||h.includes(""))&&(x="bronze")),{uid:f.uid,name:d.name||"",crew:h,chapters:f.chapters,medal:x}});c.sort((f,d)=>d.chapters-f.chapters);const u={gold:0,silver:0,bronze:0};return c.forEach(f=>{f.medal==="gold"&&u.gold++,f.medal==="silver"&&u.silver++,f.medal==="bronze"&&u.bronze++}),{ranking:c,medalCounts:u}}function Af({dates:t,todayKey:e,userChecks:n,userDailyActivity:r}){const i=n||{},s=r||{},o=!!i[e],a=!!(s[e]&&s[e].biblePageVisited),c=Array.isArray(t)?t.indexOf(e):-1,u=c>=0?t.slice(0,c+1):[],f=c>0?t.slice(0,c):[],d=u.length>0&&u.every(v=>!!i[v]),h=f.length===0?!0:f.every(v=>!!i[v]),x=f.some(v=>!i[v]);return d?{key:"success",label:" "}:a&&!o?{key:"running",label:"  .."}:h&&!o?{key:"ready",label:" "}:x?{key:"missed",label:" !"}:{key:"ready",label:" "}}function bk({user:t}){const e=yn();_.useEffect(()=>{(!t||!t.isAdmin)&&(console.warn("  .   ."),e("/admin-login"))},[t,e]);const[n,r]=_.useState({}),[i,s]=_.useState({}),[o,a]=_.useState(()=>{const p={};return he.forEach(E=>p[E]=[]),p}),[c,u]=_.useState(null),[f,d]=_.useState({}),[h,x]=_.useState(""),[v,w]=_.useState("");_.useState({year:null,month:null});const[k,m]=_.useState({}),[g,y]=_.useState(""),[b,T]=_.useState(""),[S,C]=_.useState(""),[j,P]=_.useState({:"",:"",:""}),[I,M]=_.useState({:"manual",:"manual",:"manual"}),[A,H]=_.useState({:[],:[],:[]}),[q,se]=_.useState({:[],:[],:[]}),[O,G]=_.useState({});_.useState([]),_.useState("");const[N,B]=_.useState({}),[W,X]=_.useState(!1);_.useState("");const[ee,Pe]=_.useState(""),[Ce,Be]=_.useState(new Date().getFullYear()),[Xe,Te]=_.useState(new Date().getMonth()+1),[xr,_r]=_.useState(""),[ti,Bn]=_.useState("gold"),[br,ts]=_.useState(!1),[ni,Sr]=_.useState(new Date().getFullYear()),[wr,Eo]=_.useState(new Date().getMonth()+1),[ln,Ft]=_.useState(""),[Fa,ko]=_.useState({}),zn=_.useRef(null),[Ue,To]=_.useState(""),Je=sy(),vn=Co(),[Ro,xn]=_.useState([]),[Cr,jo]=_.useState(""),[ri,ns]=_.useState(null),[Ma,Io]=_.useState(!1),[_n,rs]=_.useState(""),[D,Z]=_.useState(""),[ae,Re]=_.useState([]),[He,dt]=_.useState(!1),[Ze,an]=_.useState("all"),[bn,Sn]=_.useState(new Date().getFullYear()),[Yt,wn]=_.useState(!1),[St,ii]=_.useState(!1),[Er,it]=_.useState(!1),[Gt,Oa]=_.useState(!1),[si,is]=_.useState(null),[Nf,Df]=_.useState(!1),[Sy,Pf]=_.useState({}),[cn,wy]=_.useState("group1"),[kr,Cy]=_.useState(new Date().getFullYear()),[Tr,Ey]=_.useState(new Date().getMonth()===0?12:new Date().getMonth()),[Ao,Ff]=_.useState(!1),No=_.useRef(null);_.useEffect(()=>{const p=new Date,E=p.getFullYear(),R=p.getMonth()+1,z=on(E,R);if(!z||z.length===0){const ve={};he.forEach(st=>ve[st]=[]),a(ve);return}const Q=p.getDate(),Y=z.slice(0,Q),J=`${E}-${String(R).padStart(2,"0")}-${String(Q).padStart(2,"0")}`,je=he,ge={};je.forEach(ve=>{const st=gr(ve,z),ze={};st.forEach(Mt=>{ze[Mt.date]=Mt}),ge[ve]=ze}),je.forEach(ve=>{});const te={};he.forEach(ve=>te[ve]=[]);const de=new Set;he.forEach(ve=>{(A[ve]||[]).forEach(ze=>{n[ze],de.add(ze),Mf(ve,ze,n,i,ge,Y,z,J,te)})}),Object.entries(n||{}).forEach(([ve,st])=>{if(de.has(ve))return;const ze=st.crew;ze&&he.includes(ze)&&Mf(ze,ve,n,i,ge,Y,z,J,te)}),Object.keys(te).forEach(ve=>{te[ve].sort((st,ze)=>ze.chapters-st.chapters)}),a(te)},[i,n,A]);function Mf(p,E,R,z,Q,Y,J,je,ge){const te=z[p]||{},ve=(te.users&&te.users[E]||{}).checks||{};let st=0,ze=0;Y.forEach($f=>{const Po=Q[p]&&Q[p][$f];Po&&typeof Po.chapters=="number"&&(ze+=Po.chapters,ve[$f]&&(st+=Po.chapters))});const Mt=R&&R[E]?R[E]:{},Do=Mt.name||E,Hy=ze>0?Math.round(st/ze*100):0,Lf=Af({dates:J,todayKey:je,userChecks:ve,userDailyActivity:Mt.dailyActivity||{}}),Vy=Xt(Mt.earnedMedals||{});ge[p].push({uid:E,name:Do,chapters:st,progress:Hy,stateKey:Lf.key,stateLabel:Lf.label,medals:Mt.medals||{},dokStatus:Vy})}_.useEffect(()=>{const p=JC(E=>{const R=E||{},z={};he.forEach(Q=>{z[Q]=R[Q]||"manual"}),M(z)});return()=>{typeof p=="function"&&p()}},[]),_.useEffect(()=>{const p=YC(E=>{G(E||{})});return()=>{typeof p=="function"&&p()}},[]),_.useEffect(()=>{async function p(){if(Je){X(!0);try{const E=await Wp(Je);B(E||{})}catch(E){console.error("  ",E)}finally{X(!1)}}}p()},[Je,si]),_.useEffect(()=>{const p=QC(Je,E=>{is(E),E?Wp(Je).then(Pf):Pf({})});return()=>{p&&p()}},[Je]);async function Of(p,E){if(window.confirm(`${p}    ?
(     ,   .)`)){Df(!0);try{await GC(p,E),alert(`${p}    .`)}catch(R){console.error(R),alert("    .")}finally{Df(!1)}}}_.useEffect(()=>{const p=ja(r),E=ly(R=>{R?(x(R.title||""),w(R.content||"")):(x(""),w(""))});return()=>{typeof p=="function"&&p(),typeof E=="function"&&E()}},[]),_.useEffect(()=>{if(cn!=="group3"&&cn!=="group4"){s({});return}const p=ry(s);return()=>{typeof p=="function"&&p()}},[cn]),_.useEffect(()=>{const p=Rf(E=>{const R=E||{};m(R),y(R.churchName||""),T(R.appDescription||""),C(R.bulletinUrl||"")});return()=>{typeof p=="function"&&p()}},[]),_.useEffect(()=>{const p=he,E=[];return p.forEach(R=>{const z=Yu(R,Je,Q=>{const Y=Q?Object.keys(Q):[];H(J=>({...J,[R]:Y}))});typeof z=="function"&&E.push(z)}),()=>{E.forEach(R=>{try{R()}catch{}})}},[Je]),_.useEffect(()=>{const p=he,E=[];return p.forEach(R=>{const z=Yu(R,vn,Q=>{const Y=Q?Object.keys(Q):[];se(J=>({...J,[R]:Y}))});typeof z=="function"&&E.push(z)}),()=>{E.forEach(R=>{try{R()}catch{}})}},[vn]),Object.entries(n||{}).map(([p,E])=>({uid:p,...E}));function ky(p){const R=(j[p]||"").toString().split(/[,,\s]+/).map(J=>J.trim()).filter(Boolean);if(R.length===0)return;const z=/^[-a-zA-Z]+$/,Q=R.filter(J=>!z.test(J));if(Q.length>0){alert(`    (, ,  )  :
${Q.join(", ")}

(  )  .`);return}const Y=R.map(J=>{const je=Object.entries(n||{}).find(([ge,te])=>te.name===J);return{name:J,uid:je?je[0]:null}});PC(p,Je,Y).then(()=>{P(J=>({...J,[p]:""}))})}function Ba(p,E){XC(p,E).then(()=>{}).catch(R=>{console.error(R),alert("     .")})}async function Ty(p){if(window.confirm(`${p}    ? (   .)`))try{const R=(A[p]||[]).map(z=>vC(z,null));await Promise.all(R),await FC(p,Je),alert(`${p}   ,     .`)}catch(E){console.error(E),alert("   .")}}function Ry(p,E=null){const R=n[p];if(No.current){try{No.current()}catch{}No.current=null}if(u({uid:p,...R}),Ft(E||(R==null?void 0:R.crew)||""),R&&R.crew){const z=$p(R.crew,p,d);typeof z=="function"&&(No.current=z)}else d({})}_.useEffect(()=>{if(!(c!=null&&c.uid)||!ln){ko({});return}if(zn.current){try{zn.current()}catch{}zn.current=null}const p=$p(ln,c.uid,ko);return zn.current=p,()=>{if(zn.current)try{zn.current()}catch{}}},[c==null?void 0:c.uid,ni,wr,ln]);function jy(p,E){if(!(c!=null&&c.uid)||!ln)return;const R=!E;ny(ln,c.uid,p,R).catch(z=>{console.error("  ",z),alert("  .")})}async function Bf(p,E){if(!p)return;const R=E?`(${E})`:"";window.confirm(` ? ${R}

- : 0000
-      .`)&&(await BC(p),alert(" 0000 ."))}async function Iy(p,E){if(!p)return;const R=E?`(${E})`:"";window.confirm(` ? ${R}

-   ' ' .
-    .`)&&(await _C(p),alert("() ."))}async function Ay(p,E){if(!p)return;const R=E?`(${E})`:"";window.confirm(`  ? ${R}`)&&(await bC(p),alert("."))}async function Ny(p,E){if(!p)return;const R=E?`(${E})`:"";window.confirm(`  ? ${R}

- users  .
-  (  )   .
-   .`)&&(await SC(p),alert(" ."))}async function Dy(){const p=window.prompt("    .");p&&(await WC(p),alert("  . (  8395  .)"))}function Py(){window.confirm("   ?")&&IC().then(()=>{alert("  .")})}async function Fy(){if(window.confirm(`3   DB  .
  .

?`))try{const E=await jC(3);alert(` : ${(E==null?void 0:E.deleted)||0} .`)}catch(E){console.error("  ",E),alert("   .   .")}}function My(p){const E=Ve(p);window.confirm(`${E}    .
  .

?`)&&kC(p).then(()=>{alert(`${E}    .`)})}function Oy(){const p=new Date;let E=p.getFullYear(),R=p.getMonth()+1;R===1?(E=E-1,R=12):R=R-1;const{ranking:z}=rg(i,n,E,R);if(!z||z.length===0){alert("   .");return}const Q=String(R).padStart(2,"0"),Y=`${E}-${Q}`,J=[];z.forEach(de=>{if(!de.medal)return;const ve=n[de.uid];if(!ve)return;const st=ve.earnedMedals||{},ze=Xt({...st,[`${Y}_${de.crew}`]:de.medal}),Mt=Xt(st);ze.totalDok>Mt.totalDok&&J.push({name:de.name,uid:de.uid,dokCount:ze.totalDok})});const je=Vu(E,R,z,J),ge={};z.forEach(de=>{var Mt,Do;const ve=((Mt=n[de.uid])==null?void 0:Mt.medals)||{},st=(ve.gold||0)+(ve.silver||0)+(ve.bronze||0),ze=Xt(((Do=n[de.uid])==null?void 0:Do.earnedMedals)||{});ge[de.uid]={uid:de.uid,name:de.name,crew:de.crew,chapters:de.chapters,progress:100,stateLabel:de.medal?"":"",totalMedals:st,totalDok:ze.totalDok}});const te=Up(E,R,ge);Promise.all([je,te]).then(()=>{alert(`${E} ${R}      .`),Cc().then(xn)})}async function By(){if(window.confirm(`${kr} ${Tr}       ?
(,  ,  1   .)`)){Ff(!0);try{const{ranking:p}=rg(i,n,kr,Tr);if(!p||p.length===0){alert("  . (     )");return}const E=String(Tr).padStart(2,"0"),R=`${kr}-${E}`,z=[];p.forEach(Y=>{if(!Y.medal)return;const J=n[Y.uid];if(!J)return;const je=J.earnedMedals||{},ge=Xt({...je,[`${R}_${Y.crew}`]:Y.medal}),te=Xt(je);ge.totalDok>te.totalDok&&z.push({name:Y.name,uid:Y.uid,dokCount:ge.totalDok})}),await Vu(kr,Tr,p,z);const Q={};p.forEach(Y=>{var te,de;const J=((te=n[Y.uid])==null?void 0:te.medals)||{},je=(J.gold||0)+(J.silver||0)+(J.bronze||0),ge=Xt(((de=n[Y.uid])==null?void 0:de.earnedMedals)||{});Q[Y.uid]={uid:Y.uid,name:Y.name,crew:Y.crew,chapters:Y.chapters,progress:100,stateLabel:Y.medal?"":"",totalMedals:je,totalDok:ge.totalDok}}),await Up(kr,Tr,Q),alert(`${kr} ${Tr}   .`),Cc().then(xn)}catch(p){console.error("  ",p),alert("   .")}finally{Ff(!1)}}}async function zy(){if(!ee||!Ce||!Xe||!xr){alert(", , ,   / .");return}const p=Math.min(12,Math.max(1,Number(Xe)||0)),R=Object.entries(n||{}).find(([Q,Y])=>(Y&&Y.name)===ee);if(!R){alert("     . (   )");return}const[z]=R;ts(!0);try{const Q=await DC(Ce,p,z,ti,xr);alert(Q?"      .":"  .    .")}catch(Q){console.error(Q),alert("    .")}}_.useEffect(()=>{Cc().then(xn)},[]);async function Ly(p){if(jo(p),!p){ns(null);return}Io(!0);try{const E=await iE(p);ns(E)}catch(E){console.error(E),alert("    .")}finally{Io(!1)}}async function za(p){const E=p||bn;dt(!0);try{const R=await sE(E),z={};Object.entries(R).forEach(([Y,J])=>{["gold","silver","bronze"].forEach(je=>{(J[je]||[]).forEach(ge=>{const te=ge.name,de=ge.crew;z[te]||(z[te]={name:te,crews:{},totalBible:0,cnt:{adv:0,int:0,nt:0,ota:0,otb:0}}),z[te].crews[de]=(z[te].crews[de]||0)+1,de===""&&z[te].cnt.adv++,de===""&&z[te].cnt.int++,de===""&&z[te].cnt.nt++,de==="(A)"&&z[te].cnt.ota++,de==="(B)"&&z[te].cnt.otb++})})});const Q=Object.values(z).map(Y=>{let J=0,je=Y.cnt.nt;J+=Y.cnt.adv;const ge=Math.min(Y.cnt.int,je);J+=ge,je-=ge;const te=Math.min(Y.cnt.ota,Y.cnt.otb,je);return J+=te,{...Y,totalBible:J}});Re(Q.sort((Y,J)=>J.totalBible-Y.totalBible||Y.name.localeCompare(J.name)))}catch(R){console.error(R),alert("     .")}finally{dt(!1)}}_.useEffect(()=>{za()},[]);const $y=ae.filter(p=>Ze==="all"?!0:Ze==="full"?p.totalBible>0:(p.crews[Ze]||0)>0),ss=Object.entries(n||{}).filter(([p,E])=>{if(!E||(E.status||"active")==="inactive")return!1;const R=Object.values(A).some(z=>Array.isArray(z)&&z.includes(p));return!E.crew&&!R}).map(([p,E])=>({uid:p,...E})),La=Object.entries(n||{}).filter(([p,E])=>E&&(E.status||"")==="inactive").map(([p,E])=>({uid:p,...E}));async function Wy(){if(!_n||!D){alert("    .");return}const p=Object.entries(n).find(([z,Q])=>(Q.name||"").trim()===_n.trim());if(!p){alert("     . (   )");return}const[E,R]=p;if(window.confirm(`${_n}  ${Ve(D)}   ?`))try{await oy(D,E,R.name),alert(" .       ."),rs(""),Z("")}catch(z){console.error(z),alert(" : "+(z.message||z))}}async function Uy(){if(!_n){alert("  .");return}const p=(_n||"").trim(),E=Object.entries(n).find(([ge,te])=>(te.name||"").trim()===p);if(!E){alert("     .");return}const[R,z]=E,Q=qn(z.name);let Y=D,J="";for(const[ge,te]of Object.entries(q))if(Array.isArray(te)&&te.some(de=>qn(de)===Q)){Y=ge,J="( )";break}if(!J&&O){for(const[ge,te]of Object.entries(O))if(te&&te[R]){Y=ge,J="(  )";break}}if(!Y){alert("  /    .");return}const je=Ve(Y);if(window.confirm(`${_n}  ${je}  ? ${J}`))try{await Tf(R,Y),alert("."),rs(""),Z("")}catch(ge){console.error(ge),alert(" : "+(ge.message||ge))}}async function zf(p,E,R){const z=R?"":"";if(window.confirm(`${E}  ${z} ?
(      .)`))try{await UC(p,!R),alert(`${E}  ${z} .`)}catch(Q){console.error(Q),alert(" .")}}return l.jsxs("div",{style:{padding:20,minHeight:"100vh",background:"#F1FAEE"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[l.jsx("h2",{style:{color:"#1D3557",margin:0},children:"  "}),l.jsx("button",{onClick:()=>e("/home"),style:{padding:"8px 16px",borderRadius:10,border:"none",background:"#457B9D",color:"#fff",fontSize:14,fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:"  "})]}),l.jsx("p",{style:{marginBottom:20},children:"  ,  , /     ."}),l.jsx("div",{style:{display:"flex",gap:8,marginBottom:24,overflowX:"auto",paddingBottom:8,flexWrap:"nowrap",WebkitOverflowScrolling:"touch"},children:[{id:"group1",label:"1.   ",icon:""},{id:"group2",label:"2.   ",icon:""},{id:"group3",label:"3.   ",icon:""},{id:"group4",label:"4.   ",icon:""}].map(p=>l.jsxs("button",{onClick:()=>wy(p.id),style:{padding:"12px 18px",borderRadius:12,border:"none",background:cn===p.id?"#1D3557":"#fff",color:cn===p.id?"#fff":"#457B9D",fontWeight:800,fontSize:14,cursor:"pointer",boxShadow:cn===p.id?"0 4px 12px rgba(29, 53, 87, 0.3)":"0 4px 6px rgba(0,0,0,0.05)",whiteSpace:"nowrap",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:6},children:[l.jsx("span",{children:p.icon})," ",p.label]},p.id))}),cn==="group1"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{marginBottom:18},children:l.jsx("button",{type:"button",onClick:()=>e("/admin/class-notice"),style:{padding:"10px 14px",borderRadius:10,border:"none",background:"#111827",color:"#fff",fontSize:14,fontWeight:800,cursor:"pointer",boxShadow:"0 6px 16px rgba(0,0,0,0.10)",marginBottom:10},children:"   "})}),l.jsxs("div",{style:{marginBottom:20,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)"},children:[l.jsx("h3",{style:{marginBottom:8,color:"#1D3557"},children:"[1]   "}),l.jsxs("div",{style:{marginBottom:8},children:[l.jsx("label",{style:{fontSize:13,display:"block",marginBottom:4},children:" "}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("input",{style:{flex:1,padding:8,borderRadius:6,border:"1px solid #ccc"},value:g,onChange:p=>y(p.target.value),placeholder:": "}),l.jsx("button",{type:"button",onClick:()=>{ZC(g||""),alert("  .")},style:{padding:"8px 12px",borderRadius:6,border:"none",background:"#1D3557",color:"#fff",fontSize:13,cursor:"pointer"},children:""})]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{fontSize:13,display:"block",marginBottom:4},children:"   "}),l.jsx("textarea",{style:{width:"100%",minHeight:80,padding:8,borderRadius:6,border:"1px solid #ccc",resize:"vertical"},value:b,onChange:p=>T(p.target.value),placeholder:"     ."}),l.jsx("button",{type:"button",onClick:()=>{eE(b||""),alert("  .")},style:{marginTop:8,padding:"8px 12px",borderRadius:6,border:"none",background:"#457B9D",color:"#fff",fontSize:13,cursor:"pointer"},children:" "})]}),l.jsxs("div",{style:{marginTop:14},children:[l.jsx("label",{style:{fontSize:13,display:"block",marginBottom:4},children:"   (URL)"}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("input",{style:{flex:1,padding:8,borderRadius:6,border:"1px solid #ccc"},value:S,onChange:p=>C(p.target.value),placeholder:": https://... (PDF/ )"}),l.jsx("button",{type:"button",onClick:()=>{tE(S||""),alert("  .")},style:{padding:"8px 12px",borderRadius:6,border:"none",background:"#457B9D",color:"#fff",fontSize:13,cursor:"pointer",whiteSpace:"nowrap"},children:""})]}),l.jsx("div",{style:{marginTop:6,fontSize:12,color:"#666"},children:"           ."})]}),l.jsxs("div",{style:{marginTop:16},children:[l.jsx("h4",{style:{marginBottom:6,color:"#1D3557"},children:"  "}),l.jsx("input",{style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #ccc",marginBottom:6},placeholder:" ",value:h,onChange:p=>x(p.target.value)}),l.jsx("textarea",{style:{width:"100%",minHeight:70,padding:8,borderRadius:6,border:"1px solid #ccc",resize:"vertical"},placeholder:"      .",value:v,onChange:p=>w(p.target.value)}),l.jsx("button",{type:"button",onClick:()=>{KC(h||"",v||""),alert("   . (   .)")},style:{marginTop:8,padding:"8px 12px",borderRadius:6,border:"none",background:"#E76F51",color:"#fff",fontSize:13,cursor:"pointer"},children:" "})]}),l.jsxs("div",{style:{marginTop:16},children:[l.jsx("h4",{style:{marginBottom:6,color:"#1D3557"},children:"    "}),l.jsx("p",{style:{fontSize:12,marginBottom:8,color:"#666"},children:"        ."}),l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:12},children:[l.jsx("button",{type:"button",onClick:Dy,style:{padding:"8px 12px",borderRadius:8,border:"none",background:"#264653",color:"#fff",fontSize:13,fontWeight:"bold",cursor:"pointer"},children:"  "}),l.jsx("button",{onClick:Py,style:{padding:"8px 12px",borderRadius:8,border:"none",background:"#B91C1C",color:"#fff",fontSize:13,fontWeight:"bold",cursor:"pointer"},children:"  "}),l.jsx("button",{onClick:Fy,style:{padding:"8px 12px",borderRadius:8,border:"1px solid #0B8457",background:"#fff",color:"#0B8457",fontSize:13,fontWeight:"bold",cursor:"pointer"},children:"3   "})]}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6,marginTop:10},children:he.map(p=>l.jsxs("button",{onClick:()=>My(p),style:{padding:"6px 10px",borderRadius:6,border:"none",background:"#E63946",color:"#fff",fontSize:11,cursor:"pointer"},children:[Ve(p),"  "]},p))})]}),l.jsxs("div",{style:{marginTop:24,padding:16,borderRadius:12,background:"#f8f9fa",border:"1px solid #dee2e6"},children:[l.jsx("h4",{style:{marginTop:0,marginBottom:10,color:"#333"},children:"[11]   "}),l.jsx("p",{style:{fontSize:12,marginBottom:12,color:"#666"},children:"      ."}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:15},children:Object.entries(n||{}).filter(([p,E])=>E.isAdmin).map(([p,E])=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"4px 10px",background:"#fff",borderRadius:20,border:"1px solid #ddd"},children:[l.jsx("span",{style:{fontWeight:"bold",fontSize:12},children:E.name||p}),l.jsx("button",{onClick:()=>zf(p,E.name,!0),style:{border:"none",background:"none",cursor:"pointer",fontSize:12,color:"#E63946"},children:""})]},p))}),l.jsxs("div",{style:{display:"flex",gap:6,maxWidth:250},children:[l.jsx("input",{placeholder:" ",id:"newAdminNameInput",style:{flex:1,padding:6,borderRadius:6,border:"1px solid #ccc",fontSize:12}}),l.jsx("button",{onClick:()=>{const p=document.getElementById("newAdminNameInput"),E=(p.value||"").trim(),R=Object.entries(n).find(([z,Q])=>Q.name===E);R?(zf(R[0],R[1].name,!1),p.value=""):alert("   .")},style:{padding:"6px 12px",borderRadius:6,border:"none",background:"#333",color:"#fff",fontSize:12,cursor:"pointer"},children:""})]})]})]})]}),cn==="group2"&&l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:20},children:[l.jsxs("div",{style:{padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)"},children:[l.jsx("h3",{style:{marginBottom:8,color:"#1D3557"},children:"[2]  "}),l.jsx("p",{style:{fontSize:12,marginBottom:12,color:"#555"},children:"      .        ."}),he.map(p=>l.jsxs("div",{style:{marginBottom:12},children:[l.jsxs("div",{style:{fontWeight:"bold",marginBottom:4},children:[Ve(p),"  "]}),l.jsxs("div",{style:{display:"flex",gap:8,marginBottom:4,flexWrap:"wrap",fontSize:12},children:[l.jsx("span",{style:{alignSelf:"center"},children:" :"}),l.jsx("button",{type:"button",onClick:()=>Ba(p,"manual"),style:{padding:"6px 10px",borderRadius:999,border:I[p]==="manual"?"2px solid #2E7D32":"1px solid #ccc",background:I[p]==="manual"?"#E8F5E9":"#fff",color:"#2E7D32",fontWeight:"bold",cursor:"pointer"},children:"()"}),l.jsx("button",{type:"button",onClick:()=>Ba(p,"all"),style:{padding:"6px 10px",borderRadius:999,border:I[p]==="all"?"2px solid #1E88E5":"1px solid #ccc",background:I[p]==="all"?"#E3F2FD":"#fff",color:"#1E88E5",fontWeight:"bold",cursor:"pointer"},children:""}),l.jsx("button",{type:"button",onClick:()=>Ba(p,"closed"),style:{padding:"6px 10px",borderRadius:999,border:I[p]==="closed"?"2px solid #D32F2F":"1px solid #ccc",background:I[p]==="closed"?"#FFEBEE":"#fff",color:"#D32F2F",fontWeight:"bold",cursor:"pointer"},children:"()"})]}),l.jsxs("div",{style:{display:"flex",gap:8,marginBottom:4},children:[l.jsx("input",{style:{flex:1,padding:8,borderRadius:6,border:"1px solid #ccc"},placeholder:" ",value:j[p]||"",onChange:E=>P(R=>({...R,[p]:E.target.value}))}),l.jsx("button",{type:"button",onClick:()=>ky(p),style:{padding:"8px 12px",borderRadius:6,border:"none",background:"#2E7D32",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:""}),l.jsx("button",{type:"button",onClick:()=>Ty(p),style:{padding:"8px 12px",borderRadius:6,border:"none",background:"#D32F2F",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:""})]}),A[p]&&A[p].length>0&&l.jsxs("div",{style:{fontSize:12,color:"#333"},children:[l.jsx("span",{children:"   : "}),A[p].join(", ")]})]},p)),l.jsxs("div",{style:{marginTop:18},children:[l.jsx("h4",{style:{marginBottom:6},children:"() "}),!La||La.length===0?l.jsx("p",{style:{fontSize:12,color:"#666"},children:"  ."}):l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"left",padding:4},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"center",padding:4},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"center",padding:4},children:""})]})}),l.jsx("tbody",{children:La.map(p=>l.jsxs("tr",{children:[l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4},children:p.name||p.uid}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"center"},children:l.jsx("button",{type:"button",onClick:()=>Ay(p.uid,p.name),style:{padding:"4px 8px",borderRadius:8,border:"none",background:"#457B9D",color:"#fff",fontSize:11,cursor:"pointer"},children:""})}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"center"},children:l.jsx("button",{type:"button",onClick:()=>Ny(p.uid,p.name),style:{padding:"4px 8px",borderRadius:8,border:"none",background:"#B71C1C",color:"#fff",fontSize:11,cursor:"pointer"},children:""})})]},p.uid))})]})]})]}),l.jsxs("div",{style:{padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)"},children:[l.jsx("h3",{style:{marginBottom:8,color:"#1D3557"},children:"[3]      "}),l.jsx("p",{style:{fontSize:12,marginBottom:12,color:"#555"},children:"        . (     )"}),l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:[l.jsx("input",{placeholder:" ",value:_n,onChange:p=>rs(p.target.value),style:{padding:8,borderRadius:6,border:"1px solid #ccc"}}),l.jsxs("select",{value:D,onChange:p=>Z(p.target.value),style:{padding:8,borderRadius:6,border:"1px solid #ccc"},children:[l.jsx("option",{value:"",children:" "}),he.map(p=>l.jsx("option",{value:p,children:Ve(p)},p))]}),l.jsx("button",{onClick:Wy,style:{padding:"8px 16px",borderRadius:6,border:"none",background:"#0B8457",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:""}),l.jsx("button",{onClick:Uy,style:{padding:"8px 16px",borderRadius:6,border:"1px solid #D32F2F",background:"#fff",color:"#D32F2F",fontWeight:"bold",cursor:"pointer"},children:""})]})]}),l.jsxs("div",{style:{marginBottom:20,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)",borderLeft:"5px solid #2E7D32"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[l.jsxs("h3",{style:{margin:0,color:"#1D3557"},children:["[4]      (",vn,")"]}),(()=>{const p=new Date,z=`${p.getFullYear()}-${String(p.getMonth()+1).padStart(2,"0")}`>=vn;return l.jsx("button",{onClick:()=>Of(vn,q),disabled:!z||Nf,style:{padding:"8px 16px",borderRadius:8,border:"none",background:z?"#2E7D32":"#ccc",color:"#fff",fontWeight:"bold",cursor:z?"pointer":"not-allowed",fontSize:13},children:Nf?" ...":`[${vn}]    (  )`})})()]}),l.jsxs("p",{style:{fontSize:12,color:"#666",marginBottom:12},children:["     . ",l.jsxs("strong",{children:[vn," 1  "]}),"       ."]}),he.map(p=>{const E=q[p]||[];return E.length===0?null:l.jsxs("div",{style:{marginBottom:10,fontSize:13},children:[l.jsxs("span",{style:{fontWeight:"bold",marginRight:8},children:[Ve(p),":"]}),l.jsx("span",{style:{color:"#333"},children:E.join(", ")})]},p)}),Object.values(q).every(p=>p.length===0)&&l.jsx("div",{style:{fontSize:12,color:"#999"},children:"   ."})]}),l.jsxs("div",{style:{marginBottom:20,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)"},children:[l.jsxs("h3",{style:{marginBottom:8,color:"#1D3557"},children:["[5]      (",Je,")"]}),l.jsx("p",{style:{fontSize:12,marginBottom:12,color:"#555"},children:"    [4]        . ( ([2])      .)"}),si?l.jsxs("div",{children:[l.jsxs("div",{style:{fontSize:11,color:"#2E7D32",marginBottom:15,fontWeight:"bold"},children:["   : ",new Date(si).toLocaleString()]}),he.map(p=>{const E=Sy[p]||[],R=A[p]||[],z=new Set(E.map(Q=>qn(Q)));return l.jsxs("div",{style:{marginBottom:20,fontSize:13},children:[l.jsxs("div",{style:{fontWeight:800,borderBottom:"2px solid #eee",paddingBottom:4,color:"#1D3557",display:"flex",justifyContent:"space-between"},children:[l.jsx("span",{children:Ve(p)}),l.jsxs("span",{style:{color:"#2E7D32"},children:[R.length,""]})]}),l.jsx("div",{style:{marginTop:8,display:"flex",flexWrap:"wrap",gap:"6px 12px",lineHeight:1.5},children:R.length===0?l.jsx("span",{style:{color:"#999",fontStyle:"italic"},children:"  "}):R.sort().map(Q=>{const Y=!z.has(qn(Q));return l.jsx("span",{style:{color:Y?"#E63946":"#444",fontWeight:Y?"bold":"normal",textDecoration:Y?"underline":"none"},children:Q},Q)})})]},p)}),l.jsxs("div",{style:{marginTop:24,padding:"12px 14px",borderRadius:8,background:"#f8f9fa",border:"1px solid #dee2e6",display:"flex",justifyContent:"space-between",alignItems:"center",fontWeight:900,fontSize:16,color:"#1D3557"},children:[l.jsx("span",{children:"    "}),l.jsxs("span",{style:{color:"#2E7D32",fontSize:20},children:[he.reduce((p,E)=>{var R;return p+(((R=A[E])==null?void 0:R.length)||0)},0),""]})]}),l.jsx("p",{style:{fontSize:11,color:"#E63946",marginTop:10},children:"*  :       ."})]}):l.jsxs("div",{style:{fontSize:13,color:"#777",background:"#F1F3F5",padding:"30px 20px",borderRadius:12,border:"1px dashed #CED4DA",textAlign:"center"},children:[l.jsxs("p",{style:{marginBottom:15,fontWeight:"bold",color:"#495057"},children:["  (",Je,")     ."]}),l.jsxs("p",{style:{marginBottom:20,fontSize:12,color:"#868E96"},children:["        ,",l.jsx("br",{}),"    ([2] )        ."]}),l.jsx("button",{onClick:()=>Of(Je,A),style:{padding:"12px 24px",background:"#457B9D",color:"#fff",border:"none",borderRadius:8,fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",transition:"all 0.2s"},onMouseOver:p=>p.target.style.background="#1D3557",onMouseOut:p=>p.target.style.background="#457B9D",children:"<2  5 >"}),l.jsx("p",{style:{fontSize:11,marginTop:15,color:"#ADB5BD"},children:"         [5]       ."})]})]})]}),cn==="group3"&&l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:20},children:[l.jsxs("div",{style:{marginBottom:10,padding:"12px 16px",borderRadius:12,background:"#F1F3F5",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsx("span",{style:{fontSize:14,fontWeight:"bold",color:"#1D3557"},children:"   ( )"}),l.jsx("button",{onClick:Oy,style:{padding:"8px 16px",borderRadius:8,border:"none",background:"#1D3557",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:"   "})]}),l.jsxs("div",{style:{marginTop:24,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 10px rgba(0,0,0,0.06)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[l.jsx("h3",{style:{margin:0},children:"[6]     "}),l.jsx("button",{onClick:()=>it(!Er),style:{padding:"6px 12px",borderRadius:8,border:"1px solid #1D3557",background:Er?"#f1f1f1":"#fff",color:"#1D3557",fontSize:12,fontWeight:"bold",cursor:"pointer"},children:Er?" ":" "})]}),Er&&l.jsxs(l.Fragment,{children:[l.jsx("p",{style:{fontSize:12,marginBottom:10},children:"         ."}),he.map(p=>l.jsxs("div",{style:{marginBottom:16},children:[l.jsx("h4",{style:{marginBottom:6},children:Ve(p)}),(!o[p]||o[p].length===0)&&l.jsx("p",{style:{fontSize:12,color:"#666"},children:"  ."}),o[p]&&o[p].length>0&&l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"left",padding:4},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"right",padding:4},children:" "}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"right",padding:4},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"center",padding:4},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"center",padding:4,minWidth:100},children:"/1"}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"center",padding:4},children:" "})]})}),l.jsx("tbody",{children:o[p].map(E=>l.jsxs("tr",{children:[l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4},children:E.name}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"right"},children:E.chapters}),l.jsxs("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"right"},children:[E.progress,"%"]}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"center"},children:(()=>{const R=E.stateLabel||" ",z=E.stateKey||"",Q=z==="success"||R.includes(""),Y=z==="ready"||R.includes(""),J=z==="running"||R.includes("");if(z==="fail"||R.includes("!"),Y)return l.jsx("span",{style:{color:"#166534",fontWeight:600},children:R});const je={display:"inline-block",borderRadius:8,padding:"4px 16px",fontWeight:600,backgroundColor:Q?"#DCFCE7":J?"#DBEAFE":"#E5E7EB",color:Q?"#166534":J?"#1D4ED8":"#111827"};return l.jsx("span",{style:je,children:R})})()}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"center"},children:l.jsxs("div",{style:{fontSize:11},children:[E.medals.gold||E.medals.silver||E.medals.bronze?l.jsxs("div",{style:{marginBottom:2},children:[E.medals.gold>0&&`${E.medals.gold} `,E.medals.silver>0&&`${E.medals.silver} `,E.medals.bronze>0&&`${E.medals.bronze}`]}):null,E.dokStatus&&l.jsxs("div",{style:{fontWeight:800,color:"#1D3557"},children:[" ",E.dokStatus.totalDok,"",E.dokStatus.fragments&&E.dokStatus.fragments.length>0&&l.jsxs("div",{style:{fontSize:9,fontWeight:400,color:"#666"},children:["(+",E.dokStatus.fragments.map(R=>R.name.replace("","")).join(","),")"]})]})]})}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"center"},children:l.jsx("button",{type:"button",onClick:()=>Bf(E.uid,E.name),style:{padding:"4px 8px",borderRadius:8,border:"none",background:"#8D99AE",color:"#fff",fontSize:11,cursor:"pointer"},children:" 0000"})})]},E.uid))})]})]},p))]}),l.jsxs("div",{style:{marginTop:16},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[l.jsx("h4",{style:{margin:0},children:" "}),l.jsx("button",{onClick:()=>Oa(!Gt),style:{padding:"4px 10px",borderRadius:8,border:"1px solid #1D3557",background:Gt?"#f1f1f1":"#fff",color:"#1D3557",fontSize:11,fontWeight:"bold",cursor:"pointer"},children:Gt?" ":" "})]}),Gt&&l.jsxs(l.Fragment,{children:[(!ss||ss.length===0)&&l.jsx("p",{style:{fontSize:12,color:"#666"},children:"  ."}),ss&&ss.length>0&&l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"left",padding:4},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"center",padding:4},children:" "}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"center",padding:4},children:""})]})}),l.jsx("tbody",{children:ss.map(p=>l.jsxs("tr",{children:[l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4},children:p.name||p.uid}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"center"},children:l.jsx("button",{type:"button",onClick:()=>Bf(p.uid,p.name),style:{padding:"4px 8px",borderRadius:8,border:"none",background:"#8D99AE",color:"#fff",fontSize:11,cursor:"pointer"},children:" 0000"})}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"center"},children:l.jsx("button",{type:"button",onClick:()=>Iy(p.uid,p.name),style:{padding:"4px 8px",borderRadius:8,border:"none",background:"#E63946",color:"#fff",fontSize:11,cursor:"pointer"},children:""})})]},p.uid))})]})]})]})]}),l.jsxs("div",{style:{marginTop:24,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 10px rgba(0,0,0,0.06)"},children:[l.jsx("h3",{style:{marginTop:0,marginBottom:10},children:"[7]    "}),l.jsx("p",{style:{fontSize:12,marginBottom:10,color:"#555"},children:"     ,      .         ."}),l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:8},children:[l.jsx("input",{type:"number",value:Ce,onChange:p=>Be(Number(p.target.value)||0),placeholder:"(: 2025)",style:{width:110,padding:6,borderRadius:8,border:"1px solid #ccc"}}),l.jsx("input",{type:"number",value:Xe,onChange:p=>{const E=Number(p.target.value)||0,R=Math.min(12,Math.max(1,E));Te(R)},placeholder:"(1~12)",style:{width:80,padding:6,borderRadius:8,border:"1px solid #ccc"}}),l.jsx("input",{type:"text",value:ee,onChange:p=>Pe(p.target.value),placeholder:" ",style:{flex:1,minWidth:120,padding:6,borderRadius:8,border:"1px solid #ccc"}}),l.jsxs("select",{value:xr,onChange:p=>_r(p.target.value),style:{width:140,padding:6,borderRadius:8,border:"1px solid #ccc"},children:[l.jsx("option",{value:"",children:" "}),he.map(p=>l.jsx("option",{value:p,children:Ve(p)},p))]}),l.jsxs("select",{value:ti,onChange:p=>Bn(p.target.value),style:{width:120,padding:6,borderRadius:8,border:"1px solid #ccc"},children:[l.jsx("option",{value:"gold",children:" "}),l.jsx("option",{value:"silver",children:" "}),l.jsx("option",{value:"bronze",children:" "}),l.jsx("option",{value:"none",children:" "})]})]}),l.jsx("button",{onClick:zy,disabled:br,style:{padding:"8px 16px",borderRadius:8,border:"none",background:br?"#A8A8A8":"#1D3557",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:br?" ...":"    "})]}),l.jsxs("div",{style:{marginBottom:20,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)",borderLeft:"5px solid #1D3557",marginTop:24},children:[l.jsx("h3",{style:{marginTop:0,marginBottom:10,color:"#1D3557"},children:"[10]     "}),l.jsxs("p",{style:{fontSize:12,marginBottom:16,color:"#555"},children:["           .",l.jsx("br",{}),l.jsx("strong",{children:"     "})," ."]}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:20},children:[l.jsx("div",{style:{position:"relative",width:"100%",maxWidth:350},children:l.jsx("input",{type:"text",placeholder:"    (: )",value:Ue,onChange:p=>To(p.target.value),style:{width:"100%",padding:"12px 15px",borderRadius:8,border:"1px solid #1D3557",fontSize:15,background:"#fff",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.05)"}})}),l.jsxs("select",{value:c?`${c.uid}|${ln}`:"",onChange:p=>{const E=p.target.value;if(!E)return;const[R,z]=E.split("|");Ry(R,z)},style:{width:"100%",maxWidth:350,padding:"10px",borderRadius:8,border:"1px solid #1D3557",fontSize:14,fontWeight:"bold",background:Ue?"#FFF9DB":"#fff"},children:[l.jsx("option",{value:"",children:Ue?`-- '${Ue}'   --`:"--    --"}),(()=>{const p=(Ue||"").trim().toLowerCase();if(!p)return null;const E=[];return Object.entries(n||{}).forEach(([R,z])=>{if((z.name||"").toLowerCase().includes(p)){const Q=he.filter(Y=>(A[Y]||[]).includes(R));z.crew&&!Q.includes(z.crew)&&Q.push(z.crew),Q.length===0?E.push({uid:R,name:z.name,crew:""}):Q.forEach(Y=>E.push({uid:R,name:z.name,crew:Y}))}}),E.sort((R,z)=>R.name!==z.name?R.name.localeCompare(z.name):Ve(R.crew).localeCompare(Ve(z.crew))).map((R,z)=>l.jsxs("option",{value:`${R.uid}|${R.crew}`,children:[R.name," (",Ve(R.crew),")"]},`${R.uid}_${R.crew}_${z}`))})()]})]}),c?l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:10,marginBottom:16,alignItems:"center"},children:[l.jsxs("span",{style:{fontWeight:"bold",fontSize:15,color:"#1D3557"},children:[" : ",c.name," "]}),l.jsxs("div",{style:{display:"flex",gap:6},children:[l.jsx("select",{value:ni,onChange:p=>Sr(Number(p.target.value)),style:{padding:6,borderRadius:8,border:"1px solid #ccc"},children:[2025,2026,2027].map(p=>l.jsxs("option",{value:p,children:[p,""]},p))}),l.jsx("select",{value:wr,onChange:p=>Eo(Number(p.target.value)),style:{padding:6,borderRadius:8,border:"1px solid #ccc"},children:Array.from({length:12},(p,E)=>E+1).map(p=>l.jsxs("option",{value:p,children:[p,""]},p))}),l.jsxs("select",{value:ln,onChange:p=>Ft(p.target.value),style:{padding:6,borderRadius:8,border:"1px solid #ccc"},children:[l.jsx("option",{value:"",children:" "}),he.map(p=>l.jsx("option",{value:p,children:Ve(p)},p))]})]})]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(60px, 1fr))",gap:8,padding:10,background:"#f1f3f5",borderRadius:12},children:on(ni,wr).map(p=>{const E=Fa[p],R=p.split("-")[2];return l.jsxs("button",{onClick:()=>jy(p,E),style:{padding:"12px 0",borderRadius:8,border:E?"none":"1px solid #dee2e6",background:E?"#1D3557":"#fff",color:E?"#fff":"#495057",fontWeight:"bold",fontSize:13,cursor:"pointer",transition:"all 0.2s"},children:[R,"",l.jsx("div",{style:{fontSize:10,marginTop:2,opacity:.8},children:E?"V":"-"})]},p)})})]}):l.jsx("div",{style:{padding:"20px",textAlign:"center",background:"#f8f9fa",borderRadius:8,color:"#999"},children:"   ."})]})]}),cn==="group4"&&l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:20},children:[l.jsxs("div",{style:{padding:16,borderRadius:12,background:"#FFF9DB",border:"1px solid #FAB005",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:[l.jsx("h3",{style:{marginTop:0,marginBottom:8,color:"#E67E22",display:"flex",alignItems:"center",gap:8},children:"     "}),l.jsxs("p",{style:{fontSize:13,marginBottom:15,color:"#666",lineHeight:1.5},children:["      ? ",l.jsx("br",{}),"      ",l.jsx("strong",{children:",  ,  1 "}),"      ."]}),l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:10,alignItems:"center"},children:[l.jsx("select",{value:kr,onChange:p=>Cy(Number(p.target.value)),style:{padding:"8px 12px",borderRadius:8,border:"1px solid #FAB005"},children:[2025,2026,2027].map(p=>l.jsxs("option",{value:p,children:[p,""]},p))}),l.jsx("select",{value:Tr,onChange:p=>Ey(Number(p.target.value)),style:{padding:"8px 12px",borderRadius:8,border:"1px solid #FAB005"},children:Array.from({length:12},(p,E)=>E+1).map(p=>l.jsxs("option",{value:p,children:[p,""]},p))}),l.jsx("button",{onClick:By,disabled:Ao,style:{padding:"10px 20px",borderRadius:10,border:"none",background:Ao?"#ccc":"#E67E22",color:"#fff",fontWeight:800,cursor:Ao?"not-allowed":"pointer",boxShadow:"0 4px 8px rgba(230, 126, 34, 0.2)"},children:Ao?"   ...":"   "})]}),l.jsx("p",{style:{fontSize:11,color:"#E67E22",marginTop:12,fontWeight:700},children:"* :           ."})]}),l.jsxs("div",{style:{padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[l.jsx("h3",{style:{margin:0,color:"#1D3557"},children:"[8]    (  )"}),l.jsx("button",{onClick:()=>wn(!Yt),style:{padding:"8px 14px",borderRadius:8,border:"1px solid #1D3557",background:Yt?"#f1f1f1":"#fff",color:"#1D3557",fontSize:13,fontWeight:"bold",cursor:"pointer"},children:Yt?"  ":"  "})]}),!Yt&&l.jsx("p",{style:{fontSize:12,color:"#666",margin:0},children:"          ."}),Yt&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{marginTop:16,marginBottom:16},children:[l.jsx("label",{style:{fontSize:13,marginRight:8},children:" :"}),l.jsxs("select",{value:Cr,onChange:p=>Ly(p.target.value),style:{padding:"6px 10px",borderRadius:8,border:"1px solid #ccc"},children:[l.jsx("option",{value:"",children:"--   --"}),Ro.map(p=>l.jsx("option",{value:p,children:p},p))]})]}),Ma&&l.jsx("p",{children:"  ..."}),ri&&l.jsx("div",{style:{overflowX:"auto"},children:l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:13},children:[l.jsx("thead",{children:l.jsxs("tr",{style:{background:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[l.jsx("th",{style:{padding:10,textAlign:"left"},children:""}),l.jsx("th",{style:{padding:10,textAlign:"left"},children:""}),l.jsx("th",{style:{padding:10,textAlign:"center"},children:" "}),l.jsx("th",{style:{padding:10,textAlign:"center"},children:""}),l.jsx("th",{style:{padding:10,textAlign:"center"},children:""}),l.jsx("th",{style:{padding:10,textAlign:"center"},children:" "})]})}),l.jsx("tbody",{children:Object.values(ri).sort((p,E)=>p.crew.localeCompare(E.crew)||p.name.localeCompare(E.name)).map(p=>l.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[l.jsx("td",{style:{padding:10},children:p.crew}),l.jsx("td",{style:{padding:10,fontWeight:"bold"},children:p.name}),l.jsxs("td",{style:{padding:10,textAlign:"center"},children:[p.chapters,""]}),l.jsxs("td",{style:{padding:10,textAlign:"center"},children:[p.progress,"%"]}),l.jsx("td",{style:{padding:10,textAlign:"center"},children:l.jsx("span",{style:{padding:"2px 6px",borderRadius:4,fontSize:11,color:"#fff",background:p.stateLabel===""?"#2E7D32":p.stateLabel===""?"#1E88E5":"#D32F2F"},children:p.stateLabel})}),l.jsxs("td",{style:{padding:10,textAlign:"center"},children:[p.totalMedals,""]})]},p.uid))})]})})]})]}),l.jsxs("div",{style:{marginBottom:20,padding:16,borderRadius:12,background:"#ffffff",boxShadow:"0 4px 12px rgba(0,0,0,0.04)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:14},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[l.jsx("h3",{style:{margin:0,color:"#1D3557"},children:"[9]    ( 1 )"}),l.jsx("select",{value:bn,onChange:p=>{const E=Number(p.target.value);Sn(E),za(E)},style:{padding:"4px 8px",borderRadius:8,border:"1px solid #ccc",fontSize:13},children:[2024,2025,2026,2027].map(p=>l.jsxs("option",{value:p,children:[p,""]},p))})]}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("button",{onClick:()=>za(),style:{padding:"6px 12px",borderRadius:8,border:"1px solid #457B9D",background:"#fff",color:"#457B9D",fontSize:12,cursor:"pointer"},children:"  "}),l.jsx("button",{onClick:()=>ii(!St),style:{padding:"6px 12px",borderRadius:8,border:"1px solid #1D3557",background:St?"#f1f1f1":"#fff",color:"#1D3557",fontSize:12,fontWeight:"bold",cursor:"pointer"},children:St?" ":" "})]})]}),St&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",gap:6,marginBottom:16,flexWrap:"wrap"},children:[l.jsx("button",{onClick:()=>an("all"),style:jc(Ze==="all"),children:" "}),l.jsx("button",{onClick:()=>an("full"),style:jc(Ze==="full"),children:" 1  "}),he.map(p=>l.jsxs("button",{onClick:()=>an(p),style:jc(Ze===p),children:[Ve(p)," "]},p))]}),He?l.jsx("p",{children:" ..."}):l.jsx("div",{style:{overflowX:"auto"},children:l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:13},children:[l.jsx("thead",{children:l.jsxs("tr",{style:{background:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[l.jsx("th",{style:{padding:10,textAlign:"left"},children:""}),l.jsx("th",{style:{padding:10,textAlign:"center"},children:"  "}),l.jsx("th",{style:{padding:10,textAlign:"center"},children:" 1"}),l.jsx("th",{style:{padding:10,textAlign:"left",fontSize:11,color:"#666"},children:"  "})]})}),l.jsx("tbody",{children:$y.map(p=>l.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[l.jsx("td",{style:{padding:10,fontWeight:"bold"},children:p.name}),l.jsxs("td",{style:{padding:10,textAlign:"center"},children:[Object.values(p.crews).reduce((E,R)=>E+R,0)," "]}),l.jsx("td",{style:{padding:10,textAlign:"center"},children:l.jsxs("span",{style:{padding:"4px 8px",borderRadius:20,background:p.totalBible>0?"#E9C46A":"#f0f0f0",color:p.totalBible>0?"#000":"#888",fontWeight:"bold",fontSize:12},children:[" ",p.totalBible,""]})}),l.jsx("td",{style:{padding:10,fontSize:11},children:Object.entries(p.crews).map(([E,R])=>l.jsxs("span",{style:{marginRight:8,display:"inline-block"},children:[E,"(",R,")"]},E))})]},p.name))})]})})]})]})]})]})}const jc=t=>({padding:"6px 12px",borderRadius:20,border:"1px solid #457B9D",background:t?"#457B9D":"#fff",color:t?"#fff":"#457B9D",fontSize:12,fontWeight:t?"bold":"normal",cursor:"pointer"});function Sk(){const t=yn(),[e,n]=_.useState({}),[r,i]=_.useState(""),[s,o]=_.useState(!0),[a,c]=_.useState(""),[u,f]=_.useState(""),[d,h]=_.useState(!1),[x,v]=_.useState(""),[w,k]=_.useState("");_.useEffect(()=>{const T=fC(S=>n(S||{}));return()=>{typeof T=="function"&&T()}},[]);const m=_.useMemo(()=>e&&e[r]||null,[e,r]);_.useEffect(()=>{const T=m||{};o(!!T.enabled),c((T.title||"").toString()),f((T.content||"").toString()),v(""),k("")},[m,r]);const g=_.useMemo(()=>{const T=m==null?void 0:m.version;return parseInt(T||"0",10)||0},[m]),y=_.useMemo(()=>{const T=m==null?void 0:m.updatedAt;if(!T)return"";const S=new Date(T),C=S.getFullYear(),j=String(S.getMonth()+1).padStart(2,"0"),P=String(S.getDate()).padStart(2,"0"),I=String(S.getHours()).padStart(2,"0"),M=String(S.getMinutes()).padStart(2,"0");return`${C}-${j}-${P} ${I}:${M}`},[m]);async function b(){h(!0),v(""),k("");try{await mC(r,{enabled:s,title:(a||"").trim(),content:(u||"").toString()}),v(". ( )"),setTimeout(()=>v(""),2e3)}catch(T){console.error("   ",T),k("   .")}finally{h(!1)}}return l.jsx("div",{style:{minHeight:"100vh",background:"#F8F9FF",padding:"22px 16px 40px",boxSizing:"border-box"},children:l.jsxs("div",{style:{maxWidth:760,margin:"0 auto"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},children:[l.jsx("button",{onClick:()=>t("/admin"),style:{border:"none",background:"#111827",color:"#fff",borderRadius:12,padding:"10px 14px",fontWeight:700,cursor:"pointer"},children:"  "}),l.jsx("div",{style:{fontSize:20,fontWeight:900,color:"#111827"},children:"  "}),l.jsx("div",{style:{width:90}})]}),l.jsxs("div",{style:{marginTop:16,background:"#FFFFFF",borderRadius:16,padding:16,boxShadow:"0 10px 24px rgba(0,0,0,0.08)",border:"1px solid rgba(0,0,0,0.06)"},children:[l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:10,alignItems:"center",justifyContent:"space-between"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[l.jsx("div",{style:{fontWeight:800,color:"#111827"},children:" "}),l.jsxs("select",{value:r,onChange:T=>i(T.target.value),style:{padding:"10px 12px",borderRadius:12,border:"1px solid rgba(0,0,0,0.18)",fontWeight:700},children:[l.jsx("option",{value:"all",style:{color:"#2563EB",fontWeight:900},children:"   "}),kf.map(T=>l.jsx("option",{value:T.crewKey,children:Ve(T.crewKey)},T.crewKey))]})]}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:10,fontWeight:800,color:"#111827"},children:[" ",l.jsx("input",{type:"checkbox",checked:s,onChange:T=>o(T.target.checked),style:{width:18,height:18}})]})]}),l.jsxs("div",{style:{marginTop:12,display:"flex",gap:12,flexWrap:"wrap"},children:[l.jsxs("div",{style:{fontSize:13,color:"#6B7280"},children:[" : ",l.jsx("b",{children:g})]}),y&&l.jsxs("div",{style:{fontSize:13,color:"#6B7280"},children:[" : ",y]})]}),l.jsxs("div",{style:{marginTop:14},children:[l.jsx("div",{style:{fontSize:14,fontWeight:800,color:"#111827",marginBottom:8},children:" ()"}),l.jsx("input",{value:a,onChange:T=>c(T.target.value),placeholder:":  ",style:{width:"100%",padding:"12px 14px",borderRadius:12,border:"1px solid rgba(0,0,0,0.18)",fontSize:15,boxSizing:"border-box"}})]}),l.jsxs("div",{style:{marginTop:14},children:[l.jsx("div",{style:{fontSize:14,fontWeight:800,color:"#111827",marginBottom:8},children:" "}),l.jsx("textarea",{value:u,onChange:T=>f(T.target.value),rows:10,placeholder:"     .\\n(   .)",style:{width:"100%",padding:"12px 14px",borderRadius:12,border:"1px solid rgba(0,0,0,0.18)",fontSize:15,lineHeight:1.6,boxSizing:"border-box",resize:"vertical"}})]}),l.jsxs("div",{style:{marginTop:14,display:"flex",gap:10,alignItems:"center"},children:[l.jsx("button",{onClick:b,disabled:d,style:{border:"none",background:d?"#9CA3AF":"#2563EB",color:"#fff",borderRadius:12,padding:"12px 14px",fontWeight:900,cursor:d?"not-allowed":"pointer",minWidth:120},children:d?"...":""}),x&&l.jsx("div",{style:{fontSize:14,color:"#065F46",fontWeight:800},children:x}),w&&l.jsx("div",{style:{fontSize:14,color:"#B91C1C",fontWeight:800},children:w})]}),l.jsxs("div",{style:{marginTop:18,background:"#F3F4F6",borderRadius:12,padding:12,fontSize:13,color:"#374151",lineHeight:1.6},children:[l.jsx("b",{children:" "}),l.jsxs("div",{children:["  ",l.jsx("b",{children:"ON"}),",  ,    ",l.jsx("b",{children:""}),"    ."]}),l.jsx("div",{children:"     +1 . (   )"})]})]})]})})}function wk(){const[t,e]=_.useState(""),n=yn();async function r(i){i.preventDefault();try{const s=await $C(t);s&&s.ok&&n("/admin")}catch(s){alert(s&&s.message?s.message:"   .")}}return l.jsxs("div",{style:{minHeight:"100vh",background:"#E8F5E9",padding:24,textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center"},children:[l.jsx("h2",{style:{color:"#1B5E20",marginBottom:24,fontSize:26},children:" "}),l.jsxs("form",{onSubmit:r,style:{maxWidth:420,margin:"0 auto"},children:[l.jsx("input",{placeholder:"",type:"password",value:t,onChange:i=>e(i.target.value),style:{width:"100%",padding:16,borderRadius:10,border:"1px solid #ccc",marginBottom:14,fontSize:18}}),l.jsx("button",{type:"submit",style:{width:"100%",padding:16,borderRadius:10,background:"#1B5E20",color:"#fff",border:"none",fontSize:18},children:""}),l.jsx("div",{style:{marginTop:20},children:l.jsx("button",{type:"button",onClick:()=>n("/home"),style:{background:"none",border:"none",color:"#1565C0",cursor:"pointer",fontSize:14},children:"  "})})]})]})}function $n({src:t,alt:e}){return l.jsx("img",{src:t,alt:e,style:{width:34,height:34,objectFit:"contain",flexShrink:0},loading:"lazy"})}function Ic(){return l.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",style:{width:18,height:18,verticalAlign:"middle"},children:[l.jsx("circle",{cx:"12",cy:"5",r:"2"}),l.jsx("circle",{cx:"12",cy:"12",r:"2"}),l.jsx("circle",{cx:"12",cy:"19",r:"2"})]})}function ig(){return l.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",style:{width:18,height:18,verticalAlign:"middle"},children:l.jsx("path",{d:"M4 6h16M4 12h16M4 18h16",stroke:"currentColor",strokeWidth:"2"})})}function Ac(){return l.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",style:{width:18,height:18,verticalAlign:"middle"},children:[l.jsx("path",{d:"M12 3v10",stroke:"currentColor",strokeWidth:"2"}),l.jsx("path",{d:"M8 7l4-4 4 4",fill:"none",stroke:"currentColor",strokeWidth:"2"}),l.jsx("rect",{x:"5",y:"11",width:"14",height:"10",rx:"2",ry:"2",fill:"none",stroke:"currentColor",strokeWidth:"2"})]})}function sg(){return l.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",style:{width:18,height:18,verticalAlign:"middle"},children:[l.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"currentColor",strokeWidth:"2"}),l.jsx("path",{d:"M12 7v10M7 12h10",stroke:"currentColor",strokeWidth:"2"})]})}function Ck(){return l.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",style:{width:20,height:20,verticalAlign:"middle"},children:l.jsx("path",{d:"M12 4c-4.4 0-8 2.7-8 6s3.6 6 8 6c.5 0 1-.04 1.5-.12L17 19l-.8-3.2C18.3 14.7 20 12.9 20 10c0-3.3-3.6-6-8-6z",fill:"#3C1E1E"})})}function Ek(){return l.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",style:{width:20,height:20,verticalAlign:"middle"},children:[l.jsx("rect",{x:"2",y:"2",width:"8",height:"8",rx:"1"}),l.jsx("rect",{x:"4",y:"4",width:"4",height:"4",fill:"currentColor"}),l.jsx("rect",{x:"14",y:"2",width:"8",height:"8",rx:"1"}),l.jsx("rect",{x:"16",y:"4",width:"4",height:"4",fill:"currentColor"}),l.jsx("rect",{x:"2",y:"14",width:"8",height:"8",rx:"1"}),l.jsx("rect",{x:"4",y:"16",width:"4",height:"4",fill:"currentColor"}),l.jsx("rect",{x:"12",y:"12",width:"2",height:"2"}),l.jsx("rect",{x:"15",y:"12",width:"2",height:"2"}),l.jsx("rect",{x:"18",y:"12",width:"2",height:"2"}),l.jsx("rect",{x:"12",y:"15",width:"2",height:"2"}),l.jsx("rect",{x:"14",y:"17",width:"2",height:"2"}),l.jsx("rect",{x:"18",y:"18",width:"2",height:"2"})]})}function kk(){const[t,e]=_.useState(null),n=({children:a})=>l.jsx("div",{style:{background:"#FFFFFF",border:"1px solid rgba(0,0,0,0.08)",borderRadius:14,padding:14,marginTop:12,boxShadow:"0 6px 18px rgba(0,0,0,0.06)"},children:a}),r=({left:a,children:c})=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"8px 0"},children:[a,l.jsx("div",{style:{flex:1,color:"#1B5E20",fontSize:16,lineHeight:1.35},children:c})]}),i=({children:a})=>l.jsx("div",{style:{fontWeight:800,color:"#1B5E20",marginTop:8,marginBottom:4,fontSize:16},children:a}),s=({kind:a,bg:c,fg:u,icon:f,label:d})=>{const h=t===a;return l.jsxs("button",{type:"button",onClick:()=>e(h?null:a),style:{width:"100%",maxWidth:320,padding:"14px 16px",borderRadius:14,border:"none",background:c,color:u,fontWeight:900,fontSize:20,display:"flex",alignItems:"center",justifyContent:"center",gap:10,cursor:"pointer"},children:[l.jsx("span",{style:{display:"inline-flex",alignItems:"center"},children:f}),l.jsx("span",{children:d})]})},o=l.jsx("span",{style:{margin:"0 6px",color:"#1B5E20",fontWeight:900},children:""});return l.jsxs("div",{style:{maxWidth:520,margin:"0 auto 18px auto"},children:[l.jsx("div",{style:{textAlign:"center",color:"#1B5E20",fontWeight:900,fontSize:18},children:"   "}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:10,marginTop:12},children:[l.jsx(s,{kind:"kakao",bg:"#FEE500",fg:"#3C1E1E",icon:l.jsx(Ck,{}),label:"   "}),l.jsx(s,{kind:"qr",bg:"#1565c0",fg:"#fff",icon:l.jsx(Ek,{}),label:"QR   "})]}),t==="kakao"&&l.jsxs(n,{children:[l.jsx(i,{children:"1:    "}),l.jsxs(r,{left:l.jsx($n,{src:"/icons/galaxy.png",alt:""}),children:[l.jsx("strong",{children:"  "}),"     ",l.jsx(Ic,{}),o,"  "]}),l.jsxs(r,{left:l.jsx($n,{src:"/icons/apple.png",alt:""}),children:[l.jsx("strong",{children:""}),"    ",l.jsx(Ac,{}),o," "]}),l.jsx(i,{children:"2:    "}),l.jsxs(r,{left:l.jsx($n,{src:"/icons/samsung-internet.png",alt:""}),children:[l.jsx("strong",{children:""}),"    ",l.jsx(ig,{}),o,l.jsx("strong",{children:"+ "})," ",l.jsx(sg,{}),o,""]}),l.jsxs(r,{left:l.jsx($n,{src:"/icons/chrome.png",alt:""}),children:[l.jsx("strong",{children:""}),"     ",l.jsx(Ic,{}),o," "]}),l.jsxs(r,{left:l.jsx($n,{src:"/icons/safari.png",alt:""}),children:[l.jsx("strong",{children:""}),"    ",l.jsx(Ac,{}),o," "]})]}),t==="qr"&&l.jsxs(n,{children:[l.jsx(i,{children:"   "}),l.jsxs(r,{left:l.jsx($n,{src:"/icons/safari.png",alt:""}),children:[l.jsx("strong",{children:""}),"    ",l.jsx(Ac,{}),o," "]}),l.jsxs(r,{left:l.jsx($n,{src:"/icons/samsung-internet.png",alt:""}),children:[l.jsx("strong",{children:""}),"    ",l.jsx(ig,{}),o,l.jsx("strong",{children:"+ "})," ",l.jsx(sg,{}),o,""]}),l.jsxs(r,{left:l.jsx($n,{src:"/icons/chrome.png",alt:""}),children:[l.jsx("strong",{children:""}),"     ",l.jsx(Ic,{}),o," "]})]})]})}function og({onLogin:t}){const[e,n]=_.useState(""),[r,i]=_.useState(""),[s,o]=_.useState({}),a=yn();_.useEffect(()=>{const h=Rf(x=>o(x||{}));return()=>{typeof h=="function"&&h()}},[]);const c=s.churchName||"",u=s.appDescription||"  .",f=(s.bulletinUrl||"").trim();async function d(h){h.preventDefault();const x=e.trim(),v=(r??"").trim();if(!x){alert("  .");return}if(!/^[-A-Za-z]+$/.test(x)){alert(`     .
(//  )`);return}if(!v){alert(`  .
        .`);return}try{if(t){const k=await t(x,v);k&&k.mustChangePassword?a("/change-password"):a("/home")}}catch(k){alert(k&&k.message?k.message:" .")}}return l.jsxs("div",{style:{minHeight:"100vh",background:"#E8F5E9",padding:24,display:"flex",flexDirection:"column",justifyContent:"center"},children:[l.jsx(kk,{}),l.jsx("h1",{style:{textAlign:"center",color:"#1B5E20",marginBottom:18,fontSize:28},children:" "}),l.jsxs("form",{onSubmit:d,style:{maxWidth:480,margin:"0 auto"},children:[f?l.jsx("a",{href:f,target:"_blank",rel:"noopener noreferrer",style:{display:"block",width:"100%",padding:14,marginBottom:12,borderRadius:10,textAlign:"center",textDecoration:"none",background:"#1D3557",color:"#fff",fontSize:18,fontWeight:700},children:" "}):null,l.jsx("input",{placeholder:"",value:e,onChange:h=>n(h.target.value),style:{width:"100%",padding:16,borderRadius:10,border:"1px solid #ccc",marginBottom:14,fontSize:18}}),l.jsx("input",{placeholder:"",type:"password",value:r,onChange:h=>i(h.target.value),style:{width:"100%",padding:16,borderRadius:10,border:"1px solid #ccc",marginBottom:14,fontSize:18}}),l.jsx("button",{type:"submit",style:{width:"100%",padding:16,background:"#2E7D32",color:"#fff",border:"none",borderRadius:10,fontWeight:"bold",fontSize:18},children:""}),l.jsx("div",{style:{marginTop:20,textAlign:"center",color:"#1B5E20"},children:c}),l.jsx("p",{style:{textAlign:"center",whiteSpace:"pre-line",marginTop:20,color:"#1B5E20"},children:u})]})]})}function Tk({user:t}){const[e,n]=_.useState(""),[r,i]=_.useState(""),s=yn();_.useEffect(()=>{(!t||!t.uid)&&s("/login")},[t,s]);async function o(a){if(a.preventDefault(),!e||!r){alert("   .");return}if(e!==r){alert("   .");return}try{await zC(t.uid,e),alert(" ."),s("/home")}catch(c){alert(c&&c.message?c.message:"  .")}}return l.jsxs("div",{style:{minHeight:"100vh",background:"#E3F2FD",padding:20},children:[l.jsx("h2",{style:{textAlign:"center",color:"#1565C0",marginBottom:16},children:" "}),l.jsx("p",{style:{textAlign:"center",marginBottom:24},children:"       ."}),l.jsxs("form",{onSubmit:o,style:{maxWidth:400,margin:"0 auto",background:"#fff",padding:20,borderRadius:12,boxShadow:"0 4px 12px rgba(0,0,0,0.08)"},children:[l.jsxs("div",{style:{marginBottom:12},children:[l.jsx("label",{style:{display:"block",marginBottom:4,fontSize:14},children:" "}),l.jsx("input",{type:"password",value:e,onChange:a=>n(a.target.value),style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ccc"}})]}),l.jsxs("div",{style:{marginBottom:20},children:[l.jsx("label",{style:{display:"block",marginBottom:4,fontSize:14},children:"  "}),l.jsx("input",{type:"password",value:r,onChange:a=>i(a.target.value),style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ccc"}})]}),l.jsx("button",{type:"submit",style:{width:"100%",padding:12,borderRadius:6,border:"none",background:"#1565C0",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:"  "})]})]})}function Rk(){const[t,e]=_.useState(null);return _.useEffect(()=>{const n=Rf(r=>{e(r||{})});return()=>{typeof n=="function"&&n()}},[]),t}const lg={:{1:" ",2:" ",3:"    ",4:" ",5:" ",6:" ",7:"",8:" ",9:"   ",10:"  ( 1:5-23)",11:"",12:"  ",13:"   ",14:"  ",15:"   ",16:" ",17:": ",18:"  ",19:" ",20:" ",21:"  ",22:"   ",23:"   ",24:"   ",25:" ",26:"  ",27:"  ",28:"   ",29:"   ",30:"   ",31:"  ",32:"    ",33:"  ",34:"   ",35:"   ",36:" ( 1:34-37)",37:" ",38:" ",39:"  ",40:"   ",41:"   ",42:"   ",43:"    ",44:" ",45:"   ",46:"   ",47:"  ",48:"   ",49:"  ",50:"  "},:{2:" ",3:"  ",4:"   ",5:"    ",6:"  ",7:"   ",8:"  :  ",9:"  :  ",10:"  :   ",11:"    ",12:"",13:"",14:" ",15:" ",16:" ",17:"  ( 20:1-13)",18:"  ",19:"    ",20:"( 5:1-21)",21:"  ( 15:12-18)",22:"  ",23:"  ",24:"   ",25:"  ",26:"( 36:8-38)",27:"( 38:1-7)",28:" ( 39:1-7)",29:"  ( 8:1-36)",30:" ( 37:25-28)",31:"   ( 35:30-36:1)",32:" ( 9:6-29)",33:"   ",34:"  ( 10:1-5)",35:" ",36:"   ",37:" ( 25:10-22)",38:" ( 27:1-8)",39:"  ( 28:1-14)",40:" "},:{2:" ",3:" ",4:"  ",5:"  ",6:"  ",7:"  ",8:"    ",9:"   ",10:"    ",11:"   ",12:"    ",13:"    ",14:"    ",15:"  ",16:"",17:"  ",18:"   ",19:" ",20:"   ",21:"   ",22:"  ",23:"   ",24:"   ",25:"",26:" ",27:"  "},:{1:"   ",2:"    ",3:" ",4:"  ",5:"  ",6:" ",7:"   ",8:"   ",9:"  ",10:" ",11:"",12:"  ",13:"  ( 1:19-33)",14:" ",15:"  ",16:"   ",17:" ",18:"  ",19:"  ",20:"   ( 17:1-7)",21:" ",22:"   ",23:"   ",24:"  ",25:"  ",26:"   ",27:" ",28:"  ( 29:38-46)",29:"  ( 23:23-25)",30:"  ",31:"   ",32:"   ( 3:12-22)",33:" ",34:"  ",35:"   ",36:"   "},:{1:"  ( 18:13-17)",2:"   ",3:"    ( 21:21-35)",4:"   ",5:"( 20:1-17)",6:"   ",7:"  ( 34:11-16)",8:"   ",9:" ",10:"   ( 34:1-10)",11:"   ",12:"  ",14:" ",15:"   ( 25:1-7)",16:"( 12:1-20)",17:" ",18:"   ",19:"( 35:9-28;  20:1-9)",20:"   ",21:"   ",22:"  ",23:"   ",24:" ",25:"   ",26:" ",27:"   ",28:"  ( 26:3-13;  7:12-24)",29:"   ",30:"  ",31:"   ",33:" ",34:" "},:{1:"   ",2:"   ",3:"   ",4:"   ",5:"   ",6:"  ",7:" ",8:"  ",9:"   ",10:"  ",11:"  ",12:"  ",13:"  ",14:"   ",15:"  ",16:"    ",17:"   ",18:"  ",19:"  ",20:"",21:"  ",22:"   ",23:"  ",24:"    "},:{1:"    ",2:"   ",3:"    ",4:" ",5:"  ",6:" ",7:"  ",8:"   ",9:"",10:" ",11:" ",12:"  ",13:" ",14:"  ",15:"  ",16:"  ",17:"  ",18:"  ",19:"    ",20:"   ",21:"  "},:{1:"   ",2:"  ",3:"  ",4:"  "},:{1:" ",2:" ",3:"  ",4:" ",5:"   ",6:" ",7:"  ",8:"  ",9:"  ",10:"  ",11:"   ",12:"  ",13:"  ",14:"  ",15:"  ",16:"   ",17:"   ",18:"   ",19:"   ",20:"  ",21:"   ",22:"   ",23:"  ",24:"   ",25:" ",26:"    ",27:"   ",28:"   ",29:"    ",30:"  ",31:"  ( 10:1-14)"},:{1:"     ",2:"   ",3:" ( 3:1-4)",4:" ",5:"    ( 11:1-3)",6:"    ( 13:1-14; 15:25-16:6, 43)",7:"   ( 17:1-15)",8:"   ( 18:1-17)",9:" ",10:"  ( 19:1-19)",11:" ",12:"   ",13:" ",14:"  ",15:" ",16:" ",17:"    ",18:" ",19:"  ",20:" ",21:"     ",22:" (",23:"  ",24:" ( 21:1-27)"},:{1:"   ",2:"   ",3:"  ( 1:3-12)",4:"  ",5:"   ( 2:1-18)",6:"  ",7:" ",8:"  ( 5:2-6:2)",9:"   ",10:"   ( 9:1-12)",11:"   ",12:"  ( 10:1-19)",13:"  ",14:"  ",15:"  ( 13:1-14:1)",16:"  ",17:" ",18:"  ",19:"  ",20:"  ",21:" ",22:"   ( 18:2-27)"},:{2:"  ",3:"  ",4:"  ",5:"  ",6:" ",7:"  ",8:"  ",9:"   ",10:"  ",11:"  ( 22:10-23:15)",12:"  ( 24:1-16)",13:"  ",14:"  ( 25:1-24)",15:"  ( 26:1-23)",16:"  ( 28:1-27)",17:"  ",18:"  ( 29:1-2; 31:1)",19:"    ( 37:1-7)",20:"  ( 32:24-26;  38:1-8, 21-22)",21:"  ( 33:1-20)",22:"  ( 34:1-2)",23:"   ( 34:3-7, 29-33)",24:"  ( 36:9-10)",25:" ( 36:13-21;  52:3-11)"},:{1:" ( 25:12-16)",2:" ",3:"   ",4:" ",5:" ",6:" ",7:" ",8:" ",9:"   ",10:"  ( 31:1-13)",11:"    ( 5:1-10)",12:"    ",13:"  ( 6:1-11)",14:"  ( 5:11-16)",15:"   ",16:" ( 105:1-15; 96:1-13; 106:47-48)",17:"    ( 7:1-17)",18:"  ( 8:1-18)",19:"   ( 10:1-19)",20:"  ( 12:26-31)",21:"  ( 24:1-25)",22:"  ",23:"  ",24:"   ",25:"  ",26:" ",27:"   ",28:"   ",29:"   "},:{1:" ( 10:26-29)",2:"  ( 5:1-18)",3:" ( 7:15-22)",4:"   ( 7:23-51)",5:"  ( 8:1-9)",6:" ( 8:12-21)",7:" ( 8:62-66)",8:" ( 9:10-28)",9:"   ( 10:1-13)",10:"  ( 12:1-20)",11:"   ( 12:21-24)",12:"  ( 14:25-28)",13:"  ( 15:1-8)",14:"   ",15:" ",16:"  ( 15:17-22)",17:"   ",18:"    ( 22:1-28)",19:"   ",20:"  ",21:"  ( 8:17-24)",22:"  ( 8:25-29; 9:21-28)",23:"  ( 11:4-16)",24:"  ( 12:1-16)",25:"  ( 14:2-6)",26:"   ( 14:21-22; 15:1-7)",27:"  ( 15:32-38)",28:"  ( 16:1-5)",29:"    ( 18:1-3)",30:" ",31:" ",32:"   ( 18:13-37; 19:14-19, 35-37;  36:1-22; 37:8-38)",33:"  ( 21:1-9)",34:"   ( 22:1-2)",35:"  ( 23:21-23)",36:"  ( 23:30-35)"},:{1:"   ",2:" ( 7:4-73)",3:"   ",4:"   ",5:"   ",6:"    ",7:"  ",8:"   ",9:"  ",10:"     "},:{2:"  ",3:"  ",4:" ",5:"  ",6:"  ",7:"  ",9:"  ",10:"  ",11:"  ",12:"  ",13:" "},:{2:"  ",3:"    ",4:"   ",5:"    ",6:"   ",7:" ",8:"    ",9:"   ",10:"   "},:{1:"   ",2:"   ",3:"   ",4:"  ",6:" ",8:"  ",9:" ",11:"  ",12:" ",13:" ",15:"   ",16:" ",18:"   ",19:" ",20:"   ",21:" ",22:"   ",23:" ",25:"   ",26:" ",27:"    ",28:" ",29:"  ",32:"  (32:1-37:24)",33:"   ",38:"  ",42:" "},:{3:"       ",4:" ,     ",5:" ,     ",6:" ,       ",7:" ,       ",8:" ,     ",9:" ,     ",11:" ,    ",12:" ,      ",13:" ,    ",14:" ,    ",15:" ",16:" ",17:" ",18:"   ,    ,                  ",19:" ,    ",20:" ,    ",21:" ,    ",22:" ,     ",23:" ",24:" ",25:" ",26:" ",27:" ",28:" ",29:" ",30:" ,   ",31:" ,    ",32:" ",34:"       ",35:" ",36:"   ,    ",37:" ",38:"  ",39:" ,      ",40:" ,    ",41:" ,    ",44:"  ,    ",45:"  ,  ,     ",46:"  ,     ",47:"  ,    ",48:"    ",49:"  ,    ",50:" ",51:" ,    ,         ",52:" ,    ,           ",53:" ,     ",54:" ,     ,             ",55:" ,     ",56:"  ,       ,     ",57:"  ,     ,      ",58:"  ,     ",59:"  ,     ,         ",60:"    ,     ,                 ",61:" ,     ",62:" ,       ",63:" ,    ",64:" ,    ",65:" ,    ",66:",    ",67:"  ,     ",68:" ,    ",69:" ,     ",70:"      ",72:" ",74:" ",75:" ,     ",76:" ,     ",77:" ,       ",78:" ",79:" ",80:" ,     ",81:" ,     ",82:" ",83:"   ",84:"  ,     ",85:"  ,    ",86:" ",87:"    ",88:"       ,     ",89:"  ",98:"",100:" ",101:" ",102:"          ",103:" ",108:"  ",109:" ,    ",110:" ",120:"  ",121:"  ",122:"     ",123:"  ",124:"     ",125:"  ",126:"  ",127:"     ",128:"  ",129:"  ",130:"  ",131:"     ",132:"  ",133:"     ",134:"  ",138:" ",139:" ,    ",140:" ,    ",141:" ",142:"       ",143:" ",144:" ",145:" "},:{1:"  ",2:"  ",3:"  ",4:"  ",5:"   ",6:" ",7:"   ",8:"  ",9:" ",10:" ",25:" ",30:" ",31:"   "},:{1:"   ",2:" ",3:"   ",4:", , ",5:" ",7:"  ",8:" ",9:"     ",11:" ",12:" "},:{},:{1:" ",2:"   ",3:" ",4:"   ",5:" ",6:"  ",7:"    ",8:" ",9:" ",10:"  ",11:" ",12:" ",13:"  ",14:" ",15:"   ",16:"  ",17:"   ",18:"    ",19:"  ",20:"  ",21:"   ",22:"   ",23:"   ",24:"  ",25:"",26:"   ",28:"  ",29:"  ",30:"   ",32:"  ",33:"  ",34:"  ",35:" ",36:"  ( 18:13-27;  32:1-19)",37:"    ( 19:1-7)",38:"   ( 20:1-11;  32:24-26)",39:"  ( 20:12-19)",40:" ",41:"  ",42:" ",43:" ",44:"    ",45:"  ",47:" ",48:"   ",49:"  ",50:"  ",51:" ",52:"  ",54:"  ",55:" ",56:"  ",57:"  ",58:"  ",59:"   ",60:"  ",61:"  ",63:" ",65:"   ",66:"  "},:{1:"   ",2:" ",3:"  ",4:" ",5:"  ",6:"   ",7:"  ",8:" ",9:"    ",10:"    ",11:"   ",12:" ",13:" ",14:" ",15:"   ",16:"  ",17:"  ",18:" ",19:" ",20:" ",21:"     ",22:"   ",23:"  ",24:"   ",25:"     ",26:"    ",27:"   ",28:" ",29:"   ",30:"   ",31:"   ",32:"    ",33:"    ",34:"   ",35:"  ",36:"    ",37:"    ",38:"  ",39:" ( 25:1-12;  52:4-16)",40:"  ( 25:22-24)",42:"   ",43:"  ",44:"    ",45:"   ",46:"   ",47:"   ",48:" ",49:"  ",50:"  ",51:"  ",52:"  ( 24:18-25:7)"},:{2:"   ",3:", , ",4:"  ",5:"  "},:{2:"  ",3:" ( 33:1-9)",4:"  ",5:"   ",6:"   ",7:"  ",8:"  ",9:"   ",10:"   ",11:"  ",12:"    ",13:"  ",14:"   ",15:"     ",16:" ",17:"  ",18:"   ",19:"",20:" ,  ",21:" ",22:"  ",23:"  ",24:"  ",25:"  ",26:"  ",27:"  ",28:"   ",29:"  ",30:"  ",31:"   ",32:"   ",33:"   ( 3:16-21)",34:"   ",35:"   ",36:"  ",37:"  ",38:"  ",39:"  ",40:"   ",41:"  ",42:" ",43:"  ",44:"    ",45:" ",46:" ",47:"  ",48:"    "},:{2:" ",3:"  ",4:"    ",5:"   ",6:"   ",7:"  ",8:"  ",9:" ",10:"    ",11:"    ",12:""},:{1:"  ",2:" ",3:"   ",4:" ",5:"  ",6:"  ",7:"  ",8:"  ",9:"   ",10:"    ",11:"   ",12:"   ",13:"   ",14:"   "},:{1:"   ",2:"    ",3:"  "},:{1:"    ",2:"  ",3:"   ",4:"   ",5:"",6:" ",7:",  ",8:",    ",9:",   "},:{1:" "},:{1:" ",3:"  ",4:"   "},:{1:"   ",2:" ",3:"   ",4:"  ",5:"   ",6:"  ",7:" "},:{1:"   ",2:" "},:{1:" ",2:" ",3:" "},:{1:" ",2:"  ",3:"   "},:{1:"  "},:{1:"   ",2:"  ",3:"    ",4:"   ",5:" ",6:" ",7:"   ",8:"   ",9:"     ",10:"  ",11:" ",12:" ",13:"  ",14:"  "},:{1:"  ",2:"  ",3:"",4:"  "},:{1:"  ( 2:1-7)",2:"   ",3:"   ( 1:1-8;  3:1-18;  1:19-28)",4:" ( 1:12-13;  4:1-13)",5:"  ( 6:20-23)",6:"  ",7:" ( 6:37-38, 41-42)",8:"  ( 1:40-45;  5:12-16)",9:" ( 2:1-12;  5:17-26)",10:"  ( 3:13-19;  6:12-16)",11:" ( 7:18-35)",12:"   ( 2:23-28;  6:1-5)",13:"     ( 4:1-9;  8:4-8)",14:"  ( 6:14-29;  9:7-9)",15:" ( 7:1-23)",16:"   ( 8:11-13;  12:54-56)",17:"  ( 9:2-13;  9:28-36)",18:"  ( 9:33-37, 42-48;  9:46-48; 15:3-7; 17:1-2)",19:"  ( 10:1-12)",20:" ",21:" ( 11:1-11;  19:28-38;  12:12-19)",22:"  ( 14:15-24)",23:"  ( 12:38-40;  11:37-52; 20:45-47)",24:"   ( 13:1-2;  21:5-6)",25:"  ",26:"  ( 14:1-2;  22:1-2;  11:45-53)",27:"  ( 15:1;  23:1-2;  18:28-32)",28:"( 16:1-8;  24:1-12;  20:1-10)"},:{1:" ( 3:13-17;  3:21-22)",2:" ( 9:1-8;  5:17-26)",3:"    ( 12:9-14;  6:6-11)",4:"     ( 13:1-9;  8:4-8)",5:"   ( 8:28-34;  8:26-39)",6:"  ( 13:53-58;  4:16-30)",7:" ( 15:1-20)",8:"  ( 15:32-39)",9:"  ( 17:1-13;  9:28-36)",10:"  ( 19:1-12)",11:" ( 21:1-11;  19:28-40;  12:12-19)",12:"  ( 21:33-46;  20:9-19)",13:"   ( 24:1-2;  21:5-6)",14:"   ( 26:1-5;  22:1-2;  11:45-53)",15:"  ( 27:1-2, 11-14;  23:1-5;  18:28-38)",16:"( 28:1-10;  24:1-12;  20:1-18)"},:{1:"   ",2:" ( 1:18-25)",3:"  ( 3:1-12;  1:1-8;  1:19-28)",4:" ( 4:1-11;  1:12-13)",5:"  ( 4:18-22;  1:16-20)",6:"   ( 12:1-8;  2:23-28)",7:"  ( 8:5-13;  4:43-54)",8:"   ",9:"  ( 10:5-15;  6:7-13)",10:"   ( 11:20-24)",11:" ( 6:9-15; 7:7-11)",12:"  ( 10:26-33; 12:32; 10:19-20)",13:"  ",14:"   ",15:"    ( 18:12-14)",16:"   ",17:", ,   ( 18:6-7; 21:22;  9:42)",18:"  ",19:" ",20:"   ( 21:23-27;  11:27-33)",21:"  ( 12:41-44)",22:" ( 26:1-5, 14-16;  14:1-2, 10-11;  11:45-53)",23:"  ( 27:1-2, 11-14;  15:1-5;  18:28-38)",24:"   ( 16:12-13)"},:{1:"  ( 3:1-12;  1:7-8;  3:15-17)",2:" ",3:" ",4:"  ",5:"  ",6:"  ( 14:13-21;  6:30-44;  9:10-17)",7:"   ",8:"  ",9:"     ",10:"  ",11:"  ",12:"   ( 26:6-13;  14:3-9)",13:"  ",14:"    ",15:"   ",16:" ",17:"",18:"( 26:47-56;  14:43-50;  22:47-53)",19:"  ( 27:32-44;  15:21-32;  23:26-43)",20:"( 28:1-10;  16:1-8;  24:1-2)",21:"  "},:{1:"  ",2:" ",3:"      ",4:"    ",5:" ",6:"  ",7:" ",8:"  ",9:" ( 22:6-16; 26:12-18)",10:"  ",11:"   ",12:"   ",13:"  ",14:"   ",15:" ",16:"   ",17:"  ",18:"  ",19:"  ",20:"   ",21:"  ",22:" ( 9:1-19; 26:12-18)",23:"  ",24:" ",25:"  ",26:" ( 9:1-19; 22:6-16)",27:"  ",28:"  "},:{1:"   ",2:" ",3:"   ",4:"    ",5:"    ",6:"    ",7:"    ",8:"  ",9:"  ",10:"   ",11:"  ",12:"    ",13:"  ",14:"  ",15:"   ",16:""},:{1:"  ",2:"   ",3:" ",4:" ",5:"  ",6:"   ",7:"  ",8:"  ",9:" ",10:"   ",11:"   ",12:" ",13:"",14:" ",15:" ",16:"  "},:{1:"   ",2:"   ",3:"  ",4:"  ",5:"  ",6:"    ",7:"   ",8:" ",9:"   ",10:"   ",11:"  ",12:"    ",13:"  "},:{1:"  ",2:"   ",3:"  ",4:"   ",5:"  ",6:"  "},:{1:"   ",2:"    ",3:"   ",4:"   ",5:"  ",6:" "},:{1:"   ",2:" ",3:"  ",4:""},:{1:"  ",2:"  ",3:"  ",4:""},:{1:"   ",2:"   ",4:"   ",5:"  "},:{1:"   ",2:" ",3:"  "},:{1:"   ",2:"  ",3:"  ",4:" ",5:"  ",6:"   "},:{1:"   ",2:"   ",3:" ",4:" "},:{1:"    ",2:"  ",3:"  "},:{1:"  "},:{2:" ",3:"  ",4:"  ",5:" ",6:"  ",7:"",8:"  ",9:"    ",10:"  ",11:"",12:"  ",13:"  "},:{1:" ",2:"  ",3:"   ",4:"  ",5:"   "},:{1:" ",2:"   ",3:" ",4:"    ",5:"   "},:{1:"   ",2:"   ( 4-13)",3:" "},1:{},2:{},3:{},:{1:"   ( 2:1-17)"},:{1:" ",2:"   ",3:"   ",4:" ",5:"  ",6:"   ",7:"    ",8:"   ",10:"  ",11:" ",12:" ",13:"  ",14:"    ",16:"  ",17:"   ",18:" ",19:"   ",20:"  ",21:"   ",22:"  "}},jk={:[{start:1,end:11,theme:",   "},{start:12,end:25,theme:"  "},{start:26,end:36,theme:"   "},{start:37,end:50,theme:"   "}],:[{start:1,end:18,theme:"   "},{start:19,end:40,theme:"  "}],:[{start:1,end:7,theme:"  "},{start:8,end:10,theme:"  "},{start:11,end:27,theme:"   "}],:[{start:1,end:10,theme:"  "},{start:11,end:25,theme:"  "},{start:26,end:36,theme:"   "}],:[{start:1,end:4,theme:"   "},{start:5,end:26,theme:"   "},{start:27,end:34,theme:"   "}],:[{start:1,end:5,theme:"   "},{start:6,end:12,theme:"   "},{start:13,end:24,theme:"   "}],:[{start:1,end:2,theme:"  "},{start:3,end:16,theme:"   "},{start:17,end:21,theme:",   "}],:[{start:1,end:4,theme:"()  "}],:[{start:1,end:7,theme:"   "},{start:8,end:15,theme:"    "},{start:16,end:31,theme:"   "}],:[{start:1,end:10,theme:"   "},{start:11,end:24,theme:"  , "}],:[{start:1,end:11,theme:"   "},{start:12,end:22,theme:"   "}],:[{start:1,end:17,theme:"   "},{start:18,end:25,theme:"   "}],:[{start:1,end:9,theme:"  "},{start:10,end:29,theme:"    "}],:[{start:1,end:9,theme:"   "},{start:10,end:36,theme:"    "}],:[{start:1,end:10,theme:"   "}],:[{start:1,end:13,theme:"   "}],:[{start:1,end:10,theme:"    "}],:[{start:1,end:42,theme:"    "}],:[{start:1,end:150,theme:"   "}],:[{start:1,end:31,theme:"   "}],:[{start:1,end:12,theme:"   "}],:[{start:1,end:8,theme:"   "}],:[{start:1,end:39,theme:"    "},{start:40,end:66,theme:"     "}],:[{start:1,end:25,theme:"    "},{start:26,end:52,theme:"    "}],:[{start:1,end:5,theme:"    "}],:[{start:1,end:24,theme:"   "},{start:25,end:32,theme:"   "},{start:33,end:48,theme:"    "}],:[{start:1,end:6,theme:"    "},{start:7,end:12,theme:"    "}],:[{start:1,end:14,theme:"    "}],:[{start:1,end:3,theme:"   "}],:[{start:1,end:9,theme:"    "}],:[{start:1,end:1,theme:"   "}],:[{start:1,end:4,theme:"   "}],:[{start:1,end:7,theme:" ,  "}],:[{start:1,end:3,theme:"   "}],:[{start:1,end:3,theme:"  "}],:[{start:1,end:3,theme:"    "}],:[{start:1,end:2,theme:"  "}],:[{start:1,end:14,theme:"   "}],:[{start:1,end:4,theme:"   "}],:[{start:1,end:4,theme:"   "},{start:5,end:7,theme:":   "},{start:8,end:25,theme:"    "},{start:26,end:28,theme:"   "}],:[{start:1,end:10,theme:"   "},{start:11,end:16,theme:"   "}],:[{start:1,end:3,theme:"   "},{start:4,end:19,theme:"    "},{start:20,end:24,theme:"  ,  "}],:[{start:1,end:12,theme:"   "},{start:13,end:21,theme:"     "}],:[{start:1,end:7,theme:"    "},{start:8,end:12,theme:"   "},{start:13,end:28,theme:"    "}],:[{start:1,end:8,theme:"   "},{start:9,end:11,theme:"   "},{start:12,end:16,theme:"   "}],:[{start:1,end:4,theme:"   "},{start:5,end:10,theme:"    "},{start:11,end:16,theme:" , ,  "}],:[{start:1,end:7,theme:"    "},{start:8,end:9,theme:"   "},{start:10,end:13,theme:"   "}],:[{start:1,end:2,theme:"   "},{start:3,end:4,theme:"   "},{start:5,end:6,theme:"   "}],:[{start:1,end:3,theme:"    "},{start:4,end:6,theme:"    "}],:[{start:1,end:2,theme:"    "},{start:3,end:4,theme:"   "}],:[{start:1,end:2,theme:"   "},{start:3,end:4,theme:"     "}],:[{start:1,end:3,theme:"    "},{start:4,end:5,theme:"    "}],:[{start:1,end:2,theme:"     "},{start:3,end:3,theme:"    "}],:[{start:1,end:3,theme:"   "},{start:4,end:6,theme:"   "}],:[{start:1,end:2,theme:"   "},{start:3,end:4,theme:"    "}],:[{start:1,end:3,theme:"   "}],:[{start:1,end:1,theme:"   "}],:[{start:1,end:10,theme:"   "},{start:11,end:13,theme:"   "}],:[{start:1,end:5,theme:"    "}],:[{start:1,end:5,theme:"     "}],:[{start:1,end:3,theme:"    "}],1:[{start:1,end:5,theme:"    "}],2:[{start:1,end:1,theme:"   "}],3:[{start:1,end:1,theme:"    "}],:[{start:1,end:1,theme:"    "}],:[{start:1,end:3,theme:"   "},{start:4,end:18,theme:"    "},{start:19,end:22,theme:"    "}]},Ik={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"()",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",1:"",2:"",3:"",:"",:""},Ak={:"   ",:"   ",:"   ",:"   ",:"   ",:"   ","()":"   ",:"   ",:"    ",:"      "};function Nk({todayPortion:t,todayKey:e,checks:n,toggle:r,isApproved:i,isMobile:s}){if(!t)return null;const{sections:o}=_.useMemo(()=>{const u=v=>v?v.replace(//g,"").replace(/([-]{2,})/g,w=>eg(w)):"",f=v=>{if(!v)return 0;const k=v.replace(/[~]/g,"-").split(",");let m=0;return k.forEach(g=>{const y=g.replace(/[^0-9-]/g," "),b=y.match(/(\d+)\s*-\s*(\d+)/);b?m+=parseInt(b[2])-parseInt(b[1])+1:y.match(/(\d+)/)&&(m+=1)}),m};let d=[];if(t.panorama&&t.panorama.parsedSections)d=t.panorama.parsedSections.map(v=>({subTitle:v.subTitle||"",bibleRef:v.bibleRef}));else{const v=t.items||[],w=[];for(const k of v){if(!k||!k.book||typeof k.chapter!="number")continue;const m=w[w.length-1];m&&m.book===k.book&&k.chapter===m.to+1?m.to=k.chapter:w.push({book:k.book,from:k.chapter,to:k.chapter})}d=w.map(k=>({subTitle:"",bibleRef:k.from===k.to?`${k.book} ${k.from}`:`${k.book} ${k.from}~${k.to}`}))}let h=[];d.forEach(v=>{if(v.bibleRef.includes(",")){const w=v.bibleRef.split(","),k=w[0].match(/^([-a-zA-Z]+)/),m=k?k[1]:"";w.forEach((g,y)=>{let b=g.trim();y>0&&m&&!b.match(/^[-a-zA-Z]+/)&&(b=`${m} ${b}`),h.push({subTitle:v.subTitle,bibleRef:b})})}else h.push(v)});let x=[];if(h.length>0){let v=h.map(g=>({...g,count:f(g.bibleRef),abbreviations:[u(g.bibleRef)]}));const w=g=>{const b=g.bibleRef.replace(//g,"").replace(/[~]/g,"-").match(/^([-\s\u00A0a-zA-Z]+)\s*(\d+)(?:\s*-\s*(\d+))?/);if(b){const T=b[1].trim(),S=parseInt(b[2]),C=b[3]?parseInt(b[3]):S,j=C-S+1;if(j>=2){const P=Math.floor(j/2),I=S+P-1,M=S===I?`${T} ${S}`:`${T} ${S}~${I}`,A=I+1===C?`${T} ${C}`:`${T} ${I+1}~${C}`;return[{...g,bibleRef:M,count:I-S+1,abbreviations:[u(M)],subTitle:g.subTitle},{...g,bibleRef:A,count:C-(I+1)+1,abbreviations:[u(A)],subTitle:""}]}}return[g]};for(;v.length>4;){let g=-1,y=1/0;for(let b=0;b<v.length-1;b++){const T=v[b].count+v[b+1].count;T<y&&(y=T,g=b)}if(g!==-1){const b=v[g],T=v[g+1];v.splice(g,2,{...b,count:b.count+T.count,abbreviations:[...b.abbreviations,...T.abbreviations],subTitle:b.subTitle&&T.subTitle&&b.subTitle!==T.subTitle?`${b.subTitle} & ${T.subTitle}`:b.subTitle||T.subTitle})}else break}for(let g=0;g<5&&v.length<3;g++){let y=-1,b=-1;for(let T=0;T<v.length;T++)v[T].count>b&&(b=v[T].count,y=T);if(y!==-1&&v[y].count>=2){const T=w(v[y]);if(T.length>1)v.splice(y,1,...T);else break}else break}let k=0;const m=new Set;x=v.map(g=>{var T;k+=g.count;const y=g.abbreviations.reduce((S,C,j)=>{const P=C.replace(/\s+/g,"");if(j===0)return P;const I=g.abbreviations[j-1],M=I.includes("-"),A=C.includes("-"),H=I.match(/^([^\d]+)\s*\d+/),q=C.match(/^([^\d]+)\s*\d+/);if(H&&q&&H[1]===q[1]&&!M&&!A){const O=C.replace(q[1],"").trim();return`${S}, ${O.replace(/\s+/g,"")}`}else return H&&q&&H[1]===""&&q[1]===""?`${S}, ${P}`:`${S}
${P}`},"");let b=g.subTitle||"";if(!b)try{const C=(g.abbreviations[0]||"").match(/^([-]+)[\u00A0\s](\d+)/);if(C){const j=C[1],P=parseInt(C[2]),I=Object.keys(lg).find(A=>eg(A)===j)||j,M=jk[I];if(M){const A=M.find(H=>P>=H.start&&P<=H.end);A&&(b=A.theme)}if(!b)if(g.count<=5)b=((T=lg[I])==null?void 0:T[String(P)])||"";else{const A=Ik[I];b=Ak[A]||""}}}catch(S){console.error("Subtitle auto-gen failed:",S)}return b&&m.has(b)?b="":b&&m.add(b),{...g,bibleRef:y,displayCount:k,subTitle:b}})}return{sections:x}},[t]),a=u=>[-50,30,-55,35][u%4],c=50;return l.jsx("div",{style:{marginTop:18,width:"100%",position:"relative",padding:"10px 0",overflow:"hidden"},children:l.jsxs("div",{style:{position:"relative",width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[o.length===1&&l.jsx("div",{style:{width:"100%",height:40,position:"relative",marginBottom:5},children:l.jsxs("svg",{style:{position:"absolute",top:0,left:"50%",width:200,height:40,transform:"translateX(-50%)"},children:[l.jsx("path",{d:`M 100 0 Q 100 20, ${100+a(0)} 40`,fill:"none",stroke:"rgba(255,255,255,0.7)",strokeWidth:"9",strokeLinecap:"round"}),l.jsx("path",{d:`M 100 0 Q 100 20, ${100+a(0)} 40`,fill:"none",stroke:"rgba(3,71,50,0.2)",strokeWidth:"2.5",strokeDasharray:"6,6"})]})}),o.map((u,f)=>{const d=a(f),h=f===o.length-1;return l.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",position:"relative",marginBottom:h?o.length===1?50:0:c},children:[f===1&&l.jsx("img",{src:"/runner_v2.png",alt:"runner",style:{position:"absolute",right:"22%",top:5,width:28,height:48,zIndex:3}}),f===2&&l.jsx("img",{src:"/sign_v2.png",alt:"sign",style:{position:"absolute",left:"15%",top:-35,width:50,height:"auto",zIndex:3}}),f>=4&&(f%2===0?l.jsx("span",{style:{position:"absolute",right:"1.2%",top:-5,fontSize:36,opacity:1,zIndex:3},children:""}):l.jsx("span",{style:{position:"absolute",left:"1.2%",top:-5,fontSize:36,opacity:1,zIndex:3},children:""})),l.jsxs("div",{style:{transform:`translateX(${d}px)`,transition:"transform 0.5s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",zIndex:2},children:[l.jsx("div",{style:{minWidth:48,height:48,padding:"0 8px",borderRadius:24,background:n[e]?"#1B9C5A":"#034732",border:n[e]?"4px solid rgba(255,255,255,0.2)":"4px solid #F3F4F6",display:"flex",alignItems:"center",justifyContent:"center",fontSize:19,fontWeight:900,color:"#ffffff",boxShadow:"none"},children:u.displayCount}),l.jsxs("div",{style:{position:"absolute",...[1,3].includes(f)?{right:52}:{left:52},width:190,textAlign:[1,3].includes(f)?"right":"left",display:"flex",flexDirection:"column"},children:[u.subTitle&&l.jsx("div",{style:{fontSize:11,fontWeight:900,letterSpacing:"-0.05em",color:"#FFEB3B",opacity:1,textShadow:"0 1px 2px rgba(0,0,0,0.4)",marginBottom:2,lineHeight:1.2,wordBreak:"keep-all"},children:u.subTitle}),l.jsx("div",{style:{fontSize:19,fontWeight:900,color:"#ffffff",textShadow:"0 1px 2px rgba(0,0,0,0.3)",whiteSpace:"pre-wrap",wordBreak:"keep-all",lineHeight:1.2},children:u.bibleRef})]})]}),!h&&l.jsxs("svg",{style:{position:"absolute",top:40,left:"50%",width:260,height:c+8,transform:"translateX(-50%)",zIndex:1,pointerEvents:"none"},children:[l.jsx("path",{d:`M ${130+d} 0 Q ${130+(d+a(f+1))/2+(f%2===0?45:-45)} ${c/2}, ${130+a(f+1)} ${c}`,fill:"none",stroke:n[e]?"rgba(255,255,255,0.4)":"rgba(255,255,255,0.8)",strokeWidth:"10",strokeLinecap:"round"}),l.jsx("path",{d:`M ${130+d} 0 Q ${130+(d+a(f+1))/2+(f%2===0?45:-45)} ${c/2}, ${130+a(f+1)} ${c}`,fill:"none",stroke:n[e]?"rgba(255,255,255,0.75)":"rgba(3,71,50,0.3)",strokeWidth:"2.5",strokeDasharray:"6,8",strokeLinecap:"round"})]}),h&&o.length===1&&l.jsxs("svg",{style:{position:"absolute",top:40,left:"50%",width:200,height:60,transform:"translateX(-50%)",zIndex:1},children:[l.jsx("path",{d:`M ${100+a(0)} 0 Q ${100+a(0)} 30, 100 60`,fill:"none",stroke:"rgba(255,255,255,0.7)",strokeWidth:"9",strokeLinecap:"round"}),l.jsx("path",{d:`M ${100+a(0)} 0 Q ${100+a(0)} 30, 100 60`,fill:"none",stroke:"rgba(3,71,50,0.2)",strokeWidth:"2.5",strokeDasharray:"6,6"})]})]},f)})]})})}function Wn({crewName:t,user:e}){const n=`${Ve(t)} `,[r,i]=_.useState({}),[s,o]=_.useState(new Date),[a,c]=_.useState([]),[u,f]=_.useState(!1),[d,h]=_.useState(""),[x,v]=_.useState(null),[w,k]=_.useState(""),[m,g]=_.useState(!1),[y,b]=_.useState(!1),[T,S]=_.useState(!1),[C,j]=_.useState(null),[P,I]=_.useState(!1),[M,A]=_.useState([]),[H,q]=_.useState({}),[se,O]=_.useState({}),[G,N]=_.useState([]);_.useState(!1);const[B,W]=_.useState(!1),X=Rk(),Pe=(X&&X.approval||{})[t]||"manual";_.useEffect(()=>{if(typeof window>"u")return;const D=window.matchMedia("(max-width: 768px)"),Z=ae=>W(ae.matches);return W(D.matches),D.addEventListener("change",Z),()=>D.removeEventListener("change",Z)},[]);const Ce=yn(),Be=sy();function Xe(D){if(!D)return"";const Z=new Date(D);Z.getFullYear();const ae=String(Z.getMonth()+1).padStart(2,"0"),Re=String(Z.getDate()).padStart(2,"0"),He=String(Z.getHours()).padStart(2,"0"),dt=String(Z.getMinutes()).padStart(2,"0");return`${ae}-${Re} ${He}:${dt}`}let Te=ok;t===""?Te=vy:t===""?Te=xy:t==="(A)"?Te=lk:t==="(B)"?Te=ak:t===""?Te=270:t===""&&(Te=124),_.useEffect(()=>{if(!(e!=null&&e.uid))return;const D=MC(t,Be,e.uid,Z=>{b(Z),S(!0)});return()=>{typeof D=="function"&&D()}},[e,t,Be]),_.useEffect(()=>{if(!(e!=null&&e.uid)||!t||!T)return;if(!(Pe!=="manual"||y)){I(!1);return}let Z=!0;return(async()=>{try{const ae=await hC(t);if(!Z)return;if(!ae||!ae.enabled){I(!1);return}const Re=parseInt(ae.version||"0",10)||0,He=await pC(e.uid,t);if(!Z)return;!!((ae.title||"").trim()||(ae.content||"").trim())&&Re>(He||0)?(j({...ae,version:Re}),I(!0)):I(!1)}catch(ae){console.error("    ",ae)}})(),()=>{Z=!1}},[e==null?void 0:e.uid,t,T,y,Pe]);async function xr(){try{e!=null&&e.uid&&t&&(C!=null&&C.version)&&await gC(e.uid,t,C.version)}catch(D){console.error("      ",D)}finally{I(!1)}}_.useEffect(()=>{e!=null&&e.uid&&T&&(y||e.crew===t&&xC(e.uid).catch(D=>console.error("crew  ",D)))},[e,t,T,y]),_.useEffect(()=>{if(!(e!=null&&e.uid))return;if(!T||!y){i({});return}const D=ty(t,e.uid,i);return()=>{typeof D=="function"&&D()}},[e,t,T,y]),_.useEffect(()=>{const D=ja(Re=>O(Re||{})),Z=yC(t,Re=>{q({[t]:Re})}),ae=Yu(t,Be,Re=>{const He=Re?Object.keys(Re):[];N(He)});return()=>{typeof D=="function"&&D(),typeof Z=="function"&&Z(),typeof ae=="function"&&ae()}},[t,Be]),_.useEffect(()=>{if(!t){A([]);return}const Z=(H||{})[t],ae=Z&&Z.users||{},Re=new Date,He=Re.getFullYear(),dt=Re.getMonth()+1,Ze=on(He,dt);if(!Ze||Ze.length===0){A([]);return}const an=Re.getDate(),bn=Ze.slice(0,an),Sn=`${He}-${String(dt).padStart(2,"0")}-${String(an).padStart(2,"0")}`,Yt=gr(t,Ze),wn={};(Yt||[]).forEach(it=>{!it||!it.date||(wn[it.date]=it.chapters||0)});const St=[],ii=new Set;(G||[]).forEach(it=>{se[it],ii.add(it),_r(it,St,ae,wn,bn,se,Ze,Sn)}),Object.entries(se||{}).forEach(([it,Gt])=>{ii.has(it)||Gt.crew===t&&_r(it,St,ae,wn,bn,se,Ze,Sn)}),St.sort((it,Gt)=>(Gt.chapters||0)-(it.chapters||0)),A(St)},[t,H,se,G]);function _r(D,Z,ae,Re,He,dt,Ze,an){const Sn=(ae[D]||{}).checks||{};let Yt=0,wn=0;He.forEach(si=>{const is=Re[si]||0;is&&(wn+=is,Sn[si]&&(Yt+=is))});const St=dt[D]||{},ii=St.name||D,Er=St.medals||{},it=wn>0?Math.round(Yt/wn*100):0,Gt=Af({dates:Ze,todayKey:an,userChecks:Sn,userDailyActivity:St.dailyActivity||{}}),Oa=Xt(St.earnedMedals||{});Z.push({uid:D,name:ii,chapters:Yt,progress:it,stateKey:Gt.key,stateLabel:Gt.label,medals:Er,dokStatus:Oa})}_.useEffect(()=>{const D=TC(t,c);return()=>{typeof D=="function"&&D()}},[t]);const ti=3*24*60*60*1e3,Bn=Date.now()-ti,br=(a||[]).slice(0,20),ts=(a||[]).filter(D=>(D.timestamp||0)>=Bn),ni=u?ts:br;if(!e||!e.uid)return l.jsxs("div",{style:{padding:20,background:"#F8F9FF",minHeight:"100vh"},children:[l.jsxs("h2",{style:{color:"#034732",fontSize:32,fontWeight:800,textAlign:"center"},children:[" ",n]}),l.jsx("p",{children:"    ."})]});if(Pe==="manual"&&!y)return l.jsxs("div",{style:{padding:20,background:"#F8F9FF",minHeight:"100vh"},children:[l.jsxs("h2",{style:{color:"#034732",fontSize:32,fontWeight:800,textAlign:"center"},children:[t," "]}),l.jsx("p",{style:{textAlign:"center",marginTop:20,fontSize:16},children:"     ."})]});if(!T)return l.jsxs("div",{style:{padding:20,background:"#F8F9FF",minHeight:"100vh"},children:[l.jsxs("h2",{style:{color:"#034732",fontSize:32,fontWeight:800,textAlign:"center"},children:[" ",n]}),l.jsx("p",{children:"   ..."})]});if(Pe==="manual"&&!y)return l.jsxs("div",{style:{padding:20,background:"#F8F9FF",minHeight:"100vh"},children:[l.jsxs("h2",{style:{color:"#034732",fontSize:32,fontWeight:800,textAlign:"center"},children:[t," "]}),l.jsx("p",{style:{textAlign:"center",marginTop:20,fontSize:16},children:"     ."})]});if(Pe==="closed")return l.jsxs("div",{style:{padding:20,background:"#F8F9FF",minHeight:"100vh"},children:[l.jsxs("h2",{style:{color:"#034732",fontSize:32,fontWeight:800,textAlign:"center"},children:[" ",n]}),l.jsx("p",{children:"     .   ."}),l.jsx("button",{onClick:()=>Ce("/home"),style:{marginTop:20,padding:"8px 16px",borderRadius:8,border:"none",background:"#1565C0",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:" "})]});if(Pe==="manual"&&!y)return l.jsxs("div",{style:{padding:20,background:"#F8F9FF",minHeight:"100vh"},children:[l.jsxs("h2",{style:{color:"#034732",fontSize:32,fontWeight:800,textAlign:"center"},children:[t," "]}),l.jsx("p",{style:{textAlign:"center",marginTop:20,fontSize:16},children:"     ."})]});const Sr=s.getFullYear(),wr=s.getMonth()+1,Eo=on(Sr,wr),ln=gr(t,Eo),Ft=`${Sr}-${String(wr).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,Fa=String(Sr).slice(2),ko=["","","","","","",""][s.getDay()],zn=`${Fa} ${String(wr).padStart(2,"0")} ${String(s.getDate())}(${ko})`,Ue=ln.find(D=>D.date===Ft),To={};ln.forEach(D=>{To[D.date]=D.chapters||0});let Je=0;Eo.forEach(D=>{r[D]&&(Je+=To[D]||0)});const vn=(Je/10).toFixed(1),Ro=Math.min(100,Math.round(Je/Te*100)||0);let xn=Ue&&(Ue.startLabel||""),Cr=Ue&&(Ue.endLabel||""),jo=0;if(Ue&&(jo=Ue.chapters||Ue.chapterCount||0),(!xn||!Cr)&&Ue&&Ue.label){const D=String(Ue.label).split("~");D.length===2?(xn=D[0].trim(),Cr=D[1].trim()):(xn=Ue.label,Cr="");const Z=ae=>ae?ae.replace(/\(\s*\d+\)\s*$/,"").trim():"";xn=Z(xn),Cr=Z(Cr)}function ri(D){y&&ny(t,e.uid,D,!(r[D]??!1))}function ns(D){const Z=new Date(s);Z.setDate(Z.getDate()+D),o(Z)}function Ma(){const D=d.trim();if(!D)return;const Z={text:D,user:e.name||"",uid:e.uid,timestamp:Date.now()};wC(t,Z).then(()=>{h("")})}function Io(D){!D||D.uid!==e.uid||(v(D.id),k(D.text||""))}async function _n(D){if(!D||D.uid!==e.uid)return;const Z=(w||"").trim();if(!Z){alert("  .");return}try{g(!0),await CC(t,D.id,{text:Z,editedAt:Date.now()}),v(null),k("")}catch(ae){console.error(ae),alert("   .")}finally{g(!1)}}async function rs(D){if(!(!D||D.uid!==e.uid||!window.confirm("     . ?")))try{g(!0),await EC(t,D.id)}catch(ae){console.error(ae),alert("   .")}finally{g(!1)}}return l.jsxs("div",{style:{minHeight:"100vh",padding:B?"20px 16px 32px":"24px 30px 40px",background:"#E5F3E6",display:"flex",flexDirection:"column",boxSizing:"border-box"},children:[P&&C&&l.jsx("div",{onClick:xr,style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.45)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:B?18:24},children:l.jsxs("div",{style:{width:"100%",maxWidth:520,background:"#FFFFFF",borderRadius:18,boxShadow:"0 18px 40px rgba(0,0,0,0.22)",padding:B?"18px 18px 16px":"22px 22px 18px",border:"1px solid rgba(0,0,0,0.06)"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},children:[l.jsx("div",{style:{fontSize:18,fontWeight:800,color:"#111827"},children:(C.title||`${t} `).toString()}),l.jsx("div",{style:{fontSize:12,color:"#6B7280"},children:" "})]}),l.jsx("div",{style:{marginTop:14,fontSize:15,lineHeight:1.7,color:"#111827",whiteSpace:"pre-wrap"},children:C.content})]})}),l.jsx("h2",{style:{color:"#034732",fontSize:32,fontWeight:800,textAlign:"center",marginBottom:t===""||t===""?10:0},children:n}),t===""&&l.jsx("div",{style:{color:"#4B5563",fontSize:15,fontWeight:500,textAlign:"center",marginBottom:10},children:"30  1"}),t===""&&l.jsx("div",{style:{color:"#4B5563",fontSize:15,fontWeight:500,textAlign:"center",marginBottom:10},children:"30  1"}),(t==="(A)"||t==="(B)")&&l.jsx("div",{style:{color:"#4B5563",fontSize:15,fontWeight:500,textAlign:"center",marginBottom:10},children:"30   "}),t===""&&l.jsx("div",{style:{color:"#4B5563",fontSize:15,fontWeight:500,textAlign:"center",marginBottom:10},children:"30  1"}),t===""&&l.jsx("div",{style:{color:"#4B5563",fontSize:14,fontWeight:500,textAlign:"center",lineHeight:1.6,maxWidth:600,margin:"0 auto"},children:"<   ,            >"}),t===""&&l.jsx("div",{style:{color:"#4B5563",fontSize:14,fontWeight:500,textAlign:"center",lineHeight:1.6,maxWidth:600,margin:"0 auto"},children:"<   ,          >"}),l.jsxs("div",{style:{marginTop:24,display:"flex",alignItems:"center",justifyContent:"center",gap:24},children:[l.jsxs("svg",{width:120,height:120,children:[l.jsx("circle",{stroke:"#E5E7EB",fill:"transparent",strokeWidth:14,r:50,cx:60,cy:60}),l.jsx("circle",{stroke:"#6366F1",fill:"transparent",strokeWidth:14,strokeLinecap:"round",r:50,cx:60,cy:60,strokeDasharray:2*Math.PI*50,strokeDashoffset:2*Math.PI*50-Ro/100*(2*Math.PI*50),style:{transition:"stroke-dashoffset 0.4s ease"}})]}),l.jsxs("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[l.jsx("p",{style:{margin:0,fontSize:15,color:"#4B5563"},children:"  "}),l.jsxs("div",{style:{marginTop:6,display:"flex",alignItems:"baseline",gap:12},children:[l.jsxs("span",{style:{fontSize:28,fontWeight:700},children:[Ro,"%"]}),l.jsxs("span",{style:{fontSize:20,fontWeight:600},children:[vn,"km"]})]}),l.jsxs("div",{style:{marginTop:4,fontSize:16,color:"#4B5563"},children:["(",Je," / ",Te,")"]})]})]}),l.jsx("div",{style:{marginTop:28,width:"100%",display:"flex",justifyContent:"center",position:"relative"},children:l.jsxs("div",{onClick:()=>ri(Ft),style:{width:B?"96%":"86%",maxWidth:B?"none":540,background:r[Ft]?"linear-gradient(135deg, #2C3E50 0%, #000000 100%)":"linear-gradient(135deg, #1B9C5A 0%, #15803D 100%)",borderRadius:34,padding:B?"20px 8px 60px":"24px 30px 40px",color:"#ffffff",textAlign:"center",boxShadow:"0 12px 28px rgba(0,0,0,0.15)",cursor:y?"pointer":"not-allowed",opacity:y?1:.6,position:"relative",minHeight:B?330:280,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:"0 auto",overflow:"hidden"},children:[l.jsx("button",{onClick:D=>{D.stopPropagation(),ns(-1)},style:{position:"absolute",left:0,top:"50%",transform:"translateY(-50%)",width:50,height:80,background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"0 12px 12px 0",cursor:"pointer",zIndex:10,display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx("div",{style:{width:20,height:20,borderLeft:"6px solid #fff",borderBottom:"6px solid #fff",transform:"rotate(45deg)",opacity:1}})}),l.jsx("button",{onClick:D=>{D.stopPropagation(),ns(1)},style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",width:50,height:80,background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"12px 0 0 12px",cursor:"pointer",zIndex:10,display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx("div",{style:{width:20,height:20,borderRight:"6px solid #fff",borderBottom:"6px solid #fff",transform:"rotate(-45deg)",opacity:1}})}),l.jsx("div",{style:{position:"absolute",bottom:40,left:10,fontSize:24,opacity:.15},children:""}),l.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.85)",padding:"16px 24px",borderRadius:"24px",boxShadow:"0 8px 20px rgba(0,0,0,0.06)",marginBottom:"20px",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",width:B?"90%":"85%",maxWidth:500,boxSizing:"border-box",zIndex:5},children:[l.jsx("div",{style:{fontSize:22,fontWeight:800,color:r[Ft]?"#2C3E50":"#034732"},children:zn}),l.jsxs("div",{style:{marginTop:4,fontSize:B?17:19,fontWeight:700,color:r[Ft]?"#555":"#1B9C5A"},children:[" ( ",jo,")"]})]}),Ue&&l.jsx(Nk,{todayPortion:Ue,todayKey:Ft,checks:r,toggle:ri,isApproved:y,isMobile:B}),l.jsx("div",{style:{position:"absolute",left:18,bottom:16,zIndex:5},children:l.jsx("div",{onClick:()=>ri(Ft),style:{width:60,height:60,borderRadius:"50%",border:"4px solid #F3F4F6",background:"#FFFFFF",boxShadow:"0 4px 10px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",cursor:"pointer",transition:"all 0.3s"},children:l.jsx("span",{style:{fontSize:11,fontWeight:700,color:"rgba(0,0,0,0.25)"},children:"()"})})}),r[Ft]&&l.jsx("div",{style:{position:"absolute",left:-52,bottom:-54,zIndex:10,pointerEvents:"none",width:200,height:200,display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx("img",{src:"/stamps/stamps_source_clean.png",alt:"stamp",style:{width:190,height:190,objectFit:"contain",transform:"rotate(-10deg)",filter:"drop-shadow(0 4px 12px rgba(0,0,0,0.3))",animation:"popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275)"}})})]})}),l.jsx("div",{style:{marginTop:10,textAlign:"center",fontSize:15,fontWeight:500,color:"#555"},children:"   "}),l.jsxs("div",{style:{marginTop:14,fontSize:15,lineHeight:1.5,fontWeight:500,textAlign:"center",color:"#555"},children:["     .",l.jsx("br",{}),"    "]}),l.jsx("div",{style:{marginTop:12,background:"#FFFFFF",borderRadius:24,padding:B?"6px 8px 8px":"12px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:10,maxWidth:520,width:"88%",marginLeft:"auto",marginRight:"auto"},children:l.jsxs("div",{style:{marginTop:8,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:B?8:16},children:[l.jsxs("button",{onClick:()=>Ce(`/?crew=${encodeURIComponent(t)}&date=${Ft}`),style:{background:"#F7C948",borderRadius:28,padding:B?"20px 26px":"22px 32px",border:"none",color:"#000",fontSize:19,fontWeight:700,lineHeight:1.35,cursor:"pointer",boxShadow:"0 4px 10px rgba(0,0,0,0.15)",minWidth:B?130:170,textAlign:"center"},children:["",l.jsx("br",{}),""]}),l.jsx("img",{src:"/runner.png",alt:"runner",style:{width:B?80:125,height:"auto",objectFit:"contain"}})]})}),l.jsxs("div",{style:{marginTop:32},children:[l.jsx("p",{style:{margin:0,fontWeight:700,fontSize:15},children:" "}),l.jsx("textarea",{value:d,onChange:D=>h(D.target.value),rows:3,placeholder:"    ",style:{width:"100%",marginTop:10,padding:12,borderRadius:12,border:"1px solid #CBD5E1",fontSize:14,resize:"vertical"}}),l.jsx("button",{onClick:Ma,style:{marginTop:10,padding:"10px 18px",border:"none",borderRadius:10,background:"#1B9C5A",color:"#fff",fontSize:15,fontWeight:600,cursor:"pointer"},children:""})]}),l.jsxs("div",{style:{marginTop:24},children:[l.jsx("p",{style:{fontWeight:700,marginBottom:8},children:"  "}),l.jsxs("div",{style:{display:"flex",gap:8,marginBottom:10},children:[l.jsx("button",{onClick:()=>f(D=>!D),style:{padding:"8px 12px",borderRadius:10,border:"1px solid #1B9C5A",background:u?"#1B9C5A":"#fff",color:u?"#fff":"#1B9C5A",cursor:"pointer",fontWeight:700},children:u?"":" ( 3)"}),u&&l.jsx("div",{style:{fontSize:12,color:"#555",alignSelf:"center"},children:" 3    ."})]}),l.jsx("ul",{style:{listStyle:"none",padding:0,margin:0,display:"flex",flexDirection:"column",gap:4},children:ni.map(D=>{const Z=D&&D.uid&&e&&D.uid===e.uid,ae=x===D.id;return l.jsxs("li",{style:{padding:10,borderRadius:10,background:"#F1F5F9",fontSize:13,display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:10},children:[l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:6},children:[l.jsx("span",{style:{fontWeight:700},children:D.user}),D.timestamp&&l.jsxs("span",{style:{fontSize:12,color:"#6B7280"},children:[Xe(D.timestamp),D.editedAt?" ()":""]})]}),ae?l.jsxs("div",{style:{marginTop:6},children:[l.jsx("textarea",{value:w,onChange:Re=>k(Re.target.value),rows:3,style:{width:"100%",padding:10,borderRadius:10,border:"1px solid #CBD5E1",fontSize:13,resize:"vertical",boxSizing:"border-box",background:"#fff"},disabled:m}),l.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[l.jsx("button",{onClick:()=>_n(D),disabled:m,style:{padding:"8px 12px",borderRadius:10,border:"none",background:"#1B9C5A",color:"#fff",fontWeight:700,cursor:"pointer",opacity:m?.6:1},children:""}),l.jsx("button",{onClick:()=>{v(null),k("")},disabled:m,style:{padding:"8px 12px",borderRadius:10,border:"1px solid #CBD5E1",background:"#fff",color:"#111827",fontWeight:700,cursor:"pointer",opacity:m?.6:1},children:""})]})]}):l.jsx("div",{style:{marginTop:4,color:"#374151",wordBreak:"break-word"},children:D.text})]}),Z&&!ae&&l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,flexShrink:0},children:[l.jsx("button",{onClick:()=>Io(D),disabled:m,style:{padding:"6px 10px",borderRadius:10,border:"1px solid #CBD5E1",background:"#fff",fontWeight:700,cursor:"pointer",opacity:m?.6:1},children:""}),l.jsx("button",{onClick:()=>rs(D),disabled:m,style:{padding:"6px 10px",borderRadius:10,border:"none",background:"#E63946",color:"#fff",fontWeight:800,cursor:"pointer",opacity:m?.6:1},children:""})]})]},D.id)})})]}),l.jsxs("div",{style:{marginTop:28},children:[l.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:15},children:l.jsx("p",{style:{fontWeight:800,fontSize:18,margin:0},children:"    "})}),(()=>M.length===0?l.jsx("div",{style:{padding:"40px 20px",textAlign:"center",background:"rgba(255,255,255,0.5)",borderRadius:20,border:"1px dashed #CBD5E1",color:"#64748B",fontSize:14},children:"   ."}):l.jsx("div",{style:{overflowX:"auto"},children:l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12,background:"#F8FAFF",borderRadius:12},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"left",width:"20%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"right",width:"12%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"right",width:"15%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"center",width:"20%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"center",width:"33%",whiteSpace:"nowrap"},children:""})]})}),l.jsx("tbody",{children:M.map(D=>{var Z,ae,Re;return l.jsxs("tr",{children:[l.jsx("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",maxWidth:65,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:D.name}),l.jsxs("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",textAlign:"right"},children:[D.progress,"%"]}),l.jsxs("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",textAlign:"right",whiteSpace:"nowrap"},children:[D.chapters,""]}),l.jsx("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",textAlign:"center"},children:(()=>{const He=D.stateLabel||" ",dt=D.stateKey||"",Ze=dt==="success"||He.includes(""),an=dt==="ready"||He.includes(""),bn=dt==="running"||He.includes("");if(dt==="fail"||He.includes("!"),an)return l.jsx("span",{style:{color:"#166534",fontWeight:600},children:He});const Sn={display:"inline-block",borderRadius:6,padding:"2px 5px",fontWeight:700,fontSize:11,backgroundColor:Ze?"#DCFCE7":bn?"#DBEAFE":"#E5E7EB",color:Ze?"#166534":bn?"#1D4ED8":"#111827",whiteSpace:"nowrap"};return l.jsx("span",{style:Sn,children:He})})()}),l.jsx("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px",textAlign:"center"},children:l.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:3,fontSize:13},children:[(((Z=D.medals)==null?void 0:Z.gold)||0)>0&&l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[l.jsx("span",{children:""}),l.jsx("b",{style:{marginLeft:1},children:D.medals.gold})]}),(((ae=D.medals)==null?void 0:ae.silver)||0)>0&&l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[l.jsx("span",{children:""}),l.jsx("b",{style:{marginLeft:1},children:D.medals.silver})]}),(((Re=D.medals)==null?void 0:Re.bronze)||0)>0&&l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[l.jsx("span",{children:""}),l.jsx("b",{style:{marginLeft:1},children:D.medals.bronze})]})]})})]},D.uid)})})]})}))()]}),l.jsx("div",{style:{marginTop:20,textAlign:"center"},children:l.jsx("button",{onClick:()=>Ce("/home"),style:{padding:"10px 24px",borderRadius:999,border:"none",background:"#1565C0",color:"#fff",fontWeight:"bold",cursor:"pointer",fontSize:15,boxShadow:"0 6px 12px rgba(0,0,0,0.2)"},children:" "})})]})}const ag=he;function Dk({user:t}){const e=yn(),[n,r]=_.useState({}),[i,s]=_.useState({}),[o,a]=_.useState({});if(_.useEffect(()=>{if(!t||!t.uid)return;const S=qC(t.uid,C=>s(C||{}));return()=>{typeof S=="function"&&S()}},[t]),_.useEffect(()=>{if(!t||!t.uid)return;const C=new Date().getFullYear(),j=NC(C,P=>{a(P||{})});return()=>{typeof j=="function"&&j()}},[t]),_.useEffect(()=>{if(!t||!t.uid)return;const S=[];return ag.forEach(C=>{const j=ty(C,t.uid,P=>{r(I=>({...I,[C]:P||{}}))});typeof j=="function"&&S.push(j)}),()=>{S.forEach(C=>{try{C()}catch{}})}},[t]),!t||!t.uid)return l.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0F172A 0%, #1E293B 100%)",color:"#F8FAFC",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:20,fontFamily:"'Outfit', 'Roboto', sans-serif"},children:[l.jsx("h2",{style:{fontSize:32,fontWeight:800,marginBottom:20},children:"  "}),l.jsx("p",{style:{color:"#94A3B8",marginBottom:30},children:"    ."}),l.jsx("button",{onClick:()=>e("/login"),style:{padding:"12px 30px",borderRadius:12,border:"none",background:"#1B9C5A",color:"#fff",fontWeight:700,cursor:"pointer"},children:" "})]});const c=new Date,u=c.getFullYear(),f=c.getMonth()+1,d=`${u}-${String(f).padStart(2,"0")}-${String(c.getDate()).padStart(2,"0")}`;let h=0,x=0,v=0;const w={};if(ag.forEach(S=>{const C=n[S]||{};Object.entries(C).forEach(([j,P])=>{if(!P)return;const[I,M]=j.split("-"),A=Number(I),H=Number(M);if(!A||!H)return;const q=`${S}_${I}-${M}`;if(!w[q]){const O=on(A,H),G=gr(S,O),N={};G.forEach(B=>{N[B.date]=B.chapters||0}),w[q]=N}const se=w[q][j]||0;j===d&&(h+=se),A===u&&H===f&&(x+=se),A===u&&(v+=se)})}),t&&t.uid&&o&&t.crew){const S=o[f];if(S){let C=0;const j=S.gold&&S.gold[t.uid],P=S.silver&&S.silver[t.uid],I=S.bronze&&S.bronze[t.uid];if(j||P||I){const M=`${t.crew}_${u}-${f}`;if(!w[M]){const H=on(u,f),q=gr(t.crew,H),se={};q.forEach(O=>{se[O.date]=O.chapters||0}),w[M]=se}const A=w[M];C=Object.values(A).reduce((H,q)=>H+q,0)}if(C>0&&C>x){const M=C-x;x=C,v+=M}}}const k=(h/10).toFixed(1),m=(x/10).toFixed(1),g=(v/10).toFixed(1),y={background:"rgba(255, 255, 255, 0.05)",padding:"24px",borderRadius:"20px",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)",flex:1},b={color:"#94A3B8",fontSize:14,fontWeight:500,marginBottom:8},T={fontSize:24,fontWeight:800,color:"#F8FAFC"};return l.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0F172A 0%, #1E293B 100%)",color:"#F8FAFC",padding:"40px 20px",fontFamily:"'Outfit', 'Roboto', sans-serif"},children:l.jsxs("div",{style:{maxWidth:800,margin:"0 auto"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:40},children:[l.jsx("h1",{style:{fontSize:42,fontWeight:900,background:"linear-gradient(to right, #10B981, #34D399, #10B981)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",letterSpacing:-1,marginBottom:10},children:"   "}),l.jsxs("p",{style:{color:"#94A3B8",fontSize:18},children:[t.name,"    "]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:20,marginBottom:30},children:[l.jsxs("div",{style:y,children:[l.jsx("div",{style:b,children:"   "}),l.jsxs("div",{style:T,children:[h," ",l.jsxs("span",{style:{fontSize:16,color:"#34D399"},children:["(",k,"km)"]})]})]}),l.jsxs("div",{style:y,children:[l.jsx("div",{style:b,children:"   "}),l.jsxs("div",{style:T,children:[x," ",l.jsxs("span",{style:{fontSize:16,color:"#34D399"},children:["(",m,"km)"]})]})]}),l.jsxs("div",{style:y,children:[l.jsx("div",{style:b,children:"   "}),l.jsxs("div",{style:T,children:[v," ",l.jsxs("span",{style:{fontSize:16,color:"#34D399"},children:["(",g,"km)"]})]})]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:20},children:[l.jsxs("div",{style:{...y,border:"1px solid rgba(245, 158, 11, 0.2)"},children:[l.jsxs("h3",{style:{fontSize:20,fontWeight:800,marginBottom:20,display:"flex",alignItems:"center",gap:10},children:[l.jsx("span",{style:{color:"#F59E0B"},children:""}),"   "]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",padding:"10px 0"},children:[l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:32,marginBottom:5},children:""}),l.jsx("div",{style:{fontSize:20,fontWeight:800},children:i.gold||0}),l.jsx("div",{style:{fontSize:12,color:"#94A3B8"},children:"Gold"})]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:32,marginBottom:5},children:""}),l.jsx("div",{style:{fontSize:20,fontWeight:800},children:i.silver||0}),l.jsx("div",{style:{fontSize:12,color:"#94A3B8"},children:"Silver"})]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:32,marginBottom:5},children:""}),l.jsx("div",{style:{fontSize:20,fontWeight:800},children:i.bronze||0}),l.jsx("div",{style:{fontSize:12,color:"#94A3B8"},children:"Bronze"})]})]})]}),l.jsxs("div",{style:{...y,border:"1px solid rgba(16, 185, 129, 0.3)"},children:[l.jsxs("h3",{style:{fontSize:20,fontWeight:800,marginBottom:20,display:"flex",alignItems:"center",gap:10},children:[l.jsx("span",{style:{color:"#10B981"},children:""}),"   "]}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:12},children:(()=>{const S=String(new Date().getFullYear()),C=(t==null?void 0:t.earnedMedals)||{},j={};Object.keys(C).forEach(I=>{if(I.startsWith(S)){const M=I.split("_"),A=M.length>1?M[1]:"";A&&(j[A]=(j[A]||0)+1)}});const P=Object.entries(j).sort((I,M)=>I[0].localeCompare(M[0]));return P.length===0?l.jsx("span",{style:{color:"#94A3B8"},children:"    ."}):P.map(([I,M],A)=>l.jsxs("div",{style:{fontSize:14,fontWeight:700,background:"rgba(255,255,255,0.03)",padding:"12px 20px",borderRadius:16,border:"1px solid rgba(16, 185, 129, 0.2)",display:"flex",alignItems:"center",gap:12,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[l.jsx("span",{children:I}),l.jsxs("span",{style:{background:"linear-gradient(135deg, #F59E0B 0%, #D97706 100%)",color:"#000",padding:"4px 12px",borderRadius:10,fontSize:16,fontWeight:900,boxShadow:"0 2px 8px rgba(245, 158, 11, 0.4)"},children:["x",M]})]},A))})()})]}),l.jsxs("div",{style:{...y,border:"1px solid rgba(233, 196, 106, 0.3)",background:"linear-gradient(135deg, rgba(233, 196, 106, 0.05) 0%, rgba(30, 41, 59, 0.5) 100%)"},children:[l.jsxs("h3",{style:{fontSize:20,fontWeight:800,marginBottom:20,display:"flex",alignItems:"center",gap:10},children:[l.jsx("span",{style:{color:"#E9C46A"},children:""}),"    "]}),(()=>{const S=Xt((t==null?void 0:t.earnedMedals)||{});return l.jsxs("div",{children:[l.jsx("div",{style:{textAlign:"center",padding:"10px 0",marginBottom:20},children:l.jsxs("div",{style:{fontSize:44,fontWeight:900,color:"#E9C46A",textShadow:"0 0 20px rgba(233, 196, 106, 0.3)"},children:[S.totalDok,l.jsx("span",{style:{fontSize:20,marginLeft:4},children:" "})]})}),S.fragments&&S.fragments.length>0&&l.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:15,borderRadius:12},children:[l.jsx("div",{style:{fontSize:13,color:"#E9C46A",fontWeight:700,marginBottom:10},children:"    "}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:S.fragments.map(C=>l.jsxs("div",{style:{fontSize:12,background:"rgba(255,255,255,0.05)",padding:"4px 10px",borderRadius:6,border:"1px solid rgba(255,255,255,0.1)",color:"#CBD5E1"},children:[C.name.replace("","")," ",l.jsxs("span",{style:{fontWeight:800,color:"#fff"},children:["x",C.count]})]},C.name))})]})]})})()]})]}),l.jsx("div",{style:{marginTop:50,textAlign:"center"},children:l.jsx("button",{onClick:()=>e("/home"),style:{padding:"12px 40px",borderRadius:999,border:"1px solid rgba(255,255,255,0.2)",background:"rgba(255,255,255,0.05)",color:"#fff",fontWeight:700,cursor:"pointer",transition:"0.2s"},children:"  "})})]})})}function Pk(t){const[e,n]=_.useState(null),[r,i]=_.useState(!0);_.useEffect(()=>{if(!t){n(null),i(!1);return}const o=rE(t,a=>{n(a),i(!1)});return()=>{try{o&&o()}catch{}}},[t]);const s=_.useCallback(async o=>{t&&await nE(t,o)},[t]);return{bookmark:e,loading:r,saveBookmark:s}}function Fk(){const{search:t}=If();return xg.useMemo(()=>new URLSearchParams(t),[t])}function Mk({user:t}){const e=Fk(),n=yn(),r=t&&t.uid?t.uid:null,{bookmark:i,loading:s,saveBookmark:o}=Pk(r),[a,c]=_.useState(!1),u=e.get("crew")||"",f=e.get("date");_.useEffect(()=>{if(!r||!f||!/^\d{4}-\d{2}-\d{2}$/.test(f))return;const O=F(ue,`users/${r}/dailyActivity/${f}`);Zr(O,{biblePageVisited:!0,visitedAt:Date.now()}).catch(G=>{console.error("[dailyActivity] failed to mark biblePageVisited",G)})},[r,f]);const[d,h]=_.useState(null),[x,v]=_.useState(null),[w,k]=_.useState(!0),[m,g]=_.useState(()=>{const O=localStorage.getItem("bibleFont");return O?parseInt(O):18}),[y,b]=_.useState(""),[T,S]=_.useState({book:null,chapter:null}),[C,j]=_.useState(!1);_.useEffect(()=>{localStorage.setItem("bibleFont",m)},[m]),_.useEffect(()=>{async function O(){try{if(!f){b("  ."),k(!1);return}const G=new Date(f+"T00:00:00");if(isNaN(G.getTime())){b("   ."),k(!1);return}const N=G.getFullYear(),B=G.getMonth()+1,W=on(N,B),ee=gr(u,W).find(Be=>Be.date===f);if(!ee){b("      ."),k(!1);return}const Pe=await fetch("/bible_kor.json");if(!Pe.ok)throw new Error("   .");const Ce=await Pe.json();v(Ce),h(ee),k(!1)}catch(G){console.error(G),b("    ."),k(!1)}}O()},[u,f]);const P=()=>{const O=document.querySelectorAll("[id^='pos-']");if(!O||O.length===0)return null;let G=null,N=1/0;if(O.forEach(W=>{const X=W.getBoundingClientRect();if(X.bottom<=0)return;const ee=Math.abs(X.top-80);ee<N&&(N=ee,G=W)}),!G)return null;const B=G.id.replace("pos-","").split("-");return{book:B[0],chapter:parseInt(B[1],10)}},I=async()=>{if(!r){alert(" .");return}if(!d){alert("   .    .");return}const O=P();if(!O||!O.book||!O.chapter){alert("       .");return}await o({bookId:O.book,chapter:O.chapter}),c(!0),setTimeout(()=>c(!1),1500)},M=()=>{if(!i||!i.bookId||!i.chapter)return;const O=document.getElementById(`pos-${i.bookId}-${i.chapter}`);O?O.scrollIntoView({behavior:"smooth",block:"start"}):alert("     .")},A=O=>{if(!O)return"";const G=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],N=new RegExp("("+G.join("|")+")\\d+:\\d+"),B=O.match(N);if(B){const W=O.indexOf(B[0]);if(W>10)return O.substring(0,W).trim()}return O};if(w)return l.jsxs("div",{style:{minHeight:"100vh",padding:20,background:"#E5FFF5"},children:[l.jsx("h2",{style:{marginTop:0},children:"  "}),l.jsx("p",{children:"  ..."})]});if(y||!d||!x)return l.jsxs("div",{style:{minHeight:"100vh",padding:20,background:"#E5FFF5"},children:[l.jsx("h2",{style:{marginTop:0},children:"  "}),l.jsx("p",{style:{color:"#b91c1c"},children:y||"   ."}),l.jsx("button",{onClick:()=>n(-1),style:{marginTop:16,padding:"8px 16px",borderRadius:999,border:"none",background:"#2563EB",color:"#0f172a",fontWeight:600,cursor:"pointer"},children:" "})]});const H=[];(d.items||[]).forEach(O=>{if(!(O!=null&&O.book)||!(O!=null&&O.chapter))return;const G=`${O.book}:${O.chapter}`;H.includes(G)||H.push(G)});const q=H.map(O=>{var X;const[G,N]=O.split(":"),B=parseInt(N,10),W=(X=x==null?void 0:x[G])==null?void 0:X[String(B)];return{book:G,chapter:B,verses:W||{}}}),se=d.panorama?d.panorama.parsedSections.map(O=>({...O,chapters:O.items.map(G=>{var B;const N=(B=x==null?void 0:x[G.book])==null?void 0:B[String(G.chapter)];return{book:G.book,chapter:G.chapter,verses:N||{}}})})):null;return l.jsx("div",{style:{fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Text", "Apple SD Gothic Neo", system-ui',background:C?"#050509":"#f2f2f7",minHeight:"100vh"},children:l.jsxs("div",{style:{maxWidth:820,margin:"0 auto",minHeight:"100vh",padding:"12px 12px 24px",display:"flex",flexDirection:"column",gap:12},children:[l.jsxs("div",{style:{position:"sticky",top:0,zIndex:20,padding:"8px 4px 10px",marginBottom:4,display:"flex",alignItems:"center",justifyContent:"space-between",backdropFilter:"blur(18px)",WebkitBackdropFilter:"blur(18px)",background:C?"rgba(15,23,42,0.9)":"rgba(242,242,247,0.9)",borderBottom:C?"1px solid rgba(15,23,42,0.9)":"1px solid rgba(226,232,240,0.9)"},children:[l.jsx("button",{onClick:()=>n(-1),style:{width:54,padding:"6px 8px",borderRadius:14,border:"none",background:C?"rgba(15,23,42,0.8)":"#ffffff",boxShadow:C?"0 4px 10px rgba(0,0,0,0.45)":"0 4px 10px rgba(148,163,184,0.55)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:0,fontSize:18,cursor:"pointer",color:C?"#E5E7EB":"#111827"},children:""}),l.jsxs("button",{onClick:()=>j(O=>!O),"aria-label":C?"  ":" ",style:{padding:"6px 10px",borderRadius:999,border:"1px solid",borderColor:C?"rgba(255,255,255,0.18)":"rgba(15,23,42,0.12)",background:C?"rgba(255,255,255,0.08)":"rgba(15,23,42,0.06)",color:C?"#E5E7EB":"#111827",fontSize:13,fontWeight:700,display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[l.jsx("span",{style:{fontSize:16,lineHeight:1},children:C?"":""}),l.jsx("span",{style:{whiteSpace:"nowrap",lineHeight:1.2,letterSpacing:"0.01em"},children:C?" ":""})]})]}),l.jsxs("div",{style:{borderRadius:18,padding:14,color:C?"#E5E7EB":"#0f172a",background:C?"rgba(15,23,42,0.95)":"rgba(255,255,255,0.96)",boxShadow:C?"0 10px 25px rgba(0,0,0,0.7)":"0 8px 22px rgba(148,163,184,0.35)",display:"flex",flexDirection:"column",gap:10},children:[!s&&l.jsxs("div",{style:{padding:"9px 11px",borderRadius:12,color:C?"#E5E7EB":"#0f172a",background:C?"rgba(15,23,42,0.9)":"rgba(248,250,252,0.95)",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:13,gap:8},children:[l.jsx("span",{children:i?`  : ${i.bookId} ${i.chapter}`:"   ."}),i&&l.jsx("button",{onClick:M,style:{padding:"6px 10px",borderRadius:999,border:"none",background:"#4a6cf7",color:"#F9FAFB",fontSize:12,cursor:"pointer",whiteSpace:"nowrap"},children:" "})]}),l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8},children:[l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("button",{onClick:()=>g(O=>Math.max(14,O-2)),style:{padding:"6px 10px",borderRadius:10,border:"none",background:C?"#020617":"#E5E7EB",color:C?"#E5E7EB":"#111827",fontWeight:600,cursor:"pointer"},children:"A-"}),l.jsx("button",{onClick:()=>g(O=>Math.min(26,O+2)),style:{padding:"6px 10px",borderRadius:10,border:"none",background:C?"#020617":"#E5E7EB",color:C?"#E5E7EB":"#111827",fontWeight:600,cursor:"pointer"},children:"A+"})]}),l.jsxs("div",{style:{fontSize:12,opacity:.8},children:[": ",f]})]}),d.panorama?l.jsxs("div",{style:{marginTop:8},children:[l.jsx("div",{style:{fontSize:26,fontWeight:800,color:"#1F8A70",letterSpacing:"-0.02em",marginBottom:8},children:d.panorama.mainTitle}),l.jsx("div",{style:{fontSize:16,fontWeight:600,opacity:.9,display:"flex",flexWrap:"wrap",gap:"8px 10px"},children:d.panorama.sections.map((O,G)=>l.jsxs("span",{style:{background:C?"rgba(31,138,112,0.25)":"#E5F3E6",color:C?"#86EFAC":"#1F8A70",padding:"4px 10px",borderRadius:10,border:C?"1px solid rgba(134,239,172,0.2)":"none"},children:[O.subTitle," (",O.bibleRef,")"]},G))})]}):l.jsxs("div",{style:{marginTop:12,fontSize:Math.max(22,m+4),letterSpacing:"0.01em",fontWeight:800},children:[u,"  ",d.label]})]})]}),l.jsx("div",{style:{flex:1,overflowY:"auto",background:C?"rgba(15,23,42,0.98)":"#ffffff",color:C?"#E5E7EB":"#0f172a",borderRadius:22,padding:18,boxShadow:C?"0 16px 40px rgba(0,0,0,0.8)":"0 16px 40px rgba(148,163,184,0.45)"},children:se?se.map((O,G)=>l.jsxs("div",{style:{marginBottom:40},children:[l.jsxs("div",{style:{padding:"8px 12px",background:C?"rgba(31,138,112,0.2)":"#E5F3E6",borderRadius:12,marginBottom:16,borderLeft:"4px solid #1F8A70"},children:[l.jsxs("div",{style:{fontSize:13,color:"#1F8A70",fontWeight:700,marginBottom:2},children:["SECTION ",G+1]}),l.jsxs("div",{style:{fontSize:18,fontWeight:800},children:[O.subTitle," (",O.bibleRef,")"]})]}),O.chapters.map(N=>l.jsxs("div",{id:`pos-${N.book}-${N.chapter}`,style:{marginBottom:22},children:[l.jsxs("h3",{style:{margin:"0 0 10px",fontSize:18,fontWeight:700},children:[N.book," ",N.chapter,""]}),Object.keys(N.verses).sort((B,W)=>parseInt(B,10)-parseInt(W,10)).map(B=>{const W=N.verses[B]||"",X=W.match(/^<([^>]+)>\s*(.*)$/),ee=X?X[1]:null,Pe=X?X[2]:W;return l.jsxs("div",{style:{margin:"6px 0"},children:[ee&&l.jsxs("div",{style:{color:"#1F8A70",fontWeight:700,fontSize:"1.05em",marginBottom:4},children:["[ ",ee," ]"]}),l.jsxs("p",{style:{margin:"2px 0",fontSize:m,letterSpacing:"0.01em",lineHeight:1.65},children:[l.jsxs("strong",{children:[B,"."]})," ",A(Pe)]})]},B)})]},N.book+N.chapter))]},G)):q.map(O=>{const G=Object.keys(O.verses).sort((N,B)=>parseInt(N,10)-parseInt(B,10));return l.jsxs("div",{id:`pos-${O.book}-${O.chapter}`,style:{marginBottom:22},onMouseEnter:()=>S({book:O.book,chapter:O.chapter}),children:[l.jsxs("h3",{style:{margin:"0 0 10px",fontSize:18,fontWeight:700},children:[O.book," ",O.chapter,""]}),G.map(N=>{const B=O.verses[N]||"",W=B.match(/^<([^>]+)>\s*(.*)$/),X=W?W[1]:null,ee=W?W[2]:B;return l.jsxs("div",{style:{margin:"6px 0"},children:[X&&l.jsxs("div",{style:{color:"#1F8A70",fontWeight:700,fontSize:"1.05em",marginBottom:4},children:["[ ",X," ]"]}),l.jsxs("p",{style:{margin:"2px 0",fontSize:m,letterSpacing:"0.01em",lineHeight:1.65},children:[l.jsxs("strong",{children:[N,"."]})," ",A(ee)]})]},N)})]},O.book+O.chapter)})}),l.jsx("div",{style:{height:40}}),l.jsxs("button",{onClick:I,style:{position:"fixed",right:20,bottom:24,zIndex:9999,padding:"10px 16px",borderRadius:999,border:"none",background:"rgba(255,255,255,0.9)",color:"#0f172a",fontWeight:"bold",fontSize:14,boxShadow:"0 14px 30px rgba(15,23,42,0.35)",cursor:"pointer",display:"flex",alignItems:"center",gap:8},children:[l.jsx("span",{style:{fontSize:18},children:""}),l.jsx("span",{children:" "})]}),a&&l.jsx("div",{style:{position:"fixed",inset:0,zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.25)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)"},children:l.jsxs("div",{style:{width:"85%",maxWidth:340,padding:"16px 18px",borderRadius:28,background:"rgba(255,255,255,0.85)",color:"#0f172a",boxShadow:"0 20px 40px rgba(0,0,0,0.35)",textAlign:"center"},children:[l.jsx("div",{style:{width:48,height:48,margin:"0 auto 10px",borderRadius:24,background:"#34C759",display:"flex",alignItems:"center",justifyContent:"center",fontSize:24,color:"#fff"},children:""}),l.jsx("div",{style:{fontSize:16,fontWeight:700,marginBottom:4},children:" "}),l.jsx("div",{style:{fontSize:13,color:"#475569"},children:"      "})]})})]})})}function Ok({user:t}){const e=yn(),[n,r]=_.useState({}),[i,s]=_.useState({}),[o,a]=_.useState({});_.useEffect(()=>{const u=ry(v=>r(v||{})),f=ja(v=>s(v||{})),d=new Date,h=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}`,x=[];return he.forEach(v=>{const w=F(ue,`approvals/${h}/${v}`),k=we(w,m=>{const g=m.val()?Object.keys(m.val()):[];a(y=>({...y,[v]:g}))});x.push(k)}),()=>{typeof u=="function"&&u(),typeof f=="function"&&f(),x.forEach(v=>v())}},[]);const c=_.useMemo(()=>{const u=new Date,f=u.getFullYear(),d=u.getMonth()+1,h=on(f,d);if(!h||h.length===0)return{dates:[],todayKey:"",byCrew:{}};const x=u.getDate(),v=`${f}-${String(d).padStart(2,"0")}-${String(x).padStart(2,"0")}`,w=h.slice(0,x),k={};he.forEach(b=>k[b]=[]);const m=new Set,g={};he.forEach(b=>{const T=gr(b,h),S={};(T||[]).forEach(C=>{!C||!C.date||(S[C.date]=typeof C.chapters=="number"?C.chapters:0)}),g[b]=S});const y=(b,T,S)=>{if(!b||!k[b])return;const C=n[b]||{},j=C.users&&C.users[T]||{},P=g[b]||{},M=(j||{}).checks||{};let A=0,H=0;w.forEach(N=>{const B=P[N]||0;B&&(H+=B,M[N]&&(A+=B))});const q=S.name||T,se=S.medals||{},O=H>0?Math.round(A/H*100):0,G=Af({dates:h,todayKey:v,userChecks:M,userDailyActivity:S.dailyActivity||{}});k[b].push({uid:T,name:q,chapters:A,progress:O,stateKey:G.key,stateLabel:G.label,medals:se})};return he.forEach(b=>{(o[b]||[]).forEach(S=>{m.add(S);const C=(i||{})[S];C&&y(b,S,C)})}),Object.entries(i||{}).forEach(([b,T])=>{if(m.has(b))return;const S=T.crew;S&&k[S]&&y(S,b,T)}),Object.keys(k).forEach(b=>{k[b].sort((T,S)=>(S.chapters||0)-(T.chapters||0))}),{dates:h,todayKey:v,byCrew:k}},[n,i,o]);return l.jsxs("div",{style:{padding:25,minHeight:"100vh",background:"#E5F3E6",color:"#034732"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[l.jsx("h2",{style:{margin:0,fontSize:26},children:"   "}),l.jsx("button",{onClick:()=>e("/home"),style:{padding:"10px 14px",borderRadius:12,border:"none",background:"#E8F6F0",color:"#1E7F74",fontWeight:900,cursor:"pointer"},children:"  "})]}),l.jsxs("div",{style:{fontSize:12,color:"#2F3A33",marginBottom:14},children:[" ",l.jsx("b",{children:"  /   .. /   /  !"}),"  ."]}),he.map(u=>{const f=c.byCrew&&c.byCrew[u]||[];return l.jsxs("div",{style:{marginBottom:16,padding:14,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 10px rgba(0,0,0,0.06)"},children:[l.jsx("h3",{style:{margin:0,marginBottom:10},children:Ve(u)}),f.length===0?l.jsx("div",{style:{fontSize:12,color:"#64748B"},children:"    ."}):l.jsx("div",{style:{overflowX:"auto"},children:l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12,background:"#F8FAFF",borderRadius:12},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"left",width:"20%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"right",width:"12%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"right",width:"15%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"center",width:"20%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"center",width:"33%",whiteSpace:"nowrap"},children:""})]})}),l.jsx("tbody",{children:f.map(d=>{var h,x,v;return l.jsxs("tr",{children:[l.jsx("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",maxWidth:65,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:d.name}),l.jsxs("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",textAlign:"right"},children:[d.progress,"%"]}),l.jsxs("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",textAlign:"right",whiteSpace:"nowrap"},children:[d.chapters,""]}),l.jsx("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",textAlign:"center"},children:(()=>{const w=d.stateLabel||" ",k=d.stateKey||"",m=k==="success"||w.includes(""),g=k==="ready"||w.includes(""),y=k==="running"||w.includes("");if(k==="fail"||w.includes("!"),g)return l.jsx("span",{style:{color:"#166534",fontWeight:600},children:w});const b={display:"inline-block",borderRadius:6,padding:"2px 5px",fontWeight:700,fontSize:11,backgroundColor:m?"#DCFCE7":y?"#DBEAFE":"#E5E7EB",color:m?"#166534":y?"#1D4ED8":"#111827",whiteSpace:"nowrap"};return l.jsx("span",{style:b,children:w})})()}),l.jsx("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px",textAlign:"center"},children:l.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:3,fontSize:13},children:[(((h=d.medals)==null?void 0:h.gold)||0)>0&&l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[l.jsx("span",{children:""}),l.jsx("b",{style:{marginLeft:1},children:d.medals.gold})]}),(((x=d.medals)==null?void 0:x.silver)||0)>0&&l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[l.jsx("span",{children:""}),l.jsx("b",{style:{marginLeft:1},children:d.medals.silver})]}),(((v=d.medals)==null?void 0:v.bronze)||0)>0&&l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[l.jsx("span",{children:""}),l.jsx("b",{style:{marginLeft:1},children:d.medals.bronze})]})]})})]},d.uid)})})]})})]},u)})]})}function Bk(){const[t,e]=_.useState(null);_.useEffect(()=>{const r=localStorage.getItem("biblecrew_user");if(r)try{const i=JSON.parse(r);if(i&&i.uid){const s=ne(),o=F(s,`users/${i.uid}`),a=we(o,c=>{const u=c.val();if(u){const f={uid:i.uid,name:u.name||i.name,crew:u.crew||null,isAdmin:!!u.isAdmin,medals:u.medals||{},earnedMedals:u.earnedMedals||{},mustChangePassword:!!u.mustChangePassword};e(f),localStorage.setItem("biblecrew_user",JSON.stringify(f))}});return()=>a()}}catch(i){console.error("   ",i)}},[]);async function n(r,i){const s=(r||"").trim();if(!s)return null;const o=await OC(s,i||""),a={uid:o.uid,name:o.name||s,crew:o.crew||null,isAdmin:!!o.isAdmin,medals:o.medals||{},earnedMedals:o.earnedMedals||{},mustChangePassword:!!o.mustChangePassword};return e(a),localStorage.setItem("biblecrew_user",JSON.stringify(a)),a}return l.jsx(ek,{children:l.jsxs(XE,{children:[l.jsx($e,{path:"/admin-login",element:l.jsx(wk,{})}),l.jsx($e,{path:"/",element:l.jsx(og,{onLogin:n})}),l.jsx($e,{path:"/login",element:l.jsx(og,{onLogin:n})}),l.jsx($e,{path:"/home",element:l.jsx(tk,{user:t})}),l.jsx($e,{path:"/crew-members",element:l.jsx(Ok,{user:t})}),l.jsx($e,{path:"/change-password",element:l.jsx(Tk,{user:t})}),l.jsx($e,{path:"/",element:l.jsx(Wn,{crewName:"",user:t})}),l.jsx($e,{path:"/",element:l.jsx(Wn,{crewName:"",user:t})}),l.jsx($e,{path:"/A",element:l.jsx(Wn,{crewName:"(A)",user:t})}),l.jsx($e,{path:"/B",element:l.jsx(Wn,{crewName:"(B)",user:t})}),l.jsx($e,{path:"/",element:l.jsx(Wn,{crewName:"",user:t})}),l.jsx($e,{path:"/",element:l.jsx(Wn,{crewName:"",user:t})}),l.jsx($e,{path:"/",element:l.jsx(Wn,{crewName:"",user:t})}),l.jsx($e,{path:"/",element:l.jsx(Wn,{crewName:"",user:t})}),l.jsx($e,{path:"/",element:l.jsx(nk,{})}),l.jsx($e,{path:"/records",element:l.jsx(Dk,{user:t})}),l.jsx($e,{path:"/",element:l.jsx(Mk,{user:t})}),l.jsx($e,{path:"/admin",element:l.jsx(bk,{user:t})}),l.jsx($e,{path:"/admin/class-notice",element:l.jsx(Sk,{})})]})})}const zk=document.getElementById("root"),Lk=S1(zk);Lk.render(l.jsx(Bk,{}));
