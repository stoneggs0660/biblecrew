function Qy(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Ky(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dm={exports:{}},ia={},fm={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var po=Symbol.for("react.element"),qy=Symbol.for("react.portal"),Xy=Symbol.for("react.fragment"),Jy=Symbol.for("react.strict_mode"),Zy=Symbol.for("react.profiler"),ev=Symbol.for("react.provider"),tv=Symbol.for("react.context"),nv=Symbol.for("react.forward_ref"),rv=Symbol.for("react.suspense"),iv=Symbol.for("react.memo"),sv=Symbol.for("react.lazy"),Vf=Symbol.iterator;function ov(t){return t===null||typeof t!="object"?null:(t=Vf&&t[Vf]||t["@@iterator"],typeof t=="function"?t:null)}var hm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pm=Object.assign,mm={};function Ki(t,e,n){this.props=t,this.context=e,this.refs=mm,this.updater=n||hm}Ki.prototype.isReactComponent={};Ki.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ki.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gm(){}gm.prototype=Ki.prototype;function Zu(t,e,n){this.props=t,this.context=e,this.refs=mm,this.updater=n||hm}var ed=Zu.prototype=new gm;ed.constructor=Zu;pm(ed,Ki.prototype);ed.isPureReactComponent=!0;var Yf=Array.isArray,ym=Object.prototype.hasOwnProperty,td={current:null},vm={key:!0,ref:!0,__self:!0,__source:!0};function xm(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)ym.call(e,r)&&!vm.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:po,type:t,key:s,ref:o,props:i,_owner:td.current}}function lv(t,e){return{$$typeof:po,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function nd(t){return typeof t=="object"&&t!==null&&t.$$typeof===po}function av(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Gf=/\/+/g;function Ga(t,e){return typeof t=="object"&&t!==null&&t.key!=null?av(""+t.key):e.toString(36)}function il(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case po:case qy:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Ga(o,0):r,Yf(i)?(n="",t!=null&&(n=t.replace(Gf,"$&/")+"/"),il(i,e,n,"",function(u){return u})):i!=null&&(nd(i)&&(i=lv(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Gf,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Yf(t))for(var a=0;a<t.length;a++){s=t[a];var c=r+Ga(s,a);o+=il(s,e,n,c,i)}else if(c=ov(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=r+Ga(s,a++),o+=il(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function zo(t,e,n){if(t==null)return t;var r=[],i=0;return il(t,r,"","",function(s){return e.call(n,s,i++)}),r}function cv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bt={current:null},sl={transition:null},uv={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:sl,ReactCurrentOwner:td};function _m(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:zo,forEach:function(t,e,n){zo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return zo(t,function(){e++}),e},toArray:function(t){return zo(t,function(e){return e})||[]},only:function(t){if(!nd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=Ki;se.Fragment=Xy;se.Profiler=Zy;se.PureComponent=Zu;se.StrictMode=Jy;se.Suspense=rv;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uv;se.act=_m;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=pm({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=td.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)ym.call(e,c)&&!vm.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:po,type:t.type,key:i,ref:s,props:r,_owner:o}};se.createContext=function(t){return t={$$typeof:tv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ev,_context:t},t.Consumer=t};se.createElement=xm;se.createFactory=function(t){var e=xm.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:nv,render:t}};se.isValidElement=nd;se.lazy=function(t){return{$$typeof:sv,_payload:{_status:-1,_result:t},_init:cv}};se.memo=function(t,e){return{$$typeof:iv,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=sl.transition;sl.transition={};try{t()}finally{sl.transition=e}};se.unstable_act=_m;se.useCallback=function(t,e){return bt.current.useCallback(t,e)};se.useContext=function(t){return bt.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return bt.current.useDeferredValue(t)};se.useEffect=function(t,e){return bt.current.useEffect(t,e)};se.useId=function(){return bt.current.useId()};se.useImperativeHandle=function(t,e,n){return bt.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return bt.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return bt.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return bt.current.useMemo(t,e)};se.useReducer=function(t,e,n){return bt.current.useReducer(t,e,n)};se.useRef=function(t){return bt.current.useRef(t)};se.useState=function(t){return bt.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return bt.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return bt.current.useTransition()};se.version="18.3.1";fm.exports=se;var _=fm.exports;const bm=Ky(_),dv=Qy({__proto__:null,default:bm},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fv=_,hv=Symbol.for("react.element"),pv=Symbol.for("react.fragment"),mv=Object.prototype.hasOwnProperty,gv=fv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yv={key:!0,ref:!0,__self:!0,__source:!0};function Sm(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)mv.call(e,r)&&!yv.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:hv,type:t,key:s,ref:o,props:i,_owner:gv.current}}ia.Fragment=pv;ia.jsx=Sm;ia.jsxs=Sm;dm.exports=ia;var l=dm.exports;var wm={exports:{}},Mt={},Cm={exports:{}},Em={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,B){var W=D.length;D.push(B);e:for(;0<W;){var q=W-1>>>1,J=D[q];if(0<i(J,B))D[q]=B,D[W]=J,W=q;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var B=D[0],W=D.pop();if(W!==B){D[0]=W;e:for(var q=0,J=D.length,Fe=J>>>1;q<Fe;){var Ce=2*(q+1)-1,Le=D[Ce],Je=Ce+1,Te=D[Je];if(0>i(Le,W))Je<J&&0>i(Te,Le)?(D[q]=Te,D[Je]=W,q=Je):(D[q]=Le,D[Ce]=W,q=Ce);else if(Je<J&&0>i(Te,W))D[q]=Te,D[Je]=W,q=Je;else break e}}return B}function i(D,B){var W=D.sortIndex-B.sortIndex;return W!==0?W:D.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],f=1,d=null,h=3,x=!1,v=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(D){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=D)r(u),B.sortIndex=B.expirationTime,e(c,B);else break;B=n(u)}}function b(D){if(S=!1,y(D),!v)if(n(c)!==null)v=!0,O(k);else{var B=n(u);B!==null&&Y(b,B.startTime-D)}}function k(D,B){v=!1,S&&(S=!1,g(j),j=-1),x=!0;var W=h;try{for(y(B),d=n(c);d!==null&&(!(d.expirationTime>B)||D&&!M());){var q=d.callback;if(typeof q=="function"){d.callback=null,h=d.priorityLevel;var J=q(d.expirationTime<=B);B=t.unstable_now(),typeof J=="function"?d.callback=J:d===n(c)&&r(c),y(B)}else r(c);d=n(c)}if(d!==null)var Fe=!0;else{var Ce=n(u);Ce!==null&&Y(b,Ce.startTime-B),Fe=!1}return Fe}finally{d=null,h=W,x=!1}}var w=!1,C=null,j=-1,N=5,I=-1;function M(){return!(t.unstable_now()-I<N)}function A(){if(C!==null){var D=t.unstable_now();I=D;var B=!0;try{B=C(!0,D)}finally{B?H():(w=!1,C=null)}}else w=!1}var H;if(typeof p=="function")H=function(){p(A)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,ne=K.port2;K.port1.onmessage=A,H=function(){ne.postMessage(null)}}else H=function(){E(A,0)};function O(D){C=D,w||(w=!0,H())}function Y(D,B){j=E(function(){D(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){v||x||(v=!0,O(k))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(D){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var W=h;h=B;try{return D()}finally{h=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,B){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var W=h;h=D;try{return B()}finally{h=W}},t.unstable_scheduleCallback=function(D,B,W){var q=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?q+W:q):W=q,D){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=W+J,D={id:f++,callback:B,priorityLevel:D,startTime:W,expirationTime:J,sortIndex:-1},W>q?(D.sortIndex=W,e(u,D),n(c)===null&&D===n(u)&&(S?(g(j),j=-1):S=!0,Y(b,W-q))):(D.sortIndex=J,e(c,D),v||x||(v=!0,O(k))),D},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(D){var B=h;return function(){var W=h;h=B;try{return D.apply(this,arguments)}finally{h=W}}}})(Em);Cm.exports=Em;var vv=Cm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xv=_,Ft=vv;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var km=new Set,Bs={};function qr(t,e){Pi(t,e),Pi(t+"Capture",e)}function Pi(t,e){for(Bs[t]=e,t=0;t<e.length;t++)km.add(e[t])}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oc=Object.prototype.hasOwnProperty,_v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qf={},Kf={};function bv(t){return Oc.call(Kf,t)?!0:Oc.call(Qf,t)?!1:_v.test(t)?Kf[t]=!0:(Qf[t]=!0,!1)}function Sv(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function wv(t,e,n,r){if(e===null||typeof e>"u"||Sv(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ut[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ut[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ut[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ut[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ut[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ut[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ut[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ut[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ut[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var rd=/[\-:]([a-z])/g;function id(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rd,id);ut[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rd,id);ut[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rd,id);ut[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ut[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});ut.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ut[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function sd(t,e,n,r){var i=ut.hasOwnProperty(e)?ut[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wv(e,n,i,r)&&(n=null),r||i===null?bv(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Bn=xv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lo=Symbol.for("react.element"),di=Symbol.for("react.portal"),fi=Symbol.for("react.fragment"),od=Symbol.for("react.strict_mode"),Bc=Symbol.for("react.profiler"),Tm=Symbol.for("react.provider"),Rm=Symbol.for("react.context"),ld=Symbol.for("react.forward_ref"),zc=Symbol.for("react.suspense"),Lc=Symbol.for("react.suspense_list"),ad=Symbol.for("react.memo"),Vn=Symbol.for("react.lazy"),jm=Symbol.for("react.offscreen"),qf=Symbol.iterator;function cs(t){return t===null||typeof t!="object"?null:(t=qf&&t[qf]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,Qa;function bs(t){if(Qa===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Qa=e&&e[1]||""}return`
`+Qa+t}var Ka=!1;function qa(t,e){if(!t||Ka)return"";Ka=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{Ka=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?bs(t):""}function Cv(t){switch(t.tag){case 5:return bs(t.type);case 16:return bs("Lazy");case 13:return bs("Suspense");case 19:return bs("SuspenseList");case 0:case 2:case 15:return t=qa(t.type,!1),t;case 11:return t=qa(t.type.render,!1),t;case 1:return t=qa(t.type,!0),t;default:return""}}function $c(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fi:return"Fragment";case di:return"Portal";case Bc:return"Profiler";case od:return"StrictMode";case zc:return"Suspense";case Lc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Rm:return(t.displayName||"Context")+".Consumer";case Tm:return(t._context.displayName||"Context")+".Provider";case ld:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ad:return e=t.displayName||null,e!==null?e:$c(t.type)||"Memo";case Vn:e=t._payload,t=t._init;try{return $c(t(e))}catch{}}return null}function Ev(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $c(e);case 8:return e===od?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Im(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function kv(t){var e=Im(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $o(t){t._valueTracker||(t._valueTracker=kv(t))}function Am(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Im(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function gl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Wc(t,e){var n=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Xf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=hr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Nm(t,e){e=e.checked,e!=null&&sd(t,"checked",e,!1)}function Uc(t,e){Nm(t,e);var n=hr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hc(t,e.type,hr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hc(t,e,n){(e!=="number"||gl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ss=Array.isArray;function Ci(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+hr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Vc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Ss(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:hr(n)}}function Dm(t,e){var n=hr(e.value),r=hr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function eh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Pm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Pm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wo,Fm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wo=Wo||document.createElement("div"),Wo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function zs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Es={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tv=["Webkit","ms","Moz","O"];Object.keys(Es).forEach(function(t){Tv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Es[e]=Es[t]})});function Mm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Es.hasOwnProperty(t)&&Es[t]?(""+e).trim():e+"px"}function Om(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Mm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Rv=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gc(t,e){if(e){if(Rv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Qc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kc=null;function cd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qc=null,Ei=null,ki=null;function th(t){if(t=yo(t)){if(typeof qc!="function")throw Error(z(280));var e=t.stateNode;e&&(e=ca(e),qc(t.stateNode,t.type,e))}}function Bm(t){Ei?ki?ki.push(t):ki=[t]:Ei=t}function zm(){if(Ei){var t=Ei,e=ki;if(ki=Ei=null,th(t),e)for(t=0;t<e.length;t++)th(e[t])}}function Lm(t,e){return t(e)}function $m(){}var Xa=!1;function Wm(t,e,n){if(Xa)return t(e,n);Xa=!0;try{return Lm(t,e,n)}finally{Xa=!1,(Ei!==null||ki!==null)&&($m(),zm())}}function Ls(t,e){var n=t.stateNode;if(n===null)return null;var r=ca(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Xc=!1;if(Nn)try{var us={};Object.defineProperty(us,"passive",{get:function(){Xc=!0}}),window.addEventListener("test",us,us),window.removeEventListener("test",us,us)}catch{Xc=!1}function jv(t,e,n,r,i,s,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var ks=!1,yl=null,vl=!1,Jc=null,Iv={onError:function(t){ks=!0,yl=t}};function Av(t,e,n,r,i,s,o,a,c){ks=!1,yl=null,jv.apply(Iv,arguments)}function Nv(t,e,n,r,i,s,o,a,c){if(Av.apply(this,arguments),ks){if(ks){var u=yl;ks=!1,yl=null}else throw Error(z(198));vl||(vl=!0,Jc=u)}}function Xr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Um(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function nh(t){if(Xr(t)!==t)throw Error(z(188))}function Dv(t){var e=t.alternate;if(!e){if(e=Xr(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return nh(i),t;if(s===r)return nh(i),e;s=s.sibling}throw Error(z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Hm(t){return t=Dv(t),t!==null?Vm(t):null}function Vm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Vm(t);if(e!==null)return e;t=t.sibling}return null}var Ym=Ft.unstable_scheduleCallback,rh=Ft.unstable_cancelCallback,Pv=Ft.unstable_shouldYield,Fv=Ft.unstable_requestPaint,$e=Ft.unstable_now,Mv=Ft.unstable_getCurrentPriorityLevel,ud=Ft.unstable_ImmediatePriority,Gm=Ft.unstable_UserBlockingPriority,xl=Ft.unstable_NormalPriority,Ov=Ft.unstable_LowPriority,Qm=Ft.unstable_IdlePriority,sa=null,hn=null;function Bv(t){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(sa,t,void 0,(t.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:$v,zv=Math.log,Lv=Math.LN2;function $v(t){return t>>>=0,t===0?32:31-(zv(t)/Lv|0)|0}var Uo=64,Ho=4194304;function ws(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _l(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ws(a):(s&=o,s!==0&&(r=ws(s)))}else o=n&~i,o!==0?r=ws(o):s!==0&&(r=ws(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rn(e),i=1<<n,r|=t[n],e&=~i;return r}function Wv(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uv(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-rn(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=Wv(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function Zc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Km(){var t=Uo;return Uo<<=1,!(Uo&4194240)&&(Uo=64),t}function Ja(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function mo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rn(e),t[e]=n}function Hv(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-rn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function dd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var me=0;function qm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Xm,fd,Jm,Zm,eg,eu=!1,Vo=[],tr=null,nr=null,rr=null,$s=new Map,Ws=new Map,Gn=[],Vv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ih(t,e){switch(t){case"focusin":case"focusout":tr=null;break;case"dragenter":case"dragleave":nr=null;break;case"mouseover":case"mouseout":rr=null;break;case"pointerover":case"pointerout":$s.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ws.delete(e.pointerId)}}function ds(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=yo(e),e!==null&&fd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Yv(t,e,n,r,i){switch(e){case"focusin":return tr=ds(tr,t,e,n,r,i),!0;case"dragenter":return nr=ds(nr,t,e,n,r,i),!0;case"mouseover":return rr=ds(rr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return $s.set(s,ds($s.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ws.set(s,ds(Ws.get(s)||null,t,e,n,r,i)),!0}return!1}function tg(t){var e=Pr(t.target);if(e!==null){var n=Xr(e);if(n!==null){if(e=n.tag,e===13){if(e=Um(n),e!==null){t.blockedOn=e,eg(t.priority,function(){Jm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ol(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=tu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Kc=r,n.target.dispatchEvent(r),Kc=null}else return e=yo(n),e!==null&&fd(e),t.blockedOn=n,!1;e.shift()}return!0}function sh(t,e,n){ol(t)&&n.delete(e)}function Gv(){eu=!1,tr!==null&&ol(tr)&&(tr=null),nr!==null&&ol(nr)&&(nr=null),rr!==null&&ol(rr)&&(rr=null),$s.forEach(sh),Ws.forEach(sh)}function fs(t,e){t.blockedOn===e&&(t.blockedOn=null,eu||(eu=!0,Ft.unstable_scheduleCallback(Ft.unstable_NormalPriority,Gv)))}function Us(t){function e(i){return fs(i,t)}if(0<Vo.length){fs(Vo[0],t);for(var n=1;n<Vo.length;n++){var r=Vo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(tr!==null&&fs(tr,t),nr!==null&&fs(nr,t),rr!==null&&fs(rr,t),$s.forEach(e),Ws.forEach(e),n=0;n<Gn.length;n++)r=Gn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Gn.length&&(n=Gn[0],n.blockedOn===null);)tg(n),n.blockedOn===null&&Gn.shift()}var Ti=Bn.ReactCurrentBatchConfig,bl=!0;function Qv(t,e,n,r){var i=me,s=Ti.transition;Ti.transition=null;try{me=1,hd(t,e,n,r)}finally{me=i,Ti.transition=s}}function Kv(t,e,n,r){var i=me,s=Ti.transition;Ti.transition=null;try{me=4,hd(t,e,n,r)}finally{me=i,Ti.transition=s}}function hd(t,e,n,r){if(bl){var i=tu(t,e,n,r);if(i===null)ac(t,e,r,Sl,n),ih(t,r);else if(Yv(i,t,e,n,r))r.stopPropagation();else if(ih(t,r),e&4&&-1<Vv.indexOf(t)){for(;i!==null;){var s=yo(i);if(s!==null&&Xm(s),s=tu(t,e,n,r),s===null&&ac(t,e,r,Sl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ac(t,e,r,null,n)}}var Sl=null;function tu(t,e,n,r){if(Sl=null,t=cd(r),t=Pr(t),t!==null)if(e=Xr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Um(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Sl=t,null}function ng(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mv()){case ud:return 1;case Gm:return 4;case xl:case Ov:return 16;case Qm:return 536870912;default:return 16}default:return 16}}var Kn=null,pd=null,ll=null;function rg(){if(ll)return ll;var t,e=pd,n=e.length,r,i="value"in Kn?Kn.value:Kn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ll=i.slice(t,1<r?1-r:void 0)}function al(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yo(){return!0}function oh(){return!1}function Ot(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Yo:oh,this.isPropagationStopped=oh,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yo)},persist:function(){},isPersistent:Yo}),e}var qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},md=Ot(qi),go=Pe({},qi,{view:0,detail:0}),qv=Ot(go),Za,ec,hs,oa=Pe({},go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hs&&(hs&&t.type==="mousemove"?(Za=t.screenX-hs.screenX,ec=t.screenY-hs.screenY):ec=Za=0,hs=t),Za)},movementY:function(t){return"movementY"in t?t.movementY:ec}}),lh=Ot(oa),Xv=Pe({},oa,{dataTransfer:0}),Jv=Ot(Xv),Zv=Pe({},go,{relatedTarget:0}),tc=Ot(Zv),ex=Pe({},qi,{animationName:0,elapsedTime:0,pseudoElement:0}),tx=Ot(ex),nx=Pe({},qi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rx=Ot(nx),ix=Pe({},qi,{data:0}),ah=Ot(ix),sx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ox={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ax(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=lx[t])?!!e[t]:!1}function gd(){return ax}var cx=Pe({},go,{key:function(t){if(t.key){var e=sx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=al(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ox[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gd,charCode:function(t){return t.type==="keypress"?al(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?al(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ux=Ot(cx),dx=Pe({},oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ch=Ot(dx),fx=Pe({},go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gd}),hx=Ot(fx),px=Pe({},qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),mx=Ot(px),gx=Pe({},oa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yx=Ot(gx),vx=[9,13,27,32],yd=Nn&&"CompositionEvent"in window,Ts=null;Nn&&"documentMode"in document&&(Ts=document.documentMode);var xx=Nn&&"TextEvent"in window&&!Ts,ig=Nn&&(!yd||Ts&&8<Ts&&11>=Ts),uh=String.fromCharCode(32),dh=!1;function sg(t,e){switch(t){case"keyup":return vx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function og(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hi=!1;function _x(t,e){switch(t){case"compositionend":return og(e);case"keypress":return e.which!==32?null:(dh=!0,uh);case"textInput":return t=e.data,t===uh&&dh?null:t;default:return null}}function bx(t,e){if(hi)return t==="compositionend"||!yd&&sg(t,e)?(t=rg(),ll=pd=Kn=null,hi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ig&&e.locale!=="ko"?null:e.data;default:return null}}var Sx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Sx[t.type]:e==="textarea"}function lg(t,e,n,r){Bm(r),e=wl(e,"onChange"),0<e.length&&(n=new md("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Rs=null,Hs=null;function wx(t){vg(t,0)}function la(t){var e=gi(t);if(Am(e))return t}function Cx(t,e){if(t==="change")return e}var ag=!1;if(Nn){var nc;if(Nn){var rc="oninput"in document;if(!rc){var hh=document.createElement("div");hh.setAttribute("oninput","return;"),rc=typeof hh.oninput=="function"}nc=rc}else nc=!1;ag=nc&&(!document.documentMode||9<document.documentMode)}function ph(){Rs&&(Rs.detachEvent("onpropertychange",cg),Hs=Rs=null)}function cg(t){if(t.propertyName==="value"&&la(Hs)){var e=[];lg(e,Hs,t,cd(t)),Wm(wx,e)}}function Ex(t,e,n){t==="focusin"?(ph(),Rs=e,Hs=n,Rs.attachEvent("onpropertychange",cg)):t==="focusout"&&ph()}function kx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return la(Hs)}function Tx(t,e){if(t==="click")return la(e)}function Rx(t,e){if(t==="input"||t==="change")return la(e)}function jx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ln=typeof Object.is=="function"?Object.is:jx;function Vs(t,e){if(ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Oc.call(e,i)||!ln(t[i],e[i]))return!1}return!0}function mh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gh(t,e){var n=mh(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mh(n)}}function ug(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ug(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function dg(){for(var t=window,e=gl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gl(t.document)}return e}function vd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ix(t){var e=dg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ug(n.ownerDocument.documentElement,n)){if(r!==null&&vd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=gh(n,s);var o=gh(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ax=Nn&&"documentMode"in document&&11>=document.documentMode,pi=null,nu=null,js=null,ru=!1;function yh(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ru||pi==null||pi!==gl(r)||(r=pi,"selectionStart"in r&&vd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),js&&Vs(js,r)||(js=r,r=wl(nu,"onSelect"),0<r.length&&(e=new md("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=pi)))}function Go(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var mi={animationend:Go("Animation","AnimationEnd"),animationiteration:Go("Animation","AnimationIteration"),animationstart:Go("Animation","AnimationStart"),transitionend:Go("Transition","TransitionEnd")},ic={},fg={};Nn&&(fg=document.createElement("div").style,"AnimationEvent"in window||(delete mi.animationend.animation,delete mi.animationiteration.animation,delete mi.animationstart.animation),"TransitionEvent"in window||delete mi.transitionend.transition);function aa(t){if(ic[t])return ic[t];if(!mi[t])return t;var e=mi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in fg)return ic[t]=e[n];return t}var hg=aa("animationend"),pg=aa("animationiteration"),mg=aa("animationstart"),gg=aa("transitionend"),yg=new Map,vh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xr(t,e){yg.set(t,e),qr(e,[t])}for(var sc=0;sc<vh.length;sc++){var oc=vh[sc],Nx=oc.toLowerCase(),Dx=oc[0].toUpperCase()+oc.slice(1);xr(Nx,"on"+Dx)}xr(hg,"onAnimationEnd");xr(pg,"onAnimationIteration");xr(mg,"onAnimationStart");xr("dblclick","onDoubleClick");xr("focusin","onFocus");xr("focusout","onBlur");xr(gg,"onTransitionEnd");Pi("onMouseEnter",["mouseout","mouseover"]);Pi("onMouseLeave",["mouseout","mouseover"]);Pi("onPointerEnter",["pointerout","pointerover"]);Pi("onPointerLeave",["pointerout","pointerover"]);qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Px=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cs));function xh(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Nv(r,e,void 0,t),t.currentTarget=null}function vg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;xh(i,a,u),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;xh(i,a,u),s=c}}}if(vl)throw t=Jc,vl=!1,Jc=null,t}function Ee(t,e){var n=e[au];n===void 0&&(n=e[au]=new Set);var r=t+"__bubble";n.has(r)||(xg(e,t,2,!1),n.add(r))}function lc(t,e,n){var r=0;e&&(r|=4),xg(n,t,r,e)}var Qo="_reactListening"+Math.random().toString(36).slice(2);function Ys(t){if(!t[Qo]){t[Qo]=!0,km.forEach(function(n){n!=="selectionchange"&&(Px.has(n)||lc(n,!1,t),lc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qo]||(e[Qo]=!0,lc("selectionchange",!1,e))}}function xg(t,e,n,r){switch(ng(e)){case 1:var i=Qv;break;case 4:i=Kv;break;default:i=hd}n=i.bind(null,e,n,t),i=void 0,!Xc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ac(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Pr(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Wm(function(){var u=s,f=cd(n),d=[];e:{var h=yg.get(t);if(h!==void 0){var x=md,v=t;switch(t){case"keypress":if(al(n)===0)break e;case"keydown":case"keyup":x=ux;break;case"focusin":v="focus",x=tc;break;case"focusout":v="blur",x=tc;break;case"beforeblur":case"afterblur":x=tc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=lh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Jv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=hx;break;case hg:case pg:case mg:x=tx;break;case gg:x=mx;break;case"scroll":x=qv;break;case"wheel":x=yx;break;case"copy":case"cut":case"paste":x=rx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=ch}var S=(e&4)!==0,E=!S&&t==="scroll",g=S?h!==null?h+"Capture":null:h;S=[];for(var p=u,y;p!==null;){y=p;var b=y.stateNode;if(y.tag===5&&b!==null&&(y=b,g!==null&&(b=Ls(p,g),b!=null&&S.push(Gs(p,b,y)))),E)break;p=p.return}0<S.length&&(h=new x(h,v,null,n,f),d.push({event:h,listeners:S}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",h&&n!==Kc&&(v=n.relatedTarget||n.fromElement)&&(Pr(v)||v[Dn]))break e;if((x||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,x?(v=n.relatedTarget||n.toElement,x=u,v=v?Pr(v):null,v!==null&&(E=Xr(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(x=null,v=u),x!==v)){if(S=lh,b="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(S=ch,b="onPointerLeave",g="onPointerEnter",p="pointer"),E=x==null?h:gi(x),y=v==null?h:gi(v),h=new S(b,p+"leave",x,n,f),h.target=E,h.relatedTarget=y,b=null,Pr(f)===u&&(S=new S(g,p+"enter",v,n,f),S.target=y,S.relatedTarget=E,b=S),E=b,x&&v)t:{for(S=x,g=v,p=0,y=S;y;y=ai(y))p++;for(y=0,b=g;b;b=ai(b))y++;for(;0<p-y;)S=ai(S),p--;for(;0<y-p;)g=ai(g),y--;for(;p--;){if(S===g||g!==null&&S===g.alternate)break t;S=ai(S),g=ai(g)}S=null}else S=null;x!==null&&_h(d,h,x,S,!1),v!==null&&E!==null&&_h(d,E,v,S,!0)}}e:{if(h=u?gi(u):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var k=Cx;else if(fh(h))if(ag)k=Rx;else{k=kx;var w=Ex}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=Tx);if(k&&(k=k(t,u))){lg(d,k,n,f);break e}w&&w(t,h,u),t==="focusout"&&(w=h._wrapperState)&&w.controlled&&h.type==="number"&&Hc(h,"number",h.value)}switch(w=u?gi(u):window,t){case"focusin":(fh(w)||w.contentEditable==="true")&&(pi=w,nu=u,js=null);break;case"focusout":js=nu=pi=null;break;case"mousedown":ru=!0;break;case"contextmenu":case"mouseup":case"dragend":ru=!1,yh(d,n,f);break;case"selectionchange":if(Ax)break;case"keydown":case"keyup":yh(d,n,f)}var C;if(yd)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else hi?sg(t,n)&&(j="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(ig&&n.locale!=="ko"&&(hi||j!=="onCompositionStart"?j==="onCompositionEnd"&&hi&&(C=rg()):(Kn=f,pd="value"in Kn?Kn.value:Kn.textContent,hi=!0)),w=wl(u,j),0<w.length&&(j=new ah(j,t,null,n,f),d.push({event:j,listeners:w}),C?j.data=C:(C=og(n),C!==null&&(j.data=C)))),(C=xx?_x(t,n):bx(t,n))&&(u=wl(u,"onBeforeInput"),0<u.length&&(f=new ah("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=C))}vg(d,e)})}function Gs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function wl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ls(t,n),s!=null&&r.unshift(Gs(t,s,i)),s=Ls(t,e),s!=null&&r.push(Gs(t,s,i))),t=t.return}return r}function ai(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _h(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,i?(c=Ls(n,s),c!=null&&o.unshift(Gs(n,c,a))):i||(c=Ls(n,s),c!=null&&o.push(Gs(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Fx=/\r\n?/g,Mx=/\u0000|\uFFFD/g;function bh(t){return(typeof t=="string"?t:""+t).replace(Fx,`
`).replace(Mx,"")}function Ko(t,e,n){if(e=bh(e),bh(t)!==e&&n)throw Error(z(425))}function Cl(){}var iu=null,su=null;function ou(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lu=typeof setTimeout=="function"?setTimeout:void 0,Ox=typeof clearTimeout=="function"?clearTimeout:void 0,Sh=typeof Promise=="function"?Promise:void 0,Bx=typeof queueMicrotask=="function"?queueMicrotask:typeof Sh<"u"?function(t){return Sh.resolve(null).then(t).catch(zx)}:lu;function zx(t){setTimeout(function(){throw t})}function cc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Us(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Us(e)}function ir(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function wh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xi=Math.random().toString(36).slice(2),fn="__reactFiber$"+Xi,Qs="__reactProps$"+Xi,Dn="__reactContainer$"+Xi,au="__reactEvents$"+Xi,Lx="__reactListeners$"+Xi,$x="__reactHandles$"+Xi;function Pr(t){var e=t[fn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Dn]||n[fn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=wh(t);t!==null;){if(n=t[fn])return n;t=wh(t)}return e}t=n,n=t.parentNode}return null}function yo(t){return t=t[fn]||t[Dn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function gi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function ca(t){return t[Qs]||null}var cu=[],yi=-1;function _r(t){return{current:t}}function ke(t){0>yi||(t.current=cu[yi],cu[yi]=null,yi--)}function Se(t,e){yi++,cu[yi]=t.current,t.current=e}var pr={},gt=_r(pr),Rt=_r(!1),Wr=pr;function Fi(t,e){var n=t.type.contextTypes;if(!n)return pr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function jt(t){return t=t.childContextTypes,t!=null}function El(){ke(Rt),ke(gt)}function Ch(t,e,n){if(gt.current!==pr)throw Error(z(168));Se(gt,e),Se(Rt,n)}function _g(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,Ev(t)||"Unknown",i));return Pe({},n,r)}function kl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pr,Wr=gt.current,Se(gt,t),Se(Rt,Rt.current),!0}function Eh(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=_g(t,e,Wr),r.__reactInternalMemoizedMergedChildContext=t,ke(Rt),ke(gt),Se(gt,t)):ke(Rt),Se(Rt,n)}var kn=null,ua=!1,uc=!1;function bg(t){kn===null?kn=[t]:kn.push(t)}function Wx(t){ua=!0,bg(t)}function br(){if(!uc&&kn!==null){uc=!0;var t=0,e=me;try{var n=kn;for(me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}kn=null,ua=!1}catch(i){throw kn!==null&&(kn=kn.slice(t+1)),Ym(ud,br),i}finally{me=e,uc=!1}}return null}var vi=[],xi=0,Tl=null,Rl=0,Lt=[],$t=0,Ur=null,Tn=1,Rn="";function Ir(t,e){vi[xi++]=Rl,vi[xi++]=Tl,Tl=t,Rl=e}function Sg(t,e,n){Lt[$t++]=Tn,Lt[$t++]=Rn,Lt[$t++]=Ur,Ur=t;var r=Tn;t=Rn;var i=32-rn(r)-1;r&=~(1<<i),n+=1;var s=32-rn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Tn=1<<32-rn(e)+i|n<<i|r,Rn=s+t}else Tn=1<<s|n<<i|r,Rn=t}function xd(t){t.return!==null&&(Ir(t,1),Sg(t,1,0))}function _d(t){for(;t===Tl;)Tl=vi[--xi],vi[xi]=null,Rl=vi[--xi],vi[xi]=null;for(;t===Ur;)Ur=Lt[--$t],Lt[$t]=null,Rn=Lt[--$t],Lt[$t]=null,Tn=Lt[--$t],Lt[$t]=null}var Pt=null,Dt=null,je=!1,en=null;function wg(t,e){var n=Wt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function kh(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pt=t,Dt=ir(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pt=t,Dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ur!==null?{id:Tn,overflow:Rn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pt=t,Dt=null,!0):!1;default:return!1}}function uu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function du(t){if(je){var e=Dt;if(e){var n=e;if(!kh(t,e)){if(uu(t))throw Error(z(418));e=ir(n.nextSibling);var r=Pt;e&&kh(t,e)?wg(r,n):(t.flags=t.flags&-4097|2,je=!1,Pt=t)}}else{if(uu(t))throw Error(z(418));t.flags=t.flags&-4097|2,je=!1,Pt=t}}}function Th(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pt=t}function qo(t){if(t!==Pt)return!1;if(!je)return Th(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ou(t.type,t.memoizedProps)),e&&(e=Dt)){if(uu(t))throw Cg(),Error(z(418));for(;e;)wg(t,e),e=ir(e.nextSibling)}if(Th(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Dt=ir(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Dt=null}}else Dt=Pt?ir(t.stateNode.nextSibling):null;return!0}function Cg(){for(var t=Dt;t;)t=ir(t.nextSibling)}function Mi(){Dt=Pt=null,je=!1}function bd(t){en===null?en=[t]:en.push(t)}var Ux=Bn.ReactCurrentBatchConfig;function ps(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Xo(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Rh(t){var e=t._init;return e(t._payload)}function Eg(t){function e(g,p){if(t){var y=g.deletions;y===null?(g.deletions=[p],g.flags|=16):y.push(p)}}function n(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function r(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function i(g,p){return g=ar(g,p),g.index=0,g.sibling=null,g}function s(g,p,y){return g.index=y,t?(y=g.alternate,y!==null?(y=y.index,y<p?(g.flags|=2,p):y):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,p,y,b){return p===null||p.tag!==6?(p=yc(y,g.mode,b),p.return=g,p):(p=i(p,y),p.return=g,p)}function c(g,p,y,b){var k=y.type;return k===fi?f(g,p,y.props.children,b,y.key):p!==null&&(p.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Vn&&Rh(k)===p.type)?(b=i(p,y.props),b.ref=ps(g,p,y),b.return=g,b):(b=ml(y.type,y.key,y.props,null,g.mode,b),b.ref=ps(g,p,y),b.return=g,b)}function u(g,p,y,b){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=vc(y,g.mode,b),p.return=g,p):(p=i(p,y.children||[]),p.return=g,p)}function f(g,p,y,b,k){return p===null||p.tag!==7?(p=zr(y,g.mode,b,k),p.return=g,p):(p=i(p,y),p.return=g,p)}function d(g,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=yc(""+p,g.mode,y),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Lo:return y=ml(p.type,p.key,p.props,null,g.mode,y),y.ref=ps(g,null,p),y.return=g,y;case di:return p=vc(p,g.mode,y),p.return=g,p;case Vn:var b=p._init;return d(g,b(p._payload),y)}if(Ss(p)||cs(p))return p=zr(p,g.mode,y,null),p.return=g,p;Xo(g,p)}return null}function h(g,p,y,b){var k=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return k!==null?null:a(g,p,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Lo:return y.key===k?c(g,p,y,b):null;case di:return y.key===k?u(g,p,y,b):null;case Vn:return k=y._init,h(g,p,k(y._payload),b)}if(Ss(y)||cs(y))return k!==null?null:f(g,p,y,b,null);Xo(g,y)}return null}function x(g,p,y,b,k){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(y)||null,a(p,g,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Lo:return g=g.get(b.key===null?y:b.key)||null,c(p,g,b,k);case di:return g=g.get(b.key===null?y:b.key)||null,u(p,g,b,k);case Vn:var w=b._init;return x(g,p,y,w(b._payload),k)}if(Ss(b)||cs(b))return g=g.get(y)||null,f(p,g,b,k,null);Xo(p,b)}return null}function v(g,p,y,b){for(var k=null,w=null,C=p,j=p=0,N=null;C!==null&&j<y.length;j++){C.index>j?(N=C,C=null):N=C.sibling;var I=h(g,C,y[j],b);if(I===null){C===null&&(C=N);break}t&&C&&I.alternate===null&&e(g,C),p=s(I,p,j),w===null?k=I:w.sibling=I,w=I,C=N}if(j===y.length)return n(g,C),je&&Ir(g,j),k;if(C===null){for(;j<y.length;j++)C=d(g,y[j],b),C!==null&&(p=s(C,p,j),w===null?k=C:w.sibling=C,w=C);return je&&Ir(g,j),k}for(C=r(g,C);j<y.length;j++)N=x(C,g,j,y[j],b),N!==null&&(t&&N.alternate!==null&&C.delete(N.key===null?j:N.key),p=s(N,p,j),w===null?k=N:w.sibling=N,w=N);return t&&C.forEach(function(M){return e(g,M)}),je&&Ir(g,j),k}function S(g,p,y,b){var k=cs(y);if(typeof k!="function")throw Error(z(150));if(y=k.call(y),y==null)throw Error(z(151));for(var w=k=null,C=p,j=p=0,N=null,I=y.next();C!==null&&!I.done;j++,I=y.next()){C.index>j?(N=C,C=null):N=C.sibling;var M=h(g,C,I.value,b);if(M===null){C===null&&(C=N);break}t&&C&&M.alternate===null&&e(g,C),p=s(M,p,j),w===null?k=M:w.sibling=M,w=M,C=N}if(I.done)return n(g,C),je&&Ir(g,j),k;if(C===null){for(;!I.done;j++,I=y.next())I=d(g,I.value,b),I!==null&&(p=s(I,p,j),w===null?k=I:w.sibling=I,w=I);return je&&Ir(g,j),k}for(C=r(g,C);!I.done;j++,I=y.next())I=x(C,g,j,I.value,b),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?j:I.key),p=s(I,p,j),w===null?k=I:w.sibling=I,w=I);return t&&C.forEach(function(A){return e(g,A)}),je&&Ir(g,j),k}function E(g,p,y,b){if(typeof y=="object"&&y!==null&&y.type===fi&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Lo:e:{for(var k=y.key,w=p;w!==null;){if(w.key===k){if(k=y.type,k===fi){if(w.tag===7){n(g,w.sibling),p=i(w,y.props.children),p.return=g,g=p;break e}}else if(w.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Vn&&Rh(k)===w.type){n(g,w.sibling),p=i(w,y.props),p.ref=ps(g,w,y),p.return=g,g=p;break e}n(g,w);break}else e(g,w);w=w.sibling}y.type===fi?(p=zr(y.props.children,g.mode,b,y.key),p.return=g,g=p):(b=ml(y.type,y.key,y.props,null,g.mode,b),b.ref=ps(g,p,y),b.return=g,g=b)}return o(g);case di:e:{for(w=y.key;p!==null;){if(p.key===w)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){n(g,p.sibling),p=i(p,y.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else e(g,p);p=p.sibling}p=vc(y,g.mode,b),p.return=g,g=p}return o(g);case Vn:return w=y._init,E(g,p,w(y._payload),b)}if(Ss(y))return v(g,p,y,b);if(cs(y))return S(g,p,y,b);Xo(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(n(g,p.sibling),p=i(p,y),p.return=g,g=p):(n(g,p),p=yc(y,g.mode,b),p.return=g,g=p),o(g)):n(g,p)}return E}var Oi=Eg(!0),kg=Eg(!1),jl=_r(null),Il=null,_i=null,Sd=null;function wd(){Sd=_i=Il=null}function Cd(t){var e=jl.current;ke(jl),t._currentValue=e}function fu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ri(t,e){Il=t,Sd=_i=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kt=!0),t.firstContext=null)}function Yt(t){var e=t._currentValue;if(Sd!==t)if(t={context:t,memoizedValue:e,next:null},_i===null){if(Il===null)throw Error(z(308));_i=t,Il.dependencies={lanes:0,firstContext:t}}else _i=_i.next=t;return e}var Fr=null;function Ed(t){Fr===null?Fr=[t]:Fr.push(t)}function Tg(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ed(e)):(n.next=i.next,i.next=n),e.interleaved=n,Pn(t,r)}function Pn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yn=!1;function kd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function In(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function sr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Pn(t,n)}return i=r.interleaved,i===null?(e.next=e,Ed(r)):(e.next=i.next,i.next=e),r.interleaved=e,Pn(t,n)}function cl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dd(t,n)}}function jh(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Al(t,e,n,r){var i=t.updateQueue;Yn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=u:a.next=u,f.lastBaseUpdate=c))}if(s!==null){var d=i.baseState;o=0,f=u=c=null,a=s;do{var h=a.lane,x=a.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:x,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,S=a;switch(h=e,x=n,S.tag){case 1:if(v=S.payload,typeof v=="function"){d=v.call(x,d,h);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,h=typeof v=="function"?v.call(x,d,h):v,h==null)break e;d=Pe({},d,h);break e;case 2:Yn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else x={eventTime:x,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(u=f=x,c=d):f=f.next=x,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(f===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Vr|=o,t.lanes=o,t.memoizedState=d}}function Ih(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var vo={},pn=_r(vo),Ks=_r(vo),qs=_r(vo);function Mr(t){if(t===vo)throw Error(z(174));return t}function Td(t,e){switch(Se(qs,e),Se(Ks,t),Se(pn,vo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Yc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Yc(e,t)}ke(pn),Se(pn,e)}function Bi(){ke(pn),ke(Ks),ke(qs)}function jg(t){Mr(qs.current);var e=Mr(pn.current),n=Yc(e,t.type);e!==n&&(Se(Ks,t),Se(pn,n))}function Rd(t){Ks.current===t&&(ke(pn),ke(Ks))}var Ne=_r(0);function Nl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dc=[];function jd(){for(var t=0;t<dc.length;t++)dc[t]._workInProgressVersionPrimary=null;dc.length=0}var ul=Bn.ReactCurrentDispatcher,fc=Bn.ReactCurrentBatchConfig,Hr=0,De=null,Ge=null,nt=null,Dl=!1,Is=!1,Xs=0,Hx=0;function ht(){throw Error(z(321))}function Id(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ln(t[n],e[n]))return!1;return!0}function Ad(t,e,n,r,i,s){if(Hr=s,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ul.current=t===null||t.memoizedState===null?Qx:Kx,t=n(r,i),Is){s=0;do{if(Is=!1,Xs=0,25<=s)throw Error(z(301));s+=1,nt=Ge=null,e.updateQueue=null,ul.current=qx,t=n(r,i)}while(Is)}if(ul.current=Pl,e=Ge!==null&&Ge.next!==null,Hr=0,nt=Ge=De=null,Dl=!1,e)throw Error(z(300));return t}function Nd(){var t=Xs!==0;return Xs=0,t}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?De.memoizedState=nt=t:nt=nt.next=t,nt}function Gt(){if(Ge===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=Ge.next;var e=nt===null?De.memoizedState:nt.next;if(e!==null)nt=e,Ge=t;else{if(t===null)throw Error(z(310));Ge=t,t={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},nt===null?De.memoizedState=nt=t:nt=nt.next=t}return nt}function Js(t,e){return typeof e=="function"?e(t):e}function hc(t){var e=Gt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=Ge,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,u=s;do{var f=u.lane;if((Hr&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,De.lanes|=f,Vr|=f}u=u.next}while(u!==null&&u!==s);c===null?o=r:c.next=a,ln(r,e.memoizedState)||(kt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,De.lanes|=s,Vr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function pc(t){var e=Gt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ln(s,e.memoizedState)||(kt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Ig(){}function Ag(t,e){var n=De,r=Gt(),i=e(),s=!ln(r.memoizedState,i);if(s&&(r.memoizedState=i,kt=!0),r=r.queue,Dd(Pg.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||nt!==null&&nt.memoizedState.tag&1){if(n.flags|=2048,Zs(9,Dg.bind(null,n,r,i,e),void 0,null),it===null)throw Error(z(349));Hr&30||Ng(n,e,i)}return i}function Ng(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Dg(t,e,n,r){e.value=n,e.getSnapshot=r,Fg(e)&&Mg(t)}function Pg(t,e,n){return n(function(){Fg(e)&&Mg(t)})}function Fg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ln(t,n)}catch{return!0}}function Mg(t){var e=Pn(t,1);e!==null&&sn(e,t,1,-1)}function Ah(t){var e=dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:t},e.queue=t,t=t.dispatch=Gx.bind(null,De,t),[e.memoizedState,t]}function Zs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Og(){return Gt().memoizedState}function dl(t,e,n,r){var i=dn();De.flags|=t,i.memoizedState=Zs(1|e,n,void 0,r===void 0?null:r)}function da(t,e,n,r){var i=Gt();r=r===void 0?null:r;var s=void 0;if(Ge!==null){var o=Ge.memoizedState;if(s=o.destroy,r!==null&&Id(r,o.deps)){i.memoizedState=Zs(e,n,s,r);return}}De.flags|=t,i.memoizedState=Zs(1|e,n,s,r)}function Nh(t,e){return dl(8390656,8,t,e)}function Dd(t,e){return da(2048,8,t,e)}function Bg(t,e){return da(4,2,t,e)}function zg(t,e){return da(4,4,t,e)}function Lg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $g(t,e,n){return n=n!=null?n.concat([t]):null,da(4,4,Lg.bind(null,e,t),n)}function Pd(){}function Wg(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Id(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ug(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Id(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Hg(t,e,n){return Hr&21?(ln(n,e)||(n=Km(),De.lanes|=n,Vr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kt=!0),t.memoizedState=n)}function Vx(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var r=fc.transition;fc.transition={};try{t(!1),e()}finally{me=n,fc.transition=r}}function Vg(){return Gt().memoizedState}function Yx(t,e,n){var r=lr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yg(t))Gg(e,n);else if(n=Tg(t,e,n,r),n!==null){var i=xt();sn(n,t,r,i),Qg(n,e,r)}}function Gx(t,e,n){var r=lr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yg(t))Gg(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ln(a,o)){var c=e.interleaved;c===null?(i.next=i,Ed(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=Tg(t,e,i,r),n!==null&&(i=xt(),sn(n,t,r,i),Qg(n,e,r))}}function Yg(t){var e=t.alternate;return t===De||e!==null&&e===De}function Gg(t,e){Is=Dl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Qg(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dd(t,n)}}var Pl={readContext:Yt,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},Qx={readContext:Yt,useCallback:function(t,e){return dn().memoizedState=[t,e===void 0?null:e],t},useContext:Yt,useEffect:Nh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,dl(4194308,4,Lg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return dl(4194308,4,t,e)},useInsertionEffect:function(t,e){return dl(4,2,t,e)},useMemo:function(t,e){var n=dn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=dn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Yx.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=dn();return t={current:t},e.memoizedState=t},useState:Ah,useDebugValue:Pd,useDeferredValue:function(t){return dn().memoizedState=t},useTransition:function(){var t=Ah(!1),e=t[0];return t=Vx.bind(null,t[1]),dn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,i=dn();if(je){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),it===null)throw Error(z(349));Hr&30||Ng(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Nh(Pg.bind(null,r,s,t),[t]),r.flags|=2048,Zs(9,Dg.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=dn(),e=it.identifierPrefix;if(je){var n=Rn,r=Tn;n=(r&~(1<<32-rn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Xs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Hx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Kx={readContext:Yt,useCallback:Wg,useContext:Yt,useEffect:Dd,useImperativeHandle:$g,useInsertionEffect:Bg,useLayoutEffect:zg,useMemo:Ug,useReducer:hc,useRef:Og,useState:function(){return hc(Js)},useDebugValue:Pd,useDeferredValue:function(t){var e=Gt();return Hg(e,Ge.memoizedState,t)},useTransition:function(){var t=hc(Js)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:Ig,useSyncExternalStore:Ag,useId:Vg,unstable_isNewReconciler:!1},qx={readContext:Yt,useCallback:Wg,useContext:Yt,useEffect:Dd,useImperativeHandle:$g,useInsertionEffect:Bg,useLayoutEffect:zg,useMemo:Ug,useReducer:pc,useRef:Og,useState:function(){return pc(Js)},useDebugValue:Pd,useDeferredValue:function(t){var e=Gt();return Ge===null?e.memoizedState=t:Hg(e,Ge.memoizedState,t)},useTransition:function(){var t=pc(Js)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:Ig,useSyncExternalStore:Ag,useId:Vg,unstable_isNewReconciler:!1};function Jt(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function hu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var fa={isMounted:function(t){return(t=t._reactInternals)?Xr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xt(),i=lr(t),s=In(r,i);s.payload=e,n!=null&&(s.callback=n),e=sr(t,s,i),e!==null&&(sn(e,t,i,r),cl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xt(),i=lr(t),s=In(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=sr(t,s,i),e!==null&&(sn(e,t,i,r),cl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xt(),r=lr(t),i=In(n,r);i.tag=2,e!=null&&(i.callback=e),e=sr(t,i,r),e!==null&&(sn(e,t,r,n),cl(e,t,r))}};function Dh(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Vs(n,r)||!Vs(i,s):!0}function Kg(t,e,n){var r=!1,i=pr,s=e.contextType;return typeof s=="object"&&s!==null?s=Yt(s):(i=jt(e)?Wr:gt.current,r=e.contextTypes,s=(r=r!=null)?Fi(t,i):pr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fa,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ph(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&fa.enqueueReplaceState(e,e.state,null)}function pu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},kd(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Yt(s):(s=jt(e)?Wr:gt.current,i.context=Fi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(hu(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&fa.enqueueReplaceState(i,i.state,null),Al(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function zi(t,e){try{var n="",r=e;do n+=Cv(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function mc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function mu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Xx=typeof WeakMap=="function"?WeakMap:Map;function qg(t,e,n){n=In(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ml||(Ml=!0,Eu=r),mu(t,e)},n}function Xg(t,e,n){n=In(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){mu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){mu(t,e),typeof r!="function"&&(or===null?or=new Set([this]):or.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Fh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Xx;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=d_.bind(null,t,e,n),e.then(t,t))}function Mh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Oh(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=In(-1,1),e.tag=2,sr(n,e,1))),n.lanes|=1),t)}var Jx=Bn.ReactCurrentOwner,kt=!1;function yt(t,e,n,r){e.child=t===null?kg(e,null,n,r):Oi(e,t.child,n,r)}function Bh(t,e,n,r,i){n=n.render;var s=e.ref;return Ri(e,i),r=Ad(t,e,n,r,s,i),n=Nd(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Fn(t,e,i)):(je&&n&&xd(e),e.flags|=1,yt(t,e,r,i),e.child)}function zh(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Wd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Jg(t,e,s,r,i)):(t=ml(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Vs,n(o,r)&&t.ref===e.ref)return Fn(t,e,i)}return e.flags|=1,t=ar(s,r),t.ref=e.ref,t.return=e,e.child=t}function Jg(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Vs(s,r)&&t.ref===e.ref)if(kt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(kt=!0);else return e.lanes=t.lanes,Fn(t,e,i)}return gu(t,e,n,r,i)}function Zg(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(Si,Nt),Nt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Se(Si,Nt),Nt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Se(Si,Nt),Nt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Se(Si,Nt),Nt|=r;return yt(t,e,i,n),e.child}function e1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gu(t,e,n,r,i){var s=jt(n)?Wr:gt.current;return s=Fi(e,s),Ri(e,i),n=Ad(t,e,n,r,s,i),r=Nd(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Fn(t,e,i)):(je&&r&&xd(e),e.flags|=1,yt(t,e,n,i),e.child)}function Lh(t,e,n,r,i){if(jt(n)){var s=!0;kl(e)}else s=!1;if(Ri(e,i),e.stateNode===null)fl(t,e),Kg(e,n,r),pu(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Yt(u):(u=jt(n)?Wr:gt.current,u=Fi(e,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&Ph(e,o,r,u),Yn=!1;var h=e.memoizedState;o.state=h,Al(e,r,o,i),c=e.memoizedState,a!==r||h!==c||Rt.current||Yn?(typeof f=="function"&&(hu(e,n,f,r),c=e.memoizedState),(a=Yn||Dh(e,n,a,r,h,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Rg(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Jt(e.type,a),o.props=u,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Yt(c):(c=jt(n)?Wr:gt.current,c=Fi(e,c));var x=n.getDerivedStateFromProps;(f=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&Ph(e,o,r,c),Yn=!1,h=e.memoizedState,o.state=h,Al(e,r,o,i);var v=e.memoizedState;a!==d||h!==v||Rt.current||Yn?(typeof x=="function"&&(hu(e,n,x,r),v=e.memoizedState),(u=Yn||Dh(e,n,u,r,h,v,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return yu(t,e,n,r,s,i)}function yu(t,e,n,r,i,s){e1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Eh(e,n,!1),Fn(t,e,s);r=e.stateNode,Jx.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Oi(e,t.child,null,s),e.child=Oi(e,null,a,s)):yt(t,e,a,s),e.memoizedState=r.state,i&&Eh(e,n,!0),e.child}function t1(t){var e=t.stateNode;e.pendingContext?Ch(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ch(t,e.context,!1),Td(t,e.containerInfo)}function $h(t,e,n,r,i){return Mi(),bd(i),e.flags|=256,yt(t,e,n,r),e.child}var vu={dehydrated:null,treeContext:null,retryLane:0};function xu(t){return{baseLanes:t,cachePool:null,transitions:null}}function n1(t,e,n){var r=e.pendingProps,i=Ne.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Se(Ne,i&1),t===null)return du(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ma(o,r,0,null),t=zr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=xu(n),e.memoizedState=vu,t):Fd(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Zx(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ar(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ar(a,s):(s=zr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?xu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=vu,r}return s=t.child,t=s.sibling,r=ar(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Fd(t,e){return e=ma({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Jo(t,e,n,r){return r!==null&&bd(r),Oi(e,t.child,null,n),t=Fd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Zx(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=mc(Error(z(422))),Jo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=ma({mode:"visible",children:r.children},i,0,null),s=zr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Oi(e,t.child,null,o),e.child.memoizedState=xu(o),e.memoizedState=vu,s);if(!(e.mode&1))return Jo(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(z(419)),r=mc(s,r,void 0),Jo(t,e,o,r)}if(a=(o&t.childLanes)!==0,kt||a){if(r=it,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Pn(t,i),sn(r,t,i,-1))}return $d(),r=mc(Error(z(421))),Jo(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=f_.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Dt=ir(i.nextSibling),Pt=e,je=!0,en=null,t!==null&&(Lt[$t++]=Tn,Lt[$t++]=Rn,Lt[$t++]=Ur,Tn=t.id,Rn=t.overflow,Ur=e),e=Fd(e,r.children),e.flags|=4096,e)}function Wh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),fu(t.return,e,n)}function gc(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function r1(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(yt(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wh(t,n,e);else if(t.tag===19)Wh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Se(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Nl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),gc(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Nl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}gc(e,!0,n,null,s);break;case"together":gc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=ar(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ar(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function e_(t,e,n){switch(e.tag){case 3:t1(e),Mi();break;case 5:jg(e);break;case 1:jt(e.type)&&kl(e);break;case 4:Td(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Se(jl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Se(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?n1(t,e,n):(Se(Ne,Ne.current&1),t=Fn(t,e,n),t!==null?t.sibling:null);Se(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return r1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Se(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,Zg(t,e,n)}return Fn(t,e,n)}var i1,_u,s1,o1;i1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_u=function(){};s1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Mr(pn.current);var s=null;switch(n){case"input":i=Wc(t,i),r=Wc(t,r),s=[];break;case"select":i=Pe({},i,{value:void 0}),r=Pe({},r,{value:void 0}),s=[];break;case"textarea":i=Vc(t,i),r=Vc(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Cl)}Gc(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Bs.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Bs.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ee("scroll",t),s||a===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};o1=function(t,e,n,r){n!==r&&(e.flags|=4)};function ms(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function t_(t,e,n){var r=e.pendingProps;switch(_d(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(e),null;case 1:return jt(e.type)&&El(),pt(e),null;case 3:return r=e.stateNode,Bi(),ke(Rt),ke(gt),jd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(qo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,en!==null&&(Ru(en),en=null))),_u(t,e),pt(e),null;case 5:Rd(e);var i=Mr(qs.current);if(n=e.type,t!==null&&e.stateNode!=null)s1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return pt(e),null}if(t=Mr(pn.current),qo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[fn]=e,r[Qs]=s,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(i=0;i<Cs.length;i++)Ee(Cs[i],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":Xf(r,s),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ee("invalid",r);break;case"textarea":Zf(r,s),Ee("invalid",r)}Gc(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ko(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ko(r.textContent,a,t),i=["children",""+a]):Bs.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ee("scroll",r)}switch(n){case"input":$o(r),Jf(r,s,!0);break;case"textarea":$o(r),eh(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Cl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Pm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[fn]=e,t[Qs]=r,i1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Qc(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),i=r;break;case"iframe":case"object":case"embed":Ee("load",t),i=r;break;case"video":case"audio":for(i=0;i<Cs.length;i++)Ee(Cs[i],t);i=r;break;case"source":Ee("error",t),i=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),i=r;break;case"details":Ee("toggle",t),i=r;break;case"input":Xf(t,r),i=Wc(t,r),Ee("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Pe({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":Zf(t,r),i=Vc(t,r),Ee("invalid",t);break;default:i=r}Gc(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?Om(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Fm(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&zs(t,c):typeof c=="number"&&zs(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Bs.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Ee("scroll",t):c!=null&&sd(t,s,c,o))}switch(n){case"input":$o(t),Jf(t,r,!1);break;case"textarea":$o(t),eh(t);break;case"option":r.value!=null&&t.setAttribute("value",""+hr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ci(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ci(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Cl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pt(e),null;case 6:if(t&&e.stateNode!=null)o1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Mr(qs.current),Mr(pn.current),qo(e)){if(r=e.stateNode,n=e.memoizedProps,r[fn]=e,(s=r.nodeValue!==n)&&(t=Pt,t!==null))switch(t.tag){case 3:Ko(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ko(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fn]=e,e.stateNode=r}return pt(e),null;case 13:if(ke(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&Dt!==null&&e.mode&1&&!(e.flags&128))Cg(),Mi(),e.flags|=98560,s=!1;else if(s=qo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[fn]=e}else Mi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pt(e),s=!1}else en!==null&&(Ru(en),en=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?qe===0&&(qe=3):$d())),e.updateQueue!==null&&(e.flags|=4),pt(e),null);case 4:return Bi(),_u(t,e),t===null&&Ys(e.stateNode.containerInfo),pt(e),null;case 10:return Cd(e.type._context),pt(e),null;case 17:return jt(e.type)&&El(),pt(e),null;case 19:if(ke(Ne),s=e.memoizedState,s===null)return pt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ms(s,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Nl(t),o!==null){for(e.flags|=128,ms(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Se(Ne,Ne.current&1|2),e.child}t=t.sibling}s.tail!==null&&$e()>Li&&(e.flags|=128,r=!0,ms(s,!1),e.lanes=4194304)}else{if(!r)if(t=Nl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ms(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!je)return pt(e),null}else 2*$e()-s.renderingStartTime>Li&&n!==1073741824&&(e.flags|=128,r=!0,ms(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=$e(),e.sibling=null,n=Ne.current,Se(Ne,r?n&1|2:n&1),e):(pt(e),null);case 22:case 23:return Ld(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Nt&1073741824&&(pt(e),e.subtreeFlags&6&&(e.flags|=8192)):pt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function n_(t,e){switch(_d(e),e.tag){case 1:return jt(e.type)&&El(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bi(),ke(Rt),ke(gt),jd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Rd(e),null;case 13:if(ke(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Mi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Ne),null;case 4:return Bi(),null;case 10:return Cd(e.type._context),null;case 22:case 23:return Ld(),null;case 24:return null;default:return null}}var Zo=!1,mt=!1,r_=typeof WeakSet=="function"?WeakSet:Set,U=null;function bi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oe(t,e,r)}else n.current=null}function bu(t,e,n){try{n()}catch(r){Oe(t,e,r)}}var Uh=!1;function i_(t,e){if(iu=bl,t=dg(),vd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,f=0,d=t,h=null;t:for(;;){for(var x;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(x=d.firstChild)!==null;)h=d,d=x;for(;;){if(d===t)break t;if(h===n&&++u===i&&(a=o),h===s&&++f===r&&(c=o),(x=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=x}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(su={focusedElem:t,selectionRange:n},bl=!1,U=e;U!==null;)if(e=U,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,U=t;else for(;U!==null;){e=U;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,E=v.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?S:Jt(e.type,S),E);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(b){Oe(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}return v=Uh,Uh=!1,v}function As(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&bu(e,n,s)}i=i.next}while(i!==r)}}function ha(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Su(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function l1(t){var e=t.alternate;e!==null&&(t.alternate=null,l1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fn],delete e[Qs],delete e[au],delete e[Lx],delete e[$x])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function a1(t){return t.tag===5||t.tag===3||t.tag===4}function Hh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||a1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cl));else if(r!==4&&(t=t.child,t!==null))for(wu(t,e,n),t=t.sibling;t!==null;)wu(t,e,n),t=t.sibling}function Cu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Cu(t,e,n),t=t.sibling;t!==null;)Cu(t,e,n),t=t.sibling}var lt=null,Zt=!1;function Wn(t,e,n){for(n=n.child;n!==null;)c1(t,e,n),n=n.sibling}function c1(t,e,n){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(sa,n)}catch{}switch(n.tag){case 5:mt||bi(n,e);case 6:var r=lt,i=Zt;lt=null,Wn(t,e,n),lt=r,Zt=i,lt!==null&&(Zt?(t=lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(Zt?(t=lt,n=n.stateNode,t.nodeType===8?cc(t.parentNode,n):t.nodeType===1&&cc(t,n),Us(t)):cc(lt,n.stateNode));break;case 4:r=lt,i=Zt,lt=n.stateNode.containerInfo,Zt=!0,Wn(t,e,n),lt=r,Zt=i;break;case 0:case 11:case 14:case 15:if(!mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&bu(n,e,o),i=i.next}while(i!==r)}Wn(t,e,n);break;case 1:if(!mt&&(bi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Oe(n,e,a)}Wn(t,e,n);break;case 21:Wn(t,e,n);break;case 22:n.mode&1?(mt=(r=mt)||n.memoizedState!==null,Wn(t,e,n),mt=r):Wn(t,e,n);break;default:Wn(t,e,n)}}function Vh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new r_),e.forEach(function(r){var i=h_.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Xt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:lt=a.stateNode,Zt=!1;break e;case 3:lt=a.stateNode.containerInfo,Zt=!0;break e;case 4:lt=a.stateNode.containerInfo,Zt=!0;break e}a=a.return}if(lt===null)throw Error(z(160));c1(s,o,i),lt=null,Zt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Oe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)u1(e,t),e=e.sibling}function u1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xt(e,t),un(t),r&4){try{As(3,t,t.return),ha(3,t)}catch(S){Oe(t,t.return,S)}try{As(5,t,t.return)}catch(S){Oe(t,t.return,S)}}break;case 1:Xt(e,t),un(t),r&512&&n!==null&&bi(n,n.return);break;case 5:if(Xt(e,t),un(t),r&512&&n!==null&&bi(n,n.return),t.flags&32){var i=t.stateNode;try{zs(i,"")}catch(S){Oe(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Nm(i,s),Qc(a,o);var u=Qc(a,s);for(o=0;o<c.length;o+=2){var f=c[o],d=c[o+1];f==="style"?Om(i,d):f==="dangerouslySetInnerHTML"?Fm(i,d):f==="children"?zs(i,d):sd(i,f,d,u)}switch(a){case"input":Uc(i,s);break;case"textarea":Dm(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var x=s.value;x!=null?Ci(i,!!s.multiple,x,!1):h!==!!s.multiple&&(s.defaultValue!=null?Ci(i,!!s.multiple,s.defaultValue,!0):Ci(i,!!s.multiple,s.multiple?[]:"",!1))}i[Qs]=s}catch(S){Oe(t,t.return,S)}}break;case 6:if(Xt(e,t),un(t),r&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){Oe(t,t.return,S)}}break;case 3:if(Xt(e,t),un(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Us(e.containerInfo)}catch(S){Oe(t,t.return,S)}break;case 4:Xt(e,t),un(t);break;case 13:Xt(e,t),un(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Bd=$e())),r&4&&Vh(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(mt=(u=mt)||f,Xt(e,t),mt=u):Xt(e,t),un(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(U=t,f=t.child;f!==null;){for(d=U=f;U!==null;){switch(h=U,x=h.child,h.tag){case 0:case 11:case 14:case 15:As(4,h,h.return);break;case 1:bi(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(S){Oe(r,n,S)}}break;case 5:bi(h,h.return);break;case 22:if(h.memoizedState!==null){Gh(d);continue}}x!==null?(x.return=h,U=x):Gh(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Mm("display",o))}catch(S){Oe(t,t.return,S)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(S){Oe(t,t.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Xt(e,t),un(t),r&4&&Vh(t);break;case 21:break;default:Xt(e,t),un(t)}}function un(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(a1(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(zs(i,""),r.flags&=-33);var s=Hh(t);Cu(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Hh(t);wu(t,a,o);break;default:throw Error(z(161))}}catch(c){Oe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function s_(t,e,n){U=t,d1(t)}function d1(t,e,n){for(var r=(t.mode&1)!==0;U!==null;){var i=U,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Zo;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||mt;a=Zo;var u=mt;if(Zo=o,(mt=c)&&!u)for(U=i;U!==null;)o=U,c=o.child,o.tag===22&&o.memoizedState!==null?Qh(i):c!==null?(c.return=o,U=c):Qh(i);for(;s!==null;)U=s,d1(s),s=s.sibling;U=i,Zo=a,mt=u}Yh(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,U=s):Yh(t)}}function Yh(t){for(;U!==null;){var e=U;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mt||ha(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!mt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Jt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Ih(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ih(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Us(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}mt||e.flags&512&&Su(e)}catch(h){Oe(e,e.return,h)}}if(e===t){U=null;break}if(n=e.sibling,n!==null){n.return=e.return,U=n;break}U=e.return}}function Gh(t){for(;U!==null;){var e=U;if(e===t){U=null;break}var n=e.sibling;if(n!==null){n.return=e.return,U=n;break}U=e.return}}function Qh(t){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ha(4,e)}catch(c){Oe(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Oe(e,i,c)}}var s=e.return;try{Su(e)}catch(c){Oe(e,s,c)}break;case 5:var o=e.return;try{Su(e)}catch(c){Oe(e,o,c)}}}catch(c){Oe(e,e.return,c)}if(e===t){U=null;break}var a=e.sibling;if(a!==null){a.return=e.return,U=a;break}U=e.return}}var o_=Math.ceil,Fl=Bn.ReactCurrentDispatcher,Md=Bn.ReactCurrentOwner,Ht=Bn.ReactCurrentBatchConfig,fe=0,it=null,Ue=null,ct=0,Nt=0,Si=_r(0),qe=0,eo=null,Vr=0,pa=0,Od=0,Ns=null,Et=null,Bd=0,Li=1/0,En=null,Ml=!1,Eu=null,or=null,el=!1,qn=null,Ol=0,Ds=0,ku=null,hl=-1,pl=0;function xt(){return fe&6?$e():hl!==-1?hl:hl=$e()}function lr(t){return t.mode&1?fe&2&&ct!==0?ct&-ct:Ux.transition!==null?(pl===0&&(pl=Km()),pl):(t=me,t!==0||(t=window.event,t=t===void 0?16:ng(t.type)),t):1}function sn(t,e,n,r){if(50<Ds)throw Ds=0,ku=null,Error(z(185));mo(t,n,r),(!(fe&2)||t!==it)&&(t===it&&(!(fe&2)&&(pa|=n),qe===4&&Qn(t,ct)),It(t,r),n===1&&fe===0&&!(e.mode&1)&&(Li=$e()+500,ua&&br()))}function It(t,e){var n=t.callbackNode;Uv(t,e);var r=_l(t,t===it?ct:0);if(r===0)n!==null&&rh(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&rh(n),e===1)t.tag===0?Wx(Kh.bind(null,t)):bg(Kh.bind(null,t)),Bx(function(){!(fe&6)&&br()}),n=null;else{switch(qm(r)){case 1:n=ud;break;case 4:n=Gm;break;case 16:n=xl;break;case 536870912:n=Qm;break;default:n=xl}n=x1(n,f1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function f1(t,e){if(hl=-1,pl=0,fe&6)throw Error(z(327));var n=t.callbackNode;if(ji()&&t.callbackNode!==n)return null;var r=_l(t,t===it?ct:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Bl(t,r);else{e=r;var i=fe;fe|=2;var s=p1();(it!==t||ct!==e)&&(En=null,Li=$e()+500,Br(t,e));do try{c_();break}catch(a){h1(t,a)}while(1);wd(),Fl.current=s,fe=i,Ue!==null?e=0:(it=null,ct=0,e=qe)}if(e!==0){if(e===2&&(i=Zc(t),i!==0&&(r=i,e=Tu(t,i))),e===1)throw n=eo,Br(t,0),Qn(t,r),It(t,$e()),n;if(e===6)Qn(t,r);else{if(i=t.current.alternate,!(r&30)&&!l_(i)&&(e=Bl(t,r),e===2&&(s=Zc(t),s!==0&&(r=s,e=Tu(t,s))),e===1))throw n=eo,Br(t,0),Qn(t,r),It(t,$e()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Ar(t,Et,En);break;case 3:if(Qn(t,r),(r&130023424)===r&&(e=Bd+500-$e(),10<e)){if(_l(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){xt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=lu(Ar.bind(null,t,Et,En),e);break}Ar(t,Et,En);break;case 4:if(Qn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-rn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*o_(r/1960))-r,10<r){t.timeoutHandle=lu(Ar.bind(null,t,Et,En),r);break}Ar(t,Et,En);break;case 5:Ar(t,Et,En);break;default:throw Error(z(329))}}}return It(t,$e()),t.callbackNode===n?f1.bind(null,t):null}function Tu(t,e){var n=Ns;return t.current.memoizedState.isDehydrated&&(Br(t,e).flags|=256),t=Bl(t,e),t!==2&&(e=Et,Et=n,e!==null&&Ru(e)),t}function Ru(t){Et===null?Et=t:Et.push.apply(Et,t)}function l_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ln(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qn(t,e){for(e&=~Od,e&=~pa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rn(e),r=1<<n;t[n]=-1,e&=~r}}function Kh(t){if(fe&6)throw Error(z(327));ji();var e=_l(t,0);if(!(e&1))return It(t,$e()),null;var n=Bl(t,e);if(t.tag!==0&&n===2){var r=Zc(t);r!==0&&(e=r,n=Tu(t,r))}if(n===1)throw n=eo,Br(t,0),Qn(t,e),It(t,$e()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ar(t,Et,En),It(t,$e()),null}function zd(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(Li=$e()+500,ua&&br())}}function Yr(t){qn!==null&&qn.tag===0&&!(fe&6)&&ji();var e=fe;fe|=1;var n=Ht.transition,r=me;try{if(Ht.transition=null,me=1,t)return t()}finally{me=r,Ht.transition=n,fe=e,!(fe&6)&&br()}}function Ld(){Nt=Si.current,ke(Si)}function Br(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ox(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(_d(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&El();break;case 3:Bi(),ke(Rt),ke(gt),jd();break;case 5:Rd(r);break;case 4:Bi();break;case 13:ke(Ne);break;case 19:ke(Ne);break;case 10:Cd(r.type._context);break;case 22:case 23:Ld()}n=n.return}if(it=t,Ue=t=ar(t.current,null),ct=Nt=e,qe=0,eo=null,Od=pa=Vr=0,Et=Ns=null,Fr!==null){for(e=0;e<Fr.length;e++)if(n=Fr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Fr=null}return t}function h1(t,e){do{var n=Ue;try{if(wd(),ul.current=Pl,Dl){for(var r=De.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Dl=!1}if(Hr=0,nt=Ge=De=null,Is=!1,Xs=0,Md.current=null,n===null||n.return===null){qe=1,eo=e,Ue=null;break}e:{var s=t,o=n.return,a=n,c=e;if(e=ct,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=a,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var x=Mh(o);if(x!==null){x.flags&=-257,Oh(x,o,a,s,e),x.mode&1&&Fh(s,u,e),e=x,c=u;var v=e.updateQueue;if(v===null){var S=new Set;S.add(c),e.updateQueue=S}else v.add(c);break e}else{if(!(e&1)){Fh(s,u,e),$d();break e}c=Error(z(426))}}else if(je&&a.mode&1){var E=Mh(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Oh(E,o,a,s,e),bd(zi(c,a));break e}}s=c=zi(c,a),qe!==4&&(qe=2),Ns===null?Ns=[s]:Ns.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=qg(s,c,e);jh(s,g);break e;case 1:a=c;var p=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(or===null||!or.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=Xg(s,a,e);jh(s,b);break e}}s=s.return}while(s!==null)}g1(n)}catch(k){e=k,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(1)}function p1(){var t=Fl.current;return Fl.current=Pl,t===null?Pl:t}function $d(){(qe===0||qe===3||qe===2)&&(qe=4),it===null||!(Vr&268435455)&&!(pa&268435455)||Qn(it,ct)}function Bl(t,e){var n=fe;fe|=2;var r=p1();(it!==t||ct!==e)&&(En=null,Br(t,e));do try{a_();break}catch(i){h1(t,i)}while(1);if(wd(),fe=n,Fl.current=r,Ue!==null)throw Error(z(261));return it=null,ct=0,qe}function a_(){for(;Ue!==null;)m1(Ue)}function c_(){for(;Ue!==null&&!Pv();)m1(Ue)}function m1(t){var e=v1(t.alternate,t,Nt);t.memoizedProps=t.pendingProps,e===null?g1(t):Ue=e,Md.current=null}function g1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=n_(n,e),n!==null){n.flags&=32767,Ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,Ue=null;return}}else if(n=t_(n,e,Nt),n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);qe===0&&(qe=5)}function Ar(t,e,n){var r=me,i=Ht.transition;try{Ht.transition=null,me=1,u_(t,e,n,r)}finally{Ht.transition=i,me=r}return null}function u_(t,e,n,r){do ji();while(qn!==null);if(fe&6)throw Error(z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Hv(t,s),t===it&&(Ue=it=null,ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||el||(el=!0,x1(xl,function(){return ji(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ht.transition,Ht.transition=null;var o=me;me=1;var a=fe;fe|=4,Md.current=null,i_(t,n),u1(n,t),Ix(su),bl=!!iu,su=iu=null,t.current=n,s_(n),Fv(),fe=a,me=o,Ht.transition=s}else t.current=n;if(el&&(el=!1,qn=t,Ol=i),s=t.pendingLanes,s===0&&(or=null),Bv(n.stateNode),It(t,$e()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ml)throw Ml=!1,t=Eu,Eu=null,t;return Ol&1&&t.tag!==0&&ji(),s=t.pendingLanes,s&1?t===ku?Ds++:(Ds=0,ku=t):Ds=0,br(),null}function ji(){if(qn!==null){var t=qm(Ol),e=Ht.transition,n=me;try{if(Ht.transition=null,me=16>t?16:t,qn===null)var r=!1;else{if(t=qn,qn=null,Ol=0,fe&6)throw Error(z(331));var i=fe;for(fe|=4,U=t.current;U!==null;){var s=U,o=s.child;if(U.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(U=u;U!==null;){var f=U;switch(f.tag){case 0:case 11:case 15:As(8,f,s)}var d=f.child;if(d!==null)d.return=f,U=d;else for(;U!==null;){f=U;var h=f.sibling,x=f.return;if(l1(f),f===u){U=null;break}if(h!==null){h.return=x,U=h;break}U=x}}}var v=s.alternate;if(v!==null){var S=v.child;if(S!==null){v.child=null;do{var E=S.sibling;S.sibling=null,S=E}while(S!==null)}}U=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,U=o;else e:for(;U!==null;){if(s=U,s.flags&2048)switch(s.tag){case 0:case 11:case 15:As(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,U=g;break e}U=s.return}}var p=t.current;for(U=p;U!==null;){o=U;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,U=y;else e:for(o=p;U!==null;){if(a=U,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ha(9,a)}}catch(k){Oe(a,a.return,k)}if(a===o){U=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,U=b;break e}U=a.return}}if(fe=i,br(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(sa,t)}catch{}r=!0}return r}finally{me=n,Ht.transition=e}}return!1}function qh(t,e,n){e=zi(n,e),e=qg(t,e,1),t=sr(t,e,1),e=xt(),t!==null&&(mo(t,1,e),It(t,e))}function Oe(t,e,n){if(t.tag===3)qh(t,t,n);else for(;e!==null;){if(e.tag===3){qh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(or===null||!or.has(r))){t=zi(n,t),t=Xg(e,t,1),e=sr(e,t,1),t=xt(),e!==null&&(mo(e,1,t),It(e,t));break}}e=e.return}}function d_(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xt(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(ct&n)===n&&(qe===4||qe===3&&(ct&130023424)===ct&&500>$e()-Bd?Br(t,0):Od|=n),It(t,e)}function y1(t,e){e===0&&(t.mode&1?(e=Ho,Ho<<=1,!(Ho&130023424)&&(Ho=4194304)):e=1);var n=xt();t=Pn(t,e),t!==null&&(mo(t,e,n),It(t,n))}function f_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),y1(t,n)}function h_(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),y1(t,n)}var v1;v1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rt.current)kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kt=!1,e_(t,e,n);kt=!!(t.flags&131072)}else kt=!1,je&&e.flags&1048576&&Sg(e,Rl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fl(t,e),t=e.pendingProps;var i=Fi(e,gt.current);Ri(e,n),i=Ad(null,e,r,t,i,n);var s=Nd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jt(r)?(s=!0,kl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,kd(e),i.updater=fa,e.stateNode=i,i._reactInternals=e,pu(e,r,t,n),e=yu(null,e,r,!0,s,n)):(e.tag=0,je&&s&&xd(e),yt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(fl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=m_(r),t=Jt(r,t),i){case 0:e=gu(null,e,r,t,n);break e;case 1:e=Lh(null,e,r,t,n);break e;case 11:e=Bh(null,e,r,t,n);break e;case 14:e=zh(null,e,r,Jt(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jt(r,i),gu(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jt(r,i),Lh(t,e,r,i,n);case 3:e:{if(t1(e),t===null)throw Error(z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Rg(t,e),Al(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=zi(Error(z(423)),e),e=$h(t,e,r,n,i);break e}else if(r!==i){i=zi(Error(z(424)),e),e=$h(t,e,r,n,i);break e}else for(Dt=ir(e.stateNode.containerInfo.firstChild),Pt=e,je=!0,en=null,n=kg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mi(),r===i){e=Fn(t,e,n);break e}yt(t,e,r,n)}e=e.child}return e;case 5:return jg(e),t===null&&du(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,ou(r,i)?o=null:s!==null&&ou(r,s)&&(e.flags|=32),e1(t,e),yt(t,e,o,n),e.child;case 6:return t===null&&du(e),null;case 13:return n1(t,e,n);case 4:return Td(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Oi(e,null,r,n):yt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jt(r,i),Bh(t,e,r,i,n);case 7:return yt(t,e,e.pendingProps,n),e.child;case 8:return yt(t,e,e.pendingProps.children,n),e.child;case 12:return yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Se(jl,r._currentValue),r._currentValue=o,s!==null)if(ln(s.value,o)){if(s.children===i.children&&!Rt.current){e=Fn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=In(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),fu(s.return,n,e),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),fu(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}yt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ri(e,n),i=Yt(i),r=r(i),e.flags|=1,yt(t,e,r,n),e.child;case 14:return r=e.type,i=Jt(r,e.pendingProps),i=Jt(r.type,i),zh(t,e,r,i,n);case 15:return Jg(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jt(r,i),fl(t,e),e.tag=1,jt(r)?(t=!0,kl(e)):t=!1,Ri(e,n),Kg(e,r,i),pu(e,r,i,n),yu(null,e,r,!0,t,n);case 19:return r1(t,e,n);case 22:return Zg(t,e,n)}throw Error(z(156,e.tag))};function x1(t,e){return Ym(t,e)}function p_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(t,e,n,r){return new p_(t,e,n,r)}function Wd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function m_(t){if(typeof t=="function")return Wd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ld)return 11;if(t===ad)return 14}return 2}function ar(t,e){var n=t.alternate;return n===null?(n=Wt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ml(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Wd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case fi:return zr(n.children,i,s,e);case od:o=8,i|=8;break;case Bc:return t=Wt(12,n,e,i|2),t.elementType=Bc,t.lanes=s,t;case zc:return t=Wt(13,n,e,i),t.elementType=zc,t.lanes=s,t;case Lc:return t=Wt(19,n,e,i),t.elementType=Lc,t.lanes=s,t;case jm:return ma(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Tm:o=10;break e;case Rm:o=9;break e;case ld:o=11;break e;case ad:o=14;break e;case Vn:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Wt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function zr(t,e,n,r){return t=Wt(7,t,r,e),t.lanes=n,t}function ma(t,e,n,r){return t=Wt(22,t,r,e),t.elementType=jm,t.lanes=n,t.stateNode={isHidden:!1},t}function yc(t,e,n){return t=Wt(6,t,null,e),t.lanes=n,t}function vc(t,e,n){return e=Wt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function g_(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ja(0),this.expirationTimes=Ja(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ja(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ud(t,e,n,r,i,s,o,a,c){return t=new g_(t,e,n,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Wt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},kd(s),t}function y_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:di,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _1(t){if(!t)return pr;t=t._reactInternals;e:{if(Xr(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(jt(n))return _g(t,n,e)}return e}function b1(t,e,n,r,i,s,o,a,c){return t=Ud(n,r,!0,t,i,s,o,a,c),t.context=_1(null),n=t.current,r=xt(),i=lr(n),s=In(r,i),s.callback=e??null,sr(n,s,i),t.current.lanes=i,mo(t,i,r),It(t,r),t}function ga(t,e,n,r){var i=e.current,s=xt(),o=lr(i);return n=_1(n),e.context===null?e.context=n:e.pendingContext=n,e=In(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=sr(i,e,o),t!==null&&(sn(t,i,o,s),cl(t,i,o)),o}function zl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Xh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hd(t,e){Xh(t,e),(t=t.alternate)&&Xh(t,e)}function v_(){return null}var S1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vd(t){this._internalRoot=t}ya.prototype.render=Vd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));ga(t,e,null,null)};ya.prototype.unmount=Vd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Yr(function(){ga(null,t,null,null)}),e[Dn]=null}};function ya(t){this._internalRoot=t}ya.prototype.unstable_scheduleHydration=function(t){if(t){var e=Zm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Gn.length&&e!==0&&e<Gn[n].priority;n++);Gn.splice(n,0,t),n===0&&tg(t)}};function Yd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function va(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jh(){}function x_(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=zl(o);s.call(u)}}var o=b1(e,r,t,0,null,!1,!1,"",Jh);return t._reactRootContainer=o,t[Dn]=o.current,Ys(t.nodeType===8?t.parentNode:t),Yr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=zl(c);a.call(u)}}var c=Ud(t,0,!1,null,null,!1,!1,"",Jh);return t._reactRootContainer=c,t[Dn]=c.current,Ys(t.nodeType===8?t.parentNode:t),Yr(function(){ga(e,c,n,r)}),c}function xa(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=zl(o);a.call(c)}}ga(e,o,t,i)}else o=x_(n,e,t,i,r);return zl(o)}Xm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ws(e.pendingLanes);n!==0&&(dd(e,n|1),It(e,$e()),!(fe&6)&&(Li=$e()+500,br()))}break;case 13:Yr(function(){var r=Pn(t,1);if(r!==null){var i=xt();sn(r,t,1,i)}}),Hd(t,1)}};fd=function(t){if(t.tag===13){var e=Pn(t,134217728);if(e!==null){var n=xt();sn(e,t,134217728,n)}Hd(t,134217728)}};Jm=function(t){if(t.tag===13){var e=lr(t),n=Pn(t,e);if(n!==null){var r=xt();sn(n,t,e,r)}Hd(t,e)}};Zm=function(){return me};eg=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};qc=function(t,e,n){switch(e){case"input":if(Uc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ca(r);if(!i)throw Error(z(90));Am(r),Uc(r,i)}}}break;case"textarea":Dm(t,n);break;case"select":e=n.value,e!=null&&Ci(t,!!n.multiple,e,!1)}};Lm=zd;$m=Yr;var __={usingClientEntryPoint:!1,Events:[yo,gi,ca,Bm,zm,zd]},gs={findFiberByHostInstance:Pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},b_={bundleType:gs.bundleType,version:gs.version,rendererPackageName:gs.rendererPackageName,rendererConfig:gs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Hm(t),t===null?null:t.stateNode},findFiberByHostInstance:gs.findFiberByHostInstance||v_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tl.isDisabled&&tl.supportsFiber)try{sa=tl.inject(b_),hn=tl}catch{}}Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=__;Mt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yd(e))throw Error(z(200));return y_(t,e,null,n)};Mt.createRoot=function(t,e){if(!Yd(t))throw Error(z(299));var n=!1,r="",i=S1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ud(t,1,!1,null,null,n,!1,r,i),t[Dn]=e.current,Ys(t.nodeType===8?t.parentNode:t),new Vd(e)};Mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Hm(e),t=t===null?null:t.stateNode,t};Mt.flushSync=function(t){return Yr(t)};Mt.hydrate=function(t,e,n){if(!va(e))throw Error(z(200));return xa(null,t,e,!0,n)};Mt.hydrateRoot=function(t,e,n){if(!Yd(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=S1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=b1(e,null,t,1,n??null,i,!1,s,o),t[Dn]=e.current,Ys(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ya(e)};Mt.render=function(t,e,n){if(!va(e))throw Error(z(200));return xa(null,t,e,!1,n)};Mt.unmountComponentAtNode=function(t){if(!va(t))throw Error(z(40));return t._reactRootContainer?(Yr(function(){xa(null,null,t,!1,function(){t._reactRootContainer=null,t[Dn]=null})}),!0):!1};Mt.unstable_batchedUpdates=zd;Mt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!va(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return xa(t,e,n,!1,r)};Mt.version="18.3.1-next-f1338f8080-20240426";function w1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(w1)}catch(t){console.error(t)}}w1(),wm.exports=Mt;var S_=wm.exports,C1,Zh=S_;C1=Zh.createRoot,Zh.hydrateRoot;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L=function(t,e){if(!t)throw Ji(e)},Ji=function(t){return new Error("Firebase Database ("+E1.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},w_=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Gd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,f=s>>2,d=(s&3)<<4|a>>4;let h=(a&15)<<2|u>>6,x=u&63;c||(x=64,o||(h=64)),r.push(n[f],n[d],n[h],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(k1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):w_(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new C_;const h=s<<2|a>>4;if(r.push(h),u!==64){const x=a<<4&240|u>>2;if(r.push(x),d!==64){const v=u<<6&192|d;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class C_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const T1=function(t){const e=k1(t);return Gd.encodeByteArray(e,!0)},Ll=function(t){return T1(t).replace(/\./g,"")},ju=function(t){try{return Gd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t){return R1(void 0,t)}function R1(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!k_(n)||(t[n]=R1(t[n],e[n]));return t}function k_(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_=()=>T_().__FIREBASE_DEFAULTS__,j_=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},I_=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ju(t[1]);return e&&JSON.parse(e)},j1=()=>{try{return R_()||j_()||I_()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},A_=t=>{var e,n;return(n=(e=j1())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},N_=t=>{const e=A_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},I1=()=>{var t;return(t=j1())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Ll(JSON.stringify(n)),Ll(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function A1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(P_())}function F_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function N1(){return E1.NODE_ADMIN===!0}function M_(){try{return typeof indexedDB=="object"}catch{return!1}}function O_(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="FirebaseError";class _o extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=B_,Object.setPrototypeOf(this,_o.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,D1.prototype.create)}}class D1{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?z_(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new _o(i,a,r)}}function z_(t,e){return t.replace(L_,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const L_=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(t){return JSON.parse(t)}function Ke(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=to(ju(s[0])||""),n=to(ju(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},$_=function(t){const e=P1(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},W_=function(t){const e=P1(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function $i(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function ep(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $l(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Iu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(tp(s)&&tp(o)){if(!Iu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function tp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,f;for(let d=0;d<80;d++){d<40?d<20?(u=a^s&(o^a),f=1518500249):(u=s^o^a,f=1859775393):d<60?(u=s&o|a&(s|o),f=2400959708):(u=s^o^a,f=3395469782);const h=(i<<5|i>>>27)+u+c+f+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function _a(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,L(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ba=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(t){return t&&t._delegate?t._delegate:t}class no{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new xo;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Q_(e))try{this.getOrInitializeService({instanceIdentifier:Nr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Nr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Nr){return this.instances.has(e)}getOptions(e=Nr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:G_(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Nr){return this.component?this.component.multipleInstances?e:Nr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function G_(t){return t===Nr?void 0:t}function Q_(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Y_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const q_={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},X_=_e.INFO,J_={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},Z_=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=J_[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class F1{constructor(e){this.name=e,this._logLevel=X_,this._logHandler=Z_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?q_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const eb=(t,e)=>e.some(n=>t instanceof n);let np,rp;function tb(){return np||(np=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nb(){return rp||(rp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const M1=new WeakMap,Au=new WeakMap,O1=new WeakMap,xc=new WeakMap,Qd=new WeakMap;function rb(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(cr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&M1.set(n,t)}).catch(()=>{}),Qd.set(e,t),e}function ib(t){if(Au.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Au.set(t,e)}let Nu={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Au.get(t);if(e==="objectStoreNames")return t.objectStoreNames||O1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sb(t){Nu=t(Nu)}function ob(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(_c(this),e,...n);return O1.set(r,e.sort?e.sort():[e]),cr(r)}:nb().includes(t)?function(...e){return t.apply(_c(this),e),cr(M1.get(this))}:function(...e){return cr(t.apply(_c(this),e))}}function lb(t){return typeof t=="function"?ob(t):(t instanceof IDBTransaction&&ib(t),eb(t,tb())?new Proxy(t,Nu):t)}function cr(t){if(t instanceof IDBRequest)return rb(t);if(xc.has(t))return xc.get(t);const e=lb(t);return e!==t&&(xc.set(t,e),Qd.set(e,t)),e}const _c=t=>Qd.get(t);function ab(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=cr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(cr(o.result),c.oldVersion,c.newVersion,cr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const cb=["get","getKey","getAll","getAllKeys","count"],ub=["put","add","delete","clear"],bc=new Map;function ip(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bc.get(e))return bc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=ub.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||cb.includes(n)))return;const s=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&c.done]))[0]};return bc.set(e,s),s}sb(t=>({...t,get:(e,n,r)=>ip(e,n)||t.get(e,n,r),has:(e,n)=>!!ip(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fb(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function fb(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Du="@firebase/app",sp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn=new F1("@firebase/app"),hb="@firebase/app-compat",pb="@firebase/analytics-compat",mb="@firebase/analytics",gb="@firebase/app-check-compat",yb="@firebase/app-check",vb="@firebase/auth",xb="@firebase/auth-compat",_b="@firebase/database",bb="@firebase/data-connect",Sb="@firebase/database-compat",wb="@firebase/functions",Cb="@firebase/functions-compat",Eb="@firebase/installations",kb="@firebase/installations-compat",Tb="@firebase/messaging",Rb="@firebase/messaging-compat",jb="@firebase/performance",Ib="@firebase/performance-compat",Ab="@firebase/remote-config",Nb="@firebase/remote-config-compat",Db="@firebase/storage",Pb="@firebase/storage-compat",Fb="@firebase/firestore",Mb="@firebase/vertexai-preview",Ob="@firebase/firestore-compat",Bb="firebase",zb="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu="[DEFAULT]",Lb={[Du]:"fire-core",[hb]:"fire-core-compat",[mb]:"fire-analytics",[pb]:"fire-analytics-compat",[yb]:"fire-app-check",[gb]:"fire-app-check-compat",[vb]:"fire-auth",[xb]:"fire-auth-compat",[_b]:"fire-rtdb",[bb]:"fire-data-connect",[Sb]:"fire-rtdb-compat",[wb]:"fire-fn",[Cb]:"fire-fn-compat",[Eb]:"fire-iid",[kb]:"fire-iid-compat",[Tb]:"fire-fcm",[Rb]:"fire-fcm-compat",[jb]:"fire-perf",[Ib]:"fire-perf-compat",[Ab]:"fire-rc",[Nb]:"fire-rc-compat",[Db]:"fire-gcs",[Pb]:"fire-gcs-compat",[Fb]:"fire-fst",[Ob]:"fire-fst-compat",[Mb]:"fire-vertex","fire-js":"fire-js",[Bb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=new Map,$b=new Map,Fu=new Map;function op(t,e){try{t.container.addComponent(e)}catch(n){Mn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ul(t){const e=t.name;if(Fu.has(e))return Mn.debug(`There were multiple attempts to register component ${e}.`),!1;Fu.set(e,t);for(const n of Wl.values())op(n,t);for(const n of $b.values())op(n,t);return!0}function Wb(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ur=new D1("app","Firebase",Ub);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new no("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ur.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb=zb;function B1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Pu,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ur.create("bad-app-name",{appName:String(i)});if(n||(n=I1()),!n)throw ur.create("no-options");const s=Wl.get(i);if(s){if(Iu(n,s.options)&&Iu(r,s.config))return s;throw ur.create("duplicate-app",{appName:i})}const o=new K_(i);for(const c of Fu.values())o.addComponent(c);const a=new Hb(n,r,o);return Wl.set(i,a),a}function Yb(t=Pu){const e=Wl.get(t);if(!e&&t===Pu&&I1())return B1();if(!e)throw ur.create("no-app",{appName:t});return e}function Ii(t,e,n){var r;let i=(r=Lb[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mn.warn(a.join(" "));return}Ul(new no(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="firebase-heartbeat-database",Qb=1,ro="firebase-heartbeat-store";let Sc=null;function z1(){return Sc||(Sc=ab(Gb,Qb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ro)}catch(n){console.warn(n)}}}}).catch(t=>{throw ur.create("idb-open",{originalErrorMessage:t.message})})),Sc}async function Kb(t){try{const n=(await z1()).transaction(ro),r=await n.objectStore(ro).get(L1(t));return await n.done,r}catch(e){if(e instanceof _o)Mn.warn(e.message);else{const n=ur.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mn.warn(n.message)}}}async function lp(t,e){try{const r=(await z1()).transaction(ro,"readwrite");await r.objectStore(ro).put(e,L1(t)),await r.done}catch(n){if(n instanceof _o)Mn.warn(n.message);else{const r=ur.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Mn.warn(r.message)}}}function L1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb=1024,Xb=30*24*60*60*1e3;class Jb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new e2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ap();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Xb}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Mn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ap(),{heartbeatsToSend:r,unsentEntries:i}=Zb(this._heartbeatsCache.heartbeats),s=Ll(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Mn.warn(n),""}}}function ap(){return new Date().toISOString().substring(0,10)}function Zb(t,e=qb){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),cp(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),cp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class e2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return M_()?O_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Kb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return lp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return lp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function cp(t){return Ll(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(t){Ul(new no("platform-logger",e=>new db(e),"PRIVATE")),Ul(new no("heartbeat",e=>new Jb(e),"PRIVATE")),Ii(Du,sp,t),Ii(Du,sp,"esm2017"),Ii("fire-js","")}t2("");var n2="firebase",r2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ii(n2,r2,"app");const up="@firebase/database",dp="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $1="";function i2(t){$1=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ke(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:to(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return mn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new s2(e)}}catch{}return new o2},Or=W1("localStorage"),Mu=W1("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=new F1("@firebase/database"),l2=function(){let t=1;return function(){return t++}}(),U1=function(t){const e=V_(t),n=new H_;n.update(e);const r=n.digest();return Gd.encodeByteArray(r)},bo=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=bo.apply(null,r):typeof r=="object"?e+=Ke(r):e+=r,e+=" "}return e};let Lr=null,fp=!0;const a2=function(t,e){L(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ai.logLevel=_e.VERBOSE,Lr=Ai.log.bind(Ai),e&&Mu.set("logging_enabled",!0)):typeof t=="function"?Lr=t:(Lr=null,Mu.remove("logging_enabled"))},at=function(...t){if(fp===!0&&(fp=!1,Lr===null&&Mu.get("logging_enabled")===!0&&a2(!0)),Lr){const e=bo.apply(null,t);Lr(e)}},So=function(t){return function(...e){at(t,...e)}},Ou=function(...t){const e="FIREBASE INTERNAL ERROR: "+bo(...t);Ai.error(e)},On=function(...t){const e=`FIREBASE FATAL ERROR: ${bo(...t)}`;throw Ai.error(e),new Error(e)},_t=function(...t){const e="FIREBASE WARNING: "+bo(...t);Ai.warn(e)},c2=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&_t("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Kd=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},u2=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Wi="[MIN_NAME]",Gr="[MAX_NAME]",Zr=function(t,e){if(t===e)return 0;if(t===Wi||e===Gr)return-1;if(e===Wi||t===Gr)return 1;{const n=hp(t),r=hp(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},d2=function(t,e){return t===e?0:t<e?-1:1},ys=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ke(e))},qd=function(t){if(typeof t!="object"||t===null)return Ke(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Ke(e[r]),n+=":",n+=qd(t[e[r]]);return n+="}",n},H1=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function dt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const V1=function(t){L(!Kd(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const f=u.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(f.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},f2=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},h2=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function p2(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const m2=new RegExp("^-?(0*)\\d{1,10}$"),g2=-2147483648,y2=2147483647,hp=function(t){if(m2.test(t)){const e=Number(t);if(e>=g2&&e<=y2)return e}return null},Zi=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw _t("Exception was thrown by user callback.",n),e},Math.floor(0))}},v2=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ps=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){_t(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(at("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',_t(e)}}class Ni{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ni.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd="5",Y1="v",G1="s",Q1="r",K1="f",q1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,X1="ls",J1="p",Bu="ac",Z1="websocket",e0="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Or.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Or.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function b2(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function n0(t,e,n){L(typeof e=="string","typeof type must == string"),L(typeof n=="object","typeof params must == object");let r;if(e===Z1)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===e0)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);b2(t)&&(n.ns=t.namespace);const i=[];return dt(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(){this.counters_={}}incrementCounter(e,n=1){mn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return E_(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc={},Cc={};function Jd(t){const e=t.toString();return wc[e]||(wc[e]=new S2),wc[e]}function w2(t,e){const n=t.toString();return Cc[n]||(Cc[n]=e()),Cc[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Zi(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="start",E2="close",k2="pLPCommand",T2="pRTLPCB",r0="id",i0="pw",s0="ser",R2="cb",j2="seg",I2="ts",A2="d",N2="dframe",o0=1870,l0=30,D2=o0-l0,P2=25e3,F2=3e4;class wi{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=So(e),this.stats_=Jd(n),this.urlFn=c=>(this.appCheckToken&&(c[Bu]=this.appCheckToken),n0(n,e0,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new C2(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(F2)),u2(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Zd((...s)=>{const[o,a,c,u,f]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===pp)this.id=a,this.password=c;else if(o===E2)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[pp]="t",r[s0]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[R2]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Y1]=Xd,this.transportSessionId&&(r[G1]=this.transportSessionId),this.lastSessionId&&(r[X1]=this.lastSessionId),this.applicationId&&(r[J1]=this.applicationId),this.appCheckToken&&(r[Bu]=this.appCheckToken),typeof location<"u"&&location.hostname&&q1.test(location.hostname)&&(r[Q1]=K1);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){wi.forceAllow_=!0}static forceDisallow(){wi.forceDisallow_=!0}static isAvailable(){return wi.forceAllow_?!0:!wi.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!f2()&&!h2()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ke(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=T1(n),i=H1(r,D2);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[N2]="t",r[r0]=e,r[i0]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ke(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Zd{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=l2(),window[k2+this.uniqueCallbackIdentifier]=e,window[T2+this.uniqueCallbackIdentifier]=n,this.myIFrame=Zd.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){at("frame writing exception"),a.stack&&at(a.stack),at(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||at("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[r0]=this.myID,e[i0]=this.myPW,e[s0]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+l0+r.length<=o0;){const o=this.pendingSegs.shift();r=r+"&"+j2+i+"="+o.seg+"&"+I2+i+"="+o.ts+"&"+A2+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(P2)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{at("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=16384,O2=45e3;let Hl=null;typeof MozWebSocket<"u"?Hl=MozWebSocket:typeof WebSocket<"u"&&(Hl=WebSocket);class tn{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=So(this.connId),this.stats_=Jd(n),this.connURL=tn.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[Y1]=Xd,typeof location<"u"&&location.hostname&&q1.test(location.hostname)&&(o[Q1]=K1),n&&(o[G1]=n),r&&(o[X1]=r),i&&(o[Bu]=i),s&&(o[J1]=s),n0(e,Z1,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Or.set("previous_websocket_failure",!0);try{let r;N1(),this.mySock=new Hl(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){tn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Hl!==null&&!tn.forceDisallow_}static previouslyFailed(){return Or.isInMemoryStorage||Or.get("previous_websocket_failure")===!0}markConnectionHealthy(){Or.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=to(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(L(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Ke(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=H1(n,M2);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(O2))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}tn.responsesRequiredToBeHealthy=2;tn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[wi,tn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=tn&&tn.isAvailable();let r=n&&!tn.previouslyFailed();if(e.webSocketOnly&&(n||_t("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[tn];else{const i=this.transports_=[];for(const s of io.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);io.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}io.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=6e4,z2=5e3,L2=10*1024,$2=100*1024,Ec="t",mp="d",W2="s",gp="r",U2="e",yp="o",vp="a",xp="n",_p="p",H2="h";class V2{constructor(e,n,r,i,s,o,a,c,u,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=So("c:"+this.id+":"),this.transportManager_=new io(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ps(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>$2?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>L2?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ec in e){const n=e[Ec];n===vp?this.upgradeIfSecondaryHealthy_():n===gp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===yp&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ys("t",e),r=ys("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:_p,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:vp,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:xp,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ys("t",e),r=ys("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ys(Ec,e);if(mp in e){const r=e[mp];if(n===H2){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===xp){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===W2?this.onConnectionShutdown_(r):n===gp?this.onReset_(r):n===U2?Ou("Server Error: "+r):n===yp?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ou("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Xd!==r&&_t("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ps(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(B2))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ps(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(z2))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:_p,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Or.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e){this.allowedEvents_=e,this.listeners_={},L(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){L(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl extends c0{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!A1()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Vl}getInitialEvent(e){return L(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp=32,Sp=768;class ge{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function pe(){return new ge("")}function Z(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function mr(t){return t.pieces_.length-t.pieceNum_}function be(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ge(t.pieces_,e)}function ef(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Y2(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function so(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function u0(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ge(e,0)}function Be(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ge)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ge(n,0)}function re(t){return t.pieceNum_>=t.pieces_.length}function vt(t,e){const n=Z(t),r=Z(e);if(n===null)return e;if(n===r)return vt(be(t),be(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function G2(t,e){const n=so(t,0),r=so(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=Zr(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function tf(t,e){if(mr(t)!==mr(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ut(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(mr(t)>mr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Q2{constructor(e,n){this.errorPrefix_=n,this.parts_=so(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=ba(this.parts_[r]);d0(this)}}function K2(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=ba(e),d0(t)}function q2(t){const e=t.parts_.pop();t.byteLength_-=ba(e),t.parts_.length>0&&(t.byteLength_-=1)}function d0(t){if(t.byteLength_>Sp)throw new Error(t.errorPrefix_+"has a key path longer than "+Sp+" bytes ("+t.byteLength_+").");if(t.parts_.length>bp)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+bp+") or object contains a cycle "+Dr(t))}function Dr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf extends c0{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new nf}getInitialEvent(e){return L(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=1e3,X2=60*5*1e3,wp=30*1e3,J2=1.3,Z2=3e4,eS="server_kill",Cp=3;class An extends a0{constructor(e,n,r,i,s,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=An.nextPersistentConnectionId_++,this.log_=So("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=vs,this.maxReconnectDelay_=X2,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!N1())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");nf.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Vl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Ke(s)),L(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new xo,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),L(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),L(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const c=a.d,u=a.s;An.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&mn(e,"w")){const r=$i(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();_t(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||W_(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=wp)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=$_(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),L(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ke(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Ou("Unrecognized action received from server: "+Ke(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){L(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=vs,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=vs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Z2&&(this.reconnectDelay_=vs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*J2)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+An.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},u=function(d){L(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:u};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);o?at("getToken() completed but was canceled"):(at("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new V2(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,x=>{_t(x+" ("+this.repoInfo_.toString()+")"),this.interrupt(eS)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&_t(d),c())}}}interrupt(e){at("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){at("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ep(this.interruptReasons_)&&(this.reconnectDelay_=vs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>qd(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new ge(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){at("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Cp&&(this.reconnectDelay_=wp,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){at("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Cp&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+$1.replace(/\./g,"-")]=1,A1()?e["framework.cordova"]=1:F_()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Vl.getInstance().currentlyOnline();return ep(this.interruptReasons_)&&e}}An.nextPersistentConnectionId_=0;An.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ee(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ee(Wi,e),i=new ee(Wi,n);return this.compare(r,i)!==0}minPost(){return ee.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nl;class f0 extends Sa{static get __EMPTY_NODE(){return nl}static set __EMPTY_NODE(e){nl=e}compare(e,n){return Zr(e.name,n.name)}isDefinedOn(e){throw Ji("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ee.MIN}maxPost(){return new ee(Gr,nl)}makePost(e,n){return L(typeof e=="string","KeyIndex indexValue must always be a string."),new ee(e,nl)}toString(){return".key"}}const Di=new f0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class rt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??rt.RED,this.left=i??Tt.EMPTY_NODE,this.right=s??Tt.EMPTY_NODE}copy(e,n,r,i,s){return new rt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Tt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Tt.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}rt.RED=!0;rt.BLACK=!1;class tS{copy(e,n,r,i,s){return this}insert(e,n,r){return new rt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Tt{constructor(e,n=Tt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Tt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,rt.BLACK,null,null))}remove(e){return new Tt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,rt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new rl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new rl(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new rl(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new rl(this.root_,null,this.comparator_,!0,e)}}Tt.EMPTY_NODE=new tS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t,e){return Zr(t.name,e.name)}function rf(t,e){return Zr(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zu;function rS(t){zu=t}const h0=function(t){return typeof t=="number"?"number:"+V1(t):"string:"+t},p0=function(t){if(t.isLeafNode()){const e=t.val();L(typeof e=="string"||typeof e=="number"||typeof e=="object"&&mn(e,".sv"),"Priority must be a string or number.")}else L(t===zu||t.isEmpty(),"priority of unexpected type.");L(t===zu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ep;class tt{constructor(e,n=tt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,L(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),p0(this.priorityNode_)}static set __childrenNodeConstructor(e){Ep=e}static get __childrenNodeConstructor(){return Ep}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new tt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:tt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return re(e)?this:Z(e)===".priority"?this.priorityNode_:tt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:tt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Z(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(L(r!==".priority"||mr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,tt.__childrenNodeConstructor.EMPTY_NODE.updateChild(be(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+h0(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=V1(this.value_):e+=this.value_,this.lazyHash_=U1(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===tt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof tt.__childrenNodeConstructor?-1:(L(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=tt.VALUE_TYPE_ORDER.indexOf(n),s=tt.VALUE_TYPE_ORDER.indexOf(r);return L(i>=0,"Unknown leaf type: "+n),L(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}tt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m0,g0;function iS(t){m0=t}function sS(t){g0=t}class oS extends Sa{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Zr(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ee.MIN}maxPost(){return new ee(Gr,new tt("[PRIORITY-POST]",g0))}makePost(e,n){const r=m0(e);return new ee(n,new tt("[PRIORITY-POST]",r))}toString(){return".priority"}}const ze=new oS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=Math.log(2);class aS{constructor(e){const n=s=>parseInt(Math.log(s)/lS,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Yl=function(t,e,n,r){t.sort(e);const i=function(c,u){const f=u-c;let d,h;if(f===0)return null;if(f===1)return d=t[c],h=n?n(d):d,new rt(h,d.node,rt.BLACK,null,null);{const x=parseInt(f/2,10)+c,v=i(c,x),S=i(x+1,u);return d=t[x],h=n?n(d):d,new rt(h,d.node,rt.BLACK,v,S)}},s=function(c){let u=null,f=null,d=t.length;const h=function(v,S){const E=d-v,g=d;d-=v;const p=i(E+1,g),y=t[E],b=n?n(y):y;x(new rt(b,y.node,S,null,p))},x=function(v){u?(u.left=v,u=v):(f=v,u=v)};for(let v=0;v<c.count;++v){const S=c.nextBitIsOne(),E=Math.pow(2,c.count-(v+1));S?h(E,rt.BLACK):(h(E,rt.BLACK),h(E,rt.RED))}return f},o=new aS(t.length),a=s(o);return new Tt(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kc;const ci={};class jn{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return L(ci&&ze,"ChildrenNode.ts has not been loaded"),kc=kc||new jn({".priority":ci},{".priority":ze}),kc}get(e){const n=$i(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Tt?n:null}hasIndex(e){return mn(this.indexSet_,e.toString())}addIndex(e,n){L(e!==Di,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(ee.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Yl(r,e.getCompare()):a=ci;const c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;const f=Object.assign({},this.indexes_);return f[c]=a,new jn(f,u)}addToIndexes(e,n){const r=$l(this.indexes_,(i,s)=>{const o=$i(this.indexSet_,s);if(L(o,"Missing index implementation for "+s),i===ci)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(ee.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),Yl(a,o.getCompare())}else return ci;else{const a=n.get(e.name);let c=i;return a&&(c=c.remove(new ee(e.name,a))),c.insert(e,e.node)}});return new jn(r,this.indexSet_)}removeFromIndexes(e,n){const r=$l(this.indexes_,i=>{if(i===ci)return i;{const s=n.get(e.name);return s?i.remove(new ee(e.name,s)):i}});return new jn(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xs;class Q{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&p0(this.priorityNode_),this.children_.isEmpty()&&L(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return xs||(xs=new Q(new Tt(rf),null,jn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xs}updatePriority(e){return this.children_.isEmpty()?this:new Q(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?xs:n}}getChild(e){const n=Z(e);return n===null?this:this.getImmediateChild(n).getChild(be(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(L(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new ee(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?xs:this.priorityNode_;return new Q(i,o,s)}}updateChild(e,n){const r=Z(e);if(r===null)return n;{L(Z(e)!==".priority"||mr(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(be(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(ze,(o,a)=>{n[o]=a.val(e),r++,s&&Q.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+h0(this.getPriority().val())+":"),this.forEachChild(ze,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":U1(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new ee(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ee(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ee(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,ee.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,ee.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===wo?-1:0}withIndex(e){if(e===Di||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Q(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Di||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(ze),i=n.getIterator(ze);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Di?null:this.indexMap_.get(e.toString())}}Q.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class cS extends Q{constructor(){super(new Tt(rf),Q.EMPTY_NODE,jn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Q.EMPTY_NODE}isEmpty(){return!1}}const wo=new cS;Object.defineProperties(ee,{MIN:{value:new ee(Wi,Q.EMPTY_NODE)},MAX:{value:new ee(Gr,wo)}});f0.__EMPTY_NODE=Q.EMPTY_NODE;tt.__childrenNodeConstructor=Q;rS(wo);sS(wo);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=!0;function Qe(t,e=null){if(t===null)return Q.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),L(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new tt(n,Qe(e))}if(!(t instanceof Array)&&uS){const n=[];let r=!1;if(dt(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=Qe(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new ee(o,c)))}}),n.length===0)return Q.EMPTY_NODE;const s=Yl(n,nS,o=>o.name,rf);if(r){const o=Yl(n,ze.getCompare());return new Q(s,Qe(e),new jn({".priority":o},{".priority":ze}))}else return new Q(s,Qe(e),jn.Default)}else{let n=Q.EMPTY_NODE;return dt(t,(r,i)=>{if(mn(t,r)&&r.substring(0,1)!=="."){const s=Qe(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Qe(e))}}iS(Qe);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS extends Sa{constructor(e){super(),this.indexPath_=e,L(!re(e)&&Z(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Zr(e.name,n.name):s}makePost(e,n){const r=Qe(e),i=Q.EMPTY_NODE.updateChild(this.indexPath_,r);return new ee(n,i)}maxPost(){const e=Q.EMPTY_NODE.updateChild(this.indexPath_,wo);return new ee(Gr,e)}toString(){return so(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS extends Sa{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Zr(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ee.MIN}maxPost(){return ee.MAX}makePost(e,n){const r=Qe(e);return new ee(n,r)}toString(){return".value"}}const hS=new fS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(t){return{type:"value",snapshotNode:t}}function Ui(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function oo(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function lo(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function pS(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){L(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(oo(n,a)):L(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Ui(n,r)):o.trackChildChange(lo(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ze,(i,s)=>{n.hasChild(i)||r.trackChildChange(oo(i,s))}),n.isLeafNode()||n.forEachChild(ze,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(lo(i,s,o))}else r.trackChildChange(Ui(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Q.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.indexedFilter_=new sf(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ao.getStartPost_(e),this.endPost_=ao.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new ee(n,r))||(r=Q.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Q.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(Q.EMPTY_NODE);const s=this;return n.forEachChild(ze,(o,a)=>{s.matches(new ee(o,a))||(i=i.updateImmediateChild(o,Q.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new ao(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new ee(n,r))||(r=Q.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=Q.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=Q.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(Q.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,Q.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,x)=>d(x,h)}else o=this.index_.getCompare();const a=e;L(a.numChildren()===this.limit_,"");const c=new ee(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),f=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=i.getChildAfterChild(this.index_,u,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const x=h==null?1:o(h,c);if(f&&!r.isEmpty()&&x>=0)return s!=null&&s.trackChildChange(lo(n,r,d)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(oo(n,d));const S=a.updateImmediateChild(n,Q.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s!=null&&s.trackChildChange(Ui(h.name,h.node)),S.updateImmediateChild(h.name,h.node)):S}}else return r.isEmpty()?e:f&&o(u,c)>=0?(s!=null&&(s.trackChildChange(oo(u.name,u.node)),s.trackChildChange(Ui(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,Q.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ze}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return L(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return L(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wi}hasEnd(){return this.endSet_}getIndexEndValue(){return L(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return L(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Gr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return L(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ze}copy(){const e=new of;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function gS(t){return t.loadsAllData()?new sf(t.getIndex()):t.hasLimit()?new mS(t):new ao(t)}function kp(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ze?n="$priority":t.index_===hS?n="$value":t.index_===Di?n="$key":(L(t.index_ instanceof dS,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ke(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Ke(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Ke(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Ke(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Ke(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Tp(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ze&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl extends a0{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=So("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(L(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Gl.getListenId_(e,r),a={};this.listens_[o]=a;const c=kp(e._queryParams);this.restRequest_(s+".json",c,(u,f)=>{let d=f;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),$i(this.listens_,o)===a){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",i(h,null)}})}unlisten(e,n){const r=Gl.getListenId_(e,n);delete this.listens_[r]}get(e){const n=kp(e._queryParams),r=e._path.toString(),i=new xo;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+U_(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=to(a.responseText)}catch{_t("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&_t("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(){this.rootNode_=Q.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(){return{value:null,children:new Map}}function v0(t,e,n){if(re(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Z(e);t.children.has(r)||t.children.set(r,Ql());const i=t.children.get(r);e=be(e),v0(i,e,n)}}function Lu(t,e,n){t.value!==null?n(e,t.value):vS(t,(r,i)=>{const s=new ge(e.toString()+"/"+r);Lu(i,s,n)})}function vS(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&dt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp=10*1e3,_S=30*1e3,bS=5*60*1e3;class SS{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new xS(e);const r=Rp+(_S-Rp)*Math.random();Ps(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;dt(e,(i,s)=>{s>0&&mn(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Ps(this.reportStats_.bind(this),Math.floor(Math.random()*2*bS))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(nn||(nn={}));function lf(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function af(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function cf(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=nn.ACK_USER_WRITE,this.source=lf()}operationForChild(e){if(re(this.path)){if(this.affectedTree.value!=null)return L(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ge(e));return new Kl(pe(),n,this.revert)}}else return L(Z(this.path)===e,"operationForChild called for unrelated child."),new Kl(be(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n){this.source=e,this.path=n,this.type=nn.LISTEN_COMPLETE}operationForChild(e){return re(this.path)?new co(this.source,pe()):new co(this.source,be(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=nn.OVERWRITE}operationForChild(e){return re(this.path)?new Qr(this.source,pe(),this.snap.getImmediateChild(e)):new Qr(this.source,be(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=nn.MERGE}operationForChild(e){if(re(this.path)){const n=this.children.subtree(new ge(e));return n.isEmpty()?null:n.value?new Qr(this.source,pe(),n.value):new Hi(this.source,pe(),n)}else return L(Z(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Hi(this.source,be(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(re(e))return this.isFullyInitialized()&&!this.filtered_;const n=Z(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function CS(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(pS(o.childName,o.snapshotNode))}),_s(t,i,"child_removed",e,r,n),_s(t,i,"child_added",e,r,n),_s(t,i,"child_moved",s,r,n),_s(t,i,"child_changed",e,r,n),_s(t,i,"value",e,r,n),i}function _s(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,c)=>kS(t,a,c)),o.forEach(a=>{const c=ES(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function ES(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function kS(t,e,n){if(e.childName==null||n.childName==null)throw Ji("Should only compare child_ events.");const r=new ee(e.childName,e.snapshotNode),i=new ee(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(t,e){return{eventCache:t,serverCache:e}}function Fs(t,e,n,r){return wa(new gr(e,n,r),t.serverCache)}function x0(t,e,n,r){return wa(t.eventCache,new gr(e,n,r))}function ql(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Kr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tc;const TS=()=>(Tc||(Tc=new Tt(d2)),Tc);class xe{constructor(e,n=TS()){this.value=e,this.children=n}static fromObject(e){let n=new xe(null);return dt(e,(r,i)=>{n=n.set(new ge(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:pe(),value:this.value};if(re(e))return null;{const r=Z(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(be(e),n);return s!=null?{path:Be(new ge(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(re(e))return this;{const n=Z(e),r=this.children.get(n);return r!==null?r.subtree(be(e)):new xe(null)}}set(e,n){if(re(e))return new xe(n,this.children);{const r=Z(e),s=(this.children.get(r)||new xe(null)).set(be(e),n),o=this.children.insert(r,s);return new xe(this.value,o)}}remove(e){if(re(e))return this.children.isEmpty()?new xe(null):new xe(null,this.children);{const n=Z(e),r=this.children.get(n);if(r){const i=r.remove(be(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new xe(null):new xe(this.value,s)}else return this}}get(e){if(re(e))return this.value;{const n=Z(e),r=this.children.get(n);return r?r.get(be(e)):null}}setTree(e,n){if(re(e))return n;{const r=Z(e),s=(this.children.get(r)||new xe(null)).setTree(be(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new xe(this.value,o)}}fold(e){return this.fold_(pe(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Be(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,pe(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(re(e))return null;{const s=Z(e),o=this.children.get(s);return o?o.findOnPath_(be(e),Be(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,pe(),n)}foreachOnPath_(e,n,r){if(re(e))return this;{this.value&&r(n,this.value);const i=Z(e),s=this.children.get(i);return s?s.foreachOnPath_(be(e),Be(n,i),r):new xe(null)}}foreach(e){this.foreach_(pe(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Be(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.writeTree_=e}static empty(){return new on(new xe(null))}}function Ms(t,e,n){if(re(e))return new on(new xe(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=vt(i,e);return s=s.updateChild(o,n),new on(t.writeTree_.set(i,s))}else{const i=new xe(n),s=t.writeTree_.setTree(e,i);return new on(s)}}}function $u(t,e,n){let r=t;return dt(n,(i,s)=>{r=Ms(r,Be(e,i),s)}),r}function jp(t,e){if(re(e))return on.empty();{const n=t.writeTree_.setTree(e,new xe(null));return new on(n)}}function Wu(t,e){return ei(t,e)!=null}function ei(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(vt(n.path,e)):null}function Ip(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ze,(r,i)=>{e.push(new ee(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new ee(r,i.value))}),e}function dr(t,e){if(re(e))return t;{const n=ei(t,e);return n!=null?new on(new xe(n)):new on(t.writeTree_.subtree(e))}}function Uu(t){return t.writeTree_.isEmpty()}function Vi(t,e){return _0(pe(),t.writeTree_,e)}function _0(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(L(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=_0(Be(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Be(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(t,e){return C0(e,t)}function RS(t,e,n,r,i){L(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ms(t.visibleWrites,e,n)),t.lastWriteId=r}function jS(t,e,n,r){L(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=$u(t.visibleWrites,e,n),t.lastWriteId=r}function IS(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function AS(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);L(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&NS(a,r.path)?i=!1:Ut(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return DS(t),!0;if(r.snap)t.visibleWrites=jp(t.visibleWrites,r.path);else{const a=r.children;dt(a,c=>{t.visibleWrites=jp(t.visibleWrites,Be(r.path,c))})}return!0}else return!1}function NS(t,e){if(t.snap)return Ut(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Ut(Be(t.path,n),e))return!0;return!1}function DS(t){t.visibleWrites=b0(t.allWrites,PS,pe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function PS(t){return t.visible}function b0(t,e,n){let r=on.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Ut(n,o)?(a=vt(n,o),r=Ms(r,a,s.snap)):Ut(o,n)&&(a=vt(o,n),r=Ms(r,pe(),s.snap.getChild(a)));else if(s.children){if(Ut(n,o))a=vt(n,o),r=$u(r,a,s.children);else if(Ut(o,n))if(a=vt(o,n),re(a))r=$u(r,pe(),s.children);else{const c=$i(s.children,Z(a));if(c){const u=c.getChild(be(a));r=Ms(r,pe(),u)}}}else throw Ji("WriteRecord should have .snap or .children")}}return r}function S0(t,e,n,r,i){if(!r&&!i){const s=ei(t.visibleWrites,e);if(s!=null)return s;{const o=dr(t.visibleWrites,e);if(Uu(o))return n;if(n==null&&!Wu(o,pe()))return null;{const a=n||Q.EMPTY_NODE;return Vi(o,a)}}}else{const s=dr(t.visibleWrites,e);if(!i&&Uu(s))return n;if(!i&&n==null&&!Wu(s,pe()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Ut(u.path,e)||Ut(e,u.path))},a=b0(t.allWrites,o,e),c=n||Q.EMPTY_NODE;return Vi(a,c)}}}function FS(t,e,n){let r=Q.EMPTY_NODE;const i=ei(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ze,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=dr(t.visibleWrites,e);return n.forEachChild(ze,(o,a)=>{const c=Vi(dr(s,new ge(o)),a);r=r.updateImmediateChild(o,c)}),Ip(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=dr(t.visibleWrites,e);return Ip(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function MS(t,e,n,r,i){L(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Be(e,n);if(Wu(t.visibleWrites,s))return null;{const o=dr(t.visibleWrites,s);return Uu(o)?i.getChild(n):Vi(o,i.getChild(n))}}function OS(t,e,n,r){const i=Be(e,n),s=ei(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=dr(t.visibleWrites,i);return Vi(o,r.getNode().getImmediateChild(n))}else return null}function BS(t,e){return ei(t.visibleWrites,e)}function zS(t,e,n,r,i,s,o){let a;const c=dr(t.visibleWrites,e),u=ei(c,pe());if(u!=null)a=u;else if(n!=null)a=Vi(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const f=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let x=h.getNext();for(;x&&f.length<i;)d(x,r)!==0&&f.push(x),x=h.getNext();return f}else return[]}function LS(){return{visibleWrites:on.empty(),allWrites:[],lastWriteId:-1}}function Xl(t,e,n,r){return S0(t.writeTree,t.treePath,e,n,r)}function uf(t,e){return FS(t.writeTree,t.treePath,e)}function Ap(t,e,n,r){return MS(t.writeTree,t.treePath,e,n,r)}function Jl(t,e){return BS(t.writeTree,Be(t.treePath,e))}function $S(t,e,n,r,i,s){return zS(t.writeTree,t.treePath,e,n,r,i,s)}function df(t,e,n){return OS(t.writeTree,t.treePath,e,n)}function w0(t,e){return C0(Be(t.treePath,e),t.writeTree)}function C0(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;L(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),L(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,lo(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,oo(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Ui(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,lo(r,e.snapshotNode,i.oldSnap));else throw Ji("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const E0=new US;class ff{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new gr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return df(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Kr(this.viewCache_),s=$S(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(t){return{filter:t}}function VS(t,e){L(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),L(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function YS(t,e,n,r,i){const s=new WS;let o,a;if(n.type===nn.OVERWRITE){const u=n;u.source.fromUser?o=Hu(t,e,u.path,u.snap,r,i,s):(L(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!re(u.path),o=Zl(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===nn.MERGE){const u=n;u.source.fromUser?o=QS(t,e,u.path,u.children,r,i,s):(L(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=Vu(t,e,u.path,u.children,r,i,a,s))}else if(n.type===nn.ACK_USER_WRITE){const u=n;u.revert?o=XS(t,e,u.path,r,i,s):o=KS(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===nn.LISTEN_COMPLETE)o=qS(t,e,n.path,r,s);else throw Ji("Unknown operation type: "+n.type);const c=s.getChanges();return GS(e,o,c),{viewCache:o,changes:c}}function GS(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=ql(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(y0(ql(e)))}}function k0(t,e,n,r,i,s){const o=e.eventCache;if(Jl(r,n)!=null)return e;{let a,c;if(re(n))if(L(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Kr(e),f=u instanceof Q?u:Q.EMPTY_NODE,d=uf(r,f);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const u=Xl(r,Kr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=Z(n);if(u===".priority"){L(mr(n)===1,"Can't have a priority with additional path components");const f=o.getNode();c=e.serverCache.getNode();const d=Ap(r,n,f,c);d!=null?a=t.filter.updatePriority(f,d):a=o.getNode()}else{const f=be(n);let d;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();const h=Ap(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(u).updateChild(f,h):d=o.getNode().getImmediateChild(u)}else d=df(r,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,f,i,s):a=o.getNode()}}return Fs(e,a,o.isFullyInitialized()||re(n),t.filter.filtersNodes())}}function Zl(t,e,n,r,i,s,o,a){const c=e.serverCache;let u;const f=o?t.filter:t.filter.getIndexedFilter();if(re(n))u=f.updateFullNode(c.getNode(),r,null);else if(f.filtersNodes()&&!c.isFiltered()){const x=c.getNode().updateChild(n,r);u=f.updateFullNode(c.getNode(),x,null)}else{const x=Z(n);if(!c.isCompleteForPath(n)&&mr(n)>1)return e;const v=be(n),E=c.getNode().getImmediateChild(x).updateChild(v,r);x===".priority"?u=f.updatePriority(c.getNode(),E):u=f.updateChild(c.getNode(),x,E,v,E0,null)}const d=x0(e,u,c.isFullyInitialized()||re(n),f.filtersNodes()),h=new ff(i,d,s);return k0(t,d,n,i,h,a)}function Hu(t,e,n,r,i,s,o){const a=e.eventCache;let c,u;const f=new ff(i,e,s);if(re(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Fs(e,u,!0,t.filter.filtersNodes());else{const d=Z(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=Fs(e,u,a.isFullyInitialized(),a.isFiltered());else{const h=be(n),x=a.getNode().getImmediateChild(d);let v;if(re(h))v=r;else{const S=f.getCompleteChild(d);S!=null?ef(h)===".priority"&&S.getChild(u0(h)).isEmpty()?v=S:v=S.updateChild(h,r):v=Q.EMPTY_NODE}if(x.equals(v))c=e;else{const S=t.filter.updateChild(a.getNode(),d,v,h,f,o);c=Fs(e,S,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Np(t,e){return t.eventCache.isCompleteForChild(e)}function QS(t,e,n,r,i,s,o){let a=e;return r.foreach((c,u)=>{const f=Be(n,c);Np(e,Z(f))&&(a=Hu(t,a,f,u,i,s,o))}),r.foreach((c,u)=>{const f=Be(n,c);Np(e,Z(f))||(a=Hu(t,a,f,u,i,s,o))}),a}function Dp(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Vu(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;re(n)?u=r:u=new xe(null).setTree(n,r);const f=e.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(f.hasChild(d)){const x=e.serverCache.getNode().getImmediateChild(d),v=Dp(t,x,h);c=Zl(t,c,new ge(d),v,i,s,o,a)}}),u.children.inorderTraversal((d,h)=>{const x=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!f.hasChild(d)&&!x){const v=e.serverCache.getNode().getImmediateChild(d),S=Dp(t,v,h);c=Zl(t,c,new ge(d),S,i,s,o,a)}}),c}function KS(t,e,n,r,i,s,o){if(Jl(i,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(re(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Zl(t,e,n,c.getNode().getChild(n),i,s,a,o);if(re(n)){let u=new xe(null);return c.getNode().forEachChild(Di,(f,d)=>{u=u.set(new ge(f),d)}),Vu(t,e,n,u,i,s,a,o)}else return e}else{let u=new xe(null);return r.foreach((f,d)=>{const h=Be(n,f);c.isCompleteForPath(h)&&(u=u.set(f,c.getNode().getChild(h)))}),Vu(t,e,n,u,i,s,a,o)}}function qS(t,e,n,r,i){const s=e.serverCache,o=x0(e,s.getNode(),s.isFullyInitialized()||re(n),s.isFiltered());return k0(t,o,n,r,E0,i)}function XS(t,e,n,r,i,s){let o;if(Jl(r,n)!=null)return e;{const a=new ff(r,e,i),c=e.eventCache.getNode();let u;if(re(n)||Z(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=Xl(r,Kr(e));else{const d=e.serverCache.getNode();L(d instanceof Q,"serverChildren would be complete if leaf node"),f=uf(r,d)}f=f,u=t.filter.updateFullNode(c,f,s)}else{const f=Z(n);let d=df(r,f,e.serverCache);d==null&&e.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),d!=null?u=t.filter.updateChild(c,f,d,be(n),a,s):e.eventCache.getNode().hasChild(f)?u=t.filter.updateChild(c,f,Q.EMPTY_NODE,be(n),a,s):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Xl(r,Kr(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||Jl(r,pe())!=null,Fs(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new sf(r.getIndex()),s=gS(r);this.processor_=HS(s);const o=n.serverCache,a=n.eventCache,c=i.updateFullNode(Q.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(Q.EMPTY_NODE,a.getNode(),null),f=new gr(c,o.isFullyInitialized(),i.filtersNodes()),d=new gr(u,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=wa(d,f),this.eventGenerator_=new wS(this.query_)}get query(){return this.query_}}function ZS(t){return t.viewCache_.serverCache.getNode()}function ew(t){return ql(t.viewCache_)}function tw(t,e){const n=Kr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!re(e)&&!n.getImmediateChild(Z(e)).isEmpty())?n.getChild(e):null}function Pp(t){return t.eventRegistrations_.length===0}function nw(t,e){t.eventRegistrations_.push(e)}function Fp(t,e,n){const r=[];if(n){L(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Mp(t,e,n,r){e.type===nn.MERGE&&e.source.queryId!==null&&(L(Kr(t.viewCache_),"We should always have a full cache before handling merges"),L(ql(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=YS(t.processor_,i,e,n,r);return VS(t.processor_,s.viewCache),L(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,T0(t,s.changes,s.viewCache.eventCache.getNode(),null)}function rw(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ze,(s,o)=>{r.push(Ui(s,o))}),n.isFullyInitialized()&&r.push(y0(n.getNode())),T0(t,r,n.getNode(),e)}function T0(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return CS(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ea;class R0{constructor(){this.views=new Map}}function iw(t){L(!ea,"__referenceConstructor has already been defined"),ea=t}function sw(){return L(ea,"Reference.ts has not been loaded"),ea}function ow(t){return t.views.size===0}function hf(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return L(s!=null,"SyncTree gave us an op for an invalid query."),Mp(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(Mp(o,e,n,r));return s}}function j0(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Xl(n,i?r:null),c=!1;a?c=!0:r instanceof Q?(a=uf(n,r),c=!1):(a=Q.EMPTY_NODE,c=!1);const u=wa(new gr(a,c,!1),new gr(r,i,!1));return new JS(e,u)}return o}function lw(t,e,n,r,i,s){const o=j0(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),nw(o,n),rw(o,n)}function aw(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=yr(t);if(i==="default")for(const[c,u]of t.views.entries())o=o.concat(Fp(u,n,r)),Pp(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||s.push(u.query));else{const c=t.views.get(i);c&&(o=o.concat(Fp(c,n,r)),Pp(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!yr(t)&&s.push(new(sw())(e._repo,e._path)),{removed:s,events:o}}function I0(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function fr(t,e){let n=null;for(const r of t.views.values())n=n||tw(r,e);return n}function A0(t,e){if(e._queryParams.loadsAllData())return Ea(t);{const r=e._queryIdentifier;return t.views.get(r)}}function N0(t,e){return A0(t,e)!=null}function yr(t){return Ea(t)!=null}function Ea(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ta;function cw(t){L(!ta,"__referenceConstructor has already been defined"),ta=t}function uw(){return L(ta,"Reference.ts has not been loaded"),ta}let dw=1;class Op{constructor(e){this.listenProvider_=e,this.syncPointTree_=new xe(null),this.pendingWriteTree_=LS(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function D0(t,e,n,r,i){return RS(t.pendingWriteTree_,e,n,r,i),i?es(t,new Qr(lf(),e,n)):[]}function fw(t,e,n,r){jS(t.pendingWriteTree_,e,n,r);const i=xe.fromObject(n);return es(t,new Hi(lf(),e,i))}function Xn(t,e,n=!1){const r=IS(t.pendingWriteTree_,e);if(AS(t.pendingWriteTree_,e)){let s=new xe(null);return r.snap!=null?s=s.set(pe(),!0):dt(r.children,o=>{s=s.set(new ge(o),!0)}),es(t,new Kl(r.path,s,n))}else return[]}function Co(t,e,n){return es(t,new Qr(af(),e,n))}function hw(t,e,n){const r=xe.fromObject(n);return es(t,new Hi(af(),e,r))}function pw(t,e){return es(t,new co(af(),e))}function mw(t,e,n){const r=mf(t,n);if(r){const i=gf(r),s=i.path,o=i.queryId,a=vt(s,e),c=new co(cf(o),a);return yf(t,s,c)}else return[]}function na(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||N0(o,e))){const c=aw(o,e,n,r);ow(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=c.removed;if(a=c.events,!i){const f=u.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(h,x)=>yr(x));if(f&&!d){const h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){const x=vw(h);for(let v=0;v<x.length;++v){const S=x[v],E=S.query,g=O0(t,S);t.listenProvider_.startListening(Os(E),uo(t,E),g.hashFn,g.onComplete)}}}!d&&u.length>0&&!r&&(f?t.listenProvider_.stopListening(Os(e),null):u.forEach(h=>{const x=t.queryToTagMap.get(ka(h));t.listenProvider_.stopListening(Os(h),x)}))}xw(t,u)}return a}function P0(t,e,n,r){const i=mf(t,r);if(i!=null){const s=gf(i),o=s.path,a=s.queryId,c=vt(o,e),u=new Qr(cf(a),c,n);return yf(t,o,u)}else return[]}function gw(t,e,n,r){const i=mf(t,r);if(i){const s=gf(i),o=s.path,a=s.queryId,c=vt(o,e),u=xe.fromObject(n),f=new Hi(cf(a),c,u);return yf(t,o,f)}else return[]}function Yu(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,x)=>{const v=vt(h,i);s=s||fr(x,v),o=o||yr(x)});let a=t.syncPointTree_.get(i);a?(o=o||yr(a),s=s||fr(a,pe())):(a=new R0,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=Q.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((x,v)=>{const S=fr(v,pe());S&&(s=s.updateImmediateChild(x,S))}));const u=N0(a,e);if(!u&&!e._queryParams.loadsAllData()){const h=ka(e);L(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const x=_w();t.queryToTagMap.set(h,x),t.tagToQueryMap.set(x,h)}const f=Ca(t.pendingWriteTree_,i);let d=lw(a,e,n,f,s,c);if(!u&&!o&&!r){const h=A0(a,e);d=d.concat(bw(t,e,h))}return d}function pf(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=vt(o,e),u=fr(a,c);if(u)return u});return S0(i,e,s,n,!0)}function yw(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,f)=>{const d=vt(u,n);r=r||fr(f,d)});let i=t.syncPointTree_.get(n);i?r=r||fr(i,pe()):(i=new R0,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new gr(r,!0,!1):null,a=Ca(t.pendingWriteTree_,e._path),c=j0(i,e,a,s?o.getNode():Q.EMPTY_NODE,s);return ew(c)}function es(t,e){return F0(e,t.syncPointTree_,null,Ca(t.pendingWriteTree_,pe()))}function F0(t,e,n,r){if(re(t.path))return M0(t,e,n,r);{const i=e.get(pe());n==null&&i!=null&&(n=fr(i,pe()));let s=[];const o=Z(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const u=n?n.getImmediateChild(o):null,f=w0(r,o);s=s.concat(F0(a,c,u,f))}return i&&(s=s.concat(hf(i,t,r,n))),s}}function M0(t,e,n,r){const i=e.get(pe());n==null&&i!=null&&(n=fr(i,pe()));let s=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,u=w0(r,o),f=t.operationForChild(o);f&&(s=s.concat(M0(f,a,c,u)))}),i&&(s=s.concat(hf(i,t,r,n))),s}function O0(t,e){const n=e.query,r=uo(t,n);return{hashFn:()=>(ZS(e)||Q.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?mw(t,n._path,r):pw(t,n._path);{const s=p2(i,n);return na(t,n,null,s)}}}}function uo(t,e){const n=ka(e);return t.queryToTagMap.get(n)}function ka(t){return t._path.toString()+"$"+t._queryIdentifier}function mf(t,e){return t.tagToQueryMap.get(e)}function gf(t){const e=t.indexOf("$");return L(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ge(t.substr(0,e))}}function yf(t,e,n){const r=t.syncPointTree_.get(e);L(r,"Missing sync point for query tag that we're tracking");const i=Ca(t.pendingWriteTree_,e);return hf(r,n,i,null)}function vw(t){return t.fold((e,n,r)=>{if(n&&yr(n))return[Ea(n)];{let i=[];return n&&(i=I0(n)),dt(r,(s,o)=>{i=i.concat(o)}),i}})}function Os(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(uw())(t._repo,t._path):t}function xw(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=ka(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function _w(){return dw++}function bw(t,e,n){const r=e._path,i=uo(t,e),s=O0(t,n),o=t.listenProvider_.startListening(Os(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)L(!yr(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((u,f,d)=>{if(!re(u)&&f&&yr(f))return[Ea(f).query];{let h=[];return f&&(h=h.concat(I0(f).map(x=>x.query))),dt(d,(x,v)=>{h=h.concat(v)}),h}});for(let u=0;u<c.length;++u){const f=c[u];t.listenProvider_.stopListening(Os(f),uo(t,f))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new vf(n)}node(){return this.node_}}class xf{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Be(this.path_,e);return new xf(this.syncTree_,n)}node(){return pf(this.syncTree_,this.path_)}}const Sw=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Bp=function(t,e,n){if(!t||typeof t!="object")return t;if(L(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return ww(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Cw(t[".sv"],e);L(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},ww=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:L(!1,"Unexpected server value: "+t)}},Cw=function(t,e,n){t.hasOwnProperty("increment")||L(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&L(!1,"Unexpected increment value: "+r);const i=e.node();if(L(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},B0=function(t,e,n,r){return _f(e,new xf(n,t),r)},z0=function(t,e,n){return _f(t,new vf(e),n)};function _f(t,e,n){const r=t.getPriority().val(),i=Bp(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=Bp(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new tt(a,Qe(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new tt(i))),o.forEachChild(ze,(a,c)=>{const u=_f(c,e.getImmediateChild(a),n);u!==c&&(s=s.updateImmediateChild(a,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Sf(t,e){let n=e instanceof ge?e:new ge(e),r=t,i=Z(n);for(;i!==null;){const s=$i(r.node.children,i)||{children:{},childCount:0};r=new bf(i,r,s),n=be(n),i=Z(n)}return r}function ts(t){return t.node.value}function L0(t,e){t.node.value=e,Gu(t)}function $0(t){return t.node.childCount>0}function Ew(t){return ts(t)===void 0&&!$0(t)}function Ta(t,e){dt(t.node.children,(n,r)=>{e(new bf(n,t,r))})}function W0(t,e,n,r){n&&!r&&e(t),Ta(t,i=>{W0(i,e,!0,r)}),n&&r&&e(t)}function kw(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Eo(t){return new ge(t.parent===null?t.name:Eo(t.parent)+"/"+t.name)}function Gu(t){t.parent!==null&&Tw(t.parent,t.name,t)}function Tw(t,e,n){const r=Ew(n),i=mn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Gu(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Gu(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw=/[\[\].#$\/\u0000-\u001F\u007F]/,jw=/[\[\].#$\u0000-\u001F\u007F]/,Rc=10*1024*1024,wf=function(t){return typeof t=="string"&&t.length!==0&&!Rw.test(t)},U0=function(t){return typeof t=="string"&&t.length!==0&&!jw.test(t)},Iw=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),U0(t)},Aw=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Kd(t)||t&&typeof t=="object"&&mn(t,".sv")},H0=function(t,e,n,r){r&&e===void 0||Ra(_a(t,"value"),e,n)},Ra=function(t,e,n){const r=n instanceof ge?new Q2(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Dr(r));if(typeof e=="function")throw new Error(t+"contains a function "+Dr(r)+" with contents = "+e.toString());if(Kd(e))throw new Error(t+"contains "+e.toString()+" "+Dr(r));if(typeof e=="string"&&e.length>Rc/3&&ba(e)>Rc)throw new Error(t+"contains a string greater than "+Rc+" utf8 bytes "+Dr(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(dt(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!wf(o)))throw new Error(t+" contains an invalid key ("+o+") "+Dr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);K2(r,o),Ra(t,a,r),q2(r)}),i&&s)throw new Error(t+' contains ".value" child '+Dr(r)+" in addition to actual children.")}},Nw=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=so(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!wf(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(G2);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Ut(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},Dw=function(t,e,n,r){if(r&&e===void 0)return;const i=_a(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];dt(e,(o,a)=>{const c=new ge(o);if(Ra(i,a,Be(n,c)),ef(c)===".priority"&&!Aw(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(c)}),Nw(i,s)},V0=function(t,e,n,r){if(!(r&&n===void 0)&&!U0(n))throw new Error(_a(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Pw=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),V0(t,e,n,r)},Y0=function(t,e){if(Z(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Fw=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!wf(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Iw(n))throw new Error(_a(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ja(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!tf(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function G0(t,e,n){ja(t,n),Q0(t,r=>tf(r,e))}function Qt(t,e,n){ja(t,n),Q0(t,r=>Ut(r,e)||Ut(e,r))}function Q0(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(Ow(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Ow(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Lr&&at("event: "+n.toString()),Zi(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw="repo_interrupt",zw=25;class Lw{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Mw,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ql(),this.transactionQueueTree_=new bf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function $w(t,e,n){if(t.stats_=Jd(t.repoInfo_),t.forceRestClient_||v2())t.server_=new Gl(t.repoInfo_,(r,i,s,o)=>{zp(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Lp(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ke(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new An(t.repoInfo_,e,(r,i,s,o)=>{zp(t,r,i,s,o)},r=>{Lp(t,r)},r=>{Ww(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=w2(t.repoInfo_,()=>new SS(t.stats_,t.server_)),t.infoData_=new yS,t.infoSyncTree_=new Op({startListening:(r,i,s,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Co(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Cf(t,"connected",!1),t.serverSyncTree_=new Op({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{const u=o(a,c);Qt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function K0(t){const n=t.infoData_.getNode(new ge(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Ia(t){return Sw({timestamp:K0(t)})}function zp(t,e,n,r,i){t.dataUpdateCount++;const s=new ge(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const c=$l(n,u=>Qe(u));o=gw(t.serverSyncTree_,s,c,i)}else{const c=Qe(n);o=P0(t.serverSyncTree_,s,c,i)}else if(r){const c=$l(n,u=>Qe(u));o=hw(t.serverSyncTree_,s,c)}else{const c=Qe(n);o=Co(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Yi(t,s)),Qt(t.eventQueue_,a,o)}function Lp(t,e){Cf(t,"connected",e),e===!1&&Yw(t)}function Ww(t,e){dt(e,(n,r)=>{Cf(t,n,r)})}function Cf(t,e,n){const r=new ge("/.info/"+e),i=Qe(n);t.infoData_.updateSnapshot(r,i);const s=Co(t.infoSyncTree_,r,i);Qt(t.eventQueue_,r,s)}function Ef(t){return t.nextWriteId_++}function Uw(t,e,n){const r=yw(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=Qe(i).withIndex(e._queryParams.getIndex());Yu(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Co(t.serverSyncTree_,e._path,s);else{const a=uo(t.serverSyncTree_,e);o=P0(t.serverSyncTree_,e._path,s,a)}return Qt(t.eventQueue_,e._path,o),na(t.serverSyncTree_,e,n,null,!0),s},i=>(ko(t,"get for query "+Ke(e)+" failed: "+i),Promise.reject(new Error(i))))}function Hw(t,e,n,r,i){ko(t,"set",{path:e.toString(),value:n,priority:r});const s=Ia(t),o=Qe(n,r),a=pf(t.serverSyncTree_,e),c=z0(o,a,s),u=Ef(t),f=D0(t.serverSyncTree_,e,c,u,!0);ja(t.eventQueue_,f),t.server_.put(e.toString(),o.val(!0),(h,x)=>{const v=h==="ok";v||_t("set at "+e+" failed: "+h);const S=Xn(t.serverSyncTree_,u,!v);Qt(t.eventQueue_,e,S),Qu(t,i,h,x)});const d=Tf(t,e);Yi(t,d),Qt(t.eventQueue_,d,[])}function Vw(t,e,n,r){ko(t,"update",{path:e.toString(),value:n});let i=!0;const s=Ia(t),o={};if(dt(n,(a,c)=>{i=!1,o[a]=B0(Be(e,a),Qe(c),t.serverSyncTree_,s)}),i)at("update() called with empty data.  Don't do anything."),Qu(t,r,"ok",void 0);else{const a=Ef(t),c=fw(t.serverSyncTree_,e,o,a);ja(t.eventQueue_,c),t.server_.merge(e.toString(),n,(u,f)=>{const d=u==="ok";d||_t("update at "+e+" failed: "+u);const h=Xn(t.serverSyncTree_,a,!d),x=h.length>0?Yi(t,e):e;Qt(t.eventQueue_,x,h),Qu(t,r,u,f)}),dt(n,u=>{const f=Tf(t,Be(e,u));Yi(t,f)}),Qt(t.eventQueue_,e,[])}}function Yw(t){ko(t,"onDisconnectEvents");const e=Ia(t),n=Ql();Lu(t.onDisconnect_,pe(),(i,s)=>{const o=B0(i,s,t.serverSyncTree_,e);v0(n,i,o)});let r=[];Lu(n,pe(),(i,s)=>{r=r.concat(Co(t.serverSyncTree_,i,s));const o=Tf(t,i);Yi(t,o)}),t.onDisconnect_=Ql(),Qt(t.eventQueue_,pe(),r)}function Gw(t,e,n){let r;Z(e._path)===".info"?r=Yu(t.infoSyncTree_,e,n):r=Yu(t.serverSyncTree_,e,n),G0(t.eventQueue_,e._path,r)}function $p(t,e,n){let r;Z(e._path)===".info"?r=na(t.infoSyncTree_,e,n):r=na(t.serverSyncTree_,e,n),G0(t.eventQueue_,e._path,r)}function Qw(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Bw)}function ko(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),at(n,...e)}function Qu(t,e,n,r){e&&Zi(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function q0(t,e,n){return pf(t.serverSyncTree_,e,n)||Q.EMPTY_NODE}function kf(t,e=t.transactionQueueTree_){if(e||Aa(t,e),ts(e)){const n=J0(t,e);L(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&Kw(t,Eo(e),n)}else $0(e)&&Ta(e,n=>{kf(t,n)})}function Kw(t,e,n){const r=n.map(u=>u.currentWriteId),i=q0(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const f=n[u];L(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const d=vt(e,f.path);s=s.updateChild(d,f.currentOutputSnapshotRaw)}const a=s.val(!0),c=e;t.server_.put(c.toString(),a,u=>{ko(t,"transaction put response",{path:c.toString(),status:u});let f=[];if(u==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,f=f.concat(Xn(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Aa(t,Sf(t.transactionQueueTree_,e)),kf(t,t.transactionQueueTree_),Qt(t.eventQueue_,e,f);for(let h=0;h<d.length;h++)Zi(d[h])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{_t("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}Yi(t,e)}},o)}function Yi(t,e){const n=X0(t,e),r=Eo(n),i=J0(t,n);return qw(t,i,r),r}function qw(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],u=vt(n,c.path);let f=!1,d;if(L(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)f=!0,d=c.abortReason,i=i.concat(Xn(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=zw)f=!0,d="maxretry",i=i.concat(Xn(t.serverSyncTree_,c.currentWriteId,!0));else{const h=q0(t,c.path,o);c.currentInputSnapshot=h;const x=e[a].update(h.val());if(x!==void 0){Ra("transaction failed: Data returned ",x,c.path);let v=Qe(x);typeof x=="object"&&x!=null&&mn(x,".priority")||(v=v.updatePriority(h.getPriority()));const E=c.currentWriteId,g=Ia(t),p=z0(v,h,g);c.currentOutputSnapshotRaw=v,c.currentOutputSnapshotResolved=p,c.currentWriteId=Ef(t),o.splice(o.indexOf(E),1),i=i.concat(D0(t.serverSyncTree_,c.path,p,c.currentWriteId,c.applyLocally)),i=i.concat(Xn(t.serverSyncTree_,E,!0))}else f=!0,d="nodata",i=i.concat(Xn(t.serverSyncTree_,c.currentWriteId,!0))}Qt(t.eventQueue_,n,i),i=[],f&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Aa(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Zi(r[a]);kf(t,t.transactionQueueTree_)}function X0(t,e){let n,r=t.transactionQueueTree_;for(n=Z(e);n!==null&&ts(r)===void 0;)r=Sf(r,n),e=be(e),n=Z(e);return r}function J0(t,e){const n=[];return Z0(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Z0(t,e,n){const r=ts(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Ta(e,i=>{Z0(t,i,n)})}function Aa(t,e){const n=ts(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,L0(e,n.length>0?n:void 0)}Ta(e,r=>{Aa(t,r)})}function Tf(t,e){const n=Eo(X0(t,e)),r=Sf(t.transactionQueueTree_,e);return kw(r,i=>{jc(t,i)}),jc(t,r),W0(r,i=>{jc(t,i)}),n}function jc(t,e){const n=ts(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(L(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(L(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Xn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?L0(e,void 0):n.length=s+1,Qt(t.eventQueue_,Eo(e),i);for(let o=0;o<r.length;o++)Zi(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function Jw(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):_t(`Invalid query segment '${n}' in query '${t}'`)}return e}const Wp=function(t,e){const n=Zw(t),r=n.namespace;n.domain==="firebase.com"&&On(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&On("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||c2();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new t0(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new ge(n.pathString)}},Zw=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let f=t.indexOf("/");f===-1&&(f=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(f,d)),f<d&&(i=Xw(t.substring(f,d)));const h=Jw(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const x=e.slice(0,u);if(x.toLowerCase()==="localhost")n="localhost";else if(x.split(".").length<=2)n=x;else{const v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",eC=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Up.charAt(n%64),n=Math.floor(n/64);L(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=Up.charAt(e[i]);return L(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ke(this.snapshot.exportVal())}}class ty{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return L(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return re(this._path)?null:ef(this._path)}get ref(){return new gn(this._repo,this._path)}get _queryIdentifier(){const e=Tp(this._queryParams),n=qd(e);return n==="{}"?"default":n}get _queryObject(){return Tp(this._queryParams)}isEqual(e){if(e=Jr(e),!(e instanceof Rf))return!1;const n=this._repo===e._repo,r=tf(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Y2(this._path)}}class gn extends Rf{constructor(e,n){super(e,n,new of,!1)}get parent(){const e=u0(this._path);return e===null?null:new gn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Gi{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ge(e),r=Qi(this.ref,e);return new Gi(this._node.getChild(n),r,ze)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Gi(i,Qi(this.ref,r),ze)))}hasChild(e){const n=new ge(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function P(t,e){return t=Jr(t),t._checkNotDeleted("ref"),e!==void 0?Qi(t._root,e):t._root}function Qi(t,e){return t=Jr(t),Z(t._path)===null?Pw("child","path",e,!1):V0("child","path",e,!1),new gn(t._repo,Be(t._path,e))}function tC(t,e){t=Jr(t),Y0("push",t._path),H0("push",e,t._path,!0);const n=K0(t._repo),r=eC(n),i=Qi(t,r),s=Qi(t,r);let o;return e!=null?o=V(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function V(t,e){t=Jr(t),Y0("set",t._path),H0("set",e,t._path,!1);const n=new xo;return Hw(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Sr(t,e){Dw("update",e,t._path,!1);const n=new xo;return Vw(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function ue(t){t=Jr(t);const e=new ny(()=>{}),n=new Na(e);return Uw(t._repo,t,n).then(r=>new Gi(r,new gn(t._repo,t._path),t._queryParams.getIndex()))}class Na{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new ey("value",this,new Gi(e.snapshotNode,new gn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new ty(this,e,n):null}matches(e){return e instanceof Na?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class jf{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new ty(this,e,n):null}createEvent(e,n){L(e.childName!=null,"Child events should have a childName.");const r=Qi(new gn(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new ey(e.type,this,new Gi(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof jf?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function nC(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const c=n,u=(f,d)=>{$p(t._repo,t,a),c(f,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new ny(n,s||void 0),a=e==="value"?new Na(o):new jf(e,o);return Gw(t._repo,t,a),()=>$p(t._repo,t,a)}function we(t,e,n,r){return nC(t,"value",e,n,r)}iw(gn);cw(gn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="FIREBASE_DATABASE_EMULATOR_HOST",Ku={};let iC=!1;function sC(t,e,n,r){t.repoInfo_=new t0(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function oC(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||On("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),at("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Wp(s,i),a=o.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[rC]),u?(c=!0,s=`http://${u}?ns=${a.namespace}`,o=Wp(s,i),a=o.repoInfo):c=!o.repoInfo.secure;const f=i&&c?new Ni(Ni.OWNER):new _2(t.name,t.options,e);Fw("Invalid Firebase Database URL",o),re(o.path)||On("Database URL must point to the root of a Firebase Database (not including a child path).");const d=aC(a,t,f,new x2(t.name,n));return new cC(d,t)}function lC(t,e){const n=Ku[e];(!n||n[t.key]!==t)&&On(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Qw(t),delete n[t.key]}function aC(t,e,n,r){let i=Ku[e.name];i||(i={},Ku[e.name]=i);let s=i[t.toURLString()];return s&&On("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Lw(t,iC,n,r),i[t.toURLString()]=s,s}class cC{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||($w(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new gn(this._repo,pe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(lC(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&On("Cannot call "+e+" on a deleted database.")}}function te(t=Yb(),e){const n=Wb(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=N_("database");r&&uC(n,...r)}return n}function uC(t,e,n,r={}){t=Jr(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&On("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&On('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ni(Ni.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:D_(r.mockUserToken,t.app.options.projectId);s=new Ni(o)}sC(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(t){i2(Vb),Ul(new no("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return oC(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Ii(up,dp,t),Ii(up,dp,"esm2017")}An.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};An.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};dC();const fC={apiKey:"AIzaSyAy9IN9Bgsh3vVq7LuFJa8Br3e2L8CoH8A",authDomain:"biblecrew-e14f3.firebaseapp.com",databaseURL:"https://biblecrew-e14f3-default-rtdb.firebaseio.com",projectId:"biblecrew-e14f3",storageBucket:"biblecrew-e14f3.firebasestorage.app",messagingSenderId:"73733314471",appId:"1:73733314471:web:6fe6fc704e61df1b7ac882",...{}.VITE_FIREBASE_MEASUREMENT_ID?{measurementId:{}.VITE_FIREBASE_MEASUREMENT_ID}:{}},hC=B1(fC),ie=te(hC),If=[{crewKey:"",label:"(40)"},{crewKey:"",label:"(30)"},{crewKey:"(A)",label:"A(15)"},{crewKey:"(B)",label:"B(15)"},{crewKey:"",label:"(9)"},{crewKey:"",label:"(9)"},{crewKey:"",label:"(5)"}],he=If.map(t=>t.crewKey);function Ye(t){const e=If.find(n=>n.crewKey===t);return e?e.label:t}function pC(t){const e=P(ie,"classNotices");return we(e,r=>t(r.val()||{}))}async function mC(t){if(!t)return null;const e=te();return(await ue(P(e,`classNotices/${t}`))).val()||null}async function gC(t,e){if(!t||!e)return 0;const n=te(),i=(await ue(P(n,`users/${t}/seenNotices/${e}`))).val();return typeof i=="number"?i:parseInt(i||"0",10)||0}async function yC(t,e,n){if(!t||!e)return!1;const r=typeof n=="number"?n:parseInt(n||"0",10)||0,i=te();return await V(P(i,`users/${t}/seenNotices/${e}`),r),!0}async function vC(t,e){if(!t)return!1;const n=te(),r=!!(e!=null&&e.enabled),i=((e==null?void 0:e.content)||"").toString(),s=((e==null?void 0:e.title)||"").toString(),o=Date.now();if(t==="all"){const c=(await ue(P(n,"classNotices/all"))).val()||{},u=(parseInt(c.version||"0",10)||0)+1,f={enabled:r,title:s,content:i,version:u,updatedAt:o},d={};d["classNotices/all"]=f;for(const h of he){const v=(await ue(P(n,`classNotices/${h}`))).val()||{},S=(parseInt(v.version||"0",10)||0)+1;d[`classNotices/${h}`]={enabled:r,title:s,content:i,version:S,updatedAt:o}}return await Sr(P(n),d),f}else{const c=(await ue(P(n,`classNotices/${t}`))).val()||{},u=(parseInt(c.version||"0",10)||0)+1,f={enabled:r,title:s,content:i,version:u,updatedAt:o};return await V(P(n,`classNotices/${t}`),f),f}}function ry(t,e,n){const r=P(ie,`crews/${t}/users/${e}/checks`);return we(r,s=>n(s.val()||{}))}function xC(t,e){if(!t)return()=>{};const n=P(ie,`crews/${t}`);return we(n,i=>e(i.val()||{}))}function iy(t,e,n,r){const i=P(ie,`crews/${t}/users/${e}/checks/${n}`);return V(i,r)}function Hp(t,e,n){const r=P(ie,`crews/${t}/users/${e}/checks`);return we(r,s=>n(s.val()||{}))}function Da(t){const e=P(ie,"users");return we(e,r=>t(r.val()||{}))}function _C(t,e){const n=P(ie,`users/${t}/crew`),r=P(ie,`users/${t}/hiddenUnassigned`),i=P(ie,`users/${t}/status`);return Promise.all([V(n,e),V(r,!1),V(i,"active")])}function bC(t){const e=P(ie,`users/${t}/crew`),n=P(ie,`users/${t}/hiddenUnassigned`),r=P(ie,`users/${t}/status`);return Promise.all([V(e,null),V(n,!1),ue(r).then(i=>i.val()==="inactive"?!0:V(r,"active"))])}async function SC(t){const e=te(),n=P(e,`users/${t}`),s={...(await ue(n)).val()||{},crew:null,hiddenUnassigned:!1,status:"inactive",deactivatedAt:Date.now()};return await V(n,s),{uid:t,...s}}async function wC(t){const e=te(),n=P(e,`users/${t}`),s={...(await ue(n)).val()||{},hiddenUnassigned:!1,status:"active",restoredAt:Date.now()};return await V(n,s),{uid:t,...s}}async function CC(t){const e=te(),n=[];return n.push(V(P(e,`users/${t}`),null)),he.forEach(r=>{n.push(V(P(e,`crews/${r}/users/${t}`),null))}),n.push(V(P(e,`userBookmarks/${t}`),null)),await Promise.all(n),!0}function EC(t,e){const n=P(ie,`comments/${t}`),r=tC(n);return V(r,e)}function kC(t,e,n){if(!t||!e)return Promise.resolve(!1);const r=P(ie,`comments/${t}/${e}`);return Sr(r,n||{})}function TC(t,e){if(!t||!e)return Promise.resolve(!1);const n=P(ie,`comments/${t}/${e}`);return V(n,null)}function RC(t){if(!t)return Promise.resolve(!1);const e=P(ie,`comments/${t}`);return V(e,null)}function jC(t,e){const n=P(ie,`comments/${t}`);return we(n,i=>{const s=i.val()||{},o=Object.entries(s).map(([a,c])=>({id:a,...c}));o.sort((a,c)=>(c.timestamp||0)-(a.timestamp||0)),e(o.slice(0,300))})}function IC(t){const e=P(ie,"comments");return we(e,r=>{const i=r.val()||{},s=[];Object.entries(i).forEach(([o,a])=>{Object.entries(a||{}).forEach(([c,u])=>{s.push({id:`${o}_${c}`,crew:o,...u})})}),s.sort((o,a)=>(a.timestamp||0)-(o.timestamp||0)),t(s.slice(0,500))})}async function AC(t=3){const e=Math.max(1,Number(t)||3),n=Date.now()-e*24*60*60*1e3,r=te(),s=(await ue(P(r,"comments"))).val()||{},o={};return Object.entries(s).forEach(([a,c])=>{Object.entries(c||{}).forEach(([u,f])=>{const d=f&&f.timestamp||0;d&&d<n&&(o[`comments/${a}/${u}`]=null)})}),Object.keys(o).length===0?{deleted:0}:(await Sr(P(r),o),{deleted:Object.keys(o).length})}function NC(){const t=P(ie,"comments");return V(t,null)}function sy(t){const e=P(ie,"crews");return we(e,r=>t(r.val()||{}))}function DC(t,e){if(!t)return()=>{};const n=P(ie,`hallOfFame/${t}`);return we(n,i=>e(i.val()||{}))}function oy(t,e){if(!t)return()=>{};const n=P(ie,`hallOfFame/monthly/${t}`);return we(n,i=>e(i.val()||{}))}function PC(t,e){return oy(t,e)}async function ly(t,e,n,r=[]){const i=te(),s=String(e).padStart(2,"0"),o=`${t}-${s}`,a={gold:[],silver:[],bronze:[]},c={gold:{},silver:{},bronze:{}},u=[];for(const f of n||[]){if(!f.medal||!f.uid)continue;const d=f.medal,h=f.name||"",x=f.crew||"";a[d].push({name:h,crew:x}),c[d][f.uid]={name:h,crew:x,chapters:f.chapters||0};const v=`${o}_${x}`,S=P(i,`users/${f.uid}/earnedMedals/${v}`),E=P(i,`users/${f.uid}/medals/${d}`),p=(await ue(S)).val();if(p!==d)if(p&&p!==d){const y=P(i,`users/${f.uid}/medals/${p}`);u.push((async()=>{const b=await ue(y),k=await ue(E);await V(y,Math.max(0,(b.val()||0)-1)),await V(E,(k.val()||0)+1),await V(S,d)})())}else u.push((async()=>{const y=await ue(E);await V(E,(y.val()||0)+1),await V(S,d)})())}for(const f of["gold","silver","bronze"])u.push(V(P(i,`hallOfFame/${t}/monthlyResults/${s}/${f}`),a[f]));return u.push(V(P(i,`hallOfFame/${t}/monthlyResults/${s}/dokAchievers`),r)),u.push(V(P(i,`hallOfFame/monthly/${t}/${e}`),c)),await Promise.all(u),!0}async function FC(t,e,n,r,i){if(!t||!e||!n||!i)return!1;const s=te(),o=String(e).padStart(2,"0"),a=`${t}-${o}`,c=`${a}_${i}`,u=P(s,`monthlyReports/${a}`),d=(await ue(u)).val()||null,h=P(s,`hallOfFame/monthly/${t}/${e}`),v=(await ue(h)).val()||{gold:{},silver:{},bronze:{}},S=P(s,`hallOfFame/${t}/monthlyResults/${o}`),g=(await ue(S)).val()||{gold:[],silver:[],bronze:[]},p=["gold","silver","bronze"],y=P(s,`users/${n}/earnedMedals/${c}`),k=(await ue(y)).val();let w=n;const j=(await ue(P(s,`users/${n}`))).val()||{};w=j.name||n,p.forEach(I=>{v[I]&&v[I][n]&&v[I][n].crew===i&&delete v[I][n],Array.isArray(g[I])&&(g[I]=g[I].filter(M=>{const A=typeof M=="object"?M.name:M,H=typeof M=="object"?M.crew:"";return!(A===w&&H===i)}))}),r&&r!=="none"&&(v[r]||(v[r]={}),v[r][n]={name:w,crew:i,chapters:0},Array.isArray(g[r])||(g[r]=[]),g[r].push({name:w,crew:i}));const N=[];if(k&&p.includes(k)){const I=P(s,`users/${n}/medals/${k}`);N.push(ue(I).then(M=>{const A=M.val()||0;return V(I,Math.max(0,A-1))}))}if(r&&r!=="none"&&p.includes(r)){const I=P(s,`users/${n}/medals/${r}`);N.push(ue(I).then(M=>{const A=M.val()||0;return V(I,A+1)})),N.push(V(y,r))}else r==="none"&&N.push(V(y,null));if(N.push(V(h,v)),N.push(V(S,g)),d&&d[n]){const I=r&&r!=="none",M={...d[n],stateLabel:I?"":""};if(j.medals){const A={...j.medals};k&&A[k]>0&&A[k]--,I&&(A[r]=(A[r]||0)+1),M.totalMedals=(A.gold||0)+(A.silver||0)+(A.bronze||0)}N.push(V(P(s,`monthlyReports/${a}/${n}`),M))}return await Promise.all(N),!0}function ay(){const t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0");return`${e}-${n}`}function To(){const t=new Date;let e=t.getFullYear(),n=t.getMonth()+2;n>12&&(e+=1,n=1);const r=String(n).padStart(2,"0");return`${e}-${r}`}function qu(t,e,n){const r=P(ie,`approvals/${e}/${t}`);return we(r,s=>{n(s.val()||{})})}function Jn(t){return(t||"").toString().trim().replace(/^[,\s]+/,"").replace(/\s+/g,"")}async function MC(t,e,n){if(!n||n.length===0)return;const r=te(),i={};return n.forEach(s=>{const o=Jn(s.name);o&&(i[`approvals/${e}/${t}/${o}`]=!0,s.uid&&(i[`applicationHistory/${e}/${s.uid}/${t}`]={name:s.name,crew:t,ymKey:e,createdAt:Date.now(),method:"manual_approval_immediate"},i[`users/${s.uid}/crew`]=t,i[`users/${s.uid}/hiddenUnassigned`]=!1,i[`users/${s.uid}/status`]="active"))}),Sr(P(r),i)}function OC(t,e){const n=P(ie,`approvals/${e}/${t}`);return V(n,null)}function BC(t,e,n,r){const i=P(ie,`approvals/${e}/${t}/${n}`);return we(i,o=>{r(!!o.val())})}async function zC(t,e){if(!t||!/^[-a-zA-Z]+$/.test(t)){const d=new Error("     . (, ,  )");throw d.code="INVALID_NAME",d}const r=te(),i=t,s=P(r,`users/${i}`);let a=(await ue(s)).val();const c=e!=null?String(e):"",u=c.trim();if(!a){if(!u){const h=new Error("     .");throw h.code="EMPTY_PASSWORD",h}const d={name:t,password:u,crew:null,status:"active",isAdmin:!1,hiddenUnassigned:!1,mustChangePassword:!1,createdAt:Date.now()};return await V(s,d),{uid:i,...d}}const f=!!a.isAdmin;if(a.password){if(a.password!==c&&a.password!==u){const d=new Error("  .");throw d.code="WRONG_PASSWORD",d}}else{if(!u){const d=new Error("  .");throw d.code="EMPTY_PASSWORD",d}a.password=u,a.mustChangePassword=!1,await V(s,a)}return{uid:i,isAdmin:f,...a}}async function LC(t){const e=te(),n=P(e,`users/${t}`),s={...(await ue(n)).val()||{},password:"0000",mustChangePassword:!0};return await V(n,s),{uid:t,...s}}async function $C(t,e){const n=te(),r=P(n,`users/${t}`),o={...(await ue(r)).val()||{},password:e,mustChangePassword:!1};return await V(r,o),{uid:t,...o}}const WC="8395";async function UC(t){if(t===WC)return{ok:!0,usedMaster:!0};const e=te(),n=P(e,"/admin/password"),s=(await ue(n)).val()||"1234";if(t===s)return{ok:!0,usedMaster:!1};const o=new Error("   .");throw o.code="WRONG_ADMIN_PASSWORD",o}async function HC(t){const e=te(),n=P(e,"/admin/password");return await V(n,t),!0}async function VC(t,e){if(!t)return!1;const n=te();return await Sr(P(n,`users/${t}`),{isAdmin:!!e}),!0}async function YC(t,e,n){if(!(!t||!e))return await Af(e,null),cy(t,e,n)}function cy(t,e,n){if(!t||!e)return Promise.resolve();const r=te(),i=To(),s={name:n||"",crew:t,ymKey:i,createdAt:Date.now()},o=P(r,`/nextMonthApplications/${i}/${t}/${e}`),a=P(r,`/nextMonthApplicationsByUser/${i}/${e}/${t}`),c=P(r,`/applicationHistory/${i}/${e}/${t}`),u=Jn(n),f=P(r,`/approvals/${i}/${t}/${u}`);return Promise.all([V(o,s),V(a,s),V(c,s),u?V(f,!0):Promise.resolve()])}function GC(t,e){if(!t)return e(null),()=>{};const n=te(),r=To(),i=P(n,`/nextMonthApplicationsByUser/${r}/${t}`);return we(i,s=>{e(s.val()||null)})}function Af(t,e=null){if(!t)return Promise.resolve();const n=te(),r=To();if(e){const s=P(n,`/nextMonthApplications/${r}/${e}/${t}`),o=P(n,`/nextMonthApplicationsByUser/${r}/${t}/${e}`),a=P(n,`/applicationHistory/${r}/${t}/${e}`);return ue(o).then(c=>{const u=c.val(),f=u?u.name:"",d=Jn(f),h=P(n,`/approvals/${r}/${e}/${d}`);return Promise.all([V(s,null),V(o,null),V(a,null),d?V(h,null):Promise.resolve()])})}const i=P(n,`/nextMonthApplicationsByUser/${r}/${t}`);return ue(i).then(s=>{const o=s.val()||{},a=[];return a.push(V(i,null)),Object.keys(o).forEach(c=>{const u=P(n,`/nextMonthApplications/${r}/${c}/${t}`),f=P(n,`/applicationHistory/${r}/${t}/${c}`),d=o[c]?o[c].name:"",h=Jn(d);if(h){const x=P(n,`/approvals/${r}/${c}/${h}`);a.push(V(x,null))}a.push(V(u,null)),a.push(V(f,null))}),Promise.all(a)})}function QC(t){const e=te(),n=To(),r=P(e,`/nextMonthApplications/${n}`);return we(r,i=>{t(i.val()||{})})}async function KC(t,e){const n=te(),r={},i=Date.now();for(const[s,o]of Object.entries(e))!o||!Array.isArray(o)||o.forEach(a=>{r[`users/${a}/crew`]=s,r[`users/${a}/hiddenUnassigned`]=!1,r[`users/${a}/status`]="active"});return r[`applicationHistory/${t}/snapshot`]=e,r[`applicationHistory/${t}/appliedAt`]=i,await Sr(P(n),r),!0}function qC(t,e){const n=te(),r=P(n,`/applicationHistory/${t}/appliedAt`);return we(r,i=>e(i.val()||null))}async function Vp(t){const e=te();return(await ue(P(e,`/applicationHistory/${t}/snapshot`))).val()||{}}function uy(t){const e=te(),n=P(e,"/notice");return we(n,r=>t(r.val()||null))}function XC(t,e){const n=te(),r=P(n,"/notice"),i={title:t||"",content:e||"",timestamp:Date.now()};return V(r,i)}function JC(t,e){if(!t)return e({}),()=>{};const n=te(),r=P(n,`/users/${t}/medals`);return we(r,i=>{e(i.val()||{})})}function ZC(t,e){const n=te();return V(P(n,`/settings/approval/${t}`),e)}function eE(t){const e=te(),n=P(e,"/settings/approval");return we(n,r=>t(r.val()||{}))}function Nf(t){const e=te(),n=P(e,"/settings");return we(n,r=>t(r.val()||{}))}function tE(t){const e=te();return V(P(e,"/settings/churchName"),t)}function nE(t){const e=te();return V(P(e,"/settings/appDescription"),t)}function rE(t){const e=te();return V(P(e,"/settings/bulletinUrl"),t||"")}function iE(t,e){if(!t)return Promise.resolve();const n=P(ie,`userBookmarks/${t}`);return V(n,{bookId:e.bookId,chapter:e.chapter,updatedAt:Date.now()})}function sE(t,e){if(!t)return e(null),()=>{};const n=P(ie,`userBookmarks/${t}`),r=we(n,i=>{e(i.val()||null)},i=>e(null));return()=>r()}async function oE(t,e,n){const r=te(),i=P(r,`monthlyReports/${t}-${String(e).padStart(2,"0")}`);return await V(i,n),!0}async function Yp(){const t=te(),e=P(t,"monthlyReports"),r=(await ue(e)).val()||{};return Object.keys(r).sort().reverse()}function lE(t,e){const n=new Date(t,e,0).getDate(),r=[];for(let i=1;i<=n;i++)r.push(`${t}-${String(e).padStart(2,"0")}-${String(i).padStart(2,"0")}`);return r}async function aE(){console.log("---  [ ] /     (Fix) ---");const t=te(),e=2026,n=[1,2];console.log(" [1/4]    ...");const r=P(t,"users"),s=(await ue(r)).val()||{},o=Object.keys(s);console.log(`    ${o.length} `);const a={},c={},u={};function f(h){const x=Object.entries(h||{}).map(([b,k])=>({crew:b.split("_")[1],medal:k,key:b}));let v=0,S=0,E={otA:0,otB:0,nt:0};x.forEach(b=>{var k;b.crew===""?v++:b.crew===""?S++:b.crew==="(A)"?E.otA++:b.crew==="(B)"?E.otB++:((k=b.crew)!=null&&k.includes("")||b.crew==="")&&E.nt++});let g=v;const p=Math.min(S,E.nt);g+=p;const y=E.nt-p;return g+=Math.min(E.otA,E.otB,y),g}o.forEach(h=>{a[h]={},c[h]={gold:0,silver:0,bronze:0}}),console.log(`
 [2/4] (checks)     ...`);for(const h of n){const x=String(h).padStart(2,"0"),v=`${e}-${x}`;u[v]={gold:[],silver:[],bronze:[],dokAchievers:[]};const S=P(t,`approvals/${v}`),g=(await ue(S)).val()||{};for(const p of o)for(const y of he){if(!g[y]||!g[y][p])continue;const b=P(t,`crews/${y}/users/${p}/checks`),w=(await ue(b)).val()||{};if(lE(e,h).every(N=>w[N])){let N="bronze";y===""?N="gold":y===""&&(N="silver");const I=`${v}_${y}`;a[p][I]=N,c[p][N]++;const M=s[p];u[v][N].push({name:M.name||"",crew:y})}}}console.log(`
 [3/4] DB   ...`);const d={};for(const h of o){const x=Object.keys(a[h]).length>0?a[h]:null;d[`users/${h}/earnedMedals`]=x,d[`users/${h}/medals`]=c[h]}for(const h of n){const x=String(h).padStart(2,"0"),v=`${e}-${x}`,S=u[v];d[`hallOfFame/${e}/monthlyResults/${x}/gold`]=S.gold,d[`hallOfFame/${e}/monthlyResults/${x}/silver`]=S.silver,d[`hallOfFame/${e}/monthlyResults/${x}/bronze`]=S.bronze;const E=[],g=new Set([...S.gold.map(y=>y.name),...S.silver.map(y=>y.name),...S.bronze.map(y=>y.name)]),p={};Object.entries(s).forEach(([y,b])=>p[b.name]=y),g.forEach(y=>{const b=p[y];if(!b)return;const k=f(a[b]),w={};Object.entries(a[b]).forEach(([j,N])=>{const[I]=j.split("_");I<v&&(w[j]=N)});const C=f(w);k>C&&E.push({name:y,dokCount:k})}),d[`hallOfFame/${e}/monthlyResults/${x}/dokAchievers`]=E}return await Sr(P(t),d),console.log(" [4/4]  !   .")," []    ."}/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fo(){return fo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fo.apply(this,arguments)}var Zn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Zn||(Zn={}));const Gp="popstate";function cE(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:c=""}=ti(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Xu("",{pathname:o,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let c=i.location.href,u=c.indexOf("#");a=u===-1?c:c.slice(0,u)}return a+"#"+(typeof s=="string"?s:dy(s))}function r(i,s){Pa(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return dE(e,n,r,t)}function Xe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Pa(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uE(){return Math.random().toString(36).substr(2,8)}function Qp(t,e){return{usr:t.state,key:t.key,idx:e}}function Xu(t,e,n,r){return n===void 0&&(n=null),fo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ti(e):e,{state:n,key:e&&e.key||r||uE()})}function dy(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ti(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function dE(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Zn.Pop,c=null,u=f();u==null&&(u=0,o.replaceState(fo({},o.state,{idx:u}),""));function f(){return(o.state||{idx:null}).idx}function d(){a=Zn.Pop;let E=f(),g=E==null?null:E-u;u=E,c&&c({action:a,location:S.location,delta:g})}function h(E,g){a=Zn.Push;let p=Xu(S.location,E,g);n&&n(p,E),u=f()+1;let y=Qp(p,u),b=S.createHref(p);try{o.pushState(y,"",b)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(b)}s&&c&&c({action:a,location:S.location,delta:1})}function x(E,g){a=Zn.Replace;let p=Xu(S.location,E,g);n&&n(p,E),u=f();let y=Qp(p,u),b=S.createHref(p);o.replaceState(y,"",b),s&&c&&c({action:a,location:S.location,delta:0})}function v(E){let g=i.location.origin!=="null"?i.location.origin:i.location.href,p=typeof E=="string"?E:dy(E);return p=p.replace(/ $/,"%20"),Xe(g,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,g)}let S={get action(){return a},get location(){return t(i,o)},listen(E){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Gp,d),c=E,()=>{i.removeEventListener(Gp,d),c=null}},createHref(E){return e(i,E)},createURL:v,encodeLocation(E){let g=v(E);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:x,go(E){return o.go(E)}};return S}var Kp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Kp||(Kp={}));function fE(t,e,n){return n===void 0&&(n="/"),hE(t,e,n,!1)}function hE(t,e,n,r){let i=typeof e=="string"?ti(e):e,s=py(i.pathname||"/",n);if(s==null)return null;let o=fy(t);pE(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=EE(s);a=wE(o[c],u,r)}return a}function fy(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let c={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Xe(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=$r([r,c.relativePath]),f=n.concat(c);s.children&&s.children.length>0&&(Xe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),fy(s.children,e,f,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:bE(u,s.index),routesMeta:f})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let c of hy(s.path))i(s,o,c)}),e}function hy(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=hy(r.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function pE(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:SE(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const mE=/^:[\w-]+$/,gE=3,yE=2,vE=1,xE=10,_E=-2,qp=t=>t==="*";function bE(t,e){let n=t.split("/"),r=n.length;return n.some(qp)&&(r+=_E),e&&(r+=yE),n.filter(i=>!qp(i)).reduce((i,s)=>i+(mE.test(s)?gE:s===""?vE:xE),r)}function SE(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function wE(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",d=Xp({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),h=c.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=Xp({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:$r([s,d.pathname]),pathnameBase:NE($r([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=$r([s,d.pathnameBase]))}return o}function Xp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=CE(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,f,d)=>{let{paramName:h,isOptional:x}=f;if(h==="*"){let S=a[d]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const v=a[d];return x&&!v?u[h]=void 0:u[h]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function CE(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Pa(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function EE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Pa(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function py(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const kE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TE=t=>kE.test(t);function RE(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ti(t):t,s;if(n)if(TE(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Pa(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=Jp(n.substring(1),"/"):s=Jp(n,e)}else s=e;return{pathname:s,search:DE(r),hash:PE(i)}}function Jp(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ic(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function IE(t,e){let n=jE(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function AE(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ti(t):(i=fo({},t),Xe(!i.pathname||!i.pathname.includes("?"),Ic("?","pathname","search",i)),Xe(!i.pathname||!i.pathname.includes("#"),Ic("#","pathname","hash",i)),Xe(!i.search||!i.search.includes("#"),Ic("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=RE(i,a),u=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const $r=t=>t.join("/").replace(/\/\/+/g,"/"),NE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),DE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,PE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function FE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const my=["post","put","patch","delete"];new Set(my);const ME=["get",...my];new Set(ME);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ho(){return ho=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ho.apply(this,arguments)}const Df=_.createContext(null),OE=_.createContext(null),Fa=_.createContext(null),Ma=_.createContext(null),ns=_.createContext({outlet:null,matches:[],isDataRoute:!1}),gy=_.createContext(null);function Oa(){return _.useContext(Ma)!=null}function Pf(){return Oa()||Xe(!1),_.useContext(Ma).location}function yy(t){_.useContext(Fa).static||_.useLayoutEffect(t)}function yn(){let{isDataRoute:t}=_.useContext(ns);return t?qE():BE()}function BE(){Oa()||Xe(!1);let t=_.useContext(Df),{basename:e,future:n,navigator:r}=_.useContext(Fa),{matches:i}=_.useContext(ns),{pathname:s}=Pf(),o=JSON.stringify(IE(i,n.v7_relativeSplatPath)),a=_.useRef(!1);return yy(()=>{a.current=!0}),_.useCallback(function(u,f){if(f===void 0&&(f={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let d=AE(u,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:$r([e,d.pathname])),(f.replace?r.replace:r.push)(d,f.state,f)},[e,r,o,s,t])}function zE(t,e){return LE(t,e)}function LE(t,e,n,r){Oa()||Xe(!1);let{navigator:i}=_.useContext(Fa),{matches:s}=_.useContext(ns),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Pf(),f;if(e){var d;let E=typeof e=="string"?ti(e):e;c==="/"||(d=E.pathname)!=null&&d.startsWith(c)||Xe(!1),f=E}else f=u;let h=f.pathname||"/",x=h;if(c!=="/"){let E=c.replace(/^\//,"").split("/");x="/"+h.replace(/^\//,"").split("/").slice(E.length).join("/")}let v=fE(t,{pathname:x}),S=VE(v&&v.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:$r([c,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?c:$r([c,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),s,n,r);return e&&S?_.createElement(Ma.Provider,{value:{location:ho({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Zn.Pop}},S):S}function $E(){let t=KE(),e=FE(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:i},n):null,s)}const WE=_.createElement($E,null);class UE extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(ns.Provider,{value:this.props.routeContext},_.createElement(gy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HE(t){let{routeContext:e,match:n,children:r}=t,i=_.useContext(Df);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(ns.Provider,{value:e},r)}function VE(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let f=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);f>=0||Xe(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let d=o[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=f),d.route.id){let{loaderData:h,errors:x}=n,v=d.route.loader&&h[d.route.id]===void 0&&(!x||x[d.route.id]===void 0);if(d.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((f,d,h)=>{let x,v=!1,S=null,E=null;n&&(x=a&&d.route.id?a[d.route.id]:void 0,S=d.route.errorElement||WE,c&&(u<0&&h===0?(XE("route-fallback",!1),v=!0,E=null):u===h&&(v=!0,E=d.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,h+1)),p=()=>{let y;return x?y=S:v?y=E:d.route.Component?y=_.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=f,_.createElement(HE,{match:d,routeContext:{outlet:f,matches:g,isDataRoute:n!=null},children:y})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?_.createElement(UE,{location:n.location,revalidation:n.revalidation,component:S,error:x,children:p(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):p()},null)}var vy=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(vy||{}),ra=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ra||{});function YE(t){let e=_.useContext(Df);return e||Xe(!1),e}function GE(t){let e=_.useContext(OE);return e||Xe(!1),e}function QE(t){let e=_.useContext(ns);return e||Xe(!1),e}function xy(t){let e=QE(),n=e.matches[e.matches.length-1];return n.route.id||Xe(!1),n.route.id}function KE(){var t;let e=_.useContext(gy),n=GE(ra.UseRouteError),r=xy(ra.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function qE(){let{router:t}=YE(vy.UseNavigateStable),e=xy(ra.UseNavigateStable),n=_.useRef(!1);return yy(()=>{n.current=!0}),_.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ho({fromRouteId:e},s)))},[t,e])}const Zp={};function XE(t,e,n){!e&&!Zp[t]&&(Zp[t]=!0)}function JE(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function We(t){Xe(!1)}function ZE(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Zn.Pop,navigator:s,static:o=!1,future:a}=t;Oa()&&Xe(!1);let c=e.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:c,navigator:s,static:o,future:ho({v7_relativeSplatPath:!1},a)}),[c,a,s,o]);typeof r=="string"&&(r=ti(r));let{pathname:f="/",search:d="",hash:h="",state:x=null,key:v="default"}=r,S=_.useMemo(()=>{let E=py(f,c);return E==null?null:{location:{pathname:E,search:d,hash:h,state:x,key:v},navigationType:i}},[c,f,d,h,x,v,i]);return S==null?null:_.createElement(Fa.Provider,{value:u},_.createElement(Ma.Provider,{children:n,value:S}))}function ek(t){let{children:e,location:n}=t;return zE(Ju(e),n)}new Promise(()=>{});function Ju(t,e){e===void 0&&(e=[]);let n=[];return _.Children.forEach(t,(r,i)=>{if(!_.isValidElement(r))return;let s=[...e,i];if(r.type===_.Fragment){n.push.apply(n,Ju(r.props.children,s));return}r.type!==We&&Xe(!1),!r.props.index||!r.props.children||Xe(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ju(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const tk="6";try{window.__reactRouterVersion=tk}catch{}const nk="startTransition",em=dv[nk];function rk(t){let{basename:e,children:n,future:r,window:i}=t,s=_.useRef();s.current==null&&(s.current=cE({window:i,v5Compat:!0}));let o=s.current,[a,c]=_.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},f=_.useCallback(d=>{u&&em?em(()=>c(d)):c(d)},[c,u]);return _.useLayoutEffect(()=>o.listen(f),[o,f]),_.useEffect(()=>JE(r),[r]),_.createElement(ZE,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var tm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(tm||(tm={}));var nm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(nm||(nm={}));function er(t={}){const e={:0,:0,"(A)":0,"(B)":0,:0};Object.keys(t).forEach(s=>{const o=s.split("_");if(o.length<2)return;const a=o[1];e.hasOwnProperty(a)&&e[a]++});let n=0,r={...e};for(;r.>0;)n++,r.--;for(;r.>0&&r.>0;)n++,r.--,r.--;for(;r["(A)"]>0&&r["(B)"]>0&&r.>0;)n++,r["(A)"]--,r["(B)"]--,r.--;const i=Object.entries(r).filter(([s,o])=>o>0).map(([s,o])=>({name:s,count:o}));return{totalDok:n,fragments:i,remaining:r}}function ik({user:t}){const e=yn(),[n,r]=_.useState([]),[i,s]=_.useState(!1),[o,a]=_.useState(null);_.useEffect(()=>{const N=IC(r),I=uy(a);return()=>{typeof N=="function"&&N(),typeof I=="function"&&I()}},[]);const c=(n||[]).slice(0,20),u=new Date;u.setHours(0,0,0,0);const f=u.getTime(),d=(n||[]).filter(N=>(N.timestamp||0)>=f),h=i?d:c,x=(t==null?void 0:t.name)||"",[v,S]=_.useState(!1),[E,g]=_.useState(""),[p,y]=_.useState(null);_.useEffect(()=>{if(!t||!t.uid)return;const N=GC(t.uid,I=>{y(I||{})});return()=>{typeof N=="function"&&N()}},[t]);function b(){if(!t||!t.uid){alert("   .");return}if(!E){alert("   .");return}const N=` '${E}'() ?
(       .)`;window.confirm(N)&&YC(E,t.uid,t.name||"").then(()=>{alert(`${E}  .`),g("")})}function k(){!t||!t.uid||window.confirm("     ?")&&Af(t.uid,null).then(()=>{alert(".")})}const w=Object.keys(p||{}),C=w.length>0;function j(N){if(!N)return"";const I=new Date(N),M=I.getFullYear(),A=String(I.getMonth()+1).padStart(2,"0"),H=String(I.getDate()).padStart(2,"0"),K=String(I.getHours()).padStart(2,"0"),ne=String(I.getMinutes()).padStart(2,"0");return`${M}-${A}-${H} ${K}:${ne}`}return l.jsxs("div",{style:{padding:25,minHeight:"100vh",background:"#E5F3E6",color:"#034732"},children:[l.jsx("h1",{style:{fontSize:32,marginBottom:10,textAlign:"center"},children:" "}),l.jsxs("p",{style:{textAlign:"center",marginBottom:20},children:[", ",x,""]}),!t&&l.jsxs("p",{style:{textAlign:"center",marginBottom:20},children:[" ",l.jsx("button",{onClick:()=>e("/login"),style:{textDecoration:"underline",cursor:"pointer",background:"none",border:"none",padding:0,color:"#0B8457"},children:""}),"  ."]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:30},children:[l.jsx("button",{style:zt("#1B9C5A"),onClick:()=>e("/"),children:" (40)"}),l.jsx("button",{style:zt("#1B9C5A"),onClick:()=>e("/"),children:" (30)"}),l.jsx("button",{style:zt("#136F63"),onClick:()=>e("/A"),children:" A(15)"}),l.jsx("button",{style:zt("#136F63"),onClick:()=>e("/B"),children:" B(15)"}),l.jsx("button",{style:zt("#136F63"),onClick:()=>e("/"),children:" (9)"}),l.jsx("button",{style:zt("#FF9F1C"),onClick:()=>e("/"),children:"  "}),l.jsx("button",{style:zt("#0B4F6C"),onClick:()=>e("/"),children:" (5)"}),l.jsx("button",{style:zt("#0B4F6C"),onClick:()=>e("/"),children:" (9)"}),l.jsx("button",{style:zt("#0F3455"),onClick:()=>e("/records"),children:"  "}),l.jsx("button",{style:zt("#0F3455"),onClick:()=>{t!=null&&t.isAdmin?e("/admin"):e("/admin-login")},children:"  "})]}),l.jsx("button",{style:{...zt("#0B4F6C"),marginBottom:8},onClick:()=>S(N=>!N),children:"   "}),v&&l.jsxs("div",{style:{marginTop:4,marginBottom:24,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)"},children:[l.jsx("h3",{style:{marginTop:0,marginBottom:8},children:"   "}),l.jsx("p",{style:{fontSize:12,color:"#555",marginBottom:12},children:"     . (     )"}),l.jsxs("div",{style:{display:"flex",gap:8,marginBottom:12},children:[l.jsxs("select",{value:E,onChange:N=>g(N.target.value),style:{flex:1,padding:8,borderRadius:8,border:"1px solid #ccc"},children:[l.jsx("option",{value:"",children:" "}),l.jsx("option",{value:"",children:"(40)"}),l.jsx("option",{value:"",children:"(30)"}),l.jsx("option",{value:"(A)",children:"A(15)"}),l.jsx("option",{value:"(B)",children:"B(15)"}),l.jsx("option",{value:"",children:"(9)"}),l.jsx("option",{value:"",children:"(9)"}),l.jsx("option",{value:"",children:"(5)"})]}),l.jsx("button",{type:"button",onClick:b,style:{padding:"0 20px",borderRadius:8,border:"none",background:"#0B8457",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:"()"})]}),C?l.jsxs("div",{style:{marginTop:16,borderTop:"1px solid #eee",paddingTop:10},children:[l.jsx("div",{style:{fontSize:13,fontWeight:"bold",color:"#333",marginBottom:6},children:"   "}),l.jsx("div",{style:{marginBottom:10,color:"#0B8457",fontWeight:600},children:w.map(N=>Ye(N)).join(", ")}),l.jsx("button",{onClick:k,style:{width:"100%",padding:"10px",borderRadius:8,border:"1px solid #ccc",background:"#f5f5f5",color:"#333",cursor:"pointer",fontWeight:"bold"},children:" "})]}):l.jsx("div",{style:{fontSize:13,color:"#999",marginTop:10},children:"  ."})]}),l.jsxs("div",{style:{marginTop:10,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 10px rgba(0,0,0,0.06)"},children:[o&&l.jsxs("div",{style:{marginBottom:12,padding:12,borderRadius:8,background:"#FFF3CD",border:"1px solid #FFEEBA"},children:[l.jsxs("div",{style:{fontWeight:"bold",marginBottom:4},children:["<>"," ",o.title||""]}),l.jsx("div",{style:{fontSize:14,whiteSpace:"pre-line"},children:o.content||""})]}),l.jsx("button",{style:{...zt("#1E7F74"),marginBottom:12,padding:14,fontSize:16},onClick:()=>e("/crew-members"),children:"   "}),l.jsx("h3",{style:{marginTop:0,marginBottom:10},children:"  "}),h.length===0&&l.jsx("p",{style:{color:"#666"},children:"   .       ."}),l.jsxs("div",{style:{display:"flex",gap:8,marginBottom:8},children:[l.jsx("button",{onClick:()=>s(N=>!N),style:{padding:"8px 12px",borderRadius:10,border:"1px solid #0B8457",background:i?"#0B8457":"#fff",color:i?"#fff":"#0B8457",cursor:"pointer",fontWeight:700},children:i?"":" ()"}),i&&l.jsx("div",{style:{fontSize:12,color:"#555",alignSelf:"center"},children:"    ."})]}),l.jsx("ul",{style:{paddingLeft:18},children:h.map(N=>l.jsxs("li",{style:{marginBottom:4},children:[l.jsxs("span",{style:{fontWeight:"bold"},children:["[",N.crew,"] ",N.user]}),": ",N.text,N.timestamp&&l.jsxs("span",{style:{fontSize:12,color:"#555",marginLeft:4},children:["(",j(N.timestamp),")"]})]},N.id))})]})]})}function zt(t){return{width:"100%",height:63,padding:"0 6px",borderRadius:12,border:"none",fontSize:17,fontWeight:"bold",background:t,color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",wordBreak:"keep-all",lineHeight:1.2}}function Vt(t,e){const n=[],r=new Date(t,e,0).getDate();for(let i=1;i<=r;i++){const s=`${t}-${String(e).padStart(2,"0")}-${String(i).padStart(2,"0")}`;n.push(s)}return n}function sk(){const[t,e]=_.useState(null),[n,r]=_.useState(null),[i,s]=_.useState({}),[o,a]=_.useState([]),[c,u]=_.useState(null),[f,d]=_.useState(null),[h,x]=_.useState([]),[v,S]=_.useState({}),E=_.useRef(new Set);_.useRef(new Set),_.useEffect(()=>{const w=new Date().getFullYear(),C=P(ie,"settings/currentHallOfFameYear"),j=we(C,async N=>{const I=N.val();if(typeof I!="number"){await V(C,w);return}if(I!==w){await V(C,w);return}u(I)});return()=>{typeof j=="function"&&j()}},[]),_.useEffect(()=>{const w=P(ie,"hallOfFame"),C=P(ie,"hallOfFame/monthly"),j=[],N=(A,H)=>{const K=new Date().getFullYear(),ne=[...A||[],...H||[],K].filter(O=>Number.isFinite(O));return Array.from(new Set(ne)).sort((O,Y)=>Y-O)};let I=[],M=[];return j.push(we(w,A=>{const H=A.val()||{};I=Object.keys(H).map(K=>parseInt(K,10)).filter(K=>Number.isFinite(K)),x(N(I,M))})),j.push(we(C,A=>{const H=A.val()||{};M=Object.keys(H).map(K=>parseInt(K,10)).filter(K=>Number.isFinite(K)),x(N(I,M))})),()=>j.forEach(A=>typeof A=="function"?A():null)},[]),_.useEffect(()=>{const w=Da(C=>S(C||{}));return()=>{typeof w=="function"&&w()}},[]),_.useEffect(()=>{c&&d(w=>w??c)},[c]),_.useEffect(()=>{if(!f)return;e(null),r(null);const w=DC(f,j=>{e(j||null)}),C=oy(f,j=>{r(j||null)});return()=>{typeof w=="function"&&w(),typeof C=="function"&&C()}},[f]),_.useEffect(()=>{if(!c||!f)return;if(c!==f){s({});return}const w=new Date,C=w.getFullYear(),j=w.getMonth()+1,N=Vt(C,j),I=`${C}-${String(j).padStart(2,"0")}-${String(w.getDate()).padStart(2,"0")}`,M=N.filter(ne=>ne<=I),A={gold:[""],silver:[""],bronze:he.filter(ne=>String(ne).includes("")||String(ne).includes(""))},H=P(ie,"crews"),K=we(H,ne=>{const O=ne.val()||{},Y={gold:{challengers:0,success:0,fail:0},silver:{challengers:0,success:0,fail:0},bronze:{challengers:0,success:0,fail:0}};if(["gold","silver","bronze"].forEach(D=>{(A[D]||[]).forEach(W=>{var J;const q=((J=O==null?void 0:O[W])==null?void 0:J.users)||{};Object.entries(q).forEach(([Fe,Ce])=>{Ce&&Ce.name,Y[D].challengers+=1;const Le=Ce&&Ce.checks||{};M.every(Te=>!!Le[Te])?Y[D].success+=1:Y[D].fail+=1})})}),s(Y),w.getDate()===1){const D=new Date(C,j-2,1),B=D.getFullYear(),W=D.getMonth()+1,q=String(W).padStart(2,"0"),J=`${B}-${q}`;if(!E.current.has(J)){E.current.add(J);const Fe=Vt(B,W),Ce={gold:[],silver:[],bronze:[]};["gold","silver","bronze"].forEach(Le=>{(A[Le]||[]).forEach(Te=>{var Cr;const wr=((Cr=O==null?void 0:O[Te])==null?void 0:Cr.users)||{};Object.entries(wr).forEach(([ni,zn])=>{const Er=zn&&zn.name||ni,rs=zn&&zn.checks||{};Fe.every(kr=>!!rs[kr])&&Ce[Le].push({name:Er,crew:Te})})})}),(async()=>{const Le=[];["gold","silver","bronze"].forEach(Je=>{(Ce[Je]||[]).forEach(Te=>{Le.push({uid:Te.name,name:Te.name,crew:Te.crew,medal:Je})})}),Le.length>0&&await ly(B,W,Le)})().catch(()=>{})}}});return()=>{typeof K=="function"&&K()}},[c,f]),_.useEffect(()=>{if(!f){a([]);return}const w=t&&t.monthlyResults?t.monthlyResults:null,C={};w&&typeof w=="object"?Object.entries(w).forEach(([M,A])=>{!A||typeof A!="object"||(C[M]={gold:Array.isArray(A.gold)?A.gold.filter(Boolean):[],silver:Array.isArray(A.silver)?A.silver.filter(Boolean):[],bronze:Array.isArray(A.bronze)?A.bronze.filter(Boolean):[]})}):n&&typeof n=="object"&&Object.entries(n).forEach(([M,A])=>{const H=String(M).padStart(2,"0");if(!A||typeof A!="object")return;const K=ne=>!ne||typeof ne!="object"?[]:Object.values(ne).map(O=>O==null?void 0:O.name).filter(Boolean);C[H]={gold:K(A.gold),silver:K(A.silver),bronze:K(A.bronze)}});const j={},N=(M,A)=>{if(!M)return;const H=typeof M=="string"?M:M.name;H&&(j[H]||(j[H]={name:H,gold:0,silver:0,bronze:0,points:0}),A==="gold"&&(j[H].gold+=1,j[H].points+=3),A==="silver"&&(j[H].silver+=1,j[H].points+=2),A==="bronze"&&(j[H].bronze+=1,j[H].points+=1))};Object.values(C).forEach(M=>{(M.gold||[]).forEach(A=>N(A,"gold")),(M.silver||[]).forEach(A=>N(A,"silver")),(M.bronze||[]).forEach(A=>N(A,"bronze"))});const I=Object.values(j).map(M=>{let A=v[M.name];A||(A=Object.values(v).find(K=>K.name===M.name));const H=er((A==null?void 0:A.earnedMedals)||{});return{...M,totalDok:H.totalDok}});I.sort((M,A)=>A.totalDok!==M.totalDok?A.totalDok-M.totalDok:A.points!==M.points?A.points-M.points:A.gold!==M.gold?A.gold-M.gold:A.silver!==M.silver?A.silver-M.silver:A.bronze!==M.bronze?A.bronze-M.bronze:String(M.name).localeCompare(String(A.name),"ko")),a(I.slice(0,11))},[t,n,f,v]);const g=_.useMemo(()=>[1,2,3,4,5,6,7,8,9,10,11,12],[]),[p,y]=_.useState(new Date().getMonth()+1),b=_.useMemo(()=>{if(!(t!=null&&t.monthlyResults))return null;const w=String(p).padStart(2,"0");return t.monthlyResults[w]||null},[t,p]),k=_.useMemo(()=>(b==null?void 0:b.dokAchievers)||[],[b]);return l.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0F172A 0%, #1E293B 100%)",color:"#F8FAFC",padding:"40px 20px",fontFamily:"'Outfit', 'Roboto', sans-serif"},children:l.jsxs("div",{style:{maxWidth:800,margin:"0 auto"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:40},children:[l.jsx("h1",{style:{fontSize:42,fontWeight:900,background:"linear-gradient(to right, #F59E0B, #FBBF24, #F59E0B)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",letterSpacing:-1,marginBottom:10},children:"  "}),l.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:15},children:[l.jsx("select",{value:f||"",onChange:w=>d(Number(w.target.value)),style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"#fff",padding:"8px 16px",borderRadius:12,fontSize:18,fontWeight:700,cursor:"pointer"},children:h.map(w=>l.jsxs("option",{value:w,style:{color:"#000"},children:[w,""]},w))}),l.jsx("div",{style:{fontSize:20,color:"#94A3B8",fontWeight:500},children:"  "})]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:30},children:[l.jsxs("section",{style:{background:"rgba(255,255,255,0.03)",borderRadius:24,padding:30,border:"1px solid rgba(255,255,255,0.05)",boxShadow:"0 20px 50px rgba(0,0,0,0.3)"},children:[l.jsxs("h2",{style:{fontSize:24,fontWeight:800,marginBottom:5,display:"flex",alignItems:"center",gap:10},children:[l.jsx("span",{style:{color:"#F59E0B"},children:""})," ",f,"   (TOP 11)"]}),l.jsx("p",{style:{fontSize:14,color:"#94A3B8",marginBottom:20,marginLeft:34},children:"  -   "}),o.length===0?l.jsx("p",{style:{color:"#64748B",textAlign:"center"},children:"   ."}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:o.map((w,C)=>l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px 20px",background:C===0?"linear-gradient(90deg, rgba(245,158,11,0.15) 0%, rgba(245,158,11,0.05) 100%)":"rgba(255,255,255,0.02)",borderRadius:16,border:C===0?"1px solid rgba(245,158,11,0.3)":"1px solid rgba(255,255,255,0.05)"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:15},children:[l.jsx("div",{style:{width:34,height:34,display:"flex",alignItems:"center",justifyContent:"center",fontSize:C<3?24:14,color:C<3?"inherit":"#64748B",fontWeight:900,background:C<3?"transparent":"rgba(255,255,255,0.05)",borderRadius:8},children:C===0?"":C===1?"":C===2?"":C+1}),l.jsx("div",{style:{fontSize:18,fontWeight:C<3?800:600},children:w.name})]}),l.jsx("div",{style:{display:"flex",alignItems:"center",gap:15},children:l.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[l.jsxs("div",{style:{display:"flex",gap:4},children:[w.gold>0&&l.jsxs("span",{children:["",w.gold]}),w.silver>0&&l.jsxs("span",{children:["",w.silver]}),w.bronze>0&&l.jsxs("span",{children:["",w.bronze]})]}),(()=>{let j=v[w.name];j||(j=Object.values(v).find(I=>I.name===w.name));const N=er((j==null?void 0:j.earnedMedals)||{});return N.totalDok>0?l.jsxs("span",{style:{fontSize:13,fontWeight:800,color:"#E9C46A",background:"rgba(233,196,106,0.1)",padding:"2px 8px",borderRadius:6},children:[" ",N.totalDok,""]}):null})()]})})]},w.name))})]}),l.jsxs("section",{children:[l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:20,justifyContent:"center"},children:g.map(w=>l.jsxs("button",{onClick:()=>y(w),style:{padding:"8px 14px",borderRadius:10,border:"none",background:p===w?"#F59E0B":"rgba(255,255,255,0.05)",color:p===w?"#000":"#94A3B8",fontWeight:800,cursor:"pointer",transition:"0.2s"},children:[w,""]},w))}),l.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:24,padding:30,border:"1px solid rgba(255,255,255,0.05)"},children:[l.jsxs("h3",{style:{fontSize:22,fontWeight:800,marginBottom:25,textAlign:"center"},children:[" ",p,"  "]}),b?l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:30},children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:20},children:[l.jsx(Ac,{title:"  ()",items:b.gold,color:"#F59E0B"}),l.jsx(Ac,{title:"  ()",items:b.silver,color:"#94A3B8"}),l.jsx(Ac,{title:"  (/)",items:b.bronze,color:"#B45309"})]}),l.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.05)",paddingTop:20},children:[l.jsx("h4",{style:{fontSize:18,fontWeight:800,marginBottom:15,color:"#E9C46A"},children:"   "}),l.jsx("p",{style:{fontSize:14,color:"#94A3B8",marginBottom:12},children:"*    1  ."}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:10},children:k.length===0?l.jsx("span",{style:{color:"#64748B",fontSize:14},children:"    ."}):k.map((w,C)=>l.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(233,196,106,0.2) 0%, rgba(233,196,106,0.05) 100%)",padding:"10px 18px",borderRadius:12,border:"1px solid rgba(233,196,106,0.3)",display:"flex",alignItems:"center",gap:8},children:[l.jsx("span",{style:{fontSize:16,fontWeight:800,color:"#E9C46A"},children:w.name}),l.jsxs("span",{style:{fontSize:12,fontWeight:900,background:"#E9C46A",color:"#000",padding:"2px 6px",borderRadius:4},children:[w.dokCount," "]})]},C))})]})]}):l.jsx("div",{style:{textAlign:"center",padding:"40px 0",color:"#64748B"},children:"    ."})]})]})]}),l.jsx("div",{style:{marginTop:50,textAlign:"center"},children:l.jsx("button",{onClick:()=>window.history.back(),style:{padding:"12px 30px",borderRadius:999,border:"1px solid rgba(255,255,255,0.2)",background:"transparent",color:"#fff",fontWeight:700,cursor:"pointer"},children:"  "})})]})})}function Ac({title:t,items:e,color:n}){return!e||e.length===0?null:l.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",padding:20,borderRadius:18,border:`1px solid ${n}33`},children:[l.jsx("div",{style:{fontSize:16,fontWeight:800,color:n,marginBottom:12,borderBottom:`1px solid ${n}22`,paddingBottom:8},children:t}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6},children:e.map((r,i)=>{const s=typeof r=="string"?r:r.name,o=typeof r=="string"?"":r.crew;return l.jsxs("div",{style:{fontSize:14,fontWeight:600},children:[s," ",o&&l.jsxs("span",{style:{fontSize:11,color:"#64748B",fontWeight:400},children:["(",o.replace("",""),")"]})]},i)})})]})}const ok=[{day:1,mainTitle:"  ",sections:[{subTitle:" ",bibleRef:" 1-3"},{subTitle:" ,  ",bibleRef:" 4-5"},{subTitle:"   ",bibleRef:" 6-9"}]},{day:2,mainTitle:"  ",sections:[{subTitle:"   ",bibleRef:" 11-13"},{subTitle:"   ",bibleRef:" 14-16"},{subTitle:"    ",bibleRef:" 17-18"}]},{day:3,mainTitle:"   ",sections:[{subTitle:"   ",bibleRef:" 19-21"},{subTitle:"    ",bibleRef:" 22-24"},{subTitle:"    ",bibleRef:" 27-28"}]},{day:4,mainTitle:"  ",sections:[{subTitle:"    ",bibleRef:" 29-31"},{subTitle:"    ",bibleRef:" 32-33"},{subTitle:"    ",bibleRef:" 35-37"}]},{day:5,mainTitle:"   ",sections:[{subTitle:"   ",bibleRef:" 38-39"},{subTitle:"    ",bibleRef:" 40-41"},{subTitle:"   ",bibleRef:" 42-44"}]},{day:6,mainTitle:" ",sections:[{subTitle:"    ",bibleRef:" 45-47"},{subTitle:"   ",bibleRef:" 48-50"},{subTitle:"   ",bibleRef:" 1-3"}]},{day:7,mainTitle:"   ",sections:[{subTitle:"    ",bibleRef:" 4-7"},{subTitle:"    ",bibleRef:" 8-11"},{subTitle:"  ",bibleRef:" 12"}]},{day:8,mainTitle:"   ",sections:[{subTitle:"    ",bibleRef:" 13-16"},{subTitle:"   ",bibleRef:" 17-20"},{subTitle:" ",bibleRef:" 24"}]},{day:9,mainTitle:"  ",sections:[{subTitle:"   ",bibleRef:" 32-34"},{subTitle:"  ",bibleRef:" 40"},{subTitle:"   ",bibleRef:" 11, 16, 19, 23,  6"}]},{day:10,mainTitle:"  ",sections:[{subTitle:"   ",bibleRef:" 11-12"},{subTitle:"12  40 ",bibleRef:" 13-14"},{subTitle:"     ",bibleRef:" 16-17, 20"}]},{day:11,mainTitle:"  ",sections:[{subTitle:"   ",bibleRef:" 21-24"},{subTitle:"   ",bibleRef:" 6, 8, 30, 34"},{subTitle:" ",bibleRef:" 1"}]},{day:12,mainTitle:"  ",sections:[{subTitle:"  ",bibleRef:" 2-8"},{subTitle:"    ",bibleRef:" 9-11"},{subTitle:"  ",bibleRef:" 14, 20"}]},{day:13,mainTitle:"  ",sections:[{subTitle:"    ",bibleRef:" 23-24,  2"},{subTitle:", , ",bibleRef:" 4, 6-7, 13-16"},{subTitle:"  ",bibleRef:" 1-4"}]},{day:14,mainTitle:"  ",sections:[{subTitle:"   ",bibleRef:" 1-3"},{subTitle:"   ",bibleRef:" 4-7"},{subTitle:"    ",bibleRef:" 8-10"}]},{day:15,mainTitle:"   ",sections:[{subTitle:"   ",bibleRef:" 13, 15-16"},{subTitle:"    ",bibleRef:" 17-19"},{subTitle:"    ",bibleRef:" 20, 24, 26"}]},{day:16,mainTitle:"  ",sections:[{subTitle:"   ",bibleRef:" 31,  1-2, 5"},{subTitle:"   ",bibleRef:" 6-7"},{subTitle:"   ",bibleRef:" 9-10"}]},{day:17,mainTitle:"  ",sections:[{subTitle:"    ",bibleRef:" 11-12"},{subTitle:"   ",bibleRef:" 13, 15-18"},{subTitle:"   ",bibleRef:" 24,  22, 29"}]},{day:18,mainTitle:"  :   ",sections:[{subTitle:"   ",bibleRef:" 3-6, 8"},{subTitle:":  ",bibleRef:" 1-4"}]},{day:19,mainTitle:" :  ,  ",sections:[{subTitle:":     ",bibleRef:" 1-3, 12"},{subTitle:":  ",bibleRef:" 2"},{subTitle:":   ",bibleRef:" 1-2, 38, 42"}]},{day:20,mainTitle:" ",sections:[{subTitle:":     ",bibleRef:" 1, 19, 23, 51, 103, 150"},{subTitle:"   ",bibleRef:" 11-12"},{subTitle:" ",bibleRef:" 13"}]},{day:21,mainTitle:"  :   ",sections:[{subTitle:"   ",bibleRef:" 17-18"},{subTitle:"  ",bibleRef:" 19"},{subTitle:"   ",bibleRef:" 2, 4-5, 6"}]},{day:22,mainTitle:"  :   ",sections:[{subTitle:":   ",bibleRef:" 1-4"},{subTitle:":  ",bibleRef:" 5, 9"},{subTitle:":   ",bibleRef:" 1-3"},{subTitle:" ",bibleRef:" 17"}]},{day:23,mainTitle:" ",sections:[{subTitle:"   ",bibleRef:" 18-20"},{subTitle:"   ",bibleRef:" 1, 6-7, 9, 11, 36"}]},{day:24,mainTitle:" 2 :   ",sections:[{subTitle:"  ",bibleRef:" 40, 43"},{subTitle:"  ",bibleRef:" 53, 55"},{subTitle:"  ",bibleRef:" 60-61, 65-66"}]},{day:25,mainTitle:"   :  ",sections:[{subTitle:"   ",bibleRef:" 21-23"},{subTitle:"   ",bibleRef:" 1, 7"},{subTitle:"  ",bibleRef:" 1-3,  3"}]},{day:26,mainTitle:"   :  ",sections:[{subTitle:"   ",bibleRef:" 24-25"},{subTitle:"    ",bibleRef:" 29, 31, 33, 52"},{subTitle:":   ",bibleRef:" 3"}]},{day:27,mainTitle:"  :  ",sections:[{subTitle:"   ",bibleRef:" 1, 3, 6, 9"},{subTitle:":     ",bibleRef:" 1, 36, 37, 47"}]},{day:28,mainTitle:"   :  ",sections:[{subTitle:"  1 ",bibleRef:" 1, 3-4"},{subTitle:"   ",bibleRef:" 1-2,  4, 9"},{subTitle:" ",bibleRef:" 6"}]},{day:29,mainTitle:"  :   ",sections:[{subTitle:"   ",bibleRef:" 1-9"},{subTitle:" 2   ",bibleRef:" 7, 9-10"}]},{day:30,mainTitle:"  :   ",sections:[{subTitle:"  ",bibleRef:" 1-4, 6"},{subTitle:"   ",bibleRef:" 8, 13"},{subTitle:":   ",bibleRef:" 1, 3-4"}]}],lk=[{day:1,mainTitle:" ",sections:[{subTitle:"  ",bibleRef:" 1"},{subTitle:"  ",bibleRef:" 1-2"},{subTitle:" ",bibleRef:" 2"}]},{day:2,mainTitle:" ",sections:[{subTitle:"  ",bibleRef:" 3-4"},{subTitle:"   ",bibleRef:" 2"},{subTitle:" ",bibleRef:" 3"}]},{day:3,mainTitle:" ",sections:[{subTitle:" ",bibleRef:" 4"},{subTitle:"   ",bibleRef:" 5"},{subTitle:"  ",bibleRef:" 5"}]},{day:4,mainTitle:"",sections:[{subTitle:"  ",bibleRef:" 5"},{subTitle:", , ",bibleRef:" 6"},{subTitle:"  ",bibleRef:" 7"},{subTitle:" ",bibleRef:" 7"}]},{day:5,mainTitle:" ",sections:[{subTitle:" ",bibleRef:" 4"},{subTitle:"   ",bibleRef:" 5"},{subTitle:"  ",bibleRef:" 10"},{subTitle:"    ",bibleRef:" 11-12"}]},{day:6,mainTitle:"  ",sections:[{subTitle:"    ",bibleRef:" 13"},{subTitle:"   ",bibleRef:" 14"},{subTitle:" ",bibleRef:" 6"}]},{day:7,mainTitle:" ",sections:[{subTitle:" ",bibleRef:" 16"},{subTitle:" ",bibleRef:" 17"},{subTitle:"   ",bibleRef:" 9"}]},{day:8,mainTitle:"  ",sections:[{subTitle:"  ",bibleRef:" 10"},{subTitle:" , , ",bibleRef:" 15"},{subTitle:"  ",bibleRef:" 16"}]},{day:9,mainTitle:" ",sections:[{subTitle:" ",bibleRef:" 11"},{subTitle:"  ",bibleRef:" 12"},{subTitle:" ",bibleRef:" 19"},{subTitle:"   ",bibleRef:" 21"}]},{day:10,mainTitle:"  ",sections:[{subTitle:"   ",bibleRef:" 22"},{subTitle:"   ",bibleRef:" 23"},{subTitle:" ",bibleRef:" 24"},{subTitle:"   ",bibleRef:" 25"}]},{day:11,mainTitle:" ",sections:[{subTitle:"  ",bibleRef:" 13"},{subTitle:"  ",bibleRef:" 14"},{subTitle:" ",bibleRef:" 15"},{subTitle:"   ",bibleRef:" 16-17"}]},{day:12,mainTitle:"  ",sections:[{subTitle:"  ",bibleRef:" 26"},{subTitle:"  ",bibleRef:" 27"}]},{day:13,mainTitle:" ",sections:[{subTitle:"   ",bibleRef:" 20"},{subTitle:"  ",bibleRef:" 21"},{subTitle:"  ",bibleRef:" 24"},{subTitle:" ",bibleRef:" 28"}]},{day:14,mainTitle:" ",sections:[{subTitle:"  ",bibleRef:" 1"},{subTitle:"  ",bibleRef:" 2"},{subTitle:"  ",bibleRef:" 3"},{subTitle:"  ",bibleRef:" 4"}]},{day:15,mainTitle:" ",sections:[{subTitle:" ",bibleRef:" 5"},{subTitle:"   ",bibleRef:" 6-7"},{subTitle:"  ",bibleRef:" 8"},{subTitle:" ",bibleRef:" 9"}]},{day:16,mainTitle:"  ",sections:[{subTitle:"  ",bibleRef:" 10"},{subTitle:"   ",bibleRef:" 11"},{subTitle:":  ",bibleRef:" 1-2"}]},{day:17,mainTitle:"1   :  ",sections:[{subTitle:"  ",bibleRef:" 13"},{subTitle:" ",bibleRef:" 14"},{subTitle:":   ",bibleRef:" 1-3"}]},{day:18,mainTitle:"2   :  ",sections:[{subTitle:" ",bibleRef:" 15"},{subTitle:"  ",bibleRef:" 16"},{subTitle:"  ",bibleRef:" 17"},{subTitle:":  ",bibleRef:" 4"}]},{day:19,mainTitle:"3   :   ",sections:[{subTitle:"  ",bibleRef:" 18"},{subTitle:"  ",bibleRef:" 19"},{subTitle:":  ",bibleRef:" 1, 13, 15"}]},{day:20,mainTitle:" :   ",sections:[{subTitle:"  ",bibleRef:" 20"},{subTitle:":  ",bibleRef:" 4-5"},{subTitle:"   ",bibleRef:" 12"}]},{day:21,mainTitle:" 1 :  ",sections:[{subTitle:"   ",bibleRef:" 1-2"},{subTitle:"   ",bibleRef:" 3"},{subTitle:"  ",bibleRef:" 4-5"}]},{day:22,mainTitle:" 2 :  ",sections:[{subTitle:"   ",bibleRef:" 6"},{subTitle:"   ",bibleRef:" 8"},{subTitle:"    ",bibleRef:" 12"}]},{day:23,mainTitle:"  :  ",sections:[{subTitle:"   ",bibleRef:" 21-22"},{subTitle:"    ",bibleRef:" 23"},{subTitle:"   ",bibleRef:" 26"}]},{day:24,mainTitle:"   :  ",sections:[{subTitle:"  ",bibleRef:" 27"},{subTitle:"   ",bibleRef:" 28"},{subTitle:":   ",bibleRef:" 1, 3"}]},{day:25,mainTitle:"  :  ",sections:[{subTitle:":    ",bibleRef:" 1-2"},{subTitle:" ",bibleRef:" 6"},{subTitle:":  ",bibleRef:" 1"}]},{day:26,mainTitle:" :  ",sections:[{subTitle:"  ",bibleRef:" 1"},{subTitle:" ",bibleRef:" 2"},{subTitle:" ",bibleRef:" 3"},{subTitle:"    ",bibleRef:" 4"}]},{day:27,mainTitle:"  :   ",sections:[{subTitle:":  ",bibleRef:" 6"},{subTitle:":    ",bibleRef:" 1-2"},{subTitle:"   ",bibleRef:" 4"}]},{day:28,mainTitle:" :   ",sections:[{subTitle:"  ",bibleRef:" 1"},{subTitle:"  ",bibleRef:" 4"},{subTitle:"  ",bibleRef:" 11"},{subTitle:"    ",bibleRef:" 12"}]},{day:29,mainTitle:" :  ",sections:[{subTitle:":  ",bibleRef:" 1"},{subTitle:":   ",bibleRef:" 1"},{subTitle:" ",bibleRef:" 4"},{subTitle:":   ",bibleRef:" 3-5"}]},{day:30,mainTitle:" :  ",sections:[{subTitle:" ",bibleRef:" 1"},{subTitle:" ",bibleRef:" 4"},{subTitle:"   ",bibleRef:" 21"},{subTitle:"   ",bibleRef:" 22"}]}],Ba=[{name:"",chapters:50},{name:"",chapters:40},{name:"",chapters:27},{name:"",chapters:36},{name:"",chapters:34},{name:"",chapters:24},{name:"",chapters:21},{name:"",chapters:4},{name:"",chapters:31},{name:"",chapters:24},{name:"",chapters:22},{name:"",chapters:25},{name:"",chapters:29},{name:"",chapters:36},{name:"",chapters:10},{name:"",chapters:13},{name:"",chapters:10},{name:"",chapters:42},{name:"",chapters:150},{name:"",chapters:31},{name:"",chapters:12},{name:"",chapters:8},{name:"",chapters:66},{name:"",chapters:52},{name:"",chapters:5},{name:"",chapters:48},{name:"",chapters:12},{name:"",chapters:14},{name:"",chapters:3},{name:"",chapters:9},{name:"",chapters:1},{name:"",chapters:4},{name:"",chapters:7},{name:"",chapters:3},{name:"",chapters:3},{name:"",chapters:3},{name:"",chapters:2},{name:"",chapters:14},{name:"",chapters:4},{name:"",chapters:28},{name:"",chapters:16},{name:"",chapters:24},{name:"",chapters:21},{name:"",chapters:28},{name:"",chapters:16},{name:"",chapters:16},{name:"",chapters:13},{name:"",chapters:6},{name:"",chapters:6},{name:"",chapters:4},{name:"",chapters:4},{name:"",chapters:5},{name:"",chapters:3},{name:"",chapters:6},{name:"",chapters:4},{name:"",chapters:3},{name:"",chapters:1},{name:"",chapters:13},{name:"",chapters:5},{name:"",chapters:5},{name:"",chapters:3},{name:"1",chapters:5},{name:"2",chapters:1},{name:"3",chapters:1},{name:"",chapters:1},{name:"",chapters:22}],ak=Ba.slice(0,39),_y=Ba.slice(39),by=ak.reduce((t,e)=>t+e.chapters,0),Sy=_y.reduce((t,e)=>t+e.chapters,0),ck=by+Sy,uk=461,dk=468;function fk(t){if(t<=0)return[];if(t===1)return[Array.from({length:31},(s,o)=>o+1)];const n=[],r=Math.max(0,t-1);for(let s=1;s<=r;s++)n.push([s]);const i=[];for(let s=r+1;s<=31;s++)i.push(s);return n.push(i),n}const hk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",1:"",2:"",3:"",:"",:""};function rm(t){return hk[t]||t}function pk(t){return Ba.find(e=>e.name===t)}function mk(t,e){const n=[];for(let r=1;r<=e;r++)n.push({book:t,chapter:r});return n}function gk(t){const e=[];return t.forEach(n=>{n&&e.push(...mk(n.name,n.chapters))}),e}function im(t){if(!t||t.length===0)return"";const e=[];let n={book:t[0].book,start:t[0].chapter,end:t[0].chapter};for(let i=1;i<t.length;i++){const s=t[i];s.book===n.book&&s.chapter===n.end+1?n.end=s.chapter:(e.push(n),n={book:s.book,start:s.chapter,end:s.chapter})}return e.push(n),e.map(i=>i.start===i.end?`${i.book} ${i.start}`:`${i.book} ${i.start}~${i.end}`).join(" / ")}function yk(t,e){const n=Math.floor(t/e);let r=t%e;const i=[];for(let s=0;s<e;s++)i.push(n+(r>0?1:0)),r>0&&r--;return i}function vk(t,e){const n=e.length,r=yk(t.length,n);let i=0;const s=[];for(let o=0;o<n;o++){const a=r[o],c=t.slice(i,i+a);i+=a,s.push({date:e[o],items:c})}return s}const wy=["","","","","","","","","","","","","","",""],Cy=["","","","","","","","","","","","","","","","","","","","","","",""],xk=[...wy,...Cy],sm=[...Ba.filter(t=>t.name!=="").map(t=>t.name)],_k=_y.map(t=>t.name);function ui(t){return gk(t.map(pk))}const Nc={};function bk(t){if(Nc[t])return Nc[t];let e=[];return t===""?e=ui(sm):t===""?e=ui(xk):t===""?e=ui(_k):t==="(A)"?e=ui(wy):t==="(B)"?e=ui(Cy):e=ui(sm),Nc[t]=e,e}function Sk(t){return t===""||t===""||t==="(B)"}function wk(t){const e=[],n=t.split(",");let r="";for(let i of n){if(i=i.trim(),!i)continue;i=i.replace(/\([^)]*\)/g,"").trim();const s=i.match(/^([-]+(?:\s?[-]+)?)/);if(s&&(r=s[1].trim(),i=i.substring(r.length).trim()),i=i.replace(//g,"").trim(),i.includes("-")){const[o,a]=i.split("-"),c=parseInt(o,10),u=parseInt(a,10);if(!isNaN(c)&&!isNaN(u))for(let f=c;f<=u;f++)r&&e.push({book:r,chapter:f})}else{const o=parseInt(i,10);isNaN(o)||r&&e.push({book:r,chapter:o})}}return e}function Dc(t,e){return t?e?{day:t.day,mainTitle:`${t.mainTitle} & ${e.mainTitle}`,sections:[...t.sections||[],...e.sections||[]]}:t:e}function vr(t,e){if(t===""||t===""){const o=t===""?ok:lk,a=e.length;let c=[];if(a===31)c=[...o,{day:31,mainTitle:"  ",sections:[{subTitle:"    ",bibleRef:""}]}];else if(a===30)c=[...o];else if(a===29){const u=Dc(o[25],o[26]);c=[...o.slice(0,25),u,...o.slice(27)]}else if(a===28){const u=Dc(o[4],o[5]),f=Dc(o[25],o[26]);c=[...o.slice(0,4),u,...o.slice(6,25),f,...o.slice(27,30)]}else c=o.slice(0,a);return e.map((u,f)=>{const d=f;if(d>=c.length)return{date:u,items:[],chapters:0,label:" "};const h=c[d];let x=[];const v=h.sections.map(g=>{const p=wk(g.bibleRef);return x=[...x,...p],{...g,items:p}}),S=x.filter((g,p,y)=>y.findIndex(b=>b.book===g.book&&b.chapter===g.chapter)===p),E=im(S);return{date:u,items:S,chapters:S.length,label:`[${h.mainTitle}] ${E}`,panorama:{...h,parsedSections:v}}})}const n=bk(t),r=vk(n,e),i=Sk(t),s=i?fk(e.length):[];return r.map((o,a)=>{let c=o.items;if(i){const x=(s[a]||[]).map(v=>({book:"",chapter:v}));c=[...c,...x]}const u=c.length,d=`${im(c)} ( ${u})`;return{date:o.date,items:c,chapters:u,label:d}})}function Ck(t={},e={},n,r){const i=Vt(n,r);if(!i||i.length===0)return{ranking:[],medalCounts:{gold:0,silver:0,bronze:0}};const s=he,o={};s.forEach(f=>{const d=vr(f,i),h={};(d||[]).forEach(x=>{!x||!x.date||(h[x.date]=x)}),o[f]=h});const a={};s.forEach(f=>{const d=t&&t[f],h=d&&d.users;if(!h)return;const x=o[f]||{};Object.entries(h).forEach(([v,S])=>{const E=S&&S.checks||{};let g=0;i.forEach(p=>{if(E[p]){const y=x[p];y&&typeof y.chapters=="number"&&y.chapters>0&&(g+=y.chapters)}}),a[v]||(a[v]={uid:v,crew:f,chapters:0}),a[v].chapters+=g})});const c=Object.values(a).map(f=>{const d=e[f.uid]||{},h=d.crew||f.crew;let x=null;const v=o[h]||{};let S=0;return Object.values(v).forEach(g=>{S+=g.chapters||0}),f.chapters>=S&&S>0&&(h===""?x="gold":h===""?x="silver":(h===""||h.includes("")||h.includes(""))&&(x="bronze")),{uid:f.uid,name:d.name||"",crew:h,chapters:f.chapters,medal:x}});c.sort((f,d)=>d.chapters-f.chapters);const u={gold:0,silver:0,bronze:0};return c.forEach(f=>{f.medal==="gold"&&u.gold++,f.medal==="silver"&&u.silver++,f.medal==="bronze"&&u.bronze++}),{ranking:c,medalCounts:u}}function Ff({dates:t,todayKey:e,userChecks:n,userDailyActivity:r}){const i=n||{},s=r||{},o=!!i[e],a=!!(s[e]&&s[e].biblePageVisited),c=Array.isArray(t)?t.indexOf(e):-1,u=c>=0?t.slice(0,c+1):[],f=c>0?t.slice(0,c):[],d=u.length>0&&u.every(v=>!!i[v]),h=f.length===0?!0:f.every(v=>!!i[v]),x=f.some(v=>!i[v]);return d?{key:"success",label:" "}:a&&!o?{key:"running",label:"  .."}:h&&!o?{key:"ready",label:" "}:x?{key:"missed",label:" !"}:{key:"ready",label:" "}}function Ek({user:t}){const e=yn();_.useEffect(()=>{(!t||!t.isAdmin)&&(console.warn("  .   ."),e("/admin-login"))},[t,e]);const[n,r]=_.useState({}),[i,s]=_.useState({}),[o,a]=_.useState(()=>{const m={};return he.forEach(T=>m[T]=[]),m}),[c,u]=_.useState(null),[f,d]=_.useState({}),[h,x]=_.useState(""),[v,S]=_.useState("");_.useState({year:null,month:null});const[E,g]=_.useState({}),[p,y]=_.useState(""),[b,k]=_.useState(""),[w,C]=_.useState(""),[j,N]=_.useState({:"",:"",:""}),[I,M]=_.useState({:"manual",:"manual",:"manual"}),[A,H]=_.useState({:[],:[],:[]}),[K,ne]=_.useState({:[],:[],:[]}),[O,Y]=_.useState({});_.useState([]),_.useState("");const[D,B]=_.useState({}),[W,q]=_.useState(!1);_.useState("");const[J,Fe]=_.useState(""),[Ce,Le]=_.useState(new Date().getFullYear()),[Je,Te]=_.useState(new Date().getMonth()+1),[wr,Cr]=_.useState(""),[ni,zn]=_.useState("gold"),[Er,rs]=_.useState(!1),[ri,kr]=_.useState(new Date().getFullYear()),[Tr,Ro]=_.useState(new Date().getMonth()+1),[an,Bt]=_.useState(""),[za,jo]=_.useState({}),Ln=_.useRef(null),[He,Io]=_.useState(""),Ze=ay(),vn=To(),[Ao,$n]=_.useState([]),[Rr,No]=_.useState(""),[ii,is]=_.useState(null),[La,Do]=_.useState(!1),[xn,ss]=_.useState(""),[F,X]=_.useState(""),[le,Re]=_.useState([]),[Ve,ft]=_.useState(!1),[et,cn]=_.useState("all"),[_n,bn]=_.useState(new Date().getFullYear()),[Kt,Sn]=_.useState(!1),[wt,si]=_.useState(!1),[jr,st]=_.useState(!1),[qt,$a]=_.useState(!1),[oi,os]=_.useState(null),[Mf,Of]=_.useState(!1),[Ey,Bf]=_.useState({}),[wn,ky]=_.useState("group1"),Po=_.useRef(null);_.useEffect(()=>{const m=new Date,T=m.getFullYear(),R=m.getMonth()+1,$=Vt(T,R);if(!$||$.length===0){const de={};he.forEach(Me=>de[Me]=[]),a(de);return}const G=m.getDate(),oe=$.slice(0,G),ae=`${T}-${String(R).padStart(2,"0")}-${String(G).padStart(2,"0")}`,Ie=he,Ae={};Ie.forEach(de=>{const Me=vr(de,$),ve={};Me.forEach(ot=>{ve[ot.date]=ot}),Ae[de]=ve}),Ie.forEach(de=>{});const ye={};he.forEach(de=>ye[de]=[]);const ce=new Set;he.forEach(de=>{(A[de]||[]).forEach(ve=>{n[ve],ce.add(ve),zf(de,ve,n,i,Ae,oe,$,ae,ye)})}),Object.entries(n||{}).forEach(([de,Me])=>{if(ce.has(de))return;const ve=Me.crew;ve&&he.includes(ve)&&zf(ve,de,n,i,Ae,oe,$,ae,ye)}),Object.keys(ye).forEach(de=>{ye[de].sort((Me,ve)=>ve.chapters-Me.chapters)}),a(ye)},[i,n,A]);function zf(m,T,R,$,G,oe,ae,Ie,Ae){const ye=$[m]||{},de=(ye.users&&ye.users[T]||{}).checks||{};let Me=0,ve=0;oe.forEach(Mo=>{const Cn=G[m]&&G[m][Mo];Cn&&typeof Cn.chapters=="number"&&(ve+=Cn.chapters,de[Mo]&&(Me+=Cn.chapters))});const ot=R&&R[T]?R[T]:{},Ct=ot.name||T,li=ve>0?Math.round(Me/ve*100):0,as=Ff({dates:ae,todayKey:Ie,userChecks:de,userDailyActivity:ot.dailyActivity||{}}),At=er(ot.earnedMedals||{});Ae[m].push({uid:T,name:Ct,chapters:Me,progress:li,stateKey:as.key,stateLabel:as.label,medals:ot.medals||{},dokStatus:At})}_.useEffect(()=>{const m=eE(T=>{const R=T||{},$={};he.forEach(G=>{$[G]=R[G]||"manual"}),M($)});return()=>{typeof m=="function"&&m()}},[]),_.useEffect(()=>{const m=QC(T=>{Y(T||{})});return()=>{typeof m=="function"&&m()}},[]),_.useEffect(()=>{async function m(){if(Ze){q(!0);try{const T=await Vp(Ze);B(T||{})}catch(T){console.error("  ",T)}finally{q(!1)}}}m()},[Ze,oi]),_.useEffect(()=>{const m=qC(Ze,T=>{os(T),T?Vp(Ze).then(Bf):Bf({})});return()=>{m&&m()}},[Ze]);async function Lf(m,T){if(window.confirm(`${m}    ?
(     ,   .)`)){Of(!0);try{await KC(m,T),alert(`${m}    .`)}catch(R){console.error(R),alert("    .")}finally{Of(!1)}}}_.useEffect(()=>{const m=Da(r),T=uy(R=>{R?(x(R.title||""),S(R.content||"")):(x(""),S(""))});return()=>{typeof m=="function"&&m(),typeof T=="function"&&T()}},[]),_.useEffect(()=>{if(wn!=="group3"){s({});return}const m=sy(s);return()=>{typeof m=="function"&&m()}},[wn]),_.useEffect(()=>{const m=Nf(T=>{const R=T||{};g(R),y(R.churchName||""),k(R.appDescription||""),C(R.bulletinUrl||"")});return()=>{typeof m=="function"&&m()}},[]),_.useEffect(()=>{const m=he,T=[];return m.forEach(R=>{const $=qu(R,Ze,G=>{const oe=G?Object.keys(G):[];H(ae=>({...ae,[R]:oe}))});typeof $=="function"&&T.push($)}),()=>{T.forEach(R=>{try{R()}catch{}})}},[Ze]),_.useEffect(()=>{const m=he,T=[];return m.forEach(R=>{const $=qu(R,vn,G=>{const oe=G?Object.keys(G):[];ne(ae=>({...ae,[R]:oe}))});typeof $=="function"&&T.push($)}),()=>{T.forEach(R=>{try{R()}catch{}})}},[vn]),Object.entries(n||{}).map(([m,T])=>({uid:m,...T}));function Ty(m){const R=(j[m]||"").toString().split(/[,,\s]+/).map(ae=>ae.trim()).filter(Boolean);if(R.length===0)return;const $=/^[-a-zA-Z]+$/,G=R.filter(ae=>!$.test(ae));if(G.length>0){alert(`    (, ,  )  :
${G.join(", ")}

(  )  .`);return}const oe=R.map(ae=>{const Ie=Object.entries(n||{}).find(([Ae,ye])=>ye.name===ae);return{name:ae,uid:Ie?Ie[0]:null}});MC(m,Ze,oe).then(()=>{N(ae=>({...ae,[m]:""}))})}function Wa(m,T){ZC(m,T).then(()=>{}).catch(R=>{console.error(R),alert("     .")})}async function Ry(m){if(window.confirm(`${m}    ? (   .)`))try{const R=(A[m]||[]).map($=>_C($,null));await Promise.all(R),await OC(m,Ze),alert(`${m}   ,     .`)}catch(T){console.error(T),alert("   .")}}function jy(m,T=null){const R=n[m];if(Po.current){try{Po.current()}catch{}Po.current=null}if(u({uid:m,...R}),Bt(T||(R==null?void 0:R.crew)||""),R&&R.crew){const $=Hp(R.crew,m,d);typeof $=="function"&&(Po.current=$)}else d({})}_.useEffect(()=>{if(!(c!=null&&c.uid)||!an){jo({});return}if(Ln.current){try{Ln.current()}catch{}Ln.current=null}const m=Hp(an,c.uid,jo);return Ln.current=m,()=>{if(Ln.current)try{Ln.current()}catch{}}},[c==null?void 0:c.uid,ri,Tr,an]);function Iy(m,T){if(!(c!=null&&c.uid)||!an)return;const R=!T;iy(an,c.uid,m,R).catch($=>{console.error("  ",$),alert("  .")})}async function $f(m,T){if(!m)return;const R=T?`(${T})`:"";window.confirm(` ? ${R}

- : 0000
-      .`)&&(await LC(m),alert(" 0000 ."))}async function Ay(m,T){if(!m)return;const R=T?`(${T})`:"";window.confirm(` ? ${R}

-   ' ' .
-    .`)&&(await SC(m),alert("() ."))}async function Ny(m,T){if(!m)return;const R=T?`(${T})`:"";window.confirm(`  ? ${R}`)&&(await wC(m),alert("."))}async function Dy(m,T){if(!m)return;const R=T?`(${T})`:"";window.confirm(`  ? ${R}

- users  .
-  (  )   .
-   .`)&&(await CC(m),alert(" ."))}async function Py(){const m=window.prompt("    .");m&&(await HC(m),alert("  . (  8395  .)"))}function Fy(){window.confirm("   ?")&&NC().then(()=>{alert("  .")})}async function My(){if(window.confirm(`3   DB  .
  .

?`))try{const T=await AC(3);alert(` : ${(T==null?void 0:T.deleted)||0} .`)}catch(T){console.error("  ",T),alert("   .   .")}}function Oy(m){const T=Ye(m);window.confirm(`${T}    .
  .

?`)&&RC(m).then(()=>{alert(`${T}    .`)})}function By(){const m=new Date;let T=m.getFullYear(),R=m.getMonth()+1;R===1?(T=T-1,R=12):R=R-1;const{ranking:$}=Ck(i,n,T,R);if(!$||$.length===0){alert("   .");return}const G=String(R).padStart(2,"0"),oe=`${T}-${G}`,ae=[];$.forEach(ce=>{if(!ce.medal)return;const de=n[ce.uid];if(!de)return;const Me=de.earnedMedals||{},ve=er({...Me,[`${oe}_${ce.crew}`]:ce.medal}),ot=er(Me);ve.totalDok>ot.totalDok&&ae.push({name:ce.name,uid:ce.uid,dokCount:ve.totalDok})});const Ie=ly(T,R,$,ae),Ae={};$.forEach(ce=>{var ot,Ct;const de=((ot=n[ce.uid])==null?void 0:ot.medals)||{},Me=(de.gold||0)+(de.silver||0)+(de.bronze||0),ve=er(((Ct=n[ce.uid])==null?void 0:Ct.earnedMedals)||{});Ae[ce.uid]={uid:ce.uid,name:ce.name,crew:ce.crew,chapters:ce.chapters,progress:100,stateLabel:ce.medal?"":"",totalMedals:Me,totalDok:ve.totalDok}});const ye=oE(T,R,Ae);Promise.all([Ie,ye]).then(()=>{alert(`${T} ${R}      .`),Yp().then($n)})}async function zy(){if(!J||!Ce||!Je||!wr){alert(", , ,   / .");return}const m=Math.min(12,Math.max(1,Number(Je)||0)),R=Object.entries(n||{}).find(([G,oe])=>(oe&&oe.name)===J);if(!R){alert("     . (   )");return}const[$]=R;rs(!0);try{const G=await FC(Ce,m,$,ni,wr);alert(G?"      .":"  .    .")}catch(G){console.error(G),alert("    .")}}_.useEffect(()=>{Yp().then($n)},[]);async function Ly(m){var T;if(No(m),!m){is(null);return}Do(!0),console.log(" [8]     (Live Logic V2):",m);try{const[R,$]=m.split("-"),G=parseInt(R,10),oe=parseInt($,10),ae=Vt(G,oe),Ie=ae.length,Ae=P(ie,`approvals/${m}`),ce=(await ue(Ae)).val()||{},de=P(ie,"users"),ve=(await ue(de)).val()||{},ot=[];for(const Ct of he){const li=Object.keys(ce[Ct]||{});if(li.length===0)continue;const as=P(ie,`crews/${Ct}/users`),Mo=(await ue(as)).val()||{};for(const Cn of li){const Uf=ve[Cn]||{name:""},Hy=((T=Mo[Cn])==null?void 0:T.checks)||{},Ha=ae.filter(Bo=>Hy[Bo]).length,Vy=Math.round(Ha/Ie*100),Hf=Ha===Ie;let Va="";if(Hf)Va="";else{const Bo=new Date,Gy=`${Bo.getFullYear()}-${String(Bo.getMonth()+1).padStart(2,"0")}`;m===Gy&&(Va="")}let Oo=null;Hf&&(Ct===""?Oo="gold":Ct===""?Oo="silver":Oo="bronze");const Ya=Uf.medals||{},Yy=(Ya.gold||0)+(Ya.silver||0)+(Ya.bronze||0);ot.push({uid:Cn,name:Uf.name||Cn,crew:Ct,chapters:Ha,progress:Vy,stateLabel:Va,totalMedals:Yy,medal:Oo})}}is(ot)}catch(R){console.error(R),alert("    .")}finally{Do(!1)}}async function Fo(m){const T=m||_n;ft(!0);try{const R=P(ie,"users"),G=(await ue(R)).val()||{},oe=[];Object.entries(G).forEach(([ae,Ie])=>{if(!Ie.earnedMedals)return;const Ae=Object.entries(Ie.earnedMedals).filter(([Ct,li])=>Ct.startsWith(`${T}-`));if(Ae.length===0)return;const ye={},ce={adv:0,int:0,nt:0,ota:0,otb:0};Ae.forEach(([Ct,li])=>{const[as,At]=Ct.split("_");ye[At]=(ye[At]||0)+1,At===""?ce.adv++:At===""?ce.int++:At===""?ce.nt++:At==="(A)"?ce.ota++:At==="(B)"?ce.otb++:At&&(At.includes("")||At.includes(""))&&ce.nt++});let de=0,Me=ce.nt;de+=ce.adv;const ve=Math.min(ce.int,Me);de+=ve,Me-=ve;const ot=Math.min(ce.ota,ce.otb,Me);de+=ot,oe.push({name:Ie.name||"",crews:ye,totalBible:de})}),Re(oe.sort((ae,Ie)=>Ie.totalBible-ae.totalBible||ae.name.localeCompare(Ie.name)))}catch(R){console.error(R),alert("     .")}finally{ft(!1)}}_.useEffect(()=>{Fo()},[]);const $y=le.filter(m=>et==="all"?!0:et==="full"?m.totalBible>0:(m.crews[et]||0)>0),ls=Object.entries(n||{}).filter(([m,T])=>{if(!T||(T.status||"active")==="inactive")return!1;const R=Object.values(A).some($=>Array.isArray($)&&$.includes(m));return!T.crew&&!R}).map(([m,T])=>({uid:m,...T})),Ua=Object.entries(n||{}).filter(([m,T])=>T&&(T.status||"")==="inactive").map(([m,T])=>({uid:m,...T}));async function Wy(){if(!xn||!F){alert("    .");return}const m=Object.entries(n).find(([$,G])=>(G.name||"").trim()===xn.trim());if(!m){alert("     . (   )");return}const[T,R]=m;if(window.confirm(`${xn}  ${Ye(F)}   ?`))try{await cy(F,T,R.name),alert(" .       ."),ss(""),X("")}catch($){console.error($),alert(" : "+($.message||$))}}async function Uy(){if(!xn){alert("  .");return}const m=(xn||"").trim(),T=Object.entries(n).find(([Ae,ye])=>(ye.name||"").trim()===m);if(!T){alert("     .");return}const[R,$]=T,G=Jn($.name);let oe=F,ae="";for(const[Ae,ye]of Object.entries(K))if(Array.isArray(ye)&&ye.some(ce=>Jn(ce)===G)){oe=Ae,ae="( )";break}if(!ae&&O){for(const[Ae,ye]of Object.entries(O))if(ye&&ye[R]){oe=Ae,ae="(  )";break}}if(!oe){alert("  /    .");return}const Ie=Ye(oe);if(window.confirm(`${xn}  ${Ie}  ? ${ae}`))try{await Af(R,oe),alert("."),ss(""),X("")}catch(Ae){console.error(Ae),alert(" : "+(Ae.message||Ae))}}async function Wf(m,T,R){const $=R?"":"";if(window.confirm(`${T}  ${$} ?
(      .)`))try{await VC(m,!R),alert(`${T}  ${$} .`)}catch(G){console.error(G),alert(" .")}}return l.jsxs("div",{style:{padding:20,minHeight:"100vh",background:"#F1FAEE"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[l.jsx("h2",{style:{color:"#1D3557",margin:0},children:"  "}),l.jsx("button",{onClick:()=>e("/home"),style:{padding:"8px 16px",borderRadius:10,border:"none",background:"#457B9D",color:"#fff",fontSize:14,fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:"  "})]}),l.jsx("p",{style:{marginBottom:20},children:"  ,  , /     ."}),l.jsx("div",{style:{display:"flex",gap:8,marginBottom:24,overflowX:"auto",paddingBottom:8,flexWrap:"nowrap",WebkitOverflowScrolling:"touch"},children:[{id:"group1",label:"1.   ",icon:""},{id:"group2",label:"2.   ",icon:""},{id:"group3",label:"3.   ",icon:""},{id:"group4",label:"4.   ",icon:""}].map(m=>l.jsxs("button",{onClick:()=>ky(m.id),style:{padding:"12px 18px",borderRadius:12,border:"none",background:wn===m.id?"#1D3557":"#fff",color:wn===m.id?"#fff":"#457B9D",fontWeight:800,fontSize:14,cursor:"pointer",boxShadow:wn===m.id?"0 4px 12px rgba(29, 53, 87, 0.3)":"0 4px 6px rgba(0,0,0,0.05)",whiteSpace:"nowrap",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:6},children:[l.jsx("span",{children:m.icon})," ",m.label]},m.id))}),wn==="group1"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{marginBottom:18},children:l.jsx("button",{type:"button",onClick:()=>e("/admin/class-notice"),style:{padding:"10px 14px",borderRadius:10,border:"none",background:"#111827",color:"#fff",fontSize:14,fontWeight:800,cursor:"pointer",boxShadow:"0 6px 16px rgba(0,0,0,0.10)",marginBottom:10},children:"   "})}),l.jsxs("div",{style:{marginBottom:20,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)"},children:[l.jsx("h3",{style:{marginBottom:8,color:"#1D3557"},children:"[1]   "}),l.jsxs("div",{style:{marginBottom:8},children:[l.jsx("label",{style:{fontSize:13,display:"block",marginBottom:4},children:" "}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("input",{style:{flex:1,padding:8,borderRadius:6,border:"1px solid #ccc"},value:p,onChange:m=>y(m.target.value),placeholder:": "}),l.jsx("button",{type:"button",onClick:()=>{tE(p||""),alert("  .")},style:{padding:"8px 12px",borderRadius:6,border:"none",background:"#1D3557",color:"#fff",fontSize:13,cursor:"pointer"},children:""})]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{fontSize:13,display:"block",marginBottom:4},children:"   "}),l.jsx("textarea",{style:{width:"100%",minHeight:80,padding:8,borderRadius:6,border:"1px solid #ccc",resize:"vertical"},value:b,onChange:m=>k(m.target.value),placeholder:"     ."}),l.jsx("button",{type:"button",onClick:()=>{nE(b||""),alert("  .")},style:{marginTop:8,padding:"8px 12px",borderRadius:6,border:"none",background:"#457B9D",color:"#fff",fontSize:13,cursor:"pointer"},children:" "})]}),l.jsxs("div",{style:{marginTop:14},children:[l.jsx("label",{style:{fontSize:13,display:"block",marginBottom:4},children:"   (URL)"}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("input",{style:{flex:1,padding:8,borderRadius:6,border:"1px solid #ccc"},value:w,onChange:m=>C(m.target.value),placeholder:": https://... (PDF/ )"}),l.jsx("button",{type:"button",onClick:()=>{rE(w||""),alert("  .")},style:{padding:"8px 12px",borderRadius:6,border:"none",background:"#457B9D",color:"#fff",fontSize:13,cursor:"pointer",whiteSpace:"nowrap"},children:""})]}),l.jsx("div",{style:{marginTop:6,fontSize:12,color:"#666"},children:"           ."})]}),l.jsxs("div",{style:{marginTop:16},children:[l.jsx("h4",{style:{marginBottom:6,color:"#1D3557"},children:"  "}),l.jsx("input",{style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #ccc",marginBottom:6},placeholder:" ",value:h,onChange:m=>x(m.target.value)}),l.jsx("textarea",{style:{width:"100%",minHeight:70,padding:8,borderRadius:6,border:"1px solid #ccc",resize:"vertical"},placeholder:"      .",value:v,onChange:m=>S(m.target.value)}),l.jsx("button",{type:"button",onClick:()=>{XC(h||"",v||""),alert("   . (   .)")},style:{marginTop:8,padding:"8px 12px",borderRadius:6,border:"none",background:"#E76F51",color:"#fff",fontSize:13,cursor:"pointer"},children:" "})]}),l.jsxs("div",{style:{marginTop:16},children:[l.jsx("h4",{style:{marginBottom:6,color:"#1D3557"},children:"    "}),l.jsx("p",{style:{fontSize:12,marginBottom:8,color:"#666"},children:"        ."}),l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:12},children:[l.jsx("button",{type:"button",onClick:Py,style:{padding:"8px 12px",borderRadius:8,border:"none",background:"#264653",color:"#fff",fontSize:13,fontWeight:"bold",cursor:"pointer"},children:"  "}),l.jsx("button",{onClick:Fy,style:{padding:"8px 12px",borderRadius:8,border:"none",background:"#B91C1C",color:"#fff",fontSize:13,fontWeight:"bold",cursor:"pointer"},children:"  "}),l.jsx("button",{onClick:My,style:{padding:"8px 12px",borderRadius:8,border:"1px solid #0B8457",background:"#fff",color:"#0B8457",fontSize:13,fontWeight:"bold",cursor:"pointer"},children:"3   "})]}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6,marginTop:10},children:he.map(m=>l.jsxs("button",{onClick:()=>Oy(m),style:{padding:"6px 10px",borderRadius:6,border:"none",background:"#E63946",color:"#fff",fontSize:11,cursor:"pointer"},children:[Ye(m),"  "]},m))})]}),l.jsxs("div",{style:{marginTop:24,padding:16,borderRadius:12,background:"#f8f9fa",border:"1px solid #dee2e6"},children:[l.jsx("h4",{style:{marginTop:0,marginBottom:10,color:"#333"},children:"[11]   "}),l.jsx("p",{style:{fontSize:12,marginBottom:12,color:"#666"},children:"      ."}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:15},children:Object.entries(n||{}).filter(([m,T])=>T.isAdmin).map(([m,T])=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"4px 10px",background:"#fff",borderRadius:20,border:"1px solid #ddd"},children:[l.jsx("span",{style:{fontWeight:"bold",fontSize:12},children:T.name||m}),l.jsx("button",{onClick:()=>Wf(m,T.name,!0),style:{border:"none",background:"none",cursor:"pointer",fontSize:12,color:"#E63946"},children:""})]},m))}),l.jsxs("div",{style:{display:"flex",gap:6,maxWidth:250},children:[l.jsx("input",{placeholder:" ",id:"newAdminNameInput",style:{flex:1,padding:6,borderRadius:6,border:"1px solid #ccc",fontSize:12}}),l.jsx("button",{onClick:()=>{const m=document.getElementById("newAdminNameInput"),T=(m.value||"").trim(),R=Object.entries(n).find(([$,G])=>G.name===T);R?(Wf(R[0],R[1].name,!1),m.value=""):alert("   .")},style:{padding:"6px 12px",borderRadius:6,border:"none",background:"#333",color:"#fff",fontSize:12,cursor:"pointer"},children:""})]})]})]})]}),wn==="group2"&&l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:20},children:[l.jsxs("div",{style:{padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)"},children:[l.jsx("h3",{style:{marginBottom:8,color:"#1D3557"},children:"[2]  "}),l.jsx("p",{style:{fontSize:12,marginBottom:12,color:"#555"},children:"      .        ."}),he.map(m=>l.jsxs("div",{style:{marginBottom:12},children:[l.jsxs("div",{style:{fontWeight:"bold",marginBottom:4},children:[Ye(m),"  "]}),l.jsxs("div",{style:{display:"flex",gap:8,marginBottom:4,flexWrap:"wrap",fontSize:12},children:[l.jsx("span",{style:{alignSelf:"center"},children:" :"}),l.jsx("button",{type:"button",onClick:()=>Wa(m,"manual"),style:{padding:"6px 10px",borderRadius:999,border:I[m]==="manual"?"2px solid #2E7D32":"1px solid #ccc",background:I[m]==="manual"?"#E8F5E9":"#fff",color:"#2E7D32",fontWeight:"bold",cursor:"pointer"},children:"()"}),l.jsx("button",{type:"button",onClick:()=>Wa(m,"all"),style:{padding:"6px 10px",borderRadius:999,border:I[m]==="all"?"2px solid #1E88E5":"1px solid #ccc",background:I[m]==="all"?"#E3F2FD":"#fff",color:"#1E88E5",fontWeight:"bold",cursor:"pointer"},children:""}),l.jsx("button",{type:"button",onClick:()=>Wa(m,"closed"),style:{padding:"6px 10px",borderRadius:999,border:I[m]==="closed"?"2px solid #D32F2F":"1px solid #ccc",background:I[m]==="closed"?"#FFEBEE":"#fff",color:"#D32F2F",fontWeight:"bold",cursor:"pointer"},children:"()"})]}),l.jsxs("div",{style:{display:"flex",gap:8,marginBottom:4},children:[l.jsx("input",{style:{flex:1,padding:8,borderRadius:6,border:"1px solid #ccc"},placeholder:" ",value:j[m]||"",onChange:T=>N(R=>({...R,[m]:T.target.value}))}),l.jsx("button",{type:"button",onClick:()=>Ty(m),style:{padding:"8px 12px",borderRadius:6,border:"none",background:"#2E7D32",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:""}),l.jsx("button",{type:"button",onClick:()=>Ry(m),style:{padding:"8px 12px",borderRadius:6,border:"none",background:"#D32F2F",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:""})]}),A[m]&&A[m].length>0&&l.jsxs("div",{style:{fontSize:12,color:"#333"},children:[l.jsx("span",{children:"   : "}),A[m].join(", ")]})]},m)),l.jsxs("div",{style:{marginTop:18},children:[l.jsx("h4",{style:{marginBottom:6},children:"() "}),!Ua||Ua.length===0?l.jsx("p",{style:{fontSize:12,color:"#666"},children:"  ."}):l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"left",padding:4},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"center",padding:4},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"center",padding:4},children:""})]})}),l.jsx("tbody",{children:Ua.map(m=>l.jsxs("tr",{children:[l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4},children:m.name||m.uid}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"center"},children:l.jsx("button",{type:"button",onClick:()=>Ny(m.uid,m.name),style:{padding:"4px 8px",borderRadius:8,border:"none",background:"#457B9D",color:"#fff",fontSize:11,cursor:"pointer"},children:""})}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"center"},children:l.jsx("button",{type:"button",onClick:()=>Dy(m.uid,m.name),style:{padding:"4px 8px",borderRadius:8,border:"none",background:"#B71C1C",color:"#fff",fontSize:11,cursor:"pointer"},children:""})})]},m.uid))})]})]})]}),l.jsxs("div",{style:{padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)"},children:[l.jsx("h3",{style:{marginBottom:8,color:"#1D3557"},children:"[3]      "}),l.jsx("p",{style:{fontSize:12,marginBottom:12,color:"#555"},children:"        . (     )"}),l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:[l.jsx("input",{placeholder:" ",value:xn,onChange:m=>ss(m.target.value),style:{padding:8,borderRadius:6,border:"1px solid #ccc"}}),l.jsxs("select",{value:F,onChange:m=>X(m.target.value),style:{padding:8,borderRadius:6,border:"1px solid #ccc"},children:[l.jsx("option",{value:"",children:" "}),he.map(m=>l.jsx("option",{value:m,children:Ye(m)},m))]}),l.jsx("button",{onClick:Wy,style:{padding:"8px 16px",borderRadius:6,border:"none",background:"#0B8457",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:""}),l.jsx("button",{onClick:Uy,style:{padding:"8px 16px",borderRadius:6,border:"1px solid #D32F2F",background:"#fff",color:"#D32F2F",fontWeight:"bold",cursor:"pointer"},children:""})]})]}),l.jsxs("div",{style:{marginBottom:20,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)",borderLeft:"5px solid #2E7D32"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[l.jsxs("h3",{style:{margin:0,color:"#1D3557"},children:["[4]      (",vn,")"]}),(()=>{const m=new Date,$=`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}`>=vn;return l.jsx("button",{onClick:()=>Lf(vn,K),disabled:!$||Mf,style:{padding:"8px 16px",borderRadius:8,border:"none",background:$?"#2E7D32":"#ccc",color:"#fff",fontWeight:"bold",cursor:$?"pointer":"not-allowed",fontSize:13},children:Mf?" ...":`[${vn}]    (  )`})})()]}),l.jsxs("p",{style:{fontSize:12,color:"#666",marginBottom:12},children:["     . ",l.jsxs("strong",{children:[vn," 1  "]}),"       ."]}),he.map(m=>{const T=K[m]||[];return T.length===0?null:l.jsxs("div",{style:{marginBottom:10,fontSize:13},children:[l.jsxs("span",{style:{fontWeight:"bold",marginRight:8},children:[Ye(m),":"]}),l.jsx("span",{style:{color:"#333"},children:T.join(", ")})]},m)}),Object.values(K).every(m=>m.length===0)&&l.jsx("div",{style:{fontSize:12,color:"#999"},children:"   ."})]}),l.jsxs("div",{style:{marginBottom:20,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)"},children:[l.jsxs("h3",{style:{marginBottom:8,color:"#1D3557"},children:["[5]      (",Ze,")"]}),l.jsx("p",{style:{fontSize:12,marginBottom:12,color:"#555"},children:"    [4]        . ( ([2])      .)"}),oi?l.jsxs("div",{children:[l.jsxs("div",{style:{fontSize:11,color:"#2E7D32",marginBottom:15,fontWeight:"bold"},children:["   : ",new Date(oi).toLocaleString()]}),he.map(m=>{const T=Ey[m]||[],R=A[m]||[],$=new Set(T.map(G=>Jn(G)));return l.jsxs("div",{style:{marginBottom:20,fontSize:13},children:[l.jsxs("div",{style:{fontWeight:800,borderBottom:"2px solid #eee",paddingBottom:4,color:"#1D3557",display:"flex",justifyContent:"space-between"},children:[l.jsx("span",{children:Ye(m)}),l.jsxs("span",{style:{color:"#2E7D32"},children:[R.length,""]})]}),l.jsx("div",{style:{marginTop:8,display:"flex",flexWrap:"wrap",gap:"6px 12px",lineHeight:1.5},children:R.length===0?l.jsx("span",{style:{color:"#999",fontStyle:"italic"},children:"  "}):R.sort().map(G=>{const oe=!$.has(Jn(G));return l.jsx("span",{style:{color:oe?"#E63946":"#444",fontWeight:oe?"bold":"normal",textDecoration:oe?"underline":"none"},children:G},G)})})]},m)}),l.jsxs("div",{style:{marginTop:24,padding:"12px 14px",borderRadius:8,background:"#f8f9fa",border:"1px solid #dee2e6",display:"flex",justifyContent:"space-between",alignItems:"center",fontWeight:900,fontSize:16,color:"#1D3557"},children:[l.jsx("span",{children:"    "}),l.jsxs("span",{style:{color:"#2E7D32",fontSize:20},children:[he.reduce((m,T)=>{var R;return m+(((R=A[T])==null?void 0:R.length)||0)},0),""]})]}),l.jsx("p",{style:{fontSize:11,color:"#E63946",marginTop:10},children:"*  :       ."})]}):l.jsxs("div",{style:{fontSize:13,color:"#777",background:"#F1F3F5",padding:"30px 20px",borderRadius:12,border:"1px dashed #CED4DA",textAlign:"center"},children:[l.jsxs("p",{style:{marginBottom:15,fontWeight:"bold",color:"#495057"},children:["  (",Ze,")     ."]}),l.jsxs("p",{style:{marginBottom:20,fontSize:12,color:"#868E96"},children:["        ,",l.jsx("br",{}),"    ([2] )        ."]}),l.jsx("button",{onClick:()=>Lf(Ze,A),style:{padding:"12px 24px",background:"#457B9D",color:"#fff",border:"none",borderRadius:8,fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",transition:"all 0.2s"},onMouseOver:m=>m.target.style.background="#1D3557",onMouseOut:m=>m.target.style.background="#457B9D",children:"<2  5 >"}),l.jsx("p",{style:{fontSize:11,marginTop:15,color:"#ADB5BD"},children:"         [5]       ."})]})]})]}),wn==="group3"&&l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:20},children:[l.jsxs("div",{style:{marginBottom:10,padding:"12px 16px",borderRadius:12,background:"#F1F3F5",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsx("span",{style:{fontSize:14,fontWeight:"bold",color:"#1D3557"},children:"   ( )"}),l.jsx("button",{onClick:By,style:{padding:"8px 16px",borderRadius:8,border:"none",background:"#1D3557",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:"   "})]}),l.jsxs("div",{style:{marginTop:24,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 10px rgba(0,0,0,0.06)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[l.jsx("h3",{style:{margin:0},children:"[6]     "}),l.jsx("button",{onClick:()=>st(!jr),style:{padding:"6px 12px",borderRadius:8,border:"1px solid #1D3557",background:jr?"#f1f1f1":"#fff",color:"#1D3557",fontSize:12,fontWeight:"bold",cursor:"pointer"},children:jr?" ":" "})]}),jr&&l.jsxs(l.Fragment,{children:[l.jsx("p",{style:{fontSize:12,marginBottom:10},children:"         ."}),he.map(m=>l.jsxs("div",{style:{marginBottom:16},children:[l.jsx("h4",{style:{marginBottom:6},children:Ye(m)}),(!o[m]||o[m].length===0)&&l.jsx("p",{style:{fontSize:12,color:"#666"},children:"  ."}),o[m]&&o[m].length>0&&l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"left",padding:4},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"right",padding:4},children:" "}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"right",padding:4},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"center",padding:4},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"center",padding:4,minWidth:100},children:"/1"}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"center",padding:4},children:" "})]})}),l.jsx("tbody",{children:o[m].map(T=>l.jsxs("tr",{children:[l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4},children:T.name}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"right"},children:T.chapters}),l.jsxs("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"right"},children:[T.progress,"%"]}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"center"},children:(()=>{const R=T.stateLabel||" ",$=T.stateKey||"",G=$==="success"||R.includes(""),oe=$==="ready"||R.includes(""),ae=$==="running"||R.includes("");if($==="fail"||R.includes("!"),oe)return l.jsx("span",{style:{color:"#166534",fontWeight:600},children:R});const Ie={display:"inline-block",borderRadius:8,padding:"4px 16px",fontWeight:600,backgroundColor:G?"#DCFCE7":ae?"#DBEAFE":"#E5E7EB",color:G?"#166534":ae?"#1D4ED8":"#111827"};return l.jsx("span",{style:Ie,children:R})})()}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"center"},children:l.jsxs("div",{style:{fontSize:11},children:[T.medals.gold||T.medals.silver||T.medals.bronze?l.jsxs("div",{style:{marginBottom:2},children:[T.medals.gold>0&&`${T.medals.gold} `,T.medals.silver>0&&`${T.medals.silver} `,T.medals.bronze>0&&`${T.medals.bronze}`]}):null,T.dokStatus&&l.jsxs("div",{style:{fontWeight:800,color:"#1D3557"},children:[" ",T.dokStatus.totalDok,"",T.dokStatus.fragments&&T.dokStatus.fragments.length>0&&l.jsxs("div",{style:{fontSize:9,fontWeight:400,color:"#666"},children:["(+",T.dokStatus.fragments.map(R=>R.name.replace("","")).join(","),")"]})]})]})}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"center"},children:l.jsx("button",{type:"button",onClick:()=>$f(T.uid,T.name),style:{padding:"4px 8px",borderRadius:8,border:"none",background:"#8D99AE",color:"#fff",fontSize:11,cursor:"pointer"},children:" 0000"})})]},T.uid))})]})]},m))]}),l.jsxs("div",{style:{marginTop:16},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[l.jsx("h4",{style:{margin:0},children:" "}),l.jsx("button",{onClick:()=>$a(!qt),style:{padding:"4px 10px",borderRadius:8,border:"1px solid #1D3557",background:qt?"#f1f1f1":"#fff",color:"#1D3557",fontSize:11,fontWeight:"bold",cursor:"pointer"},children:qt?" ":" "})]}),qt&&l.jsxs(l.Fragment,{children:[(!ls||ls.length===0)&&l.jsx("p",{style:{fontSize:12,color:"#666"},children:"  ."}),ls&&ls.length>0&&l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"left",padding:4},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"center",padding:4},children:" "}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"center",padding:4},children:""})]})}),l.jsx("tbody",{children:ls.map(m=>l.jsxs("tr",{children:[l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4},children:m.name||m.uid}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"center"},children:l.jsx("button",{type:"button",onClick:()=>$f(m.uid,m.name),style:{padding:"4px 8px",borderRadius:8,border:"none",background:"#8D99AE",color:"#fff",fontSize:11,cursor:"pointer"},children:" 0000"})}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"center"},children:l.jsx("button",{type:"button",onClick:()=>Ay(m.uid,m.name),style:{padding:"4px 8px",borderRadius:8,border:"none",background:"#E63946",color:"#fff",fontSize:11,cursor:"pointer"},children:""})})]},m.uid))})]})]})]})]}),l.jsxs("div",{style:{marginTop:24,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 10px rgba(0,0,0,0.06)"},children:[l.jsx("h3",{style:{marginTop:0,marginBottom:10},children:"[7]    "}),l.jsx("p",{style:{fontSize:12,marginBottom:10,color:"#555"},children:"     ,      .         ."}),l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:8},children:[l.jsx("input",{type:"number",value:Ce,onChange:m=>Le(Number(m.target.value)||0),placeholder:"(: 2025)",style:{width:110,padding:6,borderRadius:8,border:"1px solid #ccc"}}),l.jsx("input",{type:"number",value:Je,onChange:m=>{const T=Number(m.target.value)||0,R=Math.min(12,Math.max(1,T));Te(R)},placeholder:"(1~12)",style:{width:80,padding:6,borderRadius:8,border:"1px solid #ccc"}}),l.jsx("input",{type:"text",value:J,onChange:m=>Fe(m.target.value),placeholder:" ",style:{flex:1,minWidth:120,padding:6,borderRadius:8,border:"1px solid #ccc"}}),l.jsxs("select",{value:wr,onChange:m=>Cr(m.target.value),style:{width:140,padding:6,borderRadius:8,border:"1px solid #ccc"},children:[l.jsx("option",{value:"",children:" "}),he.map(m=>l.jsx("option",{value:m,children:Ye(m)},m))]}),l.jsxs("select",{value:ni,onChange:m=>zn(m.target.value),style:{width:120,padding:6,borderRadius:8,border:"1px solid #ccc"},children:[l.jsx("option",{value:"gold",children:" "}),l.jsx("option",{value:"silver",children:" "}),l.jsx("option",{value:"bronze",children:" "}),l.jsx("option",{value:"none",children:" "})]})]}),l.jsx("button",{onClick:zy,disabled:Er,style:{padding:"8px 16px",borderRadius:8,border:"none",background:Er?"#A8A8A8":"#1D3557",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:Er?" ...":"    "})]}),l.jsxs("div",{style:{marginBottom:20,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)",borderLeft:"5px solid #1D3557",marginTop:24},children:[l.jsx("h3",{style:{marginTop:0,marginBottom:10,color:"#1D3557"},children:"[10]     "}),l.jsxs("p",{style:{fontSize:12,marginBottom:16,color:"#555"},children:["           .",l.jsx("br",{}),l.jsx("strong",{children:"     "})," ."]}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:20},children:[l.jsx("div",{style:{position:"relative",width:"100%",maxWidth:350},children:l.jsx("input",{type:"text",placeholder:"    (: )",value:He,onChange:m=>Io(m.target.value),style:{width:"100%",padding:"12px 15px",borderRadius:8,border:"1px solid #1D3557",fontSize:15,background:"#fff",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.05)"}})}),l.jsxs("select",{value:c?`${c.uid}|${an}`:"",onChange:m=>{const T=m.target.value;if(!T)return;const[R,$]=T.split("|");jy(R,$)},style:{width:"100%",maxWidth:350,padding:"10px",borderRadius:8,border:"1px solid #1D3557",fontSize:14,fontWeight:"bold",background:He?"#FFF9DB":"#fff"},children:[l.jsx("option",{value:"",children:He?`-- '${He}'   --`:"--    --"}),(()=>{const m=(He||"").trim().toLowerCase();if(!m)return null;const T=[];return Object.entries(n||{}).forEach(([R,$])=>{if(($.name||"").toLowerCase().includes(m)){const G=he.filter(oe=>(A[oe]||[]).includes(R));$.crew&&!G.includes($.crew)&&G.push($.crew),G.length===0?T.push({uid:R,name:$.name,crew:""}):G.forEach(oe=>T.push({uid:R,name:$.name,crew:oe}))}}),T.sort((R,$)=>R.name!==$.name?R.name.localeCompare($.name):Ye(R.crew).localeCompare(Ye($.crew))).map((R,$)=>l.jsxs("option",{value:`${R.uid}|${R.crew}`,children:[R.name," (",Ye(R.crew),")"]},`${R.uid}_${R.crew}_${$}`))})()]})]}),c?l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:10,marginBottom:16,alignItems:"center"},children:[l.jsxs("span",{style:{fontWeight:"bold",fontSize:15,color:"#1D3557"},children:[" : ",c.name," "]}),l.jsxs("div",{style:{display:"flex",gap:6},children:[l.jsx("select",{value:ri,onChange:m=>kr(Number(m.target.value)),style:{padding:6,borderRadius:8,border:"1px solid #ccc"},children:[2025,2026,2027].map(m=>l.jsxs("option",{value:m,children:[m,""]},m))}),l.jsx("select",{value:Tr,onChange:m=>Ro(Number(m.target.value)),style:{padding:6,borderRadius:8,border:"1px solid #ccc"},children:Array.from({length:12},(m,T)=>T+1).map(m=>l.jsxs("option",{value:m,children:[m,""]},m))}),l.jsxs("select",{value:an,onChange:m=>Bt(m.target.value),style:{padding:6,borderRadius:8,border:"1px solid #ccc"},children:[l.jsx("option",{value:"",children:" "}),he.map(m=>l.jsx("option",{value:m,children:Ye(m)},m))]})]})]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(60px, 1fr))",gap:8,padding:10,background:"#f1f3f5",borderRadius:12},children:Vt(ri,Tr).map(m=>{const T=za[m],R=m.split("-")[2];return l.jsxs("button",{onClick:()=>Iy(m,T),style:{padding:"12px 0",borderRadius:8,border:T?"none":"1px solid #dee2e6",background:T?"#1D3557":"#fff",color:T?"#fff":"#495057",fontWeight:"bold",fontSize:13,cursor:"pointer",transition:"all 0.2s"},children:[R,"",l.jsx("div",{style:{fontSize:10,marginTop:2,opacity:.8},children:T?"V":"-"})]},m)})})]}):l.jsx("div",{style:{padding:"20px",textAlign:"center",background:"#f8f9fa",borderRadius:8,color:"#999"},children:"   ."})]})]}),wn==="group4"&&l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:20},children:[l.jsxs("div",{style:{padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[l.jsx("h3",{style:{margin:0,color:"#1D3557"},children:"[8]    (  )"}),l.jsx("button",{onClick:()=>Sn(!Kt),style:{padding:"8px 14px",borderRadius:8,border:"1px solid #1D3557",background:Kt?"#f1f1f1":"#fff",color:"#1D3557",fontSize:13,fontWeight:"bold",cursor:"pointer"},children:Kt?"  ":"  "})]}),!Kt&&l.jsx("p",{style:{fontSize:12,color:"#666",margin:0},children:"          ."}),Kt&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{marginTop:16,marginBottom:16},children:[l.jsx("label",{style:{fontSize:13,marginRight:8},children:" :"}),l.jsxs("select",{value:Rr,onChange:m=>Ly(m.target.value),style:{padding:"6px 10px",borderRadius:8,border:"1px solid #ccc"},children:[l.jsx("option",{value:"",children:"--   --"}),Ao.map(m=>l.jsx("option",{value:m,children:m},m))]})]}),La&&l.jsx("p",{children:"  ..."}),ii&&l.jsx("div",{style:{overflowX:"auto"},children:l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:13},children:[l.jsx("thead",{children:l.jsxs("tr",{style:{background:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[l.jsx("th",{style:{padding:10,textAlign:"left"},children:""}),l.jsx("th",{style:{padding:10,textAlign:"left"},children:""}),l.jsx("th",{style:{padding:10,textAlign:"center"},children:" "}),l.jsx("th",{style:{padding:10,textAlign:"center"},children:""}),l.jsx("th",{style:{padding:10,textAlign:"center"},children:""}),l.jsx("th",{style:{padding:10,textAlign:"center"},children:" "})]})}),l.jsx("tbody",{children:Object.values(ii).sort((m,T)=>m.crew.localeCompare(T.crew)||m.name.localeCompare(T.name)).map(m=>l.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[l.jsx("td",{style:{padding:10},children:m.crew}),l.jsx("td",{style:{padding:10,fontWeight:"bold"},children:m.name}),l.jsx("td",{style:{padding:10,textAlign:"center"},children:String(m.chapters).endsWith("")?m.chapters:`${m.chapters}`}),l.jsxs("td",{style:{padding:10,textAlign:"center"},children:[m.progress,"%"]}),l.jsx("td",{style:{padding:10,textAlign:"center"},children:l.jsx("span",{style:{padding:"2px 6px",borderRadius:4,fontSize:11,color:"#fff",background:m.stateLabel===""?"#2E7D32":m.stateLabel===""?"#1E88E5":"#D32F2F"},children:m.stateLabel})}),l.jsxs("td",{style:{padding:10,textAlign:"center"},children:[m.totalMedals,""]})]},m.uid))})]})})]})]}),l.jsxs("div",{style:{marginBottom:20,padding:16,borderRadius:12,background:"#ffffff",boxShadow:"0 4px 12px rgba(0,0,0,0.04)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:14},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[l.jsx("h3",{style:{margin:0,color:"#1D3557"},children:"[9]    ( 1 )"}),l.jsx("select",{value:_n,onChange:m=>{const T=Number(m.target.value);bn(T),Fo(T)},style:{padding:"4px 8px",borderRadius:8,border:"1px solid #ccc",fontSize:13},children:[2024,2025,2026,2027].map(m=>l.jsxs("option",{value:m,children:[m,""]},m))})]}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("button",{onClick:()=>Fo(),style:{padding:"6px 12px",borderRadius:8,border:"1px solid #457B9D",background:"#fff",color:"#457B9D",fontSize:12,cursor:"pointer"},children:"  "}),l.jsx("button",{onClick:()=>si(!wt),style:{padding:"6px 12px",borderRadius:8,border:"1px solid #1D3557",background:wt?"#f1f1f1":"#fff",color:"#1D3557",fontSize:12,fontWeight:"bold",cursor:"pointer"},children:wt?" ":" "})]})]}),wt&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",gap:6,marginBottom:16,flexWrap:"wrap"},children:[l.jsx("button",{onClick:()=>cn("all"),style:Pc(et==="all"),children:" "}),l.jsx("button",{onClick:()=>cn("full"),style:Pc(et==="full"),children:" 1  "}),he.map(m=>l.jsxs("button",{onClick:()=>cn(m),style:Pc(et===m),children:[Ye(m)," "]},m))]}),Ve?l.jsx("p",{children:" ..."}):l.jsx("div",{style:{overflowX:"auto"},children:l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:13},children:[l.jsx("thead",{children:l.jsxs("tr",{style:{background:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[l.jsx("th",{style:{padding:10,textAlign:"left"},children:""}),l.jsx("th",{style:{padding:10,textAlign:"center"},children:"  "}),l.jsx("th",{style:{padding:10,textAlign:"center"},children:" 1"}),l.jsx("th",{style:{padding:10,textAlign:"left",fontSize:11,color:"#666"},children:"  "})]})}),l.jsx("tbody",{children:$y.map(m=>l.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[l.jsx("td",{style:{padding:10,fontWeight:"bold"},children:m.name}),l.jsxs("td",{style:{padding:10,textAlign:"center"},children:[Object.values(m.crews).reduce((T,R)=>T+R,0)," "]}),l.jsx("td",{style:{padding:10,textAlign:"center"},children:l.jsxs("span",{style:{padding:"4px 8px",borderRadius:20,background:m.totalBible>0?"#E9C46A":"#f0f0f0",color:m.totalBible>0?"#000":"#888",fontWeight:"bold",fontSize:12},children:[" ",m.totalBible,""]})}),l.jsx("td",{style:{padding:10,fontSize:11},children:Object.entries(m.crews).map(([T,R])=>l.jsxs("span",{style:{marginRight:8,display:"inline-block"},children:[T,"(",R,")"]},T))})]},m.name))})]})})]})]})]}),l.jsxs("div",{style:{marginTop:40,padding:20,background:"#F0F9FF",border:"2px solid #3B82F6",borderRadius:12},children:[l.jsx("h3",{style:{color:"#1E40AF",margin:"0 0 10px 0"},children:" [11]     ( )"}),l.jsxs("p",{style:{fontSize:13,color:"#1E3A8A",lineHeight:1.5,marginBottom:15},children:["     ,   .",l.jsx("br",{}),"(         /  .)"]}),l.jsx("button",{onClick:async()=>{if(window.confirm(`    ?
(    .)`))try{const m=await aE();alert(m),Fo()}catch(m){alert(" : "+m.message)}},style:{padding:"12px 24px",background:"#2563EB",color:"white",border:"none",borderRadius:8,fontWeight:"bold",cursor:"pointer",fontSize:15,display:"flex",alignItems:"center",gap:8},children:"   "})]})]})}const Pc=t=>({padding:"6px 12px",borderRadius:20,border:"1px solid #457B9D",background:t?"#457B9D":"#fff",color:t?"#fff":"#457B9D",fontSize:12,fontWeight:t?"bold":"normal",cursor:"pointer"});function kk(){const t=yn(),[e,n]=_.useState({}),[r,i]=_.useState(""),[s,o]=_.useState(!0),[a,c]=_.useState(""),[u,f]=_.useState(""),[d,h]=_.useState(!1),[x,v]=_.useState(""),[S,E]=_.useState("");_.useEffect(()=>{const k=pC(w=>n(w||{}));return()=>{typeof k=="function"&&k()}},[]);const g=_.useMemo(()=>e&&e[r]||null,[e,r]);_.useEffect(()=>{const k=g||{};o(!!k.enabled),c((k.title||"").toString()),f((k.content||"").toString()),v(""),E("")},[g,r]);const p=_.useMemo(()=>{const k=g==null?void 0:g.version;return parseInt(k||"0",10)||0},[g]),y=_.useMemo(()=>{const k=g==null?void 0:g.updatedAt;if(!k)return"";const w=new Date(k),C=w.getFullYear(),j=String(w.getMonth()+1).padStart(2,"0"),N=String(w.getDate()).padStart(2,"0"),I=String(w.getHours()).padStart(2,"0"),M=String(w.getMinutes()).padStart(2,"0");return`${C}-${j}-${N} ${I}:${M}`},[g]);async function b(){h(!0),v(""),E("");try{await vC(r,{enabled:s,title:(a||"").trim(),content:(u||"").toString()}),v(". ( )"),setTimeout(()=>v(""),2e3)}catch(k){console.error("   ",k),E("   .")}finally{h(!1)}}return l.jsx("div",{style:{minHeight:"100vh",background:"#F8F9FF",padding:"22px 16px 40px",boxSizing:"border-box"},children:l.jsxs("div",{style:{maxWidth:760,margin:"0 auto"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},children:[l.jsx("button",{onClick:()=>t("/admin"),style:{border:"none",background:"#111827",color:"#fff",borderRadius:12,padding:"10px 14px",fontWeight:700,cursor:"pointer"},children:"  "}),l.jsx("div",{style:{fontSize:20,fontWeight:900,color:"#111827"},children:"  "}),l.jsx("div",{style:{width:90}})]}),l.jsxs("div",{style:{marginTop:16,background:"#FFFFFF",borderRadius:16,padding:16,boxShadow:"0 10px 24px rgba(0,0,0,0.08)",border:"1px solid rgba(0,0,0,0.06)"},children:[l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:10,alignItems:"center",justifyContent:"space-between"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[l.jsx("div",{style:{fontWeight:800,color:"#111827"},children:" "}),l.jsxs("select",{value:r,onChange:k=>i(k.target.value),style:{padding:"10px 12px",borderRadius:12,border:"1px solid rgba(0,0,0,0.18)",fontWeight:700},children:[l.jsx("option",{value:"all",style:{color:"#2563EB",fontWeight:900},children:"   "}),If.map(k=>l.jsx("option",{value:k.crewKey,children:Ye(k.crewKey)},k.crewKey))]})]}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:10,fontWeight:800,color:"#111827"},children:[" ",l.jsx("input",{type:"checkbox",checked:s,onChange:k=>o(k.target.checked),style:{width:18,height:18}})]})]}),l.jsxs("div",{style:{marginTop:12,display:"flex",gap:12,flexWrap:"wrap"},children:[l.jsxs("div",{style:{fontSize:13,color:"#6B7280"},children:[" : ",l.jsx("b",{children:p})]}),y&&l.jsxs("div",{style:{fontSize:13,color:"#6B7280"},children:[" : ",y]})]}),l.jsxs("div",{style:{marginTop:14},children:[l.jsx("div",{style:{fontSize:14,fontWeight:800,color:"#111827",marginBottom:8},children:" ()"}),l.jsx("input",{value:a,onChange:k=>c(k.target.value),placeholder:":  ",style:{width:"100%",padding:"12px 14px",borderRadius:12,border:"1px solid rgba(0,0,0,0.18)",fontSize:15,boxSizing:"border-box"}})]}),l.jsxs("div",{style:{marginTop:14},children:[l.jsx("div",{style:{fontSize:14,fontWeight:800,color:"#111827",marginBottom:8},children:" "}),l.jsx("textarea",{value:u,onChange:k=>f(k.target.value),rows:10,placeholder:"     .\\n(   .)",style:{width:"100%",padding:"12px 14px",borderRadius:12,border:"1px solid rgba(0,0,0,0.18)",fontSize:15,lineHeight:1.6,boxSizing:"border-box",resize:"vertical"}})]}),l.jsxs("div",{style:{marginTop:14,display:"flex",gap:10,alignItems:"center"},children:[l.jsx("button",{onClick:b,disabled:d,style:{border:"none",background:d?"#9CA3AF":"#2563EB",color:"#fff",borderRadius:12,padding:"12px 14px",fontWeight:900,cursor:d?"not-allowed":"pointer",minWidth:120},children:d?"...":""}),x&&l.jsx("div",{style:{fontSize:14,color:"#065F46",fontWeight:800},children:x}),S&&l.jsx("div",{style:{fontSize:14,color:"#B91C1C",fontWeight:800},children:S})]}),l.jsxs("div",{style:{marginTop:18,background:"#F3F4F6",borderRadius:12,padding:12,fontSize:13,color:"#374151",lineHeight:1.6},children:[l.jsx("b",{children:" "}),l.jsxs("div",{children:["  ",l.jsx("b",{children:"ON"}),",  ,    ",l.jsx("b",{children:""}),"    ."]}),l.jsx("div",{children:"     +1 . (   )"})]})]})]})})}function Tk(){const[t,e]=_.useState(""),n=yn();async function r(i){i.preventDefault();try{const s=await UC(t);s&&s.ok&&n("/admin")}catch(s){alert(s&&s.message?s.message:"   .")}}return l.jsxs("div",{style:{minHeight:"100vh",background:"#E8F5E9",padding:24,textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center"},children:[l.jsx("h2",{style:{color:"#1B5E20",marginBottom:24,fontSize:26},children:" "}),l.jsxs("form",{onSubmit:r,style:{maxWidth:420,margin:"0 auto"},children:[l.jsx("input",{placeholder:"",type:"password",value:t,onChange:i=>e(i.target.value),style:{width:"100%",padding:16,borderRadius:10,border:"1px solid #ccc",marginBottom:14,fontSize:18}}),l.jsx("button",{type:"submit",style:{width:"100%",padding:16,borderRadius:10,background:"#1B5E20",color:"#fff",border:"none",fontSize:18},children:""}),l.jsx("div",{style:{marginTop:20},children:l.jsx("button",{type:"button",onClick:()=>n("/home"),style:{background:"none",border:"none",color:"#1565C0",cursor:"pointer",fontSize:14},children:"  "})})]})]})}function Un({src:t,alt:e}){return l.jsx("img",{src:t,alt:e,style:{width:34,height:34,objectFit:"contain",flexShrink:0},loading:"lazy"})}function Fc(){return l.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",style:{width:18,height:18,verticalAlign:"middle"},children:[l.jsx("circle",{cx:"12",cy:"5",r:"2"}),l.jsx("circle",{cx:"12",cy:"12",r:"2"}),l.jsx("circle",{cx:"12",cy:"19",r:"2"})]})}function om(){return l.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",style:{width:18,height:18,verticalAlign:"middle"},children:l.jsx("path",{d:"M4 6h16M4 12h16M4 18h16",stroke:"currentColor",strokeWidth:"2"})})}function Mc(){return l.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",style:{width:18,height:18,verticalAlign:"middle"},children:[l.jsx("path",{d:"M12 3v10",stroke:"currentColor",strokeWidth:"2"}),l.jsx("path",{d:"M8 7l4-4 4 4",fill:"none",stroke:"currentColor",strokeWidth:"2"}),l.jsx("rect",{x:"5",y:"11",width:"14",height:"10",rx:"2",ry:"2",fill:"none",stroke:"currentColor",strokeWidth:"2"})]})}function lm(){return l.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",style:{width:18,height:18,verticalAlign:"middle"},children:[l.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"currentColor",strokeWidth:"2"}),l.jsx("path",{d:"M12 7v10M7 12h10",stroke:"currentColor",strokeWidth:"2"})]})}function Rk(){return l.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",style:{width:20,height:20,verticalAlign:"middle"},children:l.jsx("path",{d:"M12 4c-4.4 0-8 2.7-8 6s3.6 6 8 6c.5 0 1-.04 1.5-.12L17 19l-.8-3.2C18.3 14.7 20 12.9 20 10c0-3.3-3.6-6-8-6z",fill:"#3C1E1E"})})}function jk(){return l.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",style:{width:20,height:20,verticalAlign:"middle"},children:[l.jsx("rect",{x:"2",y:"2",width:"8",height:"8",rx:"1"}),l.jsx("rect",{x:"4",y:"4",width:"4",height:"4",fill:"currentColor"}),l.jsx("rect",{x:"14",y:"2",width:"8",height:"8",rx:"1"}),l.jsx("rect",{x:"16",y:"4",width:"4",height:"4",fill:"currentColor"}),l.jsx("rect",{x:"2",y:"14",width:"8",height:"8",rx:"1"}),l.jsx("rect",{x:"4",y:"16",width:"4",height:"4",fill:"currentColor"}),l.jsx("rect",{x:"12",y:"12",width:"2",height:"2"}),l.jsx("rect",{x:"15",y:"12",width:"2",height:"2"}),l.jsx("rect",{x:"18",y:"12",width:"2",height:"2"}),l.jsx("rect",{x:"12",y:"15",width:"2",height:"2"}),l.jsx("rect",{x:"14",y:"17",width:"2",height:"2"}),l.jsx("rect",{x:"18",y:"18",width:"2",height:"2"})]})}function Ik(){const[t,e]=_.useState(null),n=({children:a})=>l.jsx("div",{style:{background:"#FFFFFF",border:"1px solid rgba(0,0,0,0.08)",borderRadius:14,padding:14,marginTop:12,boxShadow:"0 6px 18px rgba(0,0,0,0.06)"},children:a}),r=({left:a,children:c})=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"8px 0"},children:[a,l.jsx("div",{style:{flex:1,color:"#1B5E20",fontSize:16,lineHeight:1.35},children:c})]}),i=({children:a})=>l.jsx("div",{style:{fontWeight:800,color:"#1B5E20",marginTop:8,marginBottom:4,fontSize:16},children:a}),s=({kind:a,bg:c,fg:u,icon:f,label:d})=>{const h=t===a;return l.jsxs("button",{type:"button",onClick:()=>e(h?null:a),style:{width:"100%",maxWidth:320,padding:"14px 16px",borderRadius:14,border:"none",background:c,color:u,fontWeight:900,fontSize:20,display:"flex",alignItems:"center",justifyContent:"center",gap:10,cursor:"pointer"},children:[l.jsx("span",{style:{display:"inline-flex",alignItems:"center"},children:f}),l.jsx("span",{children:d})]})},o=l.jsx("span",{style:{margin:"0 6px",color:"#1B5E20",fontWeight:900},children:""});return l.jsxs("div",{style:{maxWidth:520,margin:"0 auto 18px auto"},children:[l.jsx("div",{style:{textAlign:"center",color:"#1B5E20",fontWeight:900,fontSize:18},children:"   "}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:10,marginTop:12},children:[l.jsx(s,{kind:"kakao",bg:"#FEE500",fg:"#3C1E1E",icon:l.jsx(Rk,{}),label:"   "}),l.jsx(s,{kind:"qr",bg:"#1565c0",fg:"#fff",icon:l.jsx(jk,{}),label:"QR   "})]}),t==="kakao"&&l.jsxs(n,{children:[l.jsx(i,{children:"1:    "}),l.jsxs(r,{left:l.jsx(Un,{src:"/icons/galaxy.png",alt:""}),children:[l.jsx("strong",{children:"  "}),"     ",l.jsx(Fc,{}),o,"  "]}),l.jsxs(r,{left:l.jsx(Un,{src:"/icons/apple.png",alt:""}),children:[l.jsx("strong",{children:""}),"    ",l.jsx(Mc,{}),o," "]}),l.jsx(i,{children:"2:    "}),l.jsxs(r,{left:l.jsx(Un,{src:"/icons/samsung-internet.png",alt:""}),children:[l.jsx("strong",{children:""}),"    ",l.jsx(om,{}),o,l.jsx("strong",{children:"+ "})," ",l.jsx(lm,{}),o,""]}),l.jsxs(r,{left:l.jsx(Un,{src:"/icons/chrome.png",alt:""}),children:[l.jsx("strong",{children:""}),"     ",l.jsx(Fc,{}),o," "]}),l.jsxs(r,{left:l.jsx(Un,{src:"/icons/safari.png",alt:""}),children:[l.jsx("strong",{children:""}),"    ",l.jsx(Mc,{}),o," "]})]}),t==="qr"&&l.jsxs(n,{children:[l.jsx(i,{children:"   "}),l.jsxs(r,{left:l.jsx(Un,{src:"/icons/safari.png",alt:""}),children:[l.jsx("strong",{children:""}),"    ",l.jsx(Mc,{}),o," "]}),l.jsxs(r,{left:l.jsx(Un,{src:"/icons/samsung-internet.png",alt:""}),children:[l.jsx("strong",{children:""}),"    ",l.jsx(om,{}),o,l.jsx("strong",{children:"+ "})," ",l.jsx(lm,{}),o,""]}),l.jsxs(r,{left:l.jsx(Un,{src:"/icons/chrome.png",alt:""}),children:[l.jsx("strong",{children:""}),"     ",l.jsx(Fc,{}),o," "]})]})]})}function am({onLogin:t}){const[e,n]=_.useState(""),[r,i]=_.useState(""),[s,o]=_.useState({}),a=yn();_.useEffect(()=>{const h=Nf(x=>o(x||{}));return()=>{typeof h=="function"&&h()}},[]);const c=s.churchName||"",u=s.appDescription||"  .",f=(s.bulletinUrl||"").trim();async function d(h){h.preventDefault();const x=e.trim(),v=(r??"").trim();if(!x){alert("  .");return}if(!/^[-A-Za-z]+$/.test(x)){alert(`     .
(//  )`);return}if(!v){alert(`  .
        .`);return}try{if(t){const E=await t(x,v);E&&E.mustChangePassword?a("/change-password"):a("/home")}}catch(E){alert(E&&E.message?E.message:" .")}}return l.jsxs("div",{style:{minHeight:"100vh",background:"#E8F5E9",padding:24,display:"flex",flexDirection:"column",justifyContent:"center"},children:[l.jsx(Ik,{}),l.jsx("h1",{style:{textAlign:"center",color:"#1B5E20",marginBottom:18,fontSize:28},children:" "}),l.jsxs("form",{onSubmit:d,style:{maxWidth:480,margin:"0 auto"},children:[f?l.jsx("a",{href:f,target:"_blank",rel:"noopener noreferrer",style:{display:"block",width:"100%",padding:14,marginBottom:12,borderRadius:10,textAlign:"center",textDecoration:"none",background:"#1D3557",color:"#fff",fontSize:18,fontWeight:700},children:" "}):null,l.jsx("input",{placeholder:"",value:e,onChange:h=>n(h.target.value),style:{width:"100%",padding:16,borderRadius:10,border:"1px solid #ccc",marginBottom:14,fontSize:18}}),l.jsx("input",{placeholder:"",type:"password",value:r,onChange:h=>i(h.target.value),style:{width:"100%",padding:16,borderRadius:10,border:"1px solid #ccc",marginBottom:14,fontSize:18}}),l.jsx("button",{type:"submit",style:{width:"100%",padding:16,background:"#2E7D32",color:"#fff",border:"none",borderRadius:10,fontWeight:"bold",fontSize:18},children:""}),l.jsx("div",{style:{marginTop:20,textAlign:"center",color:"#1B5E20"},children:c}),l.jsx("p",{style:{textAlign:"center",whiteSpace:"pre-line",marginTop:20,color:"#1B5E20"},children:u})]})]})}function Ak({user:t}){const[e,n]=_.useState(""),[r,i]=_.useState(""),s=yn();_.useEffect(()=>{(!t||!t.uid)&&s("/login")},[t,s]);async function o(a){if(a.preventDefault(),!e||!r){alert("   .");return}if(e!==r){alert("   .");return}try{await $C(t.uid,e),alert(" ."),s("/home")}catch(c){alert(c&&c.message?c.message:"  .")}}return l.jsxs("div",{style:{minHeight:"100vh",background:"#E3F2FD",padding:20},children:[l.jsx("h2",{style:{textAlign:"center",color:"#1565C0",marginBottom:16},children:" "}),l.jsx("p",{style:{textAlign:"center",marginBottom:24},children:"       ."}),l.jsxs("form",{onSubmit:o,style:{maxWidth:400,margin:"0 auto",background:"#fff",padding:20,borderRadius:12,boxShadow:"0 4px 12px rgba(0,0,0,0.08)"},children:[l.jsxs("div",{style:{marginBottom:12},children:[l.jsx("label",{style:{display:"block",marginBottom:4,fontSize:14},children:" "}),l.jsx("input",{type:"password",value:e,onChange:a=>n(a.target.value),style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ccc"}})]}),l.jsxs("div",{style:{marginBottom:20},children:[l.jsx("label",{style:{display:"block",marginBottom:4,fontSize:14},children:"  "}),l.jsx("input",{type:"password",value:r,onChange:a=>i(a.target.value),style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ccc"}})]}),l.jsx("button",{type:"submit",style:{width:"100%",padding:12,borderRadius:6,border:"none",background:"#1565C0",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:"  "})]})]})}function Nk(){const[t,e]=_.useState(null);return _.useEffect(()=>{const n=Nf(r=>{e(r||{})});return()=>{typeof n=="function"&&n()}},[]),t}const cm={:{1:" ",2:" ",3:"    ",4:" ",5:" ",6:" ",7:"",8:" ",9:"   ",10:"  ( 1:5-23)",11:"",12:"  ",13:"   ",14:"  ",15:"   ",16:" ",17:": ",18:"  ",19:" ",20:" ",21:"  ",22:"   ",23:"   ",24:"   ",25:" ",26:"  ",27:"  ",28:"   ",29:"   ",30:"   ",31:"  ",32:"    ",33:"  ",34:"   ",35:"   ",36:" ( 1:34-37)",37:" ",38:" ",39:"  ",40:"   ",41:"   ",42:"   ",43:"    ",44:" ",45:"   ",46:"   ",47:"  ",48:"   ",49:"  ",50:"  "},:{2:" ",3:"  ",4:"   ",5:"    ",6:"  ",7:"   ",8:"  :  ",9:"  :  ",10:"  :   ",11:"    ",12:"",13:"",14:" ",15:" ",16:" ",17:"  ( 20:1-13)",18:"  ",19:"    ",20:"( 5:1-21)",21:"  ( 15:12-18)",22:"  ",23:"  ",24:"   ",25:"  ",26:"( 36:8-38)",27:"( 38:1-7)",28:" ( 39:1-7)",29:"  ( 8:1-36)",30:" ( 37:25-28)",31:"   ( 35:30-36:1)",32:" ( 9:6-29)",33:"   ",34:"  ( 10:1-5)",35:" ",36:"   ",37:" ( 25:10-22)",38:" ( 27:1-8)",39:"  ( 28:1-14)",40:" "},:{2:" ",3:" ",4:"  ",5:"  ",6:"  ",7:"  ",8:"    ",9:"   ",10:"    ",11:"   ",12:"    ",13:"    ",14:"    ",15:"  ",16:"",17:"  ",18:"   ",19:" ",20:"   ",21:"   ",22:"  ",23:"   ",24:"   ",25:"",26:" ",27:"  "},:{1:"   ",2:"    ",3:" ",4:"  ",5:"  ",6:" ",7:"   ",8:"   ",9:"  ",10:" ",11:"",12:"  ",13:"  ( 1:19-33)",14:" ",15:"  ",16:"   ",17:" ",18:"  ",19:"  ",20:"   ( 17:1-7)",21:" ",22:"   ",23:"   ",24:"  ",25:"  ",26:"   ",27:" ",28:"  ( 29:38-46)",29:"  ( 23:23-25)",30:"  ",31:"   ",32:"   ( 3:12-22)",33:" ",34:"  ",35:"   ",36:"   "},:{1:"  ( 18:13-17)",2:"   ",3:"    ( 21:21-35)",4:"   ",5:"( 20:1-17)",6:"   ",7:"  ( 34:11-16)",8:"   ",9:" ",10:"   ( 34:1-10)",11:"   ",12:"  ",14:" ",15:"   ( 25:1-7)",16:"( 12:1-20)",17:" ",18:"   ",19:"( 35:9-28;  20:1-9)",20:"   ",21:"   ",22:"  ",23:"   ",24:" ",25:"   ",26:" ",27:"   ",28:"  ( 26:3-13;  7:12-24)",29:"   ",30:"  ",31:"   ",33:" ",34:" "},:{1:"   ",2:"   ",3:"   ",4:"   ",5:"   ",6:"  ",7:" ",8:"  ",9:"   ",10:"  ",11:"  ",12:"  ",13:"  ",14:"   ",15:"  ",16:"    ",17:"   ",18:"  ",19:"  ",20:"",21:"  ",22:"   ",23:"  ",24:"    "},:{1:"    ",2:"   ",3:"    ",4:" ",5:"  ",6:" ",7:"  ",8:"   ",9:"",10:" ",11:" ",12:"  ",13:" ",14:"  ",15:"  ",16:"  ",17:"  ",18:"  ",19:"    ",20:"   ",21:"  "},:{1:"   ",2:"  ",3:"  ",4:"  "},:{1:" ",2:" ",3:"  ",4:" ",5:"   ",6:" ",7:"  ",8:"  ",9:"  ",10:"  ",11:"   ",12:"  ",13:"  ",14:"  ",15:"  ",16:"   ",17:"   ",18:"   ",19:"   ",20:"  ",21:"   ",22:"   ",23:"  ",24:"   ",25:" ",26:"    ",27:"   ",28:"   ",29:"    ",30:"  ",31:"  ( 10:1-14)"},:{1:"     ",2:"   ",3:" ( 3:1-4)",4:" ",5:"    ( 11:1-3)",6:"    ( 13:1-14; 15:25-16:6, 43)",7:"   ( 17:1-15)",8:"   ( 18:1-17)",9:" ",10:"  ( 19:1-19)",11:" ",12:"   ",13:" ",14:"  ",15:" ",16:" ",17:"    ",18:" ",19:"  ",20:" ",21:"     ",22:" (",23:"  ",24:" ( 21:1-27)"},:{1:"   ",2:"   ",3:"  ( 1:3-12)",4:"  ",5:"   ( 2:1-18)",6:"  ",7:" ",8:"  ( 5:2-6:2)",9:"   ",10:"   ( 9:1-12)",11:"   ",12:"  ( 10:1-19)",13:"  ",14:"  ",15:"  ( 13:1-14:1)",16:"  ",17:" ",18:"  ",19:"  ",20:"  ",21:" ",22:"   ( 18:2-27)"},:{2:"  ",3:"  ",4:"  ",5:"  ",6:" ",7:"  ",8:"  ",9:"   ",10:"  ",11:"  ( 22:10-23:15)",12:"  ( 24:1-16)",13:"  ",14:"  ( 25:1-24)",15:"  ( 26:1-23)",16:"  ( 28:1-27)",17:"  ",18:"  ( 29:1-2; 31:1)",19:"    ( 37:1-7)",20:"  ( 32:24-26;  38:1-8, 21-22)",21:"  ( 33:1-20)",22:"  ( 34:1-2)",23:"   ( 34:3-7, 29-33)",24:"  ( 36:9-10)",25:" ( 36:13-21;  52:3-11)"},:{1:" ( 25:12-16)",2:" ",3:"   ",4:" ",5:" ",6:" ",7:" ",8:" ",9:"   ",10:"  ( 31:1-13)",11:"    ( 5:1-10)",12:"    ",13:"  ( 6:1-11)",14:"  ( 5:11-16)",15:"   ",16:" ( 105:1-15; 96:1-13; 106:47-48)",17:"    ( 7:1-17)",18:"  ( 8:1-18)",19:"   ( 10:1-19)",20:"  ( 12:26-31)",21:"  ( 24:1-25)",22:"  ",23:"  ",24:"   ",25:"  ",26:" ",27:"   ",28:"   ",29:"   "},:{1:" ( 10:26-29)",2:"  ( 5:1-18)",3:" ( 7:15-22)",4:"   ( 7:23-51)",5:"  ( 8:1-9)",6:" ( 8:12-21)",7:" ( 8:62-66)",8:" ( 9:10-28)",9:"   ( 10:1-13)",10:"  ( 12:1-20)",11:"   ( 12:21-24)",12:"  ( 14:25-28)",13:"  ( 15:1-8)",14:"   ",15:" ",16:"  ( 15:17-22)",17:"   ",18:"    ( 22:1-28)",19:"   ",20:"  ",21:"  ( 8:17-24)",22:"  ( 8:25-29; 9:21-28)",23:"  ( 11:4-16)",24:"  ( 12:1-16)",25:"  ( 14:2-6)",26:"   ( 14:21-22; 15:1-7)",27:"  ( 15:32-38)",28:"  ( 16:1-5)",29:"    ( 18:1-3)",30:" ",31:" ",32:"   ( 18:13-37; 19:14-19, 35-37;  36:1-22; 37:8-38)",33:"  ( 21:1-9)",34:"   ( 22:1-2)",35:"  ( 23:21-23)",36:"  ( 23:30-35)"},:{1:"   ",2:" ( 7:4-73)",3:"   ",4:"   ",5:"   ",6:"    ",7:"  ",8:"   ",9:"  ",10:"     "},:{2:"  ",3:"  ",4:" ",5:"  ",6:"  ",7:"  ",9:"  ",10:"  ",11:"  ",12:"  ",13:" "},:{2:"  ",3:"    ",4:"   ",5:"    ",6:"   ",7:" ",8:"    ",9:"   ",10:"   "},:{1:"   ",2:"   ",3:"   ",4:"  ",6:" ",8:"  ",9:" ",11:"  ",12:" ",13:" ",15:"   ",16:" ",18:"   ",19:" ",20:"   ",21:" ",22:"   ",23:" ",25:"   ",26:" ",27:"    ",28:" ",29:"  ",32:"  (32:1-37:24)",33:"   ",38:"  ",42:" "},:{3:"       ",4:" ,     ",5:" ,     ",6:" ,       ",7:" ,       ",8:" ,     ",9:" ,     ",11:" ,    ",12:" ,      ",13:" ,    ",14:" ,    ",15:" ",16:" ",17:" ",18:"   ,    ,                  ",19:" ,    ",20:" ,    ",21:" ,    ",22:" ,     ",23:" ",24:" ",25:" ",26:" ",27:" ",28:" ",29:" ",30:" ,   ",31:" ,    ",32:" ",34:"       ",35:" ",36:"   ,    ",37:" ",38:"  ",39:" ,      ",40:" ,    ",41:" ,    ",44:"  ,    ",45:"  ,  ,     ",46:"  ,     ",47:"  ,    ",48:"    ",49:"  ,    ",50:" ",51:" ,    ,         ",52:" ,    ,           ",53:" ,     ",54:" ,     ,             ",55:" ,     ",56:"  ,       ,     ",57:"  ,     ,      ",58:"  ,     ",59:"  ,     ,         ",60:"    ,     ,                 ",61:" ,     ",62:" ,       ",63:" ,    ",64:" ,    ",65:" ,    ",66:",    ",67:"  ,     ",68:" ,    ",69:" ,     ",70:"      ",72:" ",74:" ",75:" ,     ",76:" ,     ",77:" ,       ",78:" ",79:" ",80:" ,     ",81:" ,     ",82:" ",83:"   ",84:"  ,     ",85:"  ,    ",86:" ",87:"    ",88:"       ,     ",89:"  ",98:"",100:" ",101:" ",102:"          ",103:" ",108:"  ",109:" ,    ",110:" ",120:"  ",121:"  ",122:"     ",123:"  ",124:"     ",125:"  ",126:"  ",127:"     ",128:"  ",129:"  ",130:"  ",131:"     ",132:"  ",133:"     ",134:"  ",138:" ",139:" ,    ",140:" ,    ",141:" ",142:"       ",143:" ",144:" ",145:" "},:{1:"  ",2:"  ",3:"  ",4:"  ",5:"   ",6:" ",7:"   ",8:"  ",9:" ",10:" ",25:" ",30:" ",31:"   "},:{1:"   ",2:" ",3:"   ",4:", , ",5:" ",7:"  ",8:" ",9:"     ",11:" ",12:" "},:{},:{1:" ",2:"   ",3:" ",4:"   ",5:" ",6:"  ",7:"    ",8:" ",9:" ",10:"  ",11:" ",12:" ",13:"  ",14:" ",15:"   ",16:"  ",17:"   ",18:"    ",19:"  ",20:"  ",21:"   ",22:"   ",23:"   ",24:"  ",25:"",26:"   ",28:"  ",29:"  ",30:"   ",32:"  ",33:"  ",34:"  ",35:" ",36:"  ( 18:13-27;  32:1-19)",37:"    ( 19:1-7)",38:"   ( 20:1-11;  32:24-26)",39:"  ( 20:12-19)",40:" ",41:"  ",42:" ",43:" ",44:"    ",45:"  ",47:" ",48:"   ",49:"  ",50:"  ",51:" ",52:"  ",54:"  ",55:" ",56:"  ",57:"  ",58:"  ",59:"   ",60:"  ",61:"  ",63:" ",65:"   ",66:"  "},:{1:"   ",2:" ",3:"  ",4:" ",5:"  ",6:"   ",7:"  ",8:" ",9:"    ",10:"    ",11:"   ",12:" ",13:" ",14:" ",15:"   ",16:"  ",17:"  ",18:" ",19:" ",20:" ",21:"     ",22:"   ",23:"  ",24:"   ",25:"     ",26:"    ",27:"   ",28:" ",29:"   ",30:"   ",31:"   ",32:"    ",33:"    ",34:"   ",35:"  ",36:"    ",37:"    ",38:"  ",39:" ( 25:1-12;  52:4-16)",40:"  ( 25:22-24)",42:"   ",43:"  ",44:"    ",45:"   ",46:"   ",47:"   ",48:" ",49:"  ",50:"  ",51:"  ",52:"  ( 24:18-25:7)"},:{2:"   ",3:", , ",4:"  ",5:"  "},:{2:"  ",3:" ( 33:1-9)",4:"  ",5:"   ",6:"   ",7:"  ",8:"  ",9:"   ",10:"   ",11:"  ",12:"    ",13:"  ",14:"   ",15:"     ",16:" ",17:"  ",18:"   ",19:"",20:" ,  ",21:" ",22:"  ",23:"  ",24:"  ",25:"  ",26:"  ",27:"  ",28:"   ",29:"  ",30:"  ",31:"   ",32:"   ",33:"   ( 3:16-21)",34:"   ",35:"   ",36:"  ",37:"  ",38:"  ",39:"  ",40:"   ",41:"  ",42:" ",43:"  ",44:"    ",45:" ",46:" ",47:"  ",48:"    "},:{2:" ",3:"  ",4:"    ",5:"   ",6:"   ",7:"  ",8:"  ",9:" ",10:"    ",11:"    ",12:""},:{1:"  ",2:" ",3:"   ",4:" ",5:"  ",6:"  ",7:"  ",8:"  ",9:"   ",10:"    ",11:"   ",12:"   ",13:"   ",14:"   "},:{1:"   ",2:"    ",3:"  "},:{1:"    ",2:"  ",3:"   ",4:"   ",5:"",6:" ",7:",  ",8:",    ",9:",   "},:{1:" "},:{1:" ",3:"  ",4:"   "},:{1:"   ",2:" ",3:"   ",4:"  ",5:"   ",6:"  ",7:" "},:{1:"   ",2:" "},:{1:" ",2:" ",3:" "},:{1:" ",2:"  ",3:"   "},:{1:"  "},:{1:"   ",2:"  ",3:"    ",4:"   ",5:" ",6:" ",7:"   ",8:"   ",9:"     ",10:"  ",11:" ",12:" ",13:"  ",14:"  "},:{1:"  ",2:"  ",3:"",4:"  "},:{1:"  ( 2:1-7)",2:"   ",3:"   ( 1:1-8;  3:1-18;  1:19-28)",4:" ( 1:12-13;  4:1-13)",5:"  ( 6:20-23)",6:"  ",7:" ( 6:37-38, 41-42)",8:"  ( 1:40-45;  5:12-16)",9:" ( 2:1-12;  5:17-26)",10:"  ( 3:13-19;  6:12-16)",11:" ( 7:18-35)",12:"   ( 2:23-28;  6:1-5)",13:"     ( 4:1-9;  8:4-8)",14:"  ( 6:14-29;  9:7-9)",15:" ( 7:1-23)",16:"   ( 8:11-13;  12:54-56)",17:"  ( 9:2-13;  9:28-36)",18:"  ( 9:33-37, 42-48;  9:46-48; 15:3-7; 17:1-2)",19:"  ( 10:1-12)",20:" ",21:" ( 11:1-11;  19:28-38;  12:12-19)",22:"  ( 14:15-24)",23:"  ( 12:38-40;  11:37-52; 20:45-47)",24:"   ( 13:1-2;  21:5-6)",25:"  ",26:"  ( 14:1-2;  22:1-2;  11:45-53)",27:"  ( 15:1;  23:1-2;  18:28-32)",28:"( 16:1-8;  24:1-12;  20:1-10)"},:{1:" ( 3:13-17;  3:21-22)",2:" ( 9:1-8;  5:17-26)",3:"    ( 12:9-14;  6:6-11)",4:"     ( 13:1-9;  8:4-8)",5:"   ( 8:28-34;  8:26-39)",6:"  ( 13:53-58;  4:16-30)",7:" ( 15:1-20)",8:"  ( 15:32-39)",9:"  ( 17:1-13;  9:28-36)",10:"  ( 19:1-12)",11:" ( 21:1-11;  19:28-40;  12:12-19)",12:"  ( 21:33-46;  20:9-19)",13:"   ( 24:1-2;  21:5-6)",14:"   ( 26:1-5;  22:1-2;  11:45-53)",15:"  ( 27:1-2, 11-14;  23:1-5;  18:28-38)",16:"( 28:1-10;  24:1-12;  20:1-18)"},:{1:"   ",2:" ( 1:18-25)",3:"  ( 3:1-12;  1:1-8;  1:19-28)",4:" ( 4:1-11;  1:12-13)",5:"  ( 4:18-22;  1:16-20)",6:"   ( 12:1-8;  2:23-28)",7:"  ( 8:5-13;  4:43-54)",8:"   ",9:"  ( 10:5-15;  6:7-13)",10:"   ( 11:20-24)",11:" ( 6:9-15; 7:7-11)",12:"  ( 10:26-33; 12:32; 10:19-20)",13:"  ",14:"   ",15:"    ( 18:12-14)",16:"   ",17:", ,   ( 18:6-7; 21:22;  9:42)",18:"  ",19:" ",20:"   ( 21:23-27;  11:27-33)",21:"  ( 12:41-44)",22:" ( 26:1-5, 14-16;  14:1-2, 10-11;  11:45-53)",23:"  ( 27:1-2, 11-14;  15:1-5;  18:28-38)",24:"   ( 16:12-13)"},:{1:"  ( 3:1-12;  1:7-8;  3:15-17)",2:" ",3:" ",4:"  ",5:"  ",6:"  ( 14:13-21;  6:30-44;  9:10-17)",7:"   ",8:"  ",9:"     ",10:"  ",11:"  ",12:"   ( 26:6-13;  14:3-9)",13:"  ",14:"    ",15:"   ",16:" ",17:"",18:"( 26:47-56;  14:43-50;  22:47-53)",19:"  ( 27:32-44;  15:21-32;  23:26-43)",20:"( 28:1-10;  16:1-8;  24:1-2)",21:"  "},:{1:"  ",2:" ",3:"      ",4:"    ",5:" ",6:"  ",7:" ",8:"  ",9:" ( 22:6-16; 26:12-18)",10:"  ",11:"   ",12:"   ",13:"  ",14:"   ",15:" ",16:"   ",17:"  ",18:"  ",19:"  ",20:"   ",21:"  ",22:" ( 9:1-19; 26:12-18)",23:"  ",24:" ",25:"  ",26:" ( 9:1-19; 22:6-16)",27:"  ",28:"  "},:{1:"   ",2:" ",3:"   ",4:"    ",5:"    ",6:"    ",7:"    ",8:"  ",9:"  ",10:"   ",11:"  ",12:"    ",13:"  ",14:"  ",15:"   ",16:""},:{1:"  ",2:"   ",3:" ",4:" ",5:"  ",6:"   ",7:"  ",8:"  ",9:" ",10:"   ",11:"   ",12:" ",13:"",14:" ",15:" ",16:"  "},:{1:"   ",2:"   ",3:"  ",4:"  ",5:"  ",6:"    ",7:"   ",8:" ",9:"   ",10:"   ",11:"  ",12:"    ",13:"  "},:{1:"  ",2:"   ",3:"  ",4:"   ",5:"  ",6:"  "},:{1:"   ",2:"    ",3:"   ",4:"   ",5:"  ",6:" "},:{1:"   ",2:" ",3:"  ",4:""},:{1:"  ",2:"  ",3:"  ",4:""},:{1:"   ",2:"   ",4:"   ",5:"  "},:{1:"   ",2:" ",3:"  "},:{1:"   ",2:"  ",3:"  ",4:" ",5:"  ",6:"   "},:{1:"   ",2:"   ",3:" ",4:" "},:{1:"    ",2:"  ",3:"  "},:{1:"  "},:{2:" ",3:"  ",4:"  ",5:" ",6:"  ",7:"",8:"  ",9:"    ",10:"  ",11:"",12:"  ",13:"  "},:{1:" ",2:"  ",3:"   ",4:"  ",5:"   "},:{1:" ",2:"   ",3:" ",4:"    ",5:"   "},:{1:"   ",2:"   ( 4-13)",3:" "},1:{},2:{},3:{},:{1:"   ( 2:1-17)"},:{1:" ",2:"   ",3:"   ",4:" ",5:"  ",6:"   ",7:"    ",8:"   ",10:"  ",11:" ",12:" ",13:"  ",14:"    ",16:"  ",17:"   ",18:" ",19:"   ",20:"  ",21:"   ",22:"  "}},Dk={:[{start:1,end:11,theme:",   "},{start:12,end:25,theme:"  "},{start:26,end:36,theme:"   "},{start:37,end:50,theme:"   "}],:[{start:1,end:18,theme:"   "},{start:19,end:40,theme:"  "}],:[{start:1,end:7,theme:"  "},{start:8,end:10,theme:"  "},{start:11,end:27,theme:"   "}],:[{start:1,end:10,theme:"  "},{start:11,end:25,theme:"  "},{start:26,end:36,theme:"   "}],:[{start:1,end:4,theme:"   "},{start:5,end:26,theme:"   "},{start:27,end:34,theme:"   "}],:[{start:1,end:5,theme:"   "},{start:6,end:12,theme:"   "},{start:13,end:24,theme:"   "}],:[{start:1,end:2,theme:"  "},{start:3,end:16,theme:"   "},{start:17,end:21,theme:",   "}],:[{start:1,end:4,theme:"()  "}],:[{start:1,end:7,theme:"   "},{start:8,end:15,theme:"    "},{start:16,end:31,theme:"   "}],:[{start:1,end:10,theme:"   "},{start:11,end:24,theme:"  , "}],:[{start:1,end:11,theme:"   "},{start:12,end:22,theme:"   "}],:[{start:1,end:17,theme:"   "},{start:18,end:25,theme:"   "}],:[{start:1,end:9,theme:"  "},{start:10,end:29,theme:"    "}],:[{start:1,end:9,theme:"   "},{start:10,end:36,theme:"    "}],:[{start:1,end:10,theme:"   "}],:[{start:1,end:13,theme:"   "}],:[{start:1,end:10,theme:"    "}],:[{start:1,end:42,theme:"    "}],:[{start:1,end:150,theme:"   "}],:[{start:1,end:31,theme:"   "}],:[{start:1,end:12,theme:"   "}],:[{start:1,end:8,theme:"   "}],:[{start:1,end:39,theme:"    "},{start:40,end:66,theme:"     "}],:[{start:1,end:25,theme:"    "},{start:26,end:52,theme:"    "}],:[{start:1,end:5,theme:"    "}],:[{start:1,end:24,theme:"   "},{start:25,end:32,theme:"   "},{start:33,end:48,theme:"    "}],:[{start:1,end:6,theme:"    "},{start:7,end:12,theme:"    "}],:[{start:1,end:14,theme:"    "}],:[{start:1,end:3,theme:"   "}],:[{start:1,end:9,theme:"    "}],:[{start:1,end:1,theme:"   "}],:[{start:1,end:4,theme:"   "}],:[{start:1,end:7,theme:" ,  "}],:[{start:1,end:3,theme:"   "}],:[{start:1,end:3,theme:"  "}],:[{start:1,end:3,theme:"    "}],:[{start:1,end:2,theme:"  "}],:[{start:1,end:14,theme:"   "}],:[{start:1,end:4,theme:"   "}],:[{start:1,end:4,theme:"   "},{start:5,end:7,theme:":   "},{start:8,end:25,theme:"    "},{start:26,end:28,theme:"   "}],:[{start:1,end:10,theme:"   "},{start:11,end:16,theme:"   "}],:[{start:1,end:3,theme:"   "},{start:4,end:19,theme:"    "},{start:20,end:24,theme:"  ,  "}],:[{start:1,end:12,theme:"   "},{start:13,end:21,theme:"     "}],:[{start:1,end:7,theme:"    "},{start:8,end:12,theme:"   "},{start:13,end:28,theme:"    "}],:[{start:1,end:8,theme:"   "},{start:9,end:11,theme:"   "},{start:12,end:16,theme:"   "}],:[{start:1,end:4,theme:"   "},{start:5,end:10,theme:"    "},{start:11,end:16,theme:" , ,  "}],:[{start:1,end:7,theme:"    "},{start:8,end:9,theme:"   "},{start:10,end:13,theme:"   "}],:[{start:1,end:2,theme:"   "},{start:3,end:4,theme:"   "},{start:5,end:6,theme:"   "}],:[{start:1,end:3,theme:"    "},{start:4,end:6,theme:"    "}],:[{start:1,end:2,theme:"    "},{start:3,end:4,theme:"   "}],:[{start:1,end:2,theme:"   "},{start:3,end:4,theme:"     "}],:[{start:1,end:3,theme:"    "},{start:4,end:5,theme:"    "}],:[{start:1,end:2,theme:"     "},{start:3,end:3,theme:"    "}],:[{start:1,end:3,theme:"   "},{start:4,end:6,theme:"   "}],:[{start:1,end:2,theme:"   "},{start:3,end:4,theme:"    "}],:[{start:1,end:3,theme:"   "}],:[{start:1,end:1,theme:"   "}],:[{start:1,end:10,theme:"   "},{start:11,end:13,theme:"   "}],:[{start:1,end:5,theme:"    "}],:[{start:1,end:5,theme:"     "}],:[{start:1,end:3,theme:"    "}],1:[{start:1,end:5,theme:"    "}],2:[{start:1,end:1,theme:"   "}],3:[{start:1,end:1,theme:"    "}],:[{start:1,end:1,theme:"    "}],:[{start:1,end:3,theme:"   "},{start:4,end:18,theme:"    "},{start:19,end:22,theme:"    "}]},Pk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"()",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",1:"",2:"",3:"",:"",:""},Fk={:"   ",:"   ",:"   ",:"   ",:"   ",:"   ","()":"   ",:"   ",:"    ",:"      "};function Mk({todayPortion:t,todayKey:e,checks:n,toggle:r,isApproved:i,isMobile:s}){if(!t)return null;const{sections:o}=_.useMemo(()=>{const u=v=>v?v.replace(//g,"").replace(/([-]{2,})/g,S=>rm(S)):"",f=v=>{if(!v)return 0;const E=v.replace(/[~]/g,"-").split(",");let g=0;return E.forEach(p=>{const y=p.replace(/[^0-9-]/g," "),b=y.match(/(\d+)\s*-\s*(\d+)/);b?g+=parseInt(b[2])-parseInt(b[1])+1:y.match(/(\d+)/)&&(g+=1)}),g};let d=[];if(t.panorama&&t.panorama.parsedSections)d=t.panorama.parsedSections.map(v=>({subTitle:v.subTitle||"",bibleRef:v.bibleRef}));else{const v=t.items||[],S=[];for(const E of v){if(!E||!E.book||typeof E.chapter!="number")continue;const g=S[S.length-1];g&&g.book===E.book&&E.chapter===g.to+1?g.to=E.chapter:S.push({book:E.book,from:E.chapter,to:E.chapter})}d=S.map(E=>({subTitle:"",bibleRef:E.from===E.to?`${E.book} ${E.from}`:`${E.book} ${E.from}~${E.to}`}))}let h=[];d.forEach(v=>{if(v.bibleRef.includes(",")){const S=v.bibleRef.split(","),E=S[0].match(/^([-a-zA-Z]+)/),g=E?E[1]:"";S.forEach((p,y)=>{let b=p.trim();y>0&&g&&!b.match(/^[-a-zA-Z]+/)&&(b=`${g} ${b}`),h.push({subTitle:v.subTitle,bibleRef:b})})}else h.push(v)});let x=[];if(h.length>0){let v=h.map(p=>({...p,count:f(p.bibleRef),abbreviations:[u(p.bibleRef)]}));const S=p=>{const b=p.bibleRef.replace(//g,"").replace(/[~]/g,"-").match(/^([-\s\u00A0a-zA-Z]+)\s*(\d+)(?:\s*-\s*(\d+))?/);if(b){const k=b[1].trim(),w=parseInt(b[2]),C=b[3]?parseInt(b[3]):w,j=C-w+1;if(j>=2){const N=Math.floor(j/2),I=w+N-1,M=w===I?`${k} ${w}`:`${k} ${w}~${I}`,A=I+1===C?`${k} ${C}`:`${k} ${I+1}~${C}`;return[{...p,bibleRef:M,count:I-w+1,abbreviations:[u(M)],subTitle:p.subTitle},{...p,bibleRef:A,count:C-(I+1)+1,abbreviations:[u(A)],subTitle:""}]}}return[p]};for(;v.length>4;){let p=-1,y=1/0;for(let b=0;b<v.length-1;b++){const k=v[b].count+v[b+1].count;k<y&&(y=k,p=b)}if(p!==-1){const b=v[p],k=v[p+1];v.splice(p,2,{...b,count:b.count+k.count,abbreviations:[...b.abbreviations,...k.abbreviations],subTitle:b.subTitle&&k.subTitle&&b.subTitle!==k.subTitle?`${b.subTitle} & ${k.subTitle}`:b.subTitle||k.subTitle})}else break}for(let p=0;p<5&&v.length<3;p++){let y=-1,b=-1;for(let k=0;k<v.length;k++)v[k].count>b&&(b=v[k].count,y=k);if(y!==-1&&v[y].count>=2){const k=S(v[y]);if(k.length>1)v.splice(y,1,...k);else break}else break}let E=0;const g=new Set;x=v.map(p=>{var k;E+=p.count;const y=p.abbreviations.reduce((w,C,j)=>{const N=C.replace(/\s+/g,"");if(j===0)return N;const I=p.abbreviations[j-1],M=I.includes("-"),A=C.includes("-"),H=I.match(/^([^\d]+)\s*\d+/),K=C.match(/^([^\d]+)\s*\d+/);if(H&&K&&H[1]===K[1]&&!M&&!A){const O=C.replace(K[1],"").trim();return`${w}, ${O.replace(/\s+/g,"")}`}else return H&&K&&H[1]===""&&K[1]===""?`${w}, ${N}`:`${w}
${N}`},"");let b=p.subTitle||"";if(!b)try{const C=(p.abbreviations[0]||"").match(/^([-]+)[\u00A0\s](\d+)/);if(C){const j=C[1],N=parseInt(C[2]),I=Object.keys(cm).find(A=>rm(A)===j)||j,M=Dk[I];if(M){const A=M.find(H=>N>=H.start&&N<=H.end);A&&(b=A.theme)}if(!b)if(p.count<=5)b=((k=cm[I])==null?void 0:k[String(N)])||"";else{const A=Pk[I];b=Fk[A]||""}}}catch(w){console.error("Subtitle auto-gen failed:",w)}return b&&g.has(b)?b="":b&&g.add(b),{...p,bibleRef:y,displayCount:E,subTitle:b}})}return{sections:x}},[t]),a=u=>[-50,30,-55,35][u%4],c=50;return l.jsx("div",{style:{marginTop:18,width:"100%",position:"relative",padding:"10px 0",overflow:"hidden"},children:l.jsxs("div",{style:{position:"relative",width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[o.length===1&&l.jsx("div",{style:{width:"100%",height:40,position:"relative",marginBottom:5},children:l.jsxs("svg",{style:{position:"absolute",top:0,left:"50%",width:200,height:40,transform:"translateX(-50%)"},children:[l.jsx("path",{d:`M 100 0 Q 100 20, ${100+a(0)} 40`,fill:"none",stroke:"rgba(255,255,255,0.7)",strokeWidth:"9",strokeLinecap:"round"}),l.jsx("path",{d:`M 100 0 Q 100 20, ${100+a(0)} 40`,fill:"none",stroke:"rgba(3,71,50,0.2)",strokeWidth:"2.5",strokeDasharray:"6,6"})]})}),o.map((u,f)=>{const d=a(f),h=f===o.length-1;return l.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",position:"relative",marginBottom:h?o.length===1?50:0:c},children:[f===1&&l.jsx("img",{src:"/runner_v2.png",alt:"runner",style:{position:"absolute",right:"22%",top:5,width:28,height:48,zIndex:3}}),f===2&&l.jsx("img",{src:"/sign_v2.png",alt:"sign",style:{position:"absolute",left:"15%",top:-35,width:50,height:"auto",zIndex:3}}),f>=4&&(f%2===0?l.jsx("span",{style:{position:"absolute",right:"1.2%",top:-5,fontSize:36,opacity:1,zIndex:3},children:""}):l.jsx("span",{style:{position:"absolute",left:"1.2%",top:-5,fontSize:36,opacity:1,zIndex:3},children:""})),l.jsxs("div",{style:{transform:`translateX(${d}px)`,transition:"transform 0.5s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",zIndex:2},children:[l.jsx("div",{style:{minWidth:48,height:48,padding:"0 8px",borderRadius:24,background:n[e]?"#1B9C5A":"#034732",border:n[e]?"4px solid rgba(255,255,255,0.2)":"4px solid #F3F4F6",display:"flex",alignItems:"center",justifyContent:"center",fontSize:19,fontWeight:900,color:"#ffffff",boxShadow:"none"},children:u.displayCount}),l.jsxs("div",{style:{position:"absolute",...[1,3].includes(f)?{right:52}:{left:52},width:190,textAlign:[1,3].includes(f)?"right":"left",display:"flex",flexDirection:"column"},children:[u.subTitle&&l.jsx("div",{style:{fontSize:11,fontWeight:900,letterSpacing:"-0.05em",color:"#FFEB3B",opacity:1,textShadow:"0 1px 2px rgba(0,0,0,0.4)",marginBottom:2,lineHeight:1.2,wordBreak:"keep-all"},children:u.subTitle}),l.jsx("div",{style:{fontSize:19,fontWeight:900,color:"#ffffff",textShadow:"0 1px 2px rgba(0,0,0,0.3)",whiteSpace:"pre-wrap",wordBreak:"keep-all",lineHeight:1.2},children:u.bibleRef})]})]}),!h&&l.jsxs("svg",{style:{position:"absolute",top:40,left:"50%",width:260,height:c+8,transform:"translateX(-50%)",zIndex:1,pointerEvents:"none"},children:[l.jsx("path",{d:`M ${130+d} 0 Q ${130+(d+a(f+1))/2+(f%2===0?45:-45)} ${c/2}, ${130+a(f+1)} ${c}`,fill:"none",stroke:n[e]?"rgba(255,255,255,0.4)":"rgba(255,255,255,0.8)",strokeWidth:"10",strokeLinecap:"round"}),l.jsx("path",{d:`M ${130+d} 0 Q ${130+(d+a(f+1))/2+(f%2===0?45:-45)} ${c/2}, ${130+a(f+1)} ${c}`,fill:"none",stroke:n[e]?"rgba(255,255,255,0.75)":"rgba(3,71,50,0.3)",strokeWidth:"2.5",strokeDasharray:"6,8",strokeLinecap:"round"})]}),h&&o.length===1&&l.jsxs("svg",{style:{position:"absolute",top:40,left:"50%",width:200,height:60,transform:"translateX(-50%)",zIndex:1},children:[l.jsx("path",{d:`M ${100+a(0)} 0 Q ${100+a(0)} 30, 100 60`,fill:"none",stroke:"rgba(255,255,255,0.7)",strokeWidth:"9",strokeLinecap:"round"}),l.jsx("path",{d:`M ${100+a(0)} 0 Q ${100+a(0)} 30, 100 60`,fill:"none",stroke:"rgba(3,71,50,0.2)",strokeWidth:"2.5",strokeDasharray:"6,6"})]})]},f)})]})})}function Hn({crewName:t,user:e}){const n=`${Ye(t)} `,[r,i]=_.useState({}),[s,o]=_.useState(new Date),[a,c]=_.useState([]),[u,f]=_.useState(!1),[d,h]=_.useState(""),[x,v]=_.useState(null),[S,E]=_.useState(""),[g,p]=_.useState(!1),[y,b]=_.useState(!1),[k,w]=_.useState(!1),[C,j]=_.useState(null),[N,I]=_.useState(!1),[M,A]=_.useState([]),[H,K]=_.useState({}),[ne,O]=_.useState({}),[Y,D]=_.useState([]);_.useState(!1);const[B,W]=_.useState(!1),q=Nk(),Fe=(q&&q.approval||{})[t]||"manual";_.useEffect(()=>{if(typeof window>"u")return;const F=window.matchMedia("(max-width: 768px)"),X=le=>W(le.matches);return W(F.matches),F.addEventListener("change",X),()=>F.removeEventListener("change",X)},[]);const Ce=yn(),Le=ay();function Je(F){if(!F)return"";const X=new Date(F);X.getFullYear();const le=String(X.getMonth()+1).padStart(2,"0"),Re=String(X.getDate()).padStart(2,"0"),Ve=String(X.getHours()).padStart(2,"0"),ft=String(X.getMinutes()).padStart(2,"0");return`${le}-${Re} ${Ve}:${ft}`}let Te=ck;t===""?Te=by:t===""?Te=Sy:t==="(A)"?Te=uk:t==="(B)"?Te=dk:t===""?Te=270:t===""&&(Te=124),_.useEffect(()=>{if(!(e!=null&&e.uid))return;const F=BC(t,Le,e.uid,X=>{b(X),w(!0)});return()=>{typeof F=="function"&&F()}},[e,t,Le]),_.useEffect(()=>{if(!(e!=null&&e.uid)||!t||!k)return;if(!(Fe!=="manual"||y)){I(!1);return}let X=!0;return(async()=>{try{const le=await mC(t);if(!X)return;if(!le||!le.enabled){I(!1);return}const Re=parseInt(le.version||"0",10)||0,Ve=await gC(e.uid,t);if(!X)return;!!((le.title||"").trim()||(le.content||"").trim())&&Re>(Ve||0)?(j({...le,version:Re}),I(!0)):I(!1)}catch(le){console.error("    ",le)}})(),()=>{X=!1}},[e==null?void 0:e.uid,t,k,y,Fe]);async function wr(){try{e!=null&&e.uid&&t&&(C!=null&&C.version)&&await yC(e.uid,t,C.version)}catch(F){console.error("      ",F)}finally{I(!1)}}_.useEffect(()=>{e!=null&&e.uid&&k&&(y||e.crew===t&&bC(e.uid).catch(F=>console.error("crew  ",F)))},[e,t,k,y]),_.useEffect(()=>{if(!(e!=null&&e.uid))return;if(!k||!y){i({});return}const F=ry(t,e.uid,i);return()=>{typeof F=="function"&&F()}},[e,t,k,y]),_.useEffect(()=>{const F=Da(Re=>O(Re||{})),X=xC(t,Re=>{K({[t]:Re})}),le=qu(t,Le,Re=>{const Ve=Re?Object.keys(Re):[];D(Ve)});return()=>{typeof F=="function"&&F(),typeof X=="function"&&X(),typeof le=="function"&&le()}},[t,Le]),_.useEffect(()=>{if(!t){A([]);return}const X=(H||{})[t],le=X&&X.users||{},Re=new Date,Ve=Re.getFullYear(),ft=Re.getMonth()+1,et=Vt(Ve,ft);if(!et||et.length===0){A([]);return}const cn=Re.getDate(),_n=et.slice(0,cn),bn=`${Ve}-${String(ft).padStart(2,"0")}-${String(cn).padStart(2,"0")}`,Kt=vr(t,et),Sn={};(Kt||[]).forEach(st=>{!st||!st.date||(Sn[st.date]=st.chapters||0)});const wt=[],si=new Set;(Y||[]).forEach(st=>{ne[st],si.add(st),Cr(st,wt,le,Sn,_n,ne,et,bn)}),Object.entries(ne||{}).forEach(([st,qt])=>{si.has(st)||qt.crew===t&&Cr(st,wt,le,Sn,_n,ne,et,bn)}),wt.sort((st,qt)=>(qt.chapters||0)-(st.chapters||0)),A(wt)},[t,H,ne,Y]);function Cr(F,X,le,Re,Ve,ft,et,cn){const bn=(le[F]||{}).checks||{};let Kt=0,Sn=0;Ve.forEach(oi=>{const os=Re[oi]||0;os&&(Sn+=os,bn[oi]&&(Kt+=os))});const wt=ft[F]||{},si=wt.name||F,jr=wt.medals||{},st=Sn>0?Math.round(Kt/Sn*100):0,qt=Ff({dates:et,todayKey:cn,userChecks:bn,userDailyActivity:wt.dailyActivity||{}}),$a=er(wt.earnedMedals||{});X.push({uid:F,name:si,chapters:Kt,progress:st,stateKey:qt.key,stateLabel:qt.label,medals:jr,dokStatus:$a})}_.useEffect(()=>{const F=jC(t,c);return()=>{typeof F=="function"&&F()}},[t]);const ni=3*24*60*60*1e3,zn=Date.now()-ni,Er=(a||[]).slice(0,20),rs=(a||[]).filter(F=>(F.timestamp||0)>=zn),ri=u?rs:Er;if(!e||!e.uid)return l.jsxs("div",{style:{padding:20,background:"#F8F9FF",minHeight:"100vh"},children:[l.jsxs("h2",{style:{color:"#034732",fontSize:32,fontWeight:800,textAlign:"center"},children:[" ",n]}),l.jsx("p",{children:"    ."})]});if(Fe==="manual"&&!y)return l.jsxs("div",{style:{padding:20,background:"#F8F9FF",minHeight:"100vh"},children:[l.jsxs("h2",{style:{color:"#034732",fontSize:32,fontWeight:800,textAlign:"center"},children:[t," "]}),l.jsx("p",{style:{textAlign:"center",marginTop:20,fontSize:16},children:"     ."})]});if(!k)return l.jsxs("div",{style:{padding:20,background:"#F8F9FF",minHeight:"100vh"},children:[l.jsxs("h2",{style:{color:"#034732",fontSize:32,fontWeight:800,textAlign:"center"},children:[" ",n]}),l.jsx("p",{children:"   ..."})]});if(Fe==="manual"&&!y)return l.jsxs("div",{style:{padding:20,background:"#F8F9FF",minHeight:"100vh"},children:[l.jsxs("h2",{style:{color:"#034732",fontSize:32,fontWeight:800,textAlign:"center"},children:[t," "]}),l.jsx("p",{style:{textAlign:"center",marginTop:20,fontSize:16},children:"     ."})]});if(Fe==="closed")return l.jsxs("div",{style:{padding:20,background:"#F8F9FF",minHeight:"100vh"},children:[l.jsxs("h2",{style:{color:"#034732",fontSize:32,fontWeight:800,textAlign:"center"},children:[" ",n]}),l.jsx("p",{children:"     .   ."}),l.jsx("button",{onClick:()=>Ce("/home"),style:{marginTop:20,padding:"8px 16px",borderRadius:8,border:"none",background:"#1565C0",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:" "})]});if(Fe==="manual"&&!y)return l.jsxs("div",{style:{padding:20,background:"#F8F9FF",minHeight:"100vh"},children:[l.jsxs("h2",{style:{color:"#034732",fontSize:32,fontWeight:800,textAlign:"center"},children:[t," "]}),l.jsx("p",{style:{textAlign:"center",marginTop:20,fontSize:16},children:"     ."})]});const kr=s.getFullYear(),Tr=s.getMonth()+1,Ro=Vt(kr,Tr),an=vr(t,Ro),Bt=`${kr}-${String(Tr).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,za=String(kr).slice(2),jo=["","","","","","",""][s.getDay()],Ln=`${za} ${String(Tr).padStart(2,"0")} ${String(s.getDate())}(${jo})`,He=an.find(F=>F.date===Bt),Io={};an.forEach(F=>{Io[F.date]=F.chapters||0});let Ze=0;Ro.forEach(F=>{r[F]&&(Ze+=Io[F]||0)});const vn=(Ze/10).toFixed(1),Ao=Math.min(100,Math.round(Ze/Te*100)||0);let $n=He&&(He.startLabel||""),Rr=He&&(He.endLabel||""),No=0;if(He&&(No=He.chapters||He.chapterCount||0),(!$n||!Rr)&&He&&He.label){const F=String(He.label).split("~");F.length===2?($n=F[0].trim(),Rr=F[1].trim()):($n=He.label,Rr="");const X=le=>le?le.replace(/\(\s*\d+\)\s*$/,"").trim():"";$n=X($n),Rr=X(Rr)}function ii(F){y&&iy(t,e.uid,F,!(r[F]??!1))}function is(F){const X=new Date(s);X.setDate(X.getDate()+F),o(X)}function La(){const F=d.trim();if(!F)return;const X={text:F,user:e.name||"",uid:e.uid,timestamp:Date.now()};EC(t,X).then(()=>{h("")})}function Do(F){!F||F.uid!==e.uid||(v(F.id),E(F.text||""))}async function xn(F){if(!F||F.uid!==e.uid)return;const X=(S||"").trim();if(!X){alert("  .");return}try{p(!0),await kC(t,F.id,{text:X,editedAt:Date.now()}),v(null),E("")}catch(le){console.error(le),alert("   .")}finally{p(!1)}}async function ss(F){if(!(!F||F.uid!==e.uid||!window.confirm("     . ?")))try{p(!0),await TC(t,F.id)}catch(le){console.error(le),alert("   .")}finally{p(!1)}}return l.jsxs("div",{style:{minHeight:"100vh",padding:B?"20px 16px 32px":"24px 30px 40px",background:"#E5F3E6",display:"flex",flexDirection:"column",boxSizing:"border-box"},children:[N&&C&&l.jsx("div",{onClick:wr,style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.45)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:B?18:24},children:l.jsxs("div",{style:{width:"100%",maxWidth:520,background:"#FFFFFF",borderRadius:18,boxShadow:"0 18px 40px rgba(0,0,0,0.22)",padding:B?"18px 18px 16px":"22px 22px 18px",border:"1px solid rgba(0,0,0,0.06)"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},children:[l.jsx("div",{style:{fontSize:18,fontWeight:800,color:"#111827"},children:(C.title||`${t} `).toString()}),l.jsx("div",{style:{fontSize:12,color:"#6B7280"},children:" "})]}),l.jsx("div",{style:{marginTop:14,fontSize:15,lineHeight:1.7,color:"#111827",whiteSpace:"pre-wrap"},children:C.content})]})}),l.jsx("h2",{style:{color:"#034732",fontSize:32,fontWeight:800,textAlign:"center",marginBottom:t===""||t===""?10:0},children:n}),t===""&&l.jsx("div",{style:{color:"#4B5563",fontSize:15,fontWeight:500,textAlign:"center",marginBottom:10},children:"30  1"}),t===""&&l.jsx("div",{style:{color:"#4B5563",fontSize:15,fontWeight:500,textAlign:"center",marginBottom:10},children:"30  1"}),(t==="(A)"||t==="(B)")&&l.jsx("div",{style:{color:"#4B5563",fontSize:15,fontWeight:500,textAlign:"center",marginBottom:10},children:"30   "}),t===""&&l.jsx("div",{style:{color:"#4B5563",fontSize:15,fontWeight:500,textAlign:"center",marginBottom:10},children:"30  1"}),t===""&&l.jsx("div",{style:{color:"#4B5563",fontSize:14,fontWeight:500,textAlign:"center",lineHeight:1.6,maxWidth:600,margin:"0 auto"},children:"<   ,            >"}),t===""&&l.jsx("div",{style:{color:"#4B5563",fontSize:14,fontWeight:500,textAlign:"center",lineHeight:1.6,maxWidth:600,margin:"0 auto"},children:"<   ,          >"}),l.jsxs("div",{style:{marginTop:24,display:"flex",alignItems:"center",justifyContent:"center",gap:24},children:[l.jsxs("svg",{width:120,height:120,children:[l.jsx("circle",{stroke:"#E5E7EB",fill:"transparent",strokeWidth:14,r:50,cx:60,cy:60}),l.jsx("circle",{stroke:"#6366F1",fill:"transparent",strokeWidth:14,strokeLinecap:"round",r:50,cx:60,cy:60,strokeDasharray:2*Math.PI*50,strokeDashoffset:2*Math.PI*50-Ao/100*(2*Math.PI*50),style:{transition:"stroke-dashoffset 0.4s ease"}})]}),l.jsxs("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[l.jsx("p",{style:{margin:0,fontSize:15,color:"#4B5563"},children:"  "}),l.jsxs("div",{style:{marginTop:6,display:"flex",alignItems:"baseline",gap:12},children:[l.jsxs("span",{style:{fontSize:28,fontWeight:700},children:[Ao,"%"]}),l.jsxs("span",{style:{fontSize:20,fontWeight:600},children:[vn,"km"]})]}),l.jsxs("div",{style:{marginTop:4,fontSize:16,color:"#4B5563"},children:["(",Ze," / ",Te,")"]})]})]}),l.jsx("div",{style:{marginTop:28,width:"100%",display:"flex",justifyContent:"center",position:"relative"},children:l.jsxs("div",{onClick:()=>ii(Bt),style:{width:B?"96%":"86%",maxWidth:B?"none":540,background:r[Bt]?"linear-gradient(135deg, #2C3E50 0%, #000000 100%)":"linear-gradient(135deg, #1B9C5A 0%, #15803D 100%)",borderRadius:34,padding:B?"20px 8px 60px":"24px 30px 40px",color:"#ffffff",textAlign:"center",boxShadow:"0 12px 28px rgba(0,0,0,0.15)",cursor:y?"pointer":"not-allowed",opacity:y?1:.6,position:"relative",minHeight:B?330:280,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:"0 auto",overflow:"hidden"},children:[l.jsx("button",{onClick:F=>{F.stopPropagation(),is(-1)},style:{position:"absolute",left:0,top:"50%",transform:"translateY(-50%)",width:50,height:80,background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"0 12px 12px 0",cursor:"pointer",zIndex:10,display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx("div",{style:{width:20,height:20,borderLeft:"6px solid #fff",borderBottom:"6px solid #fff",transform:"rotate(45deg)",opacity:1}})}),l.jsx("button",{onClick:F=>{F.stopPropagation(),is(1)},style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",width:50,height:80,background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"12px 0 0 12px",cursor:"pointer",zIndex:10,display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx("div",{style:{width:20,height:20,borderRight:"6px solid #fff",borderBottom:"6px solid #fff",transform:"rotate(-45deg)",opacity:1}})}),l.jsx("div",{style:{position:"absolute",bottom:40,left:10,fontSize:24,opacity:.15},children:""}),l.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.85)",padding:"16px 24px",borderRadius:"24px",boxShadow:"0 8px 20px rgba(0,0,0,0.06)",marginBottom:"20px",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",width:B?"90%":"85%",maxWidth:500,boxSizing:"border-box",zIndex:5},children:[l.jsx("div",{style:{fontSize:22,fontWeight:800,color:r[Bt]?"#2C3E50":"#034732"},children:Ln}),l.jsxs("div",{style:{marginTop:4,fontSize:B?17:19,fontWeight:700,color:r[Bt]?"#555":"#1B9C5A"},children:[" ( ",No,")"]})]}),He&&l.jsx(Mk,{todayPortion:He,todayKey:Bt,checks:r,toggle:ii,isApproved:y,isMobile:B}),l.jsx("div",{style:{position:"absolute",left:18,bottom:16,zIndex:5},children:l.jsx("div",{onClick:()=>ii(Bt),style:{width:60,height:60,borderRadius:"50%",border:"4px solid #F3F4F6",background:"#FFFFFF",boxShadow:"0 4px 10px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",cursor:"pointer",transition:"all 0.3s"},children:l.jsx("span",{style:{fontSize:11,fontWeight:700,color:"rgba(0,0,0,0.25)"},children:"()"})})}),r[Bt]&&l.jsx("div",{style:{position:"absolute",left:-52,bottom:-54,zIndex:10,pointerEvents:"none",width:200,height:200,display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx("img",{src:"/stamps/stamps_source_clean.png",alt:"stamp",style:{width:190,height:190,objectFit:"contain",transform:"rotate(-10deg)",filter:"drop-shadow(0 4px 12px rgba(0,0,0,0.3))",animation:"popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275)"}})})]})}),l.jsx("div",{style:{marginTop:10,textAlign:"center",fontSize:15,fontWeight:500,color:"#555"},children:"   "}),l.jsxs("div",{style:{marginTop:14,fontSize:15,lineHeight:1.5,fontWeight:500,textAlign:"center",color:"#555"},children:["     .",l.jsx("br",{}),"    "]}),l.jsx("div",{style:{marginTop:12,background:"#FFFFFF",borderRadius:24,padding:B?"6px 8px 8px":"12px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:10,maxWidth:520,width:"88%",marginLeft:"auto",marginRight:"auto"},children:l.jsxs("div",{style:{marginTop:8,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:B?8:16},children:[l.jsxs("button",{onClick:()=>Ce(`/?crew=${encodeURIComponent(t)}&date=${Bt}`),style:{background:"#F7C948",borderRadius:28,padding:B?"20px 26px":"22px 32px",border:"none",color:"#000",fontSize:19,fontWeight:700,lineHeight:1.35,cursor:"pointer",boxShadow:"0 4px 10px rgba(0,0,0,0.15)",minWidth:B?130:170,textAlign:"center"},children:["",l.jsx("br",{}),""]}),l.jsx("img",{src:"/runner.png",alt:"runner",style:{width:B?80:125,height:"auto",objectFit:"contain"}})]})}),l.jsxs("div",{style:{marginTop:32},children:[l.jsx("p",{style:{margin:0,fontWeight:700,fontSize:15},children:" "}),l.jsx("textarea",{value:d,onChange:F=>h(F.target.value),rows:3,placeholder:"    ",style:{width:"100%",marginTop:10,padding:12,borderRadius:12,border:"1px solid #CBD5E1",fontSize:14,resize:"vertical"}}),l.jsx("button",{onClick:La,style:{marginTop:10,padding:"10px 18px",border:"none",borderRadius:10,background:"#1B9C5A",color:"#fff",fontSize:15,fontWeight:600,cursor:"pointer"},children:""})]}),l.jsxs("div",{style:{marginTop:24},children:[l.jsx("p",{style:{fontWeight:700,marginBottom:8},children:"  "}),l.jsxs("div",{style:{display:"flex",gap:8,marginBottom:10},children:[l.jsx("button",{onClick:()=>f(F=>!F),style:{padding:"8px 12px",borderRadius:10,border:"1px solid #1B9C5A",background:u?"#1B9C5A":"#fff",color:u?"#fff":"#1B9C5A",cursor:"pointer",fontWeight:700},children:u?"":" ( 3)"}),u&&l.jsx("div",{style:{fontSize:12,color:"#555",alignSelf:"center"},children:" 3    ."})]}),l.jsx("ul",{style:{listStyle:"none",padding:0,margin:0,display:"flex",flexDirection:"column",gap:4},children:ri.map(F=>{const X=F&&F.uid&&e&&F.uid===e.uid,le=x===F.id;return l.jsxs("li",{style:{padding:10,borderRadius:10,background:"#F1F5F9",fontSize:13,display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:10},children:[l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:6},children:[l.jsx("span",{style:{fontWeight:700},children:F.user}),F.timestamp&&l.jsxs("span",{style:{fontSize:12,color:"#6B7280"},children:[Je(F.timestamp),F.editedAt?" ()":""]})]}),le?l.jsxs("div",{style:{marginTop:6},children:[l.jsx("textarea",{value:S,onChange:Re=>E(Re.target.value),rows:3,style:{width:"100%",padding:10,borderRadius:10,border:"1px solid #CBD5E1",fontSize:13,resize:"vertical",boxSizing:"border-box",background:"#fff"},disabled:g}),l.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[l.jsx("button",{onClick:()=>xn(F),disabled:g,style:{padding:"8px 12px",borderRadius:10,border:"none",background:"#1B9C5A",color:"#fff",fontWeight:700,cursor:"pointer",opacity:g?.6:1},children:""}),l.jsx("button",{onClick:()=>{v(null),E("")},disabled:g,style:{padding:"8px 12px",borderRadius:10,border:"1px solid #CBD5E1",background:"#fff",color:"#111827",fontWeight:700,cursor:"pointer",opacity:g?.6:1},children:""})]})]}):l.jsx("div",{style:{marginTop:4,color:"#374151",wordBreak:"break-word"},children:F.text})]}),X&&!le&&l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,flexShrink:0},children:[l.jsx("button",{onClick:()=>Do(F),disabled:g,style:{padding:"6px 10px",borderRadius:10,border:"1px solid #CBD5E1",background:"#fff",fontWeight:700,cursor:"pointer",opacity:g?.6:1},children:""}),l.jsx("button",{onClick:()=>ss(F),disabled:g,style:{padding:"6px 10px",borderRadius:10,border:"none",background:"#E63946",color:"#fff",fontWeight:800,cursor:"pointer",opacity:g?.6:1},children:""})]})]},F.id)})})]}),l.jsxs("div",{style:{marginTop:28},children:[l.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:15},children:l.jsx("p",{style:{fontWeight:800,fontSize:18,margin:0},children:"    "})}),(()=>M.length===0?l.jsx("div",{style:{padding:"40px 20px",textAlign:"center",background:"rgba(255,255,255,0.5)",borderRadius:20,border:"1px dashed #CBD5E1",color:"#64748B",fontSize:14},children:"   ."}):l.jsx("div",{style:{overflowX:"auto"},children:l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12,background:"#F8FAFF",borderRadius:12},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"left",width:"20%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"right",width:"12%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"right",width:"15%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"center",width:"20%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"center",width:"33%",whiteSpace:"nowrap"},children:""})]})}),l.jsx("tbody",{children:M.map(F=>{var X,le,Re;return l.jsxs("tr",{children:[l.jsx("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",maxWidth:65,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:F.name}),l.jsxs("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",textAlign:"right"},children:[F.progress,"%"]}),l.jsxs("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",textAlign:"right",whiteSpace:"nowrap"},children:[F.chapters,""]}),l.jsx("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",textAlign:"center"},children:(()=>{const Ve=F.stateLabel||" ",ft=F.stateKey||"",et=ft==="success"||Ve.includes(""),cn=ft==="ready"||Ve.includes(""),_n=ft==="running"||Ve.includes("");if(ft==="fail"||Ve.includes("!"),cn)return l.jsx("span",{style:{color:"#166534",fontWeight:600},children:Ve});const bn={display:"inline-block",borderRadius:6,padding:"2px 5px",fontWeight:700,fontSize:11,backgroundColor:et?"#DCFCE7":_n?"#DBEAFE":"#E5E7EB",color:et?"#166534":_n?"#1D4ED8":"#111827",whiteSpace:"nowrap"};return l.jsx("span",{style:bn,children:Ve})})()}),l.jsx("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px",textAlign:"center"},children:l.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:3,fontSize:13},children:[(((X=F.medals)==null?void 0:X.gold)||0)>0&&l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[l.jsx("span",{children:""}),l.jsx("b",{style:{marginLeft:1},children:F.medals.gold})]}),(((le=F.medals)==null?void 0:le.silver)||0)>0&&l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[l.jsx("span",{children:""}),l.jsx("b",{style:{marginLeft:1},children:F.medals.silver})]}),(((Re=F.medals)==null?void 0:Re.bronze)||0)>0&&l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[l.jsx("span",{children:""}),l.jsx("b",{style:{marginLeft:1},children:F.medals.bronze})]})]})})]},F.uid)})})]})}))()]}),l.jsx("div",{style:{marginTop:20,textAlign:"center"},children:l.jsx("button",{onClick:()=>Ce("/home"),style:{padding:"10px 24px",borderRadius:999,border:"none",background:"#1565C0",color:"#fff",fontWeight:"bold",cursor:"pointer",fontSize:15,boxShadow:"0 6px 12px rgba(0,0,0,0.2)"},children:" "})})]})}const um=he;function Ok({user:t}){const e=yn(),[n,r]=_.useState({}),[i,s]=_.useState({}),[o,a]=_.useState({});if(_.useEffect(()=>{if(!t||!t.uid)return;const w=JC(t.uid,C=>s(C||{}));return()=>{typeof w=="function"&&w()}},[t]),_.useEffect(()=>{if(!t||!t.uid)return;const C=new Date().getFullYear(),j=PC(C,N=>{a(N||{})});return()=>{typeof j=="function"&&j()}},[t]),_.useEffect(()=>{if(!t||!t.uid)return;const w=[];return um.forEach(C=>{const j=ry(C,t.uid,N=>{r(I=>({...I,[C]:N||{}}))});typeof j=="function"&&w.push(j)}),()=>{w.forEach(C=>{try{C()}catch{}})}},[t]),!t||!t.uid)return l.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0F172A 0%, #1E293B 100%)",color:"#F8FAFC",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:20,fontFamily:"'Outfit', 'Roboto', sans-serif"},children:[l.jsx("h2",{style:{fontSize:32,fontWeight:800,marginBottom:20},children:"  "}),l.jsx("p",{style:{color:"#94A3B8",marginBottom:30},children:"    ."}),l.jsx("button",{onClick:()=>e("/login"),style:{padding:"12px 30px",borderRadius:12,border:"none",background:"#1B9C5A",color:"#fff",fontWeight:700,cursor:"pointer"},children:" "})]});const c=new Date,u=c.getFullYear(),f=c.getMonth()+1,d=`${u}-${String(f).padStart(2,"0")}-${String(c.getDate()).padStart(2,"0")}`;let h=0,x=0,v=0;const S={};if(um.forEach(w=>{const C=n[w]||{};Object.entries(C).forEach(([j,N])=>{if(!N)return;const[I,M]=j.split("-"),A=Number(I),H=Number(M);if(!A||!H)return;const K=`${w}_${I}-${M}`;if(!S[K]){const O=Vt(A,H),Y=vr(w,O),D={};Y.forEach(B=>{D[B.date]=B.chapters||0}),S[K]=D}const ne=S[K][j]||0;j===d&&(h+=ne),A===u&&H===f&&(x+=ne),A===u&&(v+=ne)})}),t&&t.uid&&o&&t.crew){const w=o[f];if(w){let C=0;const j=w.gold&&w.gold[t.uid],N=w.silver&&w.silver[t.uid],I=w.bronze&&w.bronze[t.uid];if(j||N||I){const M=`${t.crew}_${u}-${f}`;if(!S[M]){const H=Vt(u,f),K=vr(t.crew,H),ne={};K.forEach(O=>{ne[O.date]=O.chapters||0}),S[M]=ne}const A=S[M];C=Object.values(A).reduce((H,K)=>H+K,0)}if(C>0&&C>x){const M=C-x;x=C,v+=M}}}const E=(h/10).toFixed(1),g=(x/10).toFixed(1),p=(v/10).toFixed(1),y={background:"rgba(255, 255, 255, 0.05)",padding:"24px",borderRadius:"20px",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)",flex:1},b={color:"#94A3B8",fontSize:14,fontWeight:500,marginBottom:8},k={fontSize:24,fontWeight:800,color:"#F8FAFC"};return l.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0F172A 0%, #1E293B 100%)",color:"#F8FAFC",padding:"40px 20px",fontFamily:"'Outfit', 'Roboto', sans-serif"},children:l.jsxs("div",{style:{maxWidth:800,margin:"0 auto"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:40},children:[l.jsx("h1",{style:{fontSize:42,fontWeight:900,background:"linear-gradient(to right, #10B981, #34D399, #10B981)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",letterSpacing:-1,marginBottom:10},children:"   "}),l.jsxs("p",{style:{color:"#94A3B8",fontSize:18},children:[t.name,"    "]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:20,marginBottom:30},children:[l.jsxs("div",{style:y,children:[l.jsx("div",{style:b,children:"   "}),l.jsxs("div",{style:k,children:[h," ",l.jsxs("span",{style:{fontSize:16,color:"#34D399"},children:["(",E,"km)"]})]})]}),l.jsxs("div",{style:y,children:[l.jsx("div",{style:b,children:"   "}),l.jsxs("div",{style:k,children:[x," ",l.jsxs("span",{style:{fontSize:16,color:"#34D399"},children:["(",g,"km)"]})]})]}),l.jsxs("div",{style:y,children:[l.jsx("div",{style:b,children:"   "}),l.jsxs("div",{style:k,children:[v," ",l.jsxs("span",{style:{fontSize:16,color:"#34D399"},children:["(",p,"km)"]})]})]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:20},children:[l.jsxs("div",{style:{...y,border:"1px solid rgba(245, 158, 11, 0.2)"},children:[l.jsxs("h3",{style:{fontSize:20,fontWeight:800,marginBottom:20,display:"flex",alignItems:"center",gap:10},children:[l.jsx("span",{style:{color:"#F59E0B"},children:""}),"   "]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",padding:"10px 0"},children:[l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:32,marginBottom:5},children:""}),l.jsx("div",{style:{fontSize:20,fontWeight:800},children:i.gold||0}),l.jsx("div",{style:{fontSize:12,color:"#94A3B8"},children:"Gold"})]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:32,marginBottom:5},children:""}),l.jsx("div",{style:{fontSize:20,fontWeight:800},children:i.silver||0}),l.jsx("div",{style:{fontSize:12,color:"#94A3B8"},children:"Silver"})]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:32,marginBottom:5},children:""}),l.jsx("div",{style:{fontSize:20,fontWeight:800},children:i.bronze||0}),l.jsx("div",{style:{fontSize:12,color:"#94A3B8"},children:"Bronze"})]})]})]}),l.jsxs("div",{style:{...y,border:"1px solid rgba(16, 185, 129, 0.3)"},children:[l.jsxs("h3",{style:{fontSize:20,fontWeight:800,marginBottom:20,display:"flex",alignItems:"center",gap:10},children:[l.jsx("span",{style:{color:"#10B981"},children:""}),"   "]}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:12},children:(()=>{const w=String(new Date().getFullYear()),C=(t==null?void 0:t.earnedMedals)||{},j={};Object.keys(C).forEach(I=>{if(I.startsWith(w)){const M=I.split("_"),A=M.length>1?M[1]:"";A&&(j[A]=(j[A]||0)+1)}});const N=Object.entries(j).sort((I,M)=>I[0].localeCompare(M[0]));return N.length===0?l.jsx("span",{style:{color:"#94A3B8"},children:"    ."}):N.map(([I,M],A)=>l.jsxs("div",{style:{fontSize:14,fontWeight:700,background:"rgba(255,255,255,0.03)",padding:"12px 20px",borderRadius:16,border:"1px solid rgba(16, 185, 129, 0.2)",display:"flex",alignItems:"center",gap:12,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[l.jsx("span",{children:I}),l.jsxs("span",{style:{background:"linear-gradient(135deg, #F59E0B 0%, #D97706 100%)",color:"#000",padding:"4px 12px",borderRadius:10,fontSize:16,fontWeight:900,boxShadow:"0 2px 8px rgba(245, 158, 11, 0.4)"},children:["x",M]})]},A))})()})]}),l.jsxs("div",{style:{...y,border:"1px solid rgba(233, 196, 106, 0.3)",background:"linear-gradient(135deg, rgba(233, 196, 106, 0.05) 0%, rgba(30, 41, 59, 0.5) 100%)"},children:[l.jsxs("h3",{style:{fontSize:20,fontWeight:800,marginBottom:20,display:"flex",alignItems:"center",gap:10},children:[l.jsx("span",{style:{color:"#E9C46A"},children:""}),"    "]}),(()=>{const w=er((t==null?void 0:t.earnedMedals)||{});return l.jsxs("div",{children:[l.jsx("div",{style:{textAlign:"center",padding:"10px 0",marginBottom:20},children:l.jsxs("div",{style:{fontSize:44,fontWeight:900,color:"#E9C46A",textShadow:"0 0 20px rgba(233, 196, 106, 0.3)"},children:[w.totalDok,l.jsx("span",{style:{fontSize:20,marginLeft:4},children:" "})]})}),w.fragments&&w.fragments.length>0&&l.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:15,borderRadius:12},children:[l.jsx("div",{style:{fontSize:13,color:"#E9C46A",fontWeight:700,marginBottom:10},children:"    "}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:w.fragments.map(C=>l.jsxs("div",{style:{fontSize:12,background:"rgba(255,255,255,0.05)",padding:"4px 10px",borderRadius:6,border:"1px solid rgba(255,255,255,0.1)",color:"#CBD5E1"},children:[C.name.replace("","")," ",l.jsxs("span",{style:{fontWeight:800,color:"#fff"},children:["x",C.count]})]},C.name))})]})]})})()]})]}),l.jsx("div",{style:{marginTop:50,textAlign:"center"},children:l.jsx("button",{onClick:()=>e("/home"),style:{padding:"12px 40px",borderRadius:999,border:"1px solid rgba(255,255,255,0.2)",background:"rgba(255,255,255,0.05)",color:"#fff",fontWeight:700,cursor:"pointer",transition:"0.2s"},children:"  "})})]})})}function Bk(t){const[e,n]=_.useState(null),[r,i]=_.useState(!0);_.useEffect(()=>{if(!t){n(null),i(!1);return}const o=sE(t,a=>{n(a),i(!1)});return()=>{try{o&&o()}catch{}}},[t]);const s=_.useCallback(async o=>{t&&await iE(t,o)},[t]);return{bookmark:e,loading:r,saveBookmark:s}}function zk(){const{search:t}=Pf();return bm.useMemo(()=>new URLSearchParams(t),[t])}function Lk({user:t}){const e=zk(),n=yn(),r=t&&t.uid?t.uid:null,{bookmark:i,loading:s,saveBookmark:o}=Bk(r),[a,c]=_.useState(!1),u=e.get("crew")||"",f=e.get("date");_.useEffect(()=>{if(!r||!f||!/^\d{4}-\d{2}-\d{2}$/.test(f))return;const O=P(ie,`users/${r}/dailyActivity/${f}`);Sr(O,{biblePageVisited:!0,visitedAt:Date.now()}).catch(Y=>{console.error("[dailyActivity] failed to mark biblePageVisited",Y)})},[r,f]);const[d,h]=_.useState(null),[x,v]=_.useState(null),[S,E]=_.useState(!0),[g,p]=_.useState(()=>{const O=localStorage.getItem("bibleFont");return O?parseInt(O):18}),[y,b]=_.useState(""),[k,w]=_.useState({book:null,chapter:null}),[C,j]=_.useState(!1);_.useEffect(()=>{localStorage.setItem("bibleFont",g)},[g]),_.useEffect(()=>{async function O(){try{if(!f){b("  ."),E(!1);return}const Y=new Date(f+"T00:00:00");if(isNaN(Y.getTime())){b("   ."),E(!1);return}const D=Y.getFullYear(),B=Y.getMonth()+1,W=Vt(D,B),J=vr(u,W).find(Le=>Le.date===f);if(!J){b("      ."),E(!1);return}const Fe=await fetch("/bible_kor.json");if(!Fe.ok)throw new Error("   .");const Ce=await Fe.json();v(Ce),h(J),E(!1)}catch(Y){console.error(Y),b("    ."),E(!1)}}O()},[u,f]);const N=()=>{const O=document.querySelectorAll("[id^='pos-']");if(!O||O.length===0)return null;let Y=null,D=1/0;if(O.forEach(W=>{const q=W.getBoundingClientRect();if(q.bottom<=0)return;const J=Math.abs(q.top-80);J<D&&(D=J,Y=W)}),!Y)return null;const B=Y.id.replace("pos-","").split("-");return{book:B[0],chapter:parseInt(B[1],10)}},I=async()=>{if(!r){alert(" .");return}if(!d){alert("   .    .");return}const O=N();if(!O||!O.book||!O.chapter){alert("       .");return}await o({bookId:O.book,chapter:O.chapter}),c(!0),setTimeout(()=>c(!1),1500)},M=()=>{if(!i||!i.bookId||!i.chapter)return;const O=document.getElementById(`pos-${i.bookId}-${i.chapter}`);O?O.scrollIntoView({behavior:"smooth",block:"start"}):alert("     .")},A=O=>{if(!O)return"";const Y=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],D=new RegExp("("+Y.join("|")+")\\d+:\\d+"),B=O.match(D);if(B){const W=O.indexOf(B[0]);if(W>10)return O.substring(0,W).trim()}return O};if(S)return l.jsxs("div",{style:{minHeight:"100vh",padding:20,background:"#E5FFF5"},children:[l.jsx("h2",{style:{marginTop:0},children:"  "}),l.jsx("p",{children:"  ..."})]});if(y||!d||!x)return l.jsxs("div",{style:{minHeight:"100vh",padding:20,background:"#E5FFF5"},children:[l.jsx("h2",{style:{marginTop:0},children:"  "}),l.jsx("p",{style:{color:"#b91c1c"},children:y||"   ."}),l.jsx("button",{onClick:()=>n(-1),style:{marginTop:16,padding:"8px 16px",borderRadius:999,border:"none",background:"#2563EB",color:"#0f172a",fontWeight:600,cursor:"pointer"},children:" "})]});const H=[];(d.items||[]).forEach(O=>{if(!(O!=null&&O.book)||!(O!=null&&O.chapter))return;const Y=`${O.book}:${O.chapter}`;H.includes(Y)||H.push(Y)});const K=H.map(O=>{var q;const[Y,D]=O.split(":"),B=parseInt(D,10),W=(q=x==null?void 0:x[Y])==null?void 0:q[String(B)];return{book:Y,chapter:B,verses:W||{}}}),ne=d.panorama?d.panorama.parsedSections.map(O=>({...O,chapters:O.items.map(Y=>{var B;const D=(B=x==null?void 0:x[Y.book])==null?void 0:B[String(Y.chapter)];return{book:Y.book,chapter:Y.chapter,verses:D||{}}})})):null;return l.jsx("div",{style:{fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Text", "Apple SD Gothic Neo", system-ui',background:C?"#050509":"#f2f2f7",minHeight:"100vh"},children:l.jsxs("div",{style:{maxWidth:820,margin:"0 auto",minHeight:"100vh",padding:"12px 12px 24px",display:"flex",flexDirection:"column",gap:12},children:[l.jsxs("div",{style:{position:"sticky",top:0,zIndex:20,padding:"8px 4px 10px",marginBottom:4,display:"flex",alignItems:"center",justifyContent:"space-between",backdropFilter:"blur(18px)",WebkitBackdropFilter:"blur(18px)",background:C?"rgba(15,23,42,0.9)":"rgba(242,242,247,0.9)",borderBottom:C?"1px solid rgba(15,23,42,0.9)":"1px solid rgba(226,232,240,0.9)"},children:[l.jsx("button",{onClick:()=>n(-1),style:{width:54,padding:"6px 8px",borderRadius:14,border:"none",background:C?"rgba(15,23,42,0.8)":"#ffffff",boxShadow:C?"0 4px 10px rgba(0,0,0,0.45)":"0 4px 10px rgba(148,163,184,0.55)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:0,fontSize:18,cursor:"pointer",color:C?"#E5E7EB":"#111827"},children:""}),l.jsxs("button",{onClick:()=>j(O=>!O),"aria-label":C?"  ":" ",style:{padding:"6px 10px",borderRadius:999,border:"1px solid",borderColor:C?"rgba(255,255,255,0.18)":"rgba(15,23,42,0.12)",background:C?"rgba(255,255,255,0.08)":"rgba(15,23,42,0.06)",color:C?"#E5E7EB":"#111827",fontSize:13,fontWeight:700,display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[l.jsx("span",{style:{fontSize:16,lineHeight:1},children:C?"":""}),l.jsx("span",{style:{whiteSpace:"nowrap",lineHeight:1.2,letterSpacing:"0.01em"},children:C?" ":""})]})]}),l.jsxs("div",{style:{borderRadius:18,padding:14,color:C?"#E5E7EB":"#0f172a",background:C?"rgba(15,23,42,0.95)":"rgba(255,255,255,0.96)",boxShadow:C?"0 10px 25px rgba(0,0,0,0.7)":"0 8px 22px rgba(148,163,184,0.35)",display:"flex",flexDirection:"column",gap:10},children:[!s&&l.jsxs("div",{style:{padding:"9px 11px",borderRadius:12,color:C?"#E5E7EB":"#0f172a",background:C?"rgba(15,23,42,0.9)":"rgba(248,250,252,0.95)",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:13,gap:8},children:[l.jsx("span",{children:i?`  : ${i.bookId} ${i.chapter}`:"   ."}),i&&l.jsx("button",{onClick:M,style:{padding:"6px 10px",borderRadius:999,border:"none",background:"#4a6cf7",color:"#F9FAFB",fontSize:12,cursor:"pointer",whiteSpace:"nowrap"},children:" "})]}),l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8},children:[l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("button",{onClick:()=>p(O=>Math.max(14,O-2)),style:{padding:"6px 10px",borderRadius:10,border:"none",background:C?"#020617":"#E5E7EB",color:C?"#E5E7EB":"#111827",fontWeight:600,cursor:"pointer"},children:"A-"}),l.jsx("button",{onClick:()=>p(O=>Math.min(26,O+2)),style:{padding:"6px 10px",borderRadius:10,border:"none",background:C?"#020617":"#E5E7EB",color:C?"#E5E7EB":"#111827",fontWeight:600,cursor:"pointer"},children:"A+"})]}),l.jsxs("div",{style:{fontSize:12,opacity:.8},children:[": ",f]})]}),d.panorama?l.jsxs("div",{style:{marginTop:8},children:[l.jsx("div",{style:{fontSize:26,fontWeight:800,color:"#1F8A70",letterSpacing:"-0.02em",marginBottom:8},children:d.panorama.mainTitle}),l.jsx("div",{style:{fontSize:16,fontWeight:600,opacity:.9,display:"flex",flexWrap:"wrap",gap:"8px 10px"},children:d.panorama.sections.map((O,Y)=>l.jsxs("span",{style:{background:C?"rgba(31,138,112,0.25)":"#E5F3E6",color:C?"#86EFAC":"#1F8A70",padding:"4px 10px",borderRadius:10,border:C?"1px solid rgba(134,239,172,0.2)":"none"},children:[O.subTitle," (",O.bibleRef,")"]},Y))})]}):l.jsxs("div",{style:{marginTop:12,fontSize:Math.max(22,g+4),letterSpacing:"0.01em",fontWeight:800},children:[u,"  ",d.label]})]})]}),l.jsx("div",{style:{flex:1,overflowY:"auto",background:C?"rgba(15,23,42,0.98)":"#ffffff",color:C?"#E5E7EB":"#0f172a",borderRadius:22,padding:18,boxShadow:C?"0 16px 40px rgba(0,0,0,0.8)":"0 16px 40px rgba(148,163,184,0.45)"},children:ne?ne.map((O,Y)=>l.jsxs("div",{style:{marginBottom:40},children:[l.jsxs("div",{style:{padding:"8px 12px",background:C?"rgba(31,138,112,0.2)":"#E5F3E6",borderRadius:12,marginBottom:16,borderLeft:"4px solid #1F8A70"},children:[l.jsxs("div",{style:{fontSize:13,color:"#1F8A70",fontWeight:700,marginBottom:2},children:["SECTION ",Y+1]}),l.jsxs("div",{style:{fontSize:18,fontWeight:800},children:[O.subTitle," (",O.bibleRef,")"]})]}),O.chapters.map(D=>l.jsxs("div",{id:`pos-${D.book}-${D.chapter}`,style:{marginBottom:22},children:[l.jsxs("h3",{style:{margin:"0 0 10px",fontSize:18,fontWeight:700},children:[D.book," ",D.chapter,""]}),Object.keys(D.verses).sort((B,W)=>parseInt(B,10)-parseInt(W,10)).map(B=>{const W=D.verses[B]||"",q=W.match(/^<([^>]+)>\s*(.*)$/),J=q?q[1]:null,Fe=q?q[2]:W;return l.jsxs("div",{style:{margin:"6px 0"},children:[J&&l.jsxs("div",{style:{color:"#1F8A70",fontWeight:700,fontSize:"1.05em",marginBottom:4},children:["[ ",J," ]"]}),l.jsxs("p",{style:{margin:"2px 0",fontSize:g,letterSpacing:"0.01em",lineHeight:1.65},children:[l.jsxs("strong",{children:[B,"."]})," ",A(Fe)]})]},B)})]},D.book+D.chapter))]},Y)):K.map(O=>{const Y=Object.keys(O.verses).sort((D,B)=>parseInt(D,10)-parseInt(B,10));return l.jsxs("div",{id:`pos-${O.book}-${O.chapter}`,style:{marginBottom:22},onMouseEnter:()=>w({book:O.book,chapter:O.chapter}),children:[l.jsxs("h3",{style:{margin:"0 0 10px",fontSize:18,fontWeight:700},children:[O.book," ",O.chapter,""]}),Y.map(D=>{const B=O.verses[D]||"",W=B.match(/^<([^>]+)>\s*(.*)$/),q=W?W[1]:null,J=W?W[2]:B;return l.jsxs("div",{style:{margin:"6px 0"},children:[q&&l.jsxs("div",{style:{color:"#1F8A70",fontWeight:700,fontSize:"1.05em",marginBottom:4},children:["[ ",q," ]"]}),l.jsxs("p",{style:{margin:"2px 0",fontSize:g,letterSpacing:"0.01em",lineHeight:1.65},children:[l.jsxs("strong",{children:[D,"."]})," ",A(J)]})]},D)})]},O.book+O.chapter)})}),l.jsx("div",{style:{height:40}}),l.jsxs("button",{onClick:I,style:{position:"fixed",right:20,bottom:24,zIndex:9999,padding:"10px 16px",borderRadius:999,border:"none",background:"rgba(255,255,255,0.9)",color:"#0f172a",fontWeight:"bold",fontSize:14,boxShadow:"0 14px 30px rgba(15,23,42,0.35)",cursor:"pointer",display:"flex",alignItems:"center",gap:8},children:[l.jsx("span",{style:{fontSize:18},children:""}),l.jsx("span",{children:" "})]}),a&&l.jsx("div",{style:{position:"fixed",inset:0,zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.25)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)"},children:l.jsxs("div",{style:{width:"85%",maxWidth:340,padding:"16px 18px",borderRadius:28,background:"rgba(255,255,255,0.85)",color:"#0f172a",boxShadow:"0 20px 40px rgba(0,0,0,0.35)",textAlign:"center"},children:[l.jsx("div",{style:{width:48,height:48,margin:"0 auto 10px",borderRadius:24,background:"#34C759",display:"flex",alignItems:"center",justifyContent:"center",fontSize:24,color:"#fff"},children:""}),l.jsx("div",{style:{fontSize:16,fontWeight:700,marginBottom:4},children:" "}),l.jsx("div",{style:{fontSize:13,color:"#475569"},children:"      "})]})})]})})}function $k({user:t}){const e=yn(),[n,r]=_.useState({}),[i,s]=_.useState({}),[o,a]=_.useState({});_.useEffect(()=>{const u=sy(v=>r(v||{})),f=Da(v=>s(v||{})),d=new Date,h=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}`,x=[];return he.forEach(v=>{const S=P(ie,`approvals/${h}/${v}`),E=we(S,g=>{const p=g.val()?Object.keys(g.val()):[];a(y=>({...y,[v]:p}))});x.push(E)}),()=>{typeof u=="function"&&u(),typeof f=="function"&&f(),x.forEach(v=>v())}},[]);const c=_.useMemo(()=>{const u=new Date,f=u.getFullYear(),d=u.getMonth()+1,h=Vt(f,d);if(!h||h.length===0)return{dates:[],todayKey:"",byCrew:{}};const x=u.getDate(),v=`${f}-${String(d).padStart(2,"0")}-${String(x).padStart(2,"0")}`,S=h.slice(0,x),E={};he.forEach(b=>E[b]=[]);const g=new Set,p={};he.forEach(b=>{const k=vr(b,h),w={};(k||[]).forEach(C=>{!C||!C.date||(w[C.date]=typeof C.chapters=="number"?C.chapters:0)}),p[b]=w});const y=(b,k,w)=>{if(!b||!E[b])return;const C=n[b]||{},j=C.users&&C.users[k]||{},N=p[b]||{},M=(j||{}).checks||{};let A=0,H=0;S.forEach(D=>{const B=N[D]||0;B&&(H+=B,M[D]&&(A+=B))});const K=w.name||k,ne=w.medals||{},O=H>0?Math.round(A/H*100):0,Y=Ff({dates:h,todayKey:v,userChecks:M,userDailyActivity:w.dailyActivity||{}});E[b].push({uid:k,name:K,chapters:A,progress:O,stateKey:Y.key,stateLabel:Y.label,medals:ne})};return he.forEach(b=>{(o[b]||[]).forEach(w=>{g.add(w);const C=(i||{})[w];C&&y(b,w,C)})}),Object.entries(i||{}).forEach(([b,k])=>{if(g.has(b))return;const w=k.crew;w&&E[w]&&y(w,b,k)}),Object.keys(E).forEach(b=>{E[b].sort((k,w)=>(w.chapters||0)-(k.chapters||0))}),{dates:h,todayKey:v,byCrew:E}},[n,i,o]);return l.jsxs("div",{style:{padding:25,minHeight:"100vh",background:"#E5F3E6",color:"#034732"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[l.jsx("h2",{style:{margin:0,fontSize:26},children:"   "}),l.jsx("button",{onClick:()=>e("/home"),style:{padding:"10px 14px",borderRadius:12,border:"none",background:"#E8F6F0",color:"#1E7F74",fontWeight:900,cursor:"pointer"},children:"  "})]}),l.jsxs("div",{style:{fontSize:12,color:"#2F3A33",marginBottom:14},children:[" ",l.jsx("b",{children:"  /   .. /   /  !"}),"  ."]}),he.map(u=>{const f=c.byCrew&&c.byCrew[u]||[];return l.jsxs("div",{style:{marginBottom:16,padding:14,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 10px rgba(0,0,0,0.06)"},children:[l.jsx("h3",{style:{margin:0,marginBottom:10},children:Ye(u)}),f.length===0?l.jsx("div",{style:{fontSize:12,color:"#64748B"},children:"    ."}):l.jsx("div",{style:{overflowX:"auto"},children:l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12,background:"#F8FAFF",borderRadius:12},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"left",width:"20%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"right",width:"12%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"right",width:"15%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"center",width:"20%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"center",width:"33%",whiteSpace:"nowrap"},children:""})]})}),l.jsx("tbody",{children:f.map(d=>{var h,x,v;return l.jsxs("tr",{children:[l.jsx("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",maxWidth:65,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:d.name}),l.jsxs("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",textAlign:"right"},children:[d.progress,"%"]}),l.jsxs("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",textAlign:"right",whiteSpace:"nowrap"},children:[d.chapters,""]}),l.jsx("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",textAlign:"center"},children:(()=>{const S=d.stateLabel||" ",E=d.stateKey||"",g=E==="success"||S.includes(""),p=E==="ready"||S.includes(""),y=E==="running"||S.includes("");if(E==="fail"||S.includes("!"),p)return l.jsx("span",{style:{color:"#166534",fontWeight:600},children:S});const b={display:"inline-block",borderRadius:6,padding:"2px 5px",fontWeight:700,fontSize:11,backgroundColor:g?"#DCFCE7":y?"#DBEAFE":"#E5E7EB",color:g?"#166534":y?"#1D4ED8":"#111827",whiteSpace:"nowrap"};return l.jsx("span",{style:b,children:S})})()}),l.jsx("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px",textAlign:"center"},children:l.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:3,fontSize:13},children:[(((h=d.medals)==null?void 0:h.gold)||0)>0&&l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[l.jsx("span",{children:""}),l.jsx("b",{style:{marginLeft:1},children:d.medals.gold})]}),(((x=d.medals)==null?void 0:x.silver)||0)>0&&l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[l.jsx("span",{children:""}),l.jsx("b",{style:{marginLeft:1},children:d.medals.silver})]}),(((v=d.medals)==null?void 0:v.bronze)||0)>0&&l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[l.jsx("span",{children:""}),l.jsx("b",{style:{marginLeft:1},children:d.medals.bronze})]})]})})]},d.uid)})})]})})]},u)})]})}function Wk(){const[t,e]=_.useState(null);_.useEffect(()=>{const r=localStorage.getItem("biblecrew_user");if(r)try{const i=JSON.parse(r);if(i&&i.uid){const s=te(),o=P(s,`users/${i.uid}`),a=we(o,c=>{const u=c.val();if(u){const f={uid:i.uid,name:u.name||i.name,crew:u.crew||null,isAdmin:!!u.isAdmin,medals:u.medals||{},earnedMedals:u.earnedMedals||{},mustChangePassword:!!u.mustChangePassword};e(f),localStorage.setItem("biblecrew_user",JSON.stringify(f))}});return()=>a()}}catch(i){console.error("   ",i)}},[]);async function n(r,i){const s=(r||"").trim();if(!s)return null;const o=await zC(s,i||""),a={uid:o.uid,name:o.name||s,crew:o.crew||null,isAdmin:!!o.isAdmin,medals:o.medals||{},earnedMedals:o.earnedMedals||{},mustChangePassword:!!o.mustChangePassword};return e(a),localStorage.setItem("biblecrew_user",JSON.stringify(a)),a}return l.jsx(rk,{children:l.jsxs(ek,{children:[l.jsx(We,{path:"/admin-login",element:l.jsx(Tk,{})}),l.jsx(We,{path:"/",element:l.jsx(am,{onLogin:n})}),l.jsx(We,{path:"/login",element:l.jsx(am,{onLogin:n})}),l.jsx(We,{path:"/home",element:l.jsx(ik,{user:t})}),l.jsx(We,{path:"/crew-members",element:l.jsx($k,{user:t})}),l.jsx(We,{path:"/change-password",element:l.jsx(Ak,{user:t})}),l.jsx(We,{path:"/",element:l.jsx(Hn,{crewName:"",user:t})}),l.jsx(We,{path:"/",element:l.jsx(Hn,{crewName:"",user:t})}),l.jsx(We,{path:"/A",element:l.jsx(Hn,{crewName:"(A)",user:t})}),l.jsx(We,{path:"/B",element:l.jsx(Hn,{crewName:"(B)",user:t})}),l.jsx(We,{path:"/",element:l.jsx(Hn,{crewName:"",user:t})}),l.jsx(We,{path:"/",element:l.jsx(Hn,{crewName:"",user:t})}),l.jsx(We,{path:"/",element:l.jsx(Hn,{crewName:"",user:t})}),l.jsx(We,{path:"/",element:l.jsx(Hn,{crewName:"",user:t})}),l.jsx(We,{path:"/",element:l.jsx(sk,{})}),l.jsx(We,{path:"/records",element:l.jsx(Ok,{user:t})}),l.jsx(We,{path:"/",element:l.jsx(Lk,{user:t})}),l.jsx(We,{path:"/admin",element:l.jsx(Ek,{user:t})}),l.jsx(We,{path:"/admin/class-notice",element:l.jsx(kk,{})})]})})}const Uk=document.getElementById("root"),Hk=C1(Uk);Hk.render(l.jsx(Wk,{}));
