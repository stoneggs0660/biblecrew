function Oy(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function By(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var nm={exports:{}},Xl={},rm={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ao=Symbol.for("react.element"),zy=Symbol.for("react.portal"),Ly=Symbol.for("react.fragment"),$y=Symbol.for("react.strict_mode"),Wy=Symbol.for("react.profiler"),Uy=Symbol.for("react.provider"),Hy=Symbol.for("react.context"),Vy=Symbol.for("react.forward_ref"),Yy=Symbol.for("react.suspense"),Gy=Symbol.for("react.memo"),Qy=Symbol.for("react.lazy"),Mf=Symbol.iterator;function Ky(t){return t===null||typeof t!="object"?null:(t=Mf&&t[Mf]||t["@@iterator"],typeof t=="function"?t:null)}var im={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sm=Object.assign,om={};function Vi(t,e,n){this.props=t,this.context=e,this.refs=om,this.updater=n||im}Vi.prototype.isReactComponent={};Vi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function lm(){}lm.prototype=Vi.prototype;function Hu(t,e,n){this.props=t,this.context=e,this.refs=om,this.updater=n||im}var Vu=Hu.prototype=new lm;Vu.constructor=Hu;sm(Vu,Vi.prototype);Vu.isPureReactComponent=!0;var Of=Array.isArray,am=Object.prototype.hasOwnProperty,Yu={current:null},cm={key:!0,ref:!0,__self:!0,__source:!0};function um(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)am.call(e,r)&&!cm.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ao,type:t,key:s,ref:o,props:i,_owner:Yu.current}}function qy(t,e){return{$$typeof:ao,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Gu(t){return typeof t=="object"&&t!==null&&t.$$typeof===ao}function Xy(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Bf=/\/+/g;function Ba(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Xy(""+t.key):e.toString(36)}function Xo(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ao:case zy:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Ba(o,0):r,Of(i)?(n="",t!=null&&(n=t.replace(Bf,"$&/")+"/"),Xo(i,e,n,"",function(u){return u})):i!=null&&(Gu(i)&&(i=qy(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Bf,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Of(t))for(var a=0;a<t.length;a++){s=t[a];var c=r+Ba(s,a);o+=Xo(s,e,n,c,i)}else if(c=Ky(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=r+Ba(s,a++),o+=Xo(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function No(t,e,n){if(t==null)return t;var r=[],i=0;return Xo(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Jy(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},Jo={transition:null},Zy={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:Jo,ReactCurrentOwner:Yu};function dm(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:No,forEach:function(t,e,n){No(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return No(t,function(){e++}),e},toArray:function(t){return No(t,function(e){return e})||[]},only:function(t){if(!Gu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=Vi;oe.Fragment=Ly;oe.Profiler=Wy;oe.PureComponent=Hu;oe.StrictMode=$y;oe.Suspense=Yy;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zy;oe.act=dm;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=sm({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Yu.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)am.call(e,c)&&!cm.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:ao,type:t.type,key:i,ref:s,props:r,_owner:o}};oe.createContext=function(t){return t={$$typeof:Hy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Uy,_context:t},t.Consumer=t};oe.createElement=um;oe.createFactory=function(t){var e=um.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:Vy,render:t}};oe.isValidElement=Gu;oe.lazy=function(t){return{$$typeof:Qy,_payload:{_status:-1,_result:t},_init:Jy}};oe.memo=function(t,e){return{$$typeof:Gy,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=Jo.transition;Jo.transition={};try{t()}finally{Jo.transition=e}};oe.unstable_act=dm;oe.useCallback=function(t,e){return _t.current.useCallback(t,e)};oe.useContext=function(t){return _t.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};oe.useEffect=function(t,e){return _t.current.useEffect(t,e)};oe.useId=function(){return _t.current.useId()};oe.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return _t.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};oe.useRef=function(t){return _t.current.useRef(t)};oe.useState=function(t){return _t.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return _t.current.useTransition()};oe.version="18.3.1";rm.exports=oe;var _=rm.exports;const fm=By(_),ev=Oy({__proto__:null,default:fm},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tv=_,nv=Symbol.for("react.element"),rv=Symbol.for("react.fragment"),iv=Object.prototype.hasOwnProperty,sv=tv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ov={key:!0,ref:!0,__self:!0,__source:!0};function hm(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)iv.call(e,r)&&!ov.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:nv,type:t,key:s,ref:o,props:i,_owner:sv.current}}Xl.Fragment=rv;Xl.jsx=hm;Xl.jsxs=hm;nm.exports=Xl;var l=nm.exports;var pm={exports:{}},Dt={},mm={exports:{}},gm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,B){var W=N.length;N.push(B);e:for(;0<W;){var q=W-1>>>1,Z=N[q];if(0<i(Z,B))N[q]=B,N[W]=Z,W=q;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var B=N[0],W=N.pop();if(W!==B){N[0]=W;e:for(var q=0,Z=N.length,De=Z>>>1;q<De;){var we=2*(q+1)-1,Oe=N[we],Xe=we+1,ke=N[Xe];if(0>i(Oe,W))Xe<Z&&0>i(ke,Oe)?(N[q]=ke,N[Xe]=W,q=Xe):(N[q]=Oe,N[we]=W,q=we);else if(Xe<Z&&0>i(ke,W))N[q]=ke,N[Xe]=W,q=Xe;else break e}}return B}function i(N,B){var W=N.sortIndex-B.sortIndex;return W!==0?W:N.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],f=1,d=null,h=3,x=!1,v=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(N){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=N)r(u),B.sortIndex=B.expirationTime,e(c,B);else break;B=n(u)}}function b(N){if(w=!1,y(N),!v)if(n(c)!==null)v=!0,O(T);else{var B=n(u);B!==null&&Y(b,B.startTime-N)}}function T(N,B){v=!1,w&&(w=!1,g(j),j=-1),x=!0;var W=h;try{for(y(B),d=n(c);d!==null&&(!(d.expirationTime>B)||N&&!M());){var q=d.callback;if(typeof q=="function"){d.callback=null,h=d.priorityLevel;var Z=q(d.expirationTime<=B);B=t.unstable_now(),typeof Z=="function"?d.callback=Z:d===n(c)&&r(c),y(B)}else r(c);d=n(c)}if(d!==null)var De=!0;else{var we=n(u);we!==null&&Y(b,we.startTime-B),De=!1}return De}finally{d=null,h=W,x=!1}}var S=!1,C=null,j=-1,P=5,I=-1;function M(){return!(t.unstable_now()-I<P)}function A(){if(C!==null){var N=t.unstable_now();I=N;var B=!0;try{B=C(!0,N)}finally{B?H():(S=!1,C=null)}}else S=!1}var H;if(typeof p=="function")H=function(){p(A)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ie=Q.port2;Q.port1.onmessage=A,H=function(){ie.postMessage(null)}}else H=function(){E(A,0)};function O(N){C=N,S||(S=!0,H())}function Y(N,B){j=E(function(){N(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){v||x||(v=!0,O(T))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(N){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var W=h;h=B;try{return N()}finally{h=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,B){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var W=h;h=N;try{return B()}finally{h=W}},t.unstable_scheduleCallback=function(N,B,W){var q=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?q+W:q):W=q,N){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=W+Z,N={id:f++,callback:B,priorityLevel:N,startTime:W,expirationTime:Z,sortIndex:-1},W>q?(N.sortIndex=W,e(u,N),n(c)===null&&N===n(u)&&(w?(g(j),j=-1):w=!0,Y(b,W-q))):(N.sortIndex=Z,e(c,N),v||x||(v=!0,O(T))),N},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(N){var B=h;return function(){var W=h;h=B;try{return N.apply(this,arguments)}finally{h=W}}}})(gm);mm.exports=gm;var lv=mm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av=_,Nt=lv;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ym=new Set,Ds={};function Yr(t,e){Ii(t,e),Ii(t+"Capture",e)}function Ii(t,e){for(Ds[t]=e,t=0;t<e.length;t++)ym.add(e[t])}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rc=Object.prototype.hasOwnProperty,cv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zf={},Lf={};function uv(t){return Rc.call(Lf,t)?!0:Rc.call(zf,t)?!1:cv.test(t)?Lf[t]=!0:(zf[t]=!0,!1)}function dv(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function fv(t,e,n,r){if(e===null||typeof e>"u"||dv(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qu=/[\-:]([a-z])/g;function Ku(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qu,Ku);ct[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qu,Ku);ct[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qu,Ku);ct[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function qu(t,e,n,r){var i=ct.hasOwnProperty(e)?ct[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(fv(e,n,i,r)&&(n=null),r||i===null?uv(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Fn=av.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Do=Symbol.for("react.element"),li=Symbol.for("react.portal"),ai=Symbol.for("react.fragment"),Xu=Symbol.for("react.strict_mode"),jc=Symbol.for("react.profiler"),vm=Symbol.for("react.provider"),xm=Symbol.for("react.context"),Ju=Symbol.for("react.forward_ref"),Ic=Symbol.for("react.suspense"),Ac=Symbol.for("react.suspense_list"),Zu=Symbol.for("react.memo"),Wn=Symbol.for("react.lazy"),_m=Symbol.for("react.offscreen"),$f=Symbol.iterator;function is(t){return t===null||typeof t!="object"?null:(t=$f&&t[$f]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,za;function gs(t){if(za===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);za=e&&e[1]||""}return`
`+za+t}var La=!1;function $a(t,e){if(!t||La)return"";La=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{La=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?gs(t):""}function hv(t){switch(t.tag){case 5:return gs(t.type);case 16:return gs("Lazy");case 13:return gs("Suspense");case 19:return gs("SuspenseList");case 0:case 2:case 15:return t=$a(t.type,!1),t;case 11:return t=$a(t.type.render,!1),t;case 1:return t=$a(t.type,!0),t;default:return""}}function Nc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ai:return"Fragment";case li:return"Portal";case jc:return"Profiler";case Xu:return"StrictMode";case Ic:return"Suspense";case Ac:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xm:return(t.displayName||"Context")+".Consumer";case vm:return(t._context.displayName||"Context")+".Provider";case Ju:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zu:return e=t.displayName||null,e!==null?e:Nc(t.type)||"Memo";case Wn:e=t._payload,t=t._init;try{return Nc(t(e))}catch{}}return null}function pv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nc(e);case 8:return e===Xu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ur(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function mv(t){var e=bm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Po(t){t._valueTracker||(t._valueTracker=mv(t))}function Sm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bm(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function cl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dc(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Wf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ur(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wm(t,e){e=e.checked,e!=null&&qu(t,"checked",e,!1)}function Pc(t,e){wm(t,e);var n=ur(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Fc(t,e.type,ur(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Uf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Fc(t,e,n){(e!=="number"||cl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ys=Array.isArray;function _i(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ur(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Mc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Hf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(L(92));if(ys(n)){if(1<n.length)throw Error(L(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ur(n)}}function Cm(t,e){var n=ur(e.value),r=ur(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Vf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Em(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Em(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fo,km=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fo=Fo||document.createElement("div"),Fo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ps(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var _s={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gv=["Webkit","ms","Moz","O"];Object.keys(_s).forEach(function(t){gv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_s[e]=_s[t]})});function Tm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||_s.hasOwnProperty(t)&&_s[t]?(""+e).trim():e+"px"}function Rm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Tm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var yv=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bc(t,e){if(e){if(yv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function zc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lc=null;function ed(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $c=null,bi=null,Si=null;function Yf(t){if(t=fo(t)){if(typeof $c!="function")throw Error(L(280));var e=t.stateNode;e&&(e=na(e),$c(t.stateNode,t.type,e))}}function jm(t){bi?Si?Si.push(t):Si=[t]:bi=t}function Im(){if(bi){var t=bi,e=Si;if(Si=bi=null,Yf(t),e)for(t=0;t<e.length;t++)Yf(e[t])}}function Am(t,e){return t(e)}function Nm(){}var Wa=!1;function Dm(t,e,n){if(Wa)return t(e,n);Wa=!0;try{return Am(t,e,n)}finally{Wa=!1,(bi!==null||Si!==null)&&(Nm(),Im())}}function Fs(t,e){var n=t.stateNode;if(n===null)return null;var r=na(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(L(231,e,typeof n));return n}var Wc=!1;if(jn)try{var ss={};Object.defineProperty(ss,"passive",{get:function(){Wc=!0}}),window.addEventListener("test",ss,ss),window.removeEventListener("test",ss,ss)}catch{Wc=!1}function vv(t,e,n,r,i,s,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var bs=!1,ul=null,dl=!1,Uc=null,xv={onError:function(t){bs=!0,ul=t}};function _v(t,e,n,r,i,s,o,a,c){bs=!1,ul=null,vv.apply(xv,arguments)}function bv(t,e,n,r,i,s,o,a,c){if(_v.apply(this,arguments),bs){if(bs){var u=ul;bs=!1,ul=null}else throw Error(L(198));dl||(dl=!0,Uc=u)}}function Gr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Pm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Gf(t){if(Gr(t)!==t)throw Error(L(188))}function Sv(t){var e=t.alternate;if(!e){if(e=Gr(t),e===null)throw Error(L(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Gf(i),t;if(s===r)return Gf(i),e;s=s.sibling}throw Error(L(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?t:e}function Fm(t){return t=Sv(t),t!==null?Mm(t):null}function Mm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Mm(t);if(e!==null)return e;t=t.sibling}return null}var Om=Nt.unstable_scheduleCallback,Qf=Nt.unstable_cancelCallback,wv=Nt.unstable_shouldYield,Cv=Nt.unstable_requestPaint,ze=Nt.unstable_now,Ev=Nt.unstable_getCurrentPriorityLevel,td=Nt.unstable_ImmediatePriority,Bm=Nt.unstable_UserBlockingPriority,fl=Nt.unstable_NormalPriority,kv=Nt.unstable_LowPriority,zm=Nt.unstable_IdlePriority,Jl=null,dn=null;function Tv(t){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Jl,t,void 0,(t.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:Iv,Rv=Math.log,jv=Math.LN2;function Iv(t){return t>>>=0,t===0?32:31-(Rv(t)/jv|0)|0}var Mo=64,Oo=4194304;function vs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=vs(a):(s&=o,s!==0&&(r=vs(s)))}else o=n&~i,o!==0?r=vs(o):s!==0&&(r=vs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-en(e),i=1<<n,r|=t[n],e&=~i;return r}function Av(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nv(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-en(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=Av(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function Hc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Lm(){var t=Mo;return Mo<<=1,!(Mo&4194240)&&(Mo=64),t}function Ua(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function co(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-en(e),t[e]=n}function Dv(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-en(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function nd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-en(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var me=0;function $m(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Wm,rd,Um,Hm,Vm,Vc=!1,Bo=[],Jn=null,Zn=null,er=null,Ms=new Map,Os=new Map,Hn=[],Pv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kf(t,e){switch(t){case"focusin":case"focusout":Jn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":Ms.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Os.delete(e.pointerId)}}function os(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=fo(e),e!==null&&rd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Fv(t,e,n,r,i){switch(e){case"focusin":return Jn=os(Jn,t,e,n,r,i),!0;case"dragenter":return Zn=os(Zn,t,e,n,r,i),!0;case"mouseover":return er=os(er,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ms.set(s,os(Ms.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Os.set(s,os(Os.get(s)||null,t,e,n,r,i)),!0}return!1}function Ym(t){var e=Ir(t.target);if(e!==null){var n=Gr(e);if(n!==null){if(e=n.tag,e===13){if(e=Pm(n),e!==null){t.blockedOn=e,Vm(t.priority,function(){Um(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Yc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Lc=r,n.target.dispatchEvent(r),Lc=null}else return e=fo(n),e!==null&&rd(e),t.blockedOn=n,!1;e.shift()}return!0}function qf(t,e,n){Zo(t)&&n.delete(e)}function Mv(){Vc=!1,Jn!==null&&Zo(Jn)&&(Jn=null),Zn!==null&&Zo(Zn)&&(Zn=null),er!==null&&Zo(er)&&(er=null),Ms.forEach(qf),Os.forEach(qf)}function ls(t,e){t.blockedOn===e&&(t.blockedOn=null,Vc||(Vc=!0,Nt.unstable_scheduleCallback(Nt.unstable_NormalPriority,Mv)))}function Bs(t){function e(i){return ls(i,t)}if(0<Bo.length){ls(Bo[0],t);for(var n=1;n<Bo.length;n++){var r=Bo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Jn!==null&&ls(Jn,t),Zn!==null&&ls(Zn,t),er!==null&&ls(er,t),Ms.forEach(e),Os.forEach(e),n=0;n<Hn.length;n++)r=Hn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Hn.length&&(n=Hn[0],n.blockedOn===null);)Ym(n),n.blockedOn===null&&Hn.shift()}var wi=Fn.ReactCurrentBatchConfig,pl=!0;function Ov(t,e,n,r){var i=me,s=wi.transition;wi.transition=null;try{me=1,id(t,e,n,r)}finally{me=i,wi.transition=s}}function Bv(t,e,n,r){var i=me,s=wi.transition;wi.transition=null;try{me=4,id(t,e,n,r)}finally{me=i,wi.transition=s}}function id(t,e,n,r){if(pl){var i=Yc(t,e,n,r);if(i===null)Za(t,e,r,ml,n),Kf(t,r);else if(Fv(i,t,e,n,r))r.stopPropagation();else if(Kf(t,r),e&4&&-1<Pv.indexOf(t)){for(;i!==null;){var s=fo(i);if(s!==null&&Wm(s),s=Yc(t,e,n,r),s===null&&Za(t,e,r,ml,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Za(t,e,r,null,n)}}var ml=null;function Yc(t,e,n,r){if(ml=null,t=ed(r),t=Ir(t),t!==null)if(e=Gr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Pm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ml=t,null}function Gm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ev()){case td:return 1;case Bm:return 4;case fl:case kv:return 16;case zm:return 536870912;default:return 16}default:return 16}}var Yn=null,sd=null,el=null;function Qm(){if(el)return el;var t,e=sd,n=e.length,r,i="value"in Yn?Yn.value:Yn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return el=i.slice(t,1<r?1-r:void 0)}function tl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zo(){return!0}function Xf(){return!1}function Pt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?zo:Xf,this.isPropagationStopped=Xf,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zo)},persist:function(){},isPersistent:zo}),e}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},od=Pt(Yi),uo=Ne({},Yi,{view:0,detail:0}),zv=Pt(uo),Ha,Va,as,Zl=Ne({},uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ld,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==as&&(as&&t.type==="mousemove"?(Ha=t.screenX-as.screenX,Va=t.screenY-as.screenY):Va=Ha=0,as=t),Ha)},movementY:function(t){return"movementY"in t?t.movementY:Va}}),Jf=Pt(Zl),Lv=Ne({},Zl,{dataTransfer:0}),$v=Pt(Lv),Wv=Ne({},uo,{relatedTarget:0}),Ya=Pt(Wv),Uv=Ne({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),Hv=Pt(Uv),Vv=Ne({},Yi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Yv=Pt(Vv),Gv=Ne({},Yi,{data:0}),Zf=Pt(Gv),Qv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xv(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qv[t])?!!e[t]:!1}function ld(){return Xv}var Jv=Ne({},uo,{key:function(t){if(t.key){var e=Qv[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=tl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Kv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ld,charCode:function(t){return t.type==="keypress"?tl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?tl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Zv=Pt(Jv),ex=Ne({},Zl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eh=Pt(ex),tx=Ne({},uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ld}),nx=Pt(tx),rx=Ne({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),ix=Pt(rx),sx=Ne({},Zl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ox=Pt(sx),lx=[9,13,27,32],ad=jn&&"CompositionEvent"in window,Ss=null;jn&&"documentMode"in document&&(Ss=document.documentMode);var ax=jn&&"TextEvent"in window&&!Ss,Km=jn&&(!ad||Ss&&8<Ss&&11>=Ss),th=String.fromCharCode(32),nh=!1;function qm(t,e){switch(t){case"keyup":return lx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ci=!1;function cx(t,e){switch(t){case"compositionend":return Xm(e);case"keypress":return e.which!==32?null:(nh=!0,th);case"textInput":return t=e.data,t===th&&nh?null:t;default:return null}}function ux(t,e){if(ci)return t==="compositionend"||!ad&&qm(t,e)?(t=Qm(),el=sd=Yn=null,ci=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Km&&e.locale!=="ko"?null:e.data;default:return null}}var dx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dx[t.type]:e==="textarea"}function Jm(t,e,n,r){jm(r),e=gl(e,"onChange"),0<e.length&&(n=new od("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ws=null,zs=null;function fx(t){cg(t,0)}function ea(t){var e=fi(t);if(Sm(e))return t}function hx(t,e){if(t==="change")return e}var Zm=!1;if(jn){var Ga;if(jn){var Qa="oninput"in document;if(!Qa){var ih=document.createElement("div");ih.setAttribute("oninput","return;"),Qa=typeof ih.oninput=="function"}Ga=Qa}else Ga=!1;Zm=Ga&&(!document.documentMode||9<document.documentMode)}function sh(){ws&&(ws.detachEvent("onpropertychange",eg),zs=ws=null)}function eg(t){if(t.propertyName==="value"&&ea(zs)){var e=[];Jm(e,zs,t,ed(t)),Dm(fx,e)}}function px(t,e,n){t==="focusin"?(sh(),ws=e,zs=n,ws.attachEvent("onpropertychange",eg)):t==="focusout"&&sh()}function mx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ea(zs)}function gx(t,e){if(t==="click")return ea(e)}function yx(t,e){if(t==="input"||t==="change")return ea(e)}function vx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rn=typeof Object.is=="function"?Object.is:vx;function Ls(t,e){if(rn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Rc.call(e,i)||!rn(t[i],e[i]))return!1}return!0}function oh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lh(t,e){var n=oh(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=oh(n)}}function tg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?tg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ng(){for(var t=window,e=cl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=cl(t.document)}return e}function cd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xx(t){var e=ng(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&tg(n.ownerDocument.documentElement,n)){if(r!==null&&cd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=lh(n,s);var o=lh(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _x=jn&&"documentMode"in document&&11>=document.documentMode,ui=null,Gc=null,Cs=null,Qc=!1;function ah(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qc||ui==null||ui!==cl(r)||(r=ui,"selectionStart"in r&&cd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Cs&&Ls(Cs,r)||(Cs=r,r=gl(Gc,"onSelect"),0<r.length&&(e=new od("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ui)))}function Lo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var di={animationend:Lo("Animation","AnimationEnd"),animationiteration:Lo("Animation","AnimationIteration"),animationstart:Lo("Animation","AnimationStart"),transitionend:Lo("Transition","TransitionEnd")},Ka={},rg={};jn&&(rg=document.createElement("div").style,"AnimationEvent"in window||(delete di.animationend.animation,delete di.animationiteration.animation,delete di.animationstart.animation),"TransitionEvent"in window||delete di.transitionend.transition);function ta(t){if(Ka[t])return Ka[t];if(!di[t])return t;var e=di[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in rg)return Ka[t]=e[n];return t}var ig=ta("animationend"),sg=ta("animationiteration"),og=ta("animationstart"),lg=ta("transitionend"),ag=new Map,ch="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(t,e){ag.set(t,e),Yr(e,[t])}for(var qa=0;qa<ch.length;qa++){var Xa=ch[qa],bx=Xa.toLowerCase(),Sx=Xa[0].toUpperCase()+Xa.slice(1);gr(bx,"on"+Sx)}gr(ig,"onAnimationEnd");gr(sg,"onAnimationIteration");gr(og,"onAnimationStart");gr("dblclick","onDoubleClick");gr("focusin","onFocus");gr("focusout","onBlur");gr(lg,"onTransitionEnd");Ii("onMouseEnter",["mouseout","mouseover"]);Ii("onMouseLeave",["mouseout","mouseover"]);Ii("onPointerEnter",["pointerout","pointerover"]);Ii("onPointerLeave",["pointerout","pointerover"]);Yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wx=new Set("cancel close invalid load scroll toggle".split(" ").concat(xs));function uh(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,bv(r,e,void 0,t),t.currentTarget=null}function cg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;uh(i,a,u),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;uh(i,a,u),s=c}}}if(dl)throw t=Uc,dl=!1,Uc=null,t}function Ce(t,e){var n=e[Zc];n===void 0&&(n=e[Zc]=new Set);var r=t+"__bubble";n.has(r)||(ug(e,t,2,!1),n.add(r))}function Ja(t,e,n){var r=0;e&&(r|=4),ug(n,t,r,e)}var $o="_reactListening"+Math.random().toString(36).slice(2);function $s(t){if(!t[$o]){t[$o]=!0,ym.forEach(function(n){n!=="selectionchange"&&(wx.has(n)||Ja(n,!1,t),Ja(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$o]||(e[$o]=!0,Ja("selectionchange",!1,e))}}function ug(t,e,n,r){switch(Gm(e)){case 1:var i=Ov;break;case 4:i=Bv;break;default:i=id}n=i.bind(null,e,n,t),i=void 0,!Wc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Za(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ir(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Dm(function(){var u=s,f=ed(n),d=[];e:{var h=ag.get(t);if(h!==void 0){var x=od,v=t;switch(t){case"keypress":if(tl(n)===0)break e;case"keydown":case"keyup":x=Zv;break;case"focusin":v="focus",x=Ya;break;case"focusout":v="blur",x=Ya;break;case"beforeblur":case"afterblur":x=Ya;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Jf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=$v;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=nx;break;case ig:case sg:case og:x=Hv;break;case lg:x=ix;break;case"scroll":x=zv;break;case"wheel":x=ox;break;case"copy":case"cut":case"paste":x=Yv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=eh}var w=(e&4)!==0,E=!w&&t==="scroll",g=w?h!==null?h+"Capture":null:h;w=[];for(var p=u,y;p!==null;){y=p;var b=y.stateNode;if(y.tag===5&&b!==null&&(y=b,g!==null&&(b=Fs(p,g),b!=null&&w.push(Ws(p,b,y)))),E)break;p=p.return}0<w.length&&(h=new x(h,v,null,n,f),d.push({event:h,listeners:w}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",h&&n!==Lc&&(v=n.relatedTarget||n.fromElement)&&(Ir(v)||v[In]))break e;if((x||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,x?(v=n.relatedTarget||n.toElement,x=u,v=v?Ir(v):null,v!==null&&(E=Gr(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(x=null,v=u),x!==v)){if(w=Jf,b="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(w=eh,b="onPointerLeave",g="onPointerEnter",p="pointer"),E=x==null?h:fi(x),y=v==null?h:fi(v),h=new w(b,p+"leave",x,n,f),h.target=E,h.relatedTarget=y,b=null,Ir(f)===u&&(w=new w(g,p+"enter",v,n,f),w.target=y,w.relatedTarget=E,b=w),E=b,x&&v)t:{for(w=x,g=v,p=0,y=w;y;y=ii(y))p++;for(y=0,b=g;b;b=ii(b))y++;for(;0<p-y;)w=ii(w),p--;for(;0<y-p;)g=ii(g),y--;for(;p--;){if(w===g||g!==null&&w===g.alternate)break t;w=ii(w),g=ii(g)}w=null}else w=null;x!==null&&dh(d,h,x,w,!1),v!==null&&E!==null&&dh(d,E,v,w,!0)}}e:{if(h=u?fi(u):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var T=hx;else if(rh(h))if(Zm)T=yx;else{T=mx;var S=px}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=gx);if(T&&(T=T(t,u))){Jm(d,T,n,f);break e}S&&S(t,h,u),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&Fc(h,"number",h.value)}switch(S=u?fi(u):window,t){case"focusin":(rh(S)||S.contentEditable==="true")&&(ui=S,Gc=u,Cs=null);break;case"focusout":Cs=Gc=ui=null;break;case"mousedown":Qc=!0;break;case"contextmenu":case"mouseup":case"dragend":Qc=!1,ah(d,n,f);break;case"selectionchange":if(_x)break;case"keydown":case"keyup":ah(d,n,f)}var C;if(ad)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else ci?qm(t,n)&&(j="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(Km&&n.locale!=="ko"&&(ci||j!=="onCompositionStart"?j==="onCompositionEnd"&&ci&&(C=Qm()):(Yn=f,sd="value"in Yn?Yn.value:Yn.textContent,ci=!0)),S=gl(u,j),0<S.length&&(j=new Zf(j,t,null,n,f),d.push({event:j,listeners:S}),C?j.data=C:(C=Xm(n),C!==null&&(j.data=C)))),(C=ax?cx(t,n):ux(t,n))&&(u=gl(u,"onBeforeInput"),0<u.length&&(f=new Zf("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=C))}cg(d,e)})}function Ws(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Fs(t,n),s!=null&&r.unshift(Ws(t,s,i)),s=Fs(t,e),s!=null&&r.push(Ws(t,s,i))),t=t.return}return r}function ii(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dh(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,i?(c=Fs(n,s),c!=null&&o.unshift(Ws(n,c,a))):i||(c=Fs(n,s),c!=null&&o.push(Ws(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Cx=/\r\n?/g,Ex=/\u0000|\uFFFD/g;function fh(t){return(typeof t=="string"?t:""+t).replace(Cx,`
`).replace(Ex,"")}function Wo(t,e,n){if(e=fh(e),fh(t)!==e&&n)throw Error(L(425))}function yl(){}var Kc=null,qc=null;function Xc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jc=typeof setTimeout=="function"?setTimeout:void 0,kx=typeof clearTimeout=="function"?clearTimeout:void 0,hh=typeof Promise=="function"?Promise:void 0,Tx=typeof queueMicrotask=="function"?queueMicrotask:typeof hh<"u"?function(t){return hh.resolve(null).then(t).catch(Rx)}:Jc;function Rx(t){setTimeout(function(){throw t})}function ec(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Bs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Bs(e)}function tr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ph(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gi=Math.random().toString(36).slice(2),un="__reactFiber$"+Gi,Us="__reactProps$"+Gi,In="__reactContainer$"+Gi,Zc="__reactEvents$"+Gi,jx="__reactListeners$"+Gi,Ix="__reactHandles$"+Gi;function Ir(t){var e=t[un];if(e)return e;for(var n=t.parentNode;n;){if(e=n[In]||n[un]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ph(t);t!==null;){if(n=t[un])return n;t=ph(t)}return e}t=n,n=t.parentNode}return null}function fo(t){return t=t[un]||t[In],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function na(t){return t[Us]||null}var eu=[],hi=-1;function yr(t){return{current:t}}function Ee(t){0>hi||(t.current=eu[hi],eu[hi]=null,hi--)}function be(t,e){hi++,eu[hi]=t.current,t.current=e}var dr={},mt=yr(dr),kt=yr(!1),Br=dr;function Ai(t,e){var n=t.type.contextTypes;if(!n)return dr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Tt(t){return t=t.childContextTypes,t!=null}function vl(){Ee(kt),Ee(mt)}function mh(t,e,n){if(mt.current!==dr)throw Error(L(168));be(mt,e),be(kt,n)}function dg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(L(108,pv(t)||"Unknown",i));return Ne({},n,r)}function xl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||dr,Br=mt.current,be(mt,t),be(kt,kt.current),!0}function gh(t,e,n){var r=t.stateNode;if(!r)throw Error(L(169));n?(t=dg(t,e,Br),r.__reactInternalMemoizedMergedChildContext=t,Ee(kt),Ee(mt),be(mt,t)):Ee(kt),be(kt,n)}var wn=null,ra=!1,tc=!1;function fg(t){wn===null?wn=[t]:wn.push(t)}function Ax(t){ra=!0,fg(t)}function vr(){if(!tc&&wn!==null){tc=!0;var t=0,e=me;try{var n=wn;for(me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}wn=null,ra=!1}catch(i){throw wn!==null&&(wn=wn.slice(t+1)),Om(td,vr),i}finally{me=e,tc=!1}}return null}var pi=[],mi=0,_l=null,bl=0,Bt=[],zt=0,zr=null,Cn=1,En="";function kr(t,e){pi[mi++]=bl,pi[mi++]=_l,_l=t,bl=e}function hg(t,e,n){Bt[zt++]=Cn,Bt[zt++]=En,Bt[zt++]=zr,zr=t;var r=Cn;t=En;var i=32-en(r)-1;r&=~(1<<i),n+=1;var s=32-en(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Cn=1<<32-en(e)+i|n<<i|r,En=s+t}else Cn=1<<s|n<<i|r,En=t}function ud(t){t.return!==null&&(kr(t,1),hg(t,1,0))}function dd(t){for(;t===_l;)_l=pi[--mi],pi[mi]=null,bl=pi[--mi],pi[mi]=null;for(;t===zr;)zr=Bt[--zt],Bt[zt]=null,En=Bt[--zt],Bt[zt]=null,Cn=Bt[--zt],Bt[zt]=null}var At=null,It=null,je=!1,Xt=null;function pg(t,e){var n=Lt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function yh(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,At=t,It=tr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,At=t,It=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zr!==null?{id:Cn,overflow:En}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Lt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,At=t,It=null,!0):!1;default:return!1}}function tu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nu(t){if(je){var e=It;if(e){var n=e;if(!yh(t,e)){if(tu(t))throw Error(L(418));e=tr(n.nextSibling);var r=At;e&&yh(t,e)?pg(r,n):(t.flags=t.flags&-4097|2,je=!1,At=t)}}else{if(tu(t))throw Error(L(418));t.flags=t.flags&-4097|2,je=!1,At=t}}}function vh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;At=t}function Uo(t){if(t!==At)return!1;if(!je)return vh(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xc(t.type,t.memoizedProps)),e&&(e=It)){if(tu(t))throw mg(),Error(L(418));for(;e;)pg(t,e),e=tr(e.nextSibling)}if(vh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){It=tr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}It=null}}else It=At?tr(t.stateNode.nextSibling):null;return!0}function mg(){for(var t=It;t;)t=tr(t.nextSibling)}function Ni(){It=At=null,je=!1}function fd(t){Xt===null?Xt=[t]:Xt.push(t)}var Nx=Fn.ReactCurrentBatchConfig;function cs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,t))}return t}function Ho(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xh(t){var e=t._init;return e(t._payload)}function gg(t){function e(g,p){if(t){var y=g.deletions;y===null?(g.deletions=[p],g.flags|=16):y.push(p)}}function n(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function r(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function i(g,p){return g=sr(g,p),g.index=0,g.sibling=null,g}function s(g,p,y){return g.index=y,t?(y=g.alternate,y!==null?(y=y.index,y<p?(g.flags|=2,p):y):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,p,y,b){return p===null||p.tag!==6?(p=ac(y,g.mode,b),p.return=g,p):(p=i(p,y),p.return=g,p)}function c(g,p,y,b){var T=y.type;return T===ai?f(g,p,y.props.children,b,y.key):p!==null&&(p.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Wn&&xh(T)===p.type)?(b=i(p,y.props),b.ref=cs(g,p,y),b.return=g,b):(b=al(y.type,y.key,y.props,null,g.mode,b),b.ref=cs(g,p,y),b.return=g,b)}function u(g,p,y,b){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=cc(y,g.mode,b),p.return=g,p):(p=i(p,y.children||[]),p.return=g,p)}function f(g,p,y,b,T){return p===null||p.tag!==7?(p=Fr(y,g.mode,b,T),p.return=g,p):(p=i(p,y),p.return=g,p)}function d(g,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=ac(""+p,g.mode,y),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Do:return y=al(p.type,p.key,p.props,null,g.mode,y),y.ref=cs(g,null,p),y.return=g,y;case li:return p=cc(p,g.mode,y),p.return=g,p;case Wn:var b=p._init;return d(g,b(p._payload),y)}if(ys(p)||is(p))return p=Fr(p,g.mode,y,null),p.return=g,p;Ho(g,p)}return null}function h(g,p,y,b){var T=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return T!==null?null:a(g,p,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Do:return y.key===T?c(g,p,y,b):null;case li:return y.key===T?u(g,p,y,b):null;case Wn:return T=y._init,h(g,p,T(y._payload),b)}if(ys(y)||is(y))return T!==null?null:f(g,p,y,b,null);Ho(g,y)}return null}function x(g,p,y,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(y)||null,a(p,g,""+b,T);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Do:return g=g.get(b.key===null?y:b.key)||null,c(p,g,b,T);case li:return g=g.get(b.key===null?y:b.key)||null,u(p,g,b,T);case Wn:var S=b._init;return x(g,p,y,S(b._payload),T)}if(ys(b)||is(b))return g=g.get(y)||null,f(p,g,b,T,null);Ho(p,b)}return null}function v(g,p,y,b){for(var T=null,S=null,C=p,j=p=0,P=null;C!==null&&j<y.length;j++){C.index>j?(P=C,C=null):P=C.sibling;var I=h(g,C,y[j],b);if(I===null){C===null&&(C=P);break}t&&C&&I.alternate===null&&e(g,C),p=s(I,p,j),S===null?T=I:S.sibling=I,S=I,C=P}if(j===y.length)return n(g,C),je&&kr(g,j),T;if(C===null){for(;j<y.length;j++)C=d(g,y[j],b),C!==null&&(p=s(C,p,j),S===null?T=C:S.sibling=C,S=C);return je&&kr(g,j),T}for(C=r(g,C);j<y.length;j++)P=x(C,g,j,y[j],b),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?j:P.key),p=s(P,p,j),S===null?T=P:S.sibling=P,S=P);return t&&C.forEach(function(M){return e(g,M)}),je&&kr(g,j),T}function w(g,p,y,b){var T=is(y);if(typeof T!="function")throw Error(L(150));if(y=T.call(y),y==null)throw Error(L(151));for(var S=T=null,C=p,j=p=0,P=null,I=y.next();C!==null&&!I.done;j++,I=y.next()){C.index>j?(P=C,C=null):P=C.sibling;var M=h(g,C,I.value,b);if(M===null){C===null&&(C=P);break}t&&C&&M.alternate===null&&e(g,C),p=s(M,p,j),S===null?T=M:S.sibling=M,S=M,C=P}if(I.done)return n(g,C),je&&kr(g,j),T;if(C===null){for(;!I.done;j++,I=y.next())I=d(g,I.value,b),I!==null&&(p=s(I,p,j),S===null?T=I:S.sibling=I,S=I);return je&&kr(g,j),T}for(C=r(g,C);!I.done;j++,I=y.next())I=x(C,g,j,I.value,b),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?j:I.key),p=s(I,p,j),S===null?T=I:S.sibling=I,S=I);return t&&C.forEach(function(A){return e(g,A)}),je&&kr(g,j),T}function E(g,p,y,b){if(typeof y=="object"&&y!==null&&y.type===ai&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Do:e:{for(var T=y.key,S=p;S!==null;){if(S.key===T){if(T=y.type,T===ai){if(S.tag===7){n(g,S.sibling),p=i(S,y.props.children),p.return=g,g=p;break e}}else if(S.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Wn&&xh(T)===S.type){n(g,S.sibling),p=i(S,y.props),p.ref=cs(g,S,y),p.return=g,g=p;break e}n(g,S);break}else e(g,S);S=S.sibling}y.type===ai?(p=Fr(y.props.children,g.mode,b,y.key),p.return=g,g=p):(b=al(y.type,y.key,y.props,null,g.mode,b),b.ref=cs(g,p,y),b.return=g,g=b)}return o(g);case li:e:{for(S=y.key;p!==null;){if(p.key===S)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){n(g,p.sibling),p=i(p,y.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else e(g,p);p=p.sibling}p=cc(y,g.mode,b),p.return=g,g=p}return o(g);case Wn:return S=y._init,E(g,p,S(y._payload),b)}if(ys(y))return v(g,p,y,b);if(is(y))return w(g,p,y,b);Ho(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(n(g,p.sibling),p=i(p,y),p.return=g,g=p):(n(g,p),p=ac(y,g.mode,b),p.return=g,g=p),o(g)):n(g,p)}return E}var Di=gg(!0),yg=gg(!1),Sl=yr(null),wl=null,gi=null,hd=null;function pd(){hd=gi=wl=null}function md(t){var e=Sl.current;Ee(Sl),t._currentValue=e}function ru(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ci(t,e){wl=t,hd=gi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ct=!0),t.firstContext=null)}function Ut(t){var e=t._currentValue;if(hd!==t)if(t={context:t,memoizedValue:e,next:null},gi===null){if(wl===null)throw Error(L(308));gi=t,wl.dependencies={lanes:0,firstContext:t}}else gi=gi.next=t;return e}var Ar=null;function gd(t){Ar===null?Ar=[t]:Ar.push(t)}function vg(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,gd(e)):(n.next=i.next,i.next=n),e.interleaved=n,An(t,r)}function An(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Un=!1;function yd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Tn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function nr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,An(t,n)}return i=r.interleaved,i===null?(e.next=e,gd(r)):(e.next=i.next,i.next=e),r.interleaved=e,An(t,n)}function nl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nd(t,n)}}function _h(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Cl(t,e,n,r){var i=t.updateQueue;Un=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=u:a.next=u,f.lastBaseUpdate=c))}if(s!==null){var d=i.baseState;o=0,f=u=c=null,a=s;do{var h=a.lane,x=a.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:x,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,w=a;switch(h=e,x=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){d=v.call(x,d,h);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,h=typeof v=="function"?v.call(x,d,h):v,h==null)break e;d=Ne({},d,h);break e;case 2:Un=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else x={eventTime:x,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(u=f=x,c=d):f=f.next=x,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(f===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);$r|=o,t.lanes=o,t.memoizedState=d}}function bh(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(L(191,i));i.call(r)}}}var ho={},fn=yr(ho),Hs=yr(ho),Vs=yr(ho);function Nr(t){if(t===ho)throw Error(L(174));return t}function vd(t,e){switch(be(Vs,e),be(Hs,t),be(fn,ho),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Oc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Oc(e,t)}Ee(fn),be(fn,e)}function Pi(){Ee(fn),Ee(Hs),Ee(Vs)}function _g(t){Nr(Vs.current);var e=Nr(fn.current),n=Oc(e,t.type);e!==n&&(be(Hs,t),be(fn,n))}function xd(t){Hs.current===t&&(Ee(fn),Ee(Hs))}var Ie=yr(0);function El(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var nc=[];function _d(){for(var t=0;t<nc.length;t++)nc[t]._workInProgressVersionPrimary=null;nc.length=0}var rl=Fn.ReactCurrentDispatcher,rc=Fn.ReactCurrentBatchConfig,Lr=0,Ae=null,Ye=null,tt=null,kl=!1,Es=!1,Ys=0,Dx=0;function ft(){throw Error(L(321))}function bd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!rn(t[n],e[n]))return!1;return!0}function Sd(t,e,n,r,i,s){if(Lr=s,Ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rl.current=t===null||t.memoizedState===null?Ox:Bx,t=n(r,i),Es){s=0;do{if(Es=!1,Ys=0,25<=s)throw Error(L(301));s+=1,tt=Ye=null,e.updateQueue=null,rl.current=zx,t=n(r,i)}while(Es)}if(rl.current=Tl,e=Ye!==null&&Ye.next!==null,Lr=0,tt=Ye=Ae=null,kl=!1,e)throw Error(L(300));return t}function wd(){var t=Ys!==0;return Ys=0,t}function cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Ae.memoizedState=tt=t:tt=tt.next=t,tt}function Ht(){if(Ye===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=tt===null?Ae.memoizedState:tt.next;if(e!==null)tt=e,Ye=t;else{if(t===null)throw Error(L(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},tt===null?Ae.memoizedState=tt=t:tt=tt.next=t}return tt}function Gs(t,e){return typeof e=="function"?e(t):e}function ic(t){var e=Ht(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=Ye,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,u=s;do{var f=u.lane;if((Lr&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Ae.lanes|=f,$r|=f}u=u.next}while(u!==null&&u!==s);c===null?o=r:c.next=a,rn(r,e.memoizedState)||(Ct=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ae.lanes|=s,$r|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function sc(t){var e=Ht(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);rn(s,e.memoizedState)||(Ct=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function bg(){}function Sg(t,e){var n=Ae,r=Ht(),i=e(),s=!rn(r.memoizedState,i);if(s&&(r.memoizedState=i,Ct=!0),r=r.queue,Cd(Eg.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,Qs(9,Cg.bind(null,n,r,i,e),void 0,null),rt===null)throw Error(L(349));Lr&30||wg(n,e,i)}return i}function wg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Cg(t,e,n,r){e.value=n,e.getSnapshot=r,kg(e)&&Tg(t)}function Eg(t,e,n){return n(function(){kg(e)&&Tg(t)})}function kg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rn(t,n)}catch{return!0}}function Tg(t){var e=An(t,1);e!==null&&tn(e,t,1,-1)}function Sh(t){var e=cn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:t},e.queue=t,t=t.dispatch=Mx.bind(null,Ae,t),[e.memoizedState,t]}function Qs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Rg(){return Ht().memoizedState}function il(t,e,n,r){var i=cn();Ae.flags|=t,i.memoizedState=Qs(1|e,n,void 0,r===void 0?null:r)}function ia(t,e,n,r){var i=Ht();r=r===void 0?null:r;var s=void 0;if(Ye!==null){var o=Ye.memoizedState;if(s=o.destroy,r!==null&&bd(r,o.deps)){i.memoizedState=Qs(e,n,s,r);return}}Ae.flags|=t,i.memoizedState=Qs(1|e,n,s,r)}function wh(t,e){return il(8390656,8,t,e)}function Cd(t,e){return ia(2048,8,t,e)}function jg(t,e){return ia(4,2,t,e)}function Ig(t,e){return ia(4,4,t,e)}function Ag(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ng(t,e,n){return n=n!=null?n.concat([t]):null,ia(4,4,Ag.bind(null,e,t),n)}function Ed(){}function Dg(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Pg(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Fg(t,e,n){return Lr&21?(rn(n,e)||(n=Lm(),Ae.lanes|=n,$r|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ct=!0),t.memoizedState=n)}function Px(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var r=rc.transition;rc.transition={};try{t(!1),e()}finally{me=n,rc.transition=r}}function Mg(){return Ht().memoizedState}function Fx(t,e,n){var r=ir(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Og(t))Bg(e,n);else if(n=vg(t,e,n,r),n!==null){var i=vt();tn(n,t,r,i),zg(n,e,r)}}function Mx(t,e,n){var r=ir(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Og(t))Bg(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,rn(a,o)){var c=e.interleaved;c===null?(i.next=i,gd(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=vg(t,e,i,r),n!==null&&(i=vt(),tn(n,t,r,i),zg(n,e,r))}}function Og(t){var e=t.alternate;return t===Ae||e!==null&&e===Ae}function Bg(t,e){Es=kl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function zg(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nd(t,n)}}var Tl={readContext:Ut,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},Ox={readContext:Ut,useCallback:function(t,e){return cn().memoizedState=[t,e===void 0?null:e],t},useContext:Ut,useEffect:wh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,il(4194308,4,Ag.bind(null,e,t),n)},useLayoutEffect:function(t,e){return il(4194308,4,t,e)},useInsertionEffect:function(t,e){return il(4,2,t,e)},useMemo:function(t,e){var n=cn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=cn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Fx.bind(null,Ae,t),[r.memoizedState,t]},useRef:function(t){var e=cn();return t={current:t},e.memoizedState=t},useState:Sh,useDebugValue:Ed,useDeferredValue:function(t){return cn().memoizedState=t},useTransition:function(){var t=Sh(!1),e=t[0];return t=Px.bind(null,t[1]),cn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ae,i=cn();if(je){if(n===void 0)throw Error(L(407));n=n()}else{if(n=e(),rt===null)throw Error(L(349));Lr&30||wg(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,wh(Eg.bind(null,r,s,t),[t]),r.flags|=2048,Qs(9,Cg.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=cn(),e=rt.identifierPrefix;if(je){var n=En,r=Cn;n=(r&~(1<<32-en(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ys++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Dx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Bx={readContext:Ut,useCallback:Dg,useContext:Ut,useEffect:Cd,useImperativeHandle:Ng,useInsertionEffect:jg,useLayoutEffect:Ig,useMemo:Pg,useReducer:ic,useRef:Rg,useState:function(){return ic(Gs)},useDebugValue:Ed,useDeferredValue:function(t){var e=Ht();return Fg(e,Ye.memoizedState,t)},useTransition:function(){var t=ic(Gs)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:bg,useSyncExternalStore:Sg,useId:Mg,unstable_isNewReconciler:!1},zx={readContext:Ut,useCallback:Dg,useContext:Ut,useEffect:Cd,useImperativeHandle:Ng,useInsertionEffect:jg,useLayoutEffect:Ig,useMemo:Pg,useReducer:sc,useRef:Rg,useState:function(){return sc(Gs)},useDebugValue:Ed,useDeferredValue:function(t){var e=Ht();return Ye===null?e.memoizedState=t:Fg(e,Ye.memoizedState,t)},useTransition:function(){var t=sc(Gs)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:bg,useSyncExternalStore:Sg,useId:Mg,unstable_isNewReconciler:!1};function Kt(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function iu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sa={isMounted:function(t){return(t=t._reactInternals)?Gr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vt(),i=ir(t),s=Tn(r,i);s.payload=e,n!=null&&(s.callback=n),e=nr(t,s,i),e!==null&&(tn(e,t,i,r),nl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vt(),i=ir(t),s=Tn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=nr(t,s,i),e!==null&&(tn(e,t,i,r),nl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vt(),r=ir(t),i=Tn(n,r);i.tag=2,e!=null&&(i.callback=e),e=nr(t,i,r),e!==null&&(tn(e,t,r,n),nl(e,t,r))}};function Ch(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ls(n,r)||!Ls(i,s):!0}function Lg(t,e,n){var r=!1,i=dr,s=e.contextType;return typeof s=="object"&&s!==null?s=Ut(s):(i=Tt(e)?Br:mt.current,r=e.contextTypes,s=(r=r!=null)?Ai(t,i):dr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sa,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Eh(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&sa.enqueueReplaceState(e,e.state,null)}function su(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},yd(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ut(s):(s=Tt(e)?Br:mt.current,i.context=Ai(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(iu(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&sa.enqueueReplaceState(i,i.state,null),Cl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Fi(t,e){try{var n="",r=e;do n+=hv(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function oc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ou(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Lx=typeof WeakMap=="function"?WeakMap:Map;function $g(t,e,n){n=Tn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jl||(jl=!0,gu=r),ou(t,e)},n}function Wg(t,e,n){n=Tn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ou(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ou(t,e),typeof r!="function"&&(rr===null?rr=new Set([this]):rr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function kh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Lx;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=e_.bind(null,t,e,n),e.then(t,t))}function Th(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Rh(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Tn(-1,1),e.tag=2,nr(n,e,1))),n.lanes|=1),t)}var $x=Fn.ReactCurrentOwner,Ct=!1;function gt(t,e,n,r){e.child=t===null?yg(e,null,n,r):Di(e,t.child,n,r)}function jh(t,e,n,r,i){n=n.render;var s=e.ref;return Ci(e,i),r=Sd(t,e,n,r,s,i),n=wd(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Nn(t,e,i)):(je&&n&&ud(e),e.flags|=1,gt(t,e,r,i),e.child)}function Ih(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Dd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Ug(t,e,s,r,i)):(t=al(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ls,n(o,r)&&t.ref===e.ref)return Nn(t,e,i)}return e.flags|=1,t=sr(s,r),t.ref=e.ref,t.return=e,e.child=t}function Ug(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ls(s,r)&&t.ref===e.ref)if(Ct=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ct=!0);else return e.lanes=t.lanes,Nn(t,e,i)}return lu(t,e,n,r,i)}function Hg(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(vi,jt),jt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,be(vi,jt),jt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,be(vi,jt),jt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,be(vi,jt),jt|=r;return gt(t,e,i,n),e.child}function Vg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function lu(t,e,n,r,i){var s=Tt(n)?Br:mt.current;return s=Ai(e,s),Ci(e,i),n=Sd(t,e,n,r,s,i),r=wd(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Nn(t,e,i)):(je&&r&&ud(e),e.flags|=1,gt(t,e,n,i),e.child)}function Ah(t,e,n,r,i){if(Tt(n)){var s=!0;xl(e)}else s=!1;if(Ci(e,i),e.stateNode===null)sl(t,e),Lg(e,n,r),su(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ut(u):(u=Tt(n)?Br:mt.current,u=Ai(e,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&Eh(e,o,r,u),Un=!1;var h=e.memoizedState;o.state=h,Cl(e,r,o,i),c=e.memoizedState,a!==r||h!==c||kt.current||Un?(typeof f=="function"&&(iu(e,n,f,r),c=e.memoizedState),(a=Un||Ch(e,n,a,r,h,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,xg(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Kt(e.type,a),o.props=u,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ut(c):(c=Tt(n)?Br:mt.current,c=Ai(e,c));var x=n.getDerivedStateFromProps;(f=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&Eh(e,o,r,c),Un=!1,h=e.memoizedState,o.state=h,Cl(e,r,o,i);var v=e.memoizedState;a!==d||h!==v||kt.current||Un?(typeof x=="function"&&(iu(e,n,x,r),v=e.memoizedState),(u=Un||Ch(e,n,u,r,h,v,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return au(t,e,n,r,s,i)}function au(t,e,n,r,i,s){Vg(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&gh(e,n,!1),Nn(t,e,s);r=e.stateNode,$x.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Di(e,t.child,null,s),e.child=Di(e,null,a,s)):gt(t,e,a,s),e.memoizedState=r.state,i&&gh(e,n,!0),e.child}function Yg(t){var e=t.stateNode;e.pendingContext?mh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&mh(t,e.context,!1),vd(t,e.containerInfo)}function Nh(t,e,n,r,i){return Ni(),fd(i),e.flags|=256,gt(t,e,n,r),e.child}var cu={dehydrated:null,treeContext:null,retryLane:0};function uu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Gg(t,e,n){var r=e.pendingProps,i=Ie.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),be(Ie,i&1),t===null)return nu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=aa(o,r,0,null),t=Fr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=uu(n),e.memoizedState=cu,t):kd(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Wx(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=sr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=sr(a,s):(s=Fr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?uu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=cu,r}return s=t.child,t=s.sibling,r=sr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function kd(t,e){return e=aa({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vo(t,e,n,r){return r!==null&&fd(r),Di(e,t.child,null,n),t=kd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Wx(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=oc(Error(L(422))),Vo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=aa({mode:"visible",children:r.children},i,0,null),s=Fr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Di(e,t.child,null,o),e.child.memoizedState=uu(o),e.memoizedState=cu,s);if(!(e.mode&1))return Vo(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(L(419)),r=oc(s,r,void 0),Vo(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ct||a){if(r=rt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,An(t,i),tn(r,t,i,-1))}return Nd(),r=oc(Error(L(421))),Vo(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=t_.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,It=tr(i.nextSibling),At=e,je=!0,Xt=null,t!==null&&(Bt[zt++]=Cn,Bt[zt++]=En,Bt[zt++]=zr,Cn=t.id,En=t.overflow,zr=e),e=kd(e,r.children),e.flags|=4096,e)}function Dh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ru(t.return,e,n)}function lc(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Qg(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(gt(t,e,r.children,n),r=Ie.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dh(t,n,e);else if(t.tag===19)Dh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(be(Ie,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&El(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),lc(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&El(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}lc(e,!0,n,null,s);break;case"together":lc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Nn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$r|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,n=sr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=sr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ux(t,e,n){switch(e.tag){case 3:Yg(e),Ni();break;case 5:_g(e);break;case 1:Tt(e.type)&&xl(e);break;case 4:vd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;be(Sl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(be(Ie,Ie.current&1),e.flags|=128,null):n&e.child.childLanes?Gg(t,e,n):(be(Ie,Ie.current&1),t=Nn(t,e,n),t!==null?t.sibling:null);be(Ie,Ie.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Qg(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),be(Ie,Ie.current),r)break;return null;case 22:case 23:return e.lanes=0,Hg(t,e,n)}return Nn(t,e,n)}var Kg,du,qg,Xg;Kg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};du=function(){};qg=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Nr(fn.current);var s=null;switch(n){case"input":i=Dc(t,i),r=Dc(t,r),s=[];break;case"select":i=Ne({},i,{value:void 0}),r=Ne({},r,{value:void 0}),s=[];break;case"textarea":i=Mc(t,i),r=Mc(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=yl)}Bc(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ds.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ds.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ce("scroll",t),s||a===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Xg=function(t,e,n,r){n!==r&&(e.flags|=4)};function us(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Hx(t,e,n){var r=e.pendingProps;switch(dd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(e),null;case 1:return Tt(e.type)&&vl(),ht(e),null;case 3:return r=e.stateNode,Pi(),Ee(kt),Ee(mt),_d(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Uo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xt!==null&&(xu(Xt),Xt=null))),du(t,e),ht(e),null;case 5:xd(e);var i=Nr(Vs.current);if(n=e.type,t!==null&&e.stateNode!=null)qg(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(L(166));return ht(e),null}if(t=Nr(fn.current),Uo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[un]=e,r[Us]=s,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(i=0;i<xs.length;i++)Ce(xs[i],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":Wf(r,s),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ce("invalid",r);break;case"textarea":Hf(r,s),Ce("invalid",r)}Bc(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Wo(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Wo(r.textContent,a,t),i=["children",""+a]):Ds.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ce("scroll",r)}switch(n){case"input":Po(r),Uf(r,s,!0);break;case"textarea":Po(r),Vf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=yl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Em(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[un]=e,t[Us]=r,Kg(t,e,!1,!1),e.stateNode=t;e:{switch(o=zc(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),i=r;break;case"iframe":case"object":case"embed":Ce("load",t),i=r;break;case"video":case"audio":for(i=0;i<xs.length;i++)Ce(xs[i],t);i=r;break;case"source":Ce("error",t),i=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),i=r;break;case"details":Ce("toggle",t),i=r;break;case"input":Wf(t,r),i=Dc(t,r),Ce("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ne({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":Hf(t,r),i=Mc(t,r),Ce("invalid",t);break;default:i=r}Bc(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?Rm(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&km(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ps(t,c):typeof c=="number"&&Ps(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ds.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Ce("scroll",t):c!=null&&qu(t,s,c,o))}switch(n){case"input":Po(t),Uf(t,r,!1);break;case"textarea":Po(t),Vf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ur(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?_i(t,!!r.multiple,s,!1):r.defaultValue!=null&&_i(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=yl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ht(e),null;case 6:if(t&&e.stateNode!=null)Xg(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(L(166));if(n=Nr(Vs.current),Nr(fn.current),Uo(e)){if(r=e.stateNode,n=e.memoizedProps,r[un]=e,(s=r.nodeValue!==n)&&(t=At,t!==null))switch(t.tag){case 3:Wo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wo(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[un]=e,e.stateNode=r}return ht(e),null;case 13:if(Ee(Ie),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&It!==null&&e.mode&1&&!(e.flags&128))mg(),Ni(),e.flags|=98560,s=!1;else if(s=Uo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(L(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(L(317));s[un]=e}else Ni(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ht(e),s=!1}else Xt!==null&&(xu(Xt),Xt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ie.current&1?Ke===0&&(Ke=3):Nd())),e.updateQueue!==null&&(e.flags|=4),ht(e),null);case 4:return Pi(),du(t,e),t===null&&$s(e.stateNode.containerInfo),ht(e),null;case 10:return md(e.type._context),ht(e),null;case 17:return Tt(e.type)&&vl(),ht(e),null;case 19:if(Ee(Ie),s=e.memoizedState,s===null)return ht(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)us(s,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=El(t),o!==null){for(e.flags|=128,us(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return be(Ie,Ie.current&1|2),e.child}t=t.sibling}s.tail!==null&&ze()>Mi&&(e.flags|=128,r=!0,us(s,!1),e.lanes=4194304)}else{if(!r)if(t=El(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),us(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!je)return ht(e),null}else 2*ze()-s.renderingStartTime>Mi&&n!==1073741824&&(e.flags|=128,r=!0,us(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ze(),e.sibling=null,n=Ie.current,be(Ie,r?n&1|2:n&1),e):(ht(e),null);case 22:case 23:return Ad(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?jt&1073741824&&(ht(e),e.subtreeFlags&6&&(e.flags|=8192)):ht(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function Vx(t,e){switch(dd(e),e.tag){case 1:return Tt(e.type)&&vl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pi(),Ee(kt),Ee(mt),_d(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xd(e),null;case 13:if(Ee(Ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));Ni()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Ie),null;case 4:return Pi(),null;case 10:return md(e.type._context),null;case 22:case 23:return Ad(),null;case 24:return null;default:return null}}var Yo=!1,pt=!1,Yx=typeof WeakSet=="function"?WeakSet:Set,U=null;function yi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(t,e,r)}else n.current=null}function fu(t,e,n){try{n()}catch(r){Pe(t,e,r)}}var Ph=!1;function Gx(t,e){if(Kc=pl,t=ng(),cd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,f=0,d=t,h=null;t:for(;;){for(var x;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(x=d.firstChild)!==null;)h=d,d=x;for(;;){if(d===t)break t;if(h===n&&++u===i&&(a=o),h===s&&++f===r&&(c=o),(x=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=x}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(qc={focusedElem:t,selectionRange:n},pl=!1,U=e;U!==null;)if(e=U,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,U=t;else for(;U!==null;){e=U;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,E=v.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?w:Kt(e.type,w),E);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(b){Pe(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}return v=Ph,Ph=!1,v}function ks(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&fu(e,n,s)}i=i.next}while(i!==r)}}function oa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function hu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Jg(t){var e=t.alternate;e!==null&&(t.alternate=null,Jg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[un],delete e[Us],delete e[Zc],delete e[jx],delete e[Ix])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zg(t){return t.tag===5||t.tag===3||t.tag===4}function Fh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=yl));else if(r!==4&&(t=t.child,t!==null))for(pu(t,e,n),t=t.sibling;t!==null;)pu(t,e,n),t=t.sibling}function mu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(mu(t,e,n),t=t.sibling;t!==null;)mu(t,e,n),t=t.sibling}var ot=null,qt=!1;function zn(t,e,n){for(n=n.child;n!==null;)e1(t,e,n),n=n.sibling}function e1(t,e,n){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Jl,n)}catch{}switch(n.tag){case 5:pt||yi(n,e);case 6:var r=ot,i=qt;ot=null,zn(t,e,n),ot=r,qt=i,ot!==null&&(qt?(t=ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(qt?(t=ot,n=n.stateNode,t.nodeType===8?ec(t.parentNode,n):t.nodeType===1&&ec(t,n),Bs(t)):ec(ot,n.stateNode));break;case 4:r=ot,i=qt,ot=n.stateNode.containerInfo,qt=!0,zn(t,e,n),ot=r,qt=i;break;case 0:case 11:case 14:case 15:if(!pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&fu(n,e,o),i=i.next}while(i!==r)}zn(t,e,n);break;case 1:if(!pt&&(yi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Pe(n,e,a)}zn(t,e,n);break;case 21:zn(t,e,n);break;case 22:n.mode&1?(pt=(r=pt)||n.memoizedState!==null,zn(t,e,n),pt=r):zn(t,e,n);break;default:zn(t,e,n)}}function Mh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Yx),e.forEach(function(r){var i=n_.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Qt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ot=a.stateNode,qt=!1;break e;case 3:ot=a.stateNode.containerInfo,qt=!0;break e;case 4:ot=a.stateNode.containerInfo,qt=!0;break e}a=a.return}if(ot===null)throw Error(L(160));e1(s,o,i),ot=null,qt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Pe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)t1(e,t),e=e.sibling}function t1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qt(e,t),an(t),r&4){try{ks(3,t,t.return),oa(3,t)}catch(w){Pe(t,t.return,w)}try{ks(5,t,t.return)}catch(w){Pe(t,t.return,w)}}break;case 1:Qt(e,t),an(t),r&512&&n!==null&&yi(n,n.return);break;case 5:if(Qt(e,t),an(t),r&512&&n!==null&&yi(n,n.return),t.flags&32){var i=t.stateNode;try{Ps(i,"")}catch(w){Pe(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&wm(i,s),zc(a,o);var u=zc(a,s);for(o=0;o<c.length;o+=2){var f=c[o],d=c[o+1];f==="style"?Rm(i,d):f==="dangerouslySetInnerHTML"?km(i,d):f==="children"?Ps(i,d):qu(i,f,d,u)}switch(a){case"input":Pc(i,s);break;case"textarea":Cm(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var x=s.value;x!=null?_i(i,!!s.multiple,x,!1):h!==!!s.multiple&&(s.defaultValue!=null?_i(i,!!s.multiple,s.defaultValue,!0):_i(i,!!s.multiple,s.multiple?[]:"",!1))}i[Us]=s}catch(w){Pe(t,t.return,w)}}break;case 6:if(Qt(e,t),an(t),r&4){if(t.stateNode===null)throw Error(L(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){Pe(t,t.return,w)}}break;case 3:if(Qt(e,t),an(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bs(e.containerInfo)}catch(w){Pe(t,t.return,w)}break;case 4:Qt(e,t),an(t);break;case 13:Qt(e,t),an(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(jd=ze())),r&4&&Mh(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(pt=(u=pt)||f,Qt(e,t),pt=u):Qt(e,t),an(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(U=t,f=t.child;f!==null;){for(d=U=f;U!==null;){switch(h=U,x=h.child,h.tag){case 0:case 11:case 14:case 15:ks(4,h,h.return);break;case 1:yi(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){Pe(r,n,w)}}break;case 5:yi(h,h.return);break;case 22:if(h.memoizedState!==null){Bh(d);continue}}x!==null?(x.return=h,U=x):Bh(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Tm("display",o))}catch(w){Pe(t,t.return,w)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){Pe(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Qt(e,t),an(t),r&4&&Mh(t);break;case 21:break;default:Qt(e,t),an(t)}}function an(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Zg(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ps(i,""),r.flags&=-33);var s=Fh(t);mu(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Fh(t);pu(t,a,o);break;default:throw Error(L(161))}}catch(c){Pe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Qx(t,e,n){U=t,n1(t)}function n1(t,e,n){for(var r=(t.mode&1)!==0;U!==null;){var i=U,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Yo;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||pt;a=Yo;var u=pt;if(Yo=o,(pt=c)&&!u)for(U=i;U!==null;)o=U,c=o.child,o.tag===22&&o.memoizedState!==null?zh(i):c!==null?(c.return=o,U=c):zh(i);for(;s!==null;)U=s,n1(s),s=s.sibling;U=i,Yo=a,pt=u}Oh(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,U=s):Oh(t)}}function Oh(t){for(;U!==null;){var e=U;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pt||oa(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Kt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&bh(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}bh(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Bs(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}pt||e.flags&512&&hu(e)}catch(h){Pe(e,e.return,h)}}if(e===t){U=null;break}if(n=e.sibling,n!==null){n.return=e.return,U=n;break}U=e.return}}function Bh(t){for(;U!==null;){var e=U;if(e===t){U=null;break}var n=e.sibling;if(n!==null){n.return=e.return,U=n;break}U=e.return}}function zh(t){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{oa(4,e)}catch(c){Pe(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Pe(e,i,c)}}var s=e.return;try{hu(e)}catch(c){Pe(e,s,c)}break;case 5:var o=e.return;try{hu(e)}catch(c){Pe(e,o,c)}}}catch(c){Pe(e,e.return,c)}if(e===t){U=null;break}var a=e.sibling;if(a!==null){a.return=e.return,U=a;break}U=e.return}}var Kx=Math.ceil,Rl=Fn.ReactCurrentDispatcher,Td=Fn.ReactCurrentOwner,Wt=Fn.ReactCurrentBatchConfig,ce=0,rt=null,$e=null,at=0,jt=0,vi=yr(0),Ke=0,Ks=null,$r=0,la=0,Rd=0,Ts=null,wt=null,jd=0,Mi=1/0,Sn=null,jl=!1,gu=null,rr=null,Go=!1,Gn=null,Il=0,Rs=0,yu=null,ol=-1,ll=0;function vt(){return ce&6?ze():ol!==-1?ol:ol=ze()}function ir(t){return t.mode&1?ce&2&&at!==0?at&-at:Nx.transition!==null?(ll===0&&(ll=Lm()),ll):(t=me,t!==0||(t=window.event,t=t===void 0?16:Gm(t.type)),t):1}function tn(t,e,n,r){if(50<Rs)throw Rs=0,yu=null,Error(L(185));co(t,n,r),(!(ce&2)||t!==rt)&&(t===rt&&(!(ce&2)&&(la|=n),Ke===4&&Vn(t,at)),Rt(t,r),n===1&&ce===0&&!(e.mode&1)&&(Mi=ze()+500,ra&&vr()))}function Rt(t,e){var n=t.callbackNode;Nv(t,e);var r=hl(t,t===rt?at:0);if(r===0)n!==null&&Qf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Qf(n),e===1)t.tag===0?Ax(Lh.bind(null,t)):fg(Lh.bind(null,t)),Tx(function(){!(ce&6)&&vr()}),n=null;else{switch($m(r)){case 1:n=td;break;case 4:n=Bm;break;case 16:n=fl;break;case 536870912:n=zm;break;default:n=fl}n=u1(n,r1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function r1(t,e){if(ol=-1,ll=0,ce&6)throw Error(L(327));var n=t.callbackNode;if(Ei()&&t.callbackNode!==n)return null;var r=hl(t,t===rt?at:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Al(t,r);else{e=r;var i=ce;ce|=2;var s=s1();(rt!==t||at!==e)&&(Sn=null,Mi=ze()+500,Pr(t,e));do try{Jx();break}catch(a){i1(t,a)}while(1);pd(),Rl.current=s,ce=i,$e!==null?e=0:(rt=null,at=0,e=Ke)}if(e!==0){if(e===2&&(i=Hc(t),i!==0&&(r=i,e=vu(t,i))),e===1)throw n=Ks,Pr(t,0),Vn(t,r),Rt(t,ze()),n;if(e===6)Vn(t,r);else{if(i=t.current.alternate,!(r&30)&&!qx(i)&&(e=Al(t,r),e===2&&(s=Hc(t),s!==0&&(r=s,e=vu(t,s))),e===1))throw n=Ks,Pr(t,0),Vn(t,r),Rt(t,ze()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(L(345));case 2:Tr(t,wt,Sn);break;case 3:if(Vn(t,r),(r&130023424)===r&&(e=jd+500-ze(),10<e)){if(hl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){vt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Jc(Tr.bind(null,t,wt,Sn),e);break}Tr(t,wt,Sn);break;case 4:if(Vn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-en(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Kx(r/1960))-r,10<r){t.timeoutHandle=Jc(Tr.bind(null,t,wt,Sn),r);break}Tr(t,wt,Sn);break;case 5:Tr(t,wt,Sn);break;default:throw Error(L(329))}}}return Rt(t,ze()),t.callbackNode===n?r1.bind(null,t):null}function vu(t,e){var n=Ts;return t.current.memoizedState.isDehydrated&&(Pr(t,e).flags|=256),t=Al(t,e),t!==2&&(e=wt,wt=n,e!==null&&xu(e)),t}function xu(t){wt===null?wt=t:wt.push.apply(wt,t)}function qx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!rn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vn(t,e){for(e&=~Rd,e&=~la,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-en(e),r=1<<n;t[n]=-1,e&=~r}}function Lh(t){if(ce&6)throw Error(L(327));Ei();var e=hl(t,0);if(!(e&1))return Rt(t,ze()),null;var n=Al(t,e);if(t.tag!==0&&n===2){var r=Hc(t);r!==0&&(e=r,n=vu(t,r))}if(n===1)throw n=Ks,Pr(t,0),Vn(t,e),Rt(t,ze()),n;if(n===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Tr(t,wt,Sn),Rt(t,ze()),null}function Id(t,e){var n=ce;ce|=1;try{return t(e)}finally{ce=n,ce===0&&(Mi=ze()+500,ra&&vr())}}function Wr(t){Gn!==null&&Gn.tag===0&&!(ce&6)&&Ei();var e=ce;ce|=1;var n=Wt.transition,r=me;try{if(Wt.transition=null,me=1,t)return t()}finally{me=r,Wt.transition=n,ce=e,!(ce&6)&&vr()}}function Ad(){jt=vi.current,Ee(vi)}function Pr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,kx(n)),$e!==null)for(n=$e.return;n!==null;){var r=n;switch(dd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vl();break;case 3:Pi(),Ee(kt),Ee(mt),_d();break;case 5:xd(r);break;case 4:Pi();break;case 13:Ee(Ie);break;case 19:Ee(Ie);break;case 10:md(r.type._context);break;case 22:case 23:Ad()}n=n.return}if(rt=t,$e=t=sr(t.current,null),at=jt=e,Ke=0,Ks=null,Rd=la=$r=0,wt=Ts=null,Ar!==null){for(e=0;e<Ar.length;e++)if(n=Ar[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ar=null}return t}function i1(t,e){do{var n=$e;try{if(pd(),rl.current=Tl,kl){for(var r=Ae.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}kl=!1}if(Lr=0,tt=Ye=Ae=null,Es=!1,Ys=0,Td.current=null,n===null||n.return===null){Ke=1,Ks=e,$e=null;break}e:{var s=t,o=n.return,a=n,c=e;if(e=at,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=a,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var x=Th(o);if(x!==null){x.flags&=-257,Rh(x,o,a,s,e),x.mode&1&&kh(s,u,e),e=x,c=u;var v=e.updateQueue;if(v===null){var w=new Set;w.add(c),e.updateQueue=w}else v.add(c);break e}else{if(!(e&1)){kh(s,u,e),Nd();break e}c=Error(L(426))}}else if(je&&a.mode&1){var E=Th(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Rh(E,o,a,s,e),fd(Fi(c,a));break e}}s=c=Fi(c,a),Ke!==4&&(Ke=2),Ts===null?Ts=[s]:Ts.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=$g(s,c,e);_h(s,g);break e;case 1:a=c;var p=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(rr===null||!rr.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=Wg(s,a,e);_h(s,b);break e}}s=s.return}while(s!==null)}l1(n)}catch(T){e=T,$e===n&&n!==null&&($e=n=n.return);continue}break}while(1)}function s1(){var t=Rl.current;return Rl.current=Tl,t===null?Tl:t}function Nd(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),rt===null||!($r&268435455)&&!(la&268435455)||Vn(rt,at)}function Al(t,e){var n=ce;ce|=2;var r=s1();(rt!==t||at!==e)&&(Sn=null,Pr(t,e));do try{Xx();break}catch(i){i1(t,i)}while(1);if(pd(),ce=n,Rl.current=r,$e!==null)throw Error(L(261));return rt=null,at=0,Ke}function Xx(){for(;$e!==null;)o1($e)}function Jx(){for(;$e!==null&&!wv();)o1($e)}function o1(t){var e=c1(t.alternate,t,jt);t.memoizedProps=t.pendingProps,e===null?l1(t):$e=e,Td.current=null}function l1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Vx(n,e),n!==null){n.flags&=32767,$e=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,$e=null;return}}else if(n=Hx(n,e,jt),n!==null){$e=n;return}if(e=e.sibling,e!==null){$e=e;return}$e=e=t}while(e!==null);Ke===0&&(Ke=5)}function Tr(t,e,n){var r=me,i=Wt.transition;try{Wt.transition=null,me=1,Zx(t,e,n,r)}finally{Wt.transition=i,me=r}return null}function Zx(t,e,n,r){do Ei();while(Gn!==null);if(ce&6)throw Error(L(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Dv(t,s),t===rt&&($e=rt=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Go||(Go=!0,u1(fl,function(){return Ei(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Wt.transition,Wt.transition=null;var o=me;me=1;var a=ce;ce|=4,Td.current=null,Gx(t,n),t1(n,t),xx(qc),pl=!!Kc,qc=Kc=null,t.current=n,Qx(n),Cv(),ce=a,me=o,Wt.transition=s}else t.current=n;if(Go&&(Go=!1,Gn=t,Il=i),s=t.pendingLanes,s===0&&(rr=null),Tv(n.stateNode),Rt(t,ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(jl)throw jl=!1,t=gu,gu=null,t;return Il&1&&t.tag!==0&&Ei(),s=t.pendingLanes,s&1?t===yu?Rs++:(Rs=0,yu=t):Rs=0,vr(),null}function Ei(){if(Gn!==null){var t=$m(Il),e=Wt.transition,n=me;try{if(Wt.transition=null,me=16>t?16:t,Gn===null)var r=!1;else{if(t=Gn,Gn=null,Il=0,ce&6)throw Error(L(331));var i=ce;for(ce|=4,U=t.current;U!==null;){var s=U,o=s.child;if(U.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(U=u;U!==null;){var f=U;switch(f.tag){case 0:case 11:case 15:ks(8,f,s)}var d=f.child;if(d!==null)d.return=f,U=d;else for(;U!==null;){f=U;var h=f.sibling,x=f.return;if(Jg(f),f===u){U=null;break}if(h!==null){h.return=x,U=h;break}U=x}}}var v=s.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var E=w.sibling;w.sibling=null,w=E}while(w!==null)}}U=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,U=o;else e:for(;U!==null;){if(s=U,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ks(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,U=g;break e}U=s.return}}var p=t.current;for(U=p;U!==null;){o=U;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,U=y;else e:for(o=p;U!==null;){if(a=U,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:oa(9,a)}}catch(T){Pe(a,a.return,T)}if(a===o){U=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,U=b;break e}U=a.return}}if(ce=i,vr(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Jl,t)}catch{}r=!0}return r}finally{me=n,Wt.transition=e}}return!1}function $h(t,e,n){e=Fi(n,e),e=$g(t,e,1),t=nr(t,e,1),e=vt(),t!==null&&(co(t,1,e),Rt(t,e))}function Pe(t,e,n){if(t.tag===3)$h(t,t,n);else for(;e!==null;){if(e.tag===3){$h(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(rr===null||!rr.has(r))){t=Fi(n,t),t=Wg(e,t,1),e=nr(e,t,1),t=vt(),e!==null&&(co(e,1,t),Rt(e,t));break}}e=e.return}}function e_(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vt(),t.pingedLanes|=t.suspendedLanes&n,rt===t&&(at&n)===n&&(Ke===4||Ke===3&&(at&130023424)===at&&500>ze()-jd?Pr(t,0):Rd|=n),Rt(t,e)}function a1(t,e){e===0&&(t.mode&1?(e=Oo,Oo<<=1,!(Oo&130023424)&&(Oo=4194304)):e=1);var n=vt();t=An(t,e),t!==null&&(co(t,e,n),Rt(t,n))}function t_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),a1(t,n)}function n_(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(e),a1(t,n)}var c1;c1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kt.current)Ct=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ct=!1,Ux(t,e,n);Ct=!!(t.flags&131072)}else Ct=!1,je&&e.flags&1048576&&hg(e,bl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;sl(t,e),t=e.pendingProps;var i=Ai(e,mt.current);Ci(e,n),i=Sd(null,e,r,t,i,n);var s=wd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tt(r)?(s=!0,xl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,yd(e),i.updater=sa,e.stateNode=i,i._reactInternals=e,su(e,r,t,n),e=au(null,e,r,!0,s,n)):(e.tag=0,je&&s&&ud(e),gt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(sl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=i_(r),t=Kt(r,t),i){case 0:e=lu(null,e,r,t,n);break e;case 1:e=Ah(null,e,r,t,n);break e;case 11:e=jh(null,e,r,t,n);break e;case 14:e=Ih(null,e,r,Kt(r.type,t),n);break e}throw Error(L(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kt(r,i),lu(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kt(r,i),Ah(t,e,r,i,n);case 3:e:{if(Yg(e),t===null)throw Error(L(387));r=e.pendingProps,s=e.memoizedState,i=s.element,xg(t,e),Cl(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Fi(Error(L(423)),e),e=Nh(t,e,r,n,i);break e}else if(r!==i){i=Fi(Error(L(424)),e),e=Nh(t,e,r,n,i);break e}else for(It=tr(e.stateNode.containerInfo.firstChild),At=e,je=!0,Xt=null,n=yg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ni(),r===i){e=Nn(t,e,n);break e}gt(t,e,r,n)}e=e.child}return e;case 5:return _g(e),t===null&&nu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Xc(r,i)?o=null:s!==null&&Xc(r,s)&&(e.flags|=32),Vg(t,e),gt(t,e,o,n),e.child;case 6:return t===null&&nu(e),null;case 13:return Gg(t,e,n);case 4:return vd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Di(e,null,r,n):gt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kt(r,i),jh(t,e,r,i,n);case 7:return gt(t,e,e.pendingProps,n),e.child;case 8:return gt(t,e,e.pendingProps.children,n),e.child;case 12:return gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,be(Sl,r._currentValue),r._currentValue=o,s!==null)if(rn(s.value,o)){if(s.children===i.children&&!kt.current){e=Nn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Tn(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),ru(s.return,n,e),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(L(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ru(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}gt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ci(e,n),i=Ut(i),r=r(i),e.flags|=1,gt(t,e,r,n),e.child;case 14:return r=e.type,i=Kt(r,e.pendingProps),i=Kt(r.type,i),Ih(t,e,r,i,n);case 15:return Ug(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kt(r,i),sl(t,e),e.tag=1,Tt(r)?(t=!0,xl(e)):t=!1,Ci(e,n),Lg(e,r,i),su(e,r,i,n),au(null,e,r,!0,t,n);case 19:return Qg(t,e,n);case 22:return Hg(t,e,n)}throw Error(L(156,e.tag))};function u1(t,e){return Om(t,e)}function r_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(t,e,n,r){return new r_(t,e,n,r)}function Dd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function i_(t){if(typeof t=="function")return Dd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ju)return 11;if(t===Zu)return 14}return 2}function sr(t,e){var n=t.alternate;return n===null?(n=Lt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function al(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Dd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ai:return Fr(n.children,i,s,e);case Xu:o=8,i|=8;break;case jc:return t=Lt(12,n,e,i|2),t.elementType=jc,t.lanes=s,t;case Ic:return t=Lt(13,n,e,i),t.elementType=Ic,t.lanes=s,t;case Ac:return t=Lt(19,n,e,i),t.elementType=Ac,t.lanes=s,t;case _m:return aa(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vm:o=10;break e;case xm:o=9;break e;case Ju:o=11;break e;case Zu:o=14;break e;case Wn:o=16,r=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=Lt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Fr(t,e,n,r){return t=Lt(7,t,r,e),t.lanes=n,t}function aa(t,e,n,r){return t=Lt(22,t,r,e),t.elementType=_m,t.lanes=n,t.stateNode={isHidden:!1},t}function ac(t,e,n){return t=Lt(6,t,null,e),t.lanes=n,t}function cc(t,e,n){return e=Lt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function s_(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ua(0),this.expirationTimes=Ua(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ua(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Pd(t,e,n,r,i,s,o,a,c){return t=new s_(t,e,n,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Lt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yd(s),t}function o_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:li,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function d1(t){if(!t)return dr;t=t._reactInternals;e:{if(Gr(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var n=t.type;if(Tt(n))return dg(t,n,e)}return e}function f1(t,e,n,r,i,s,o,a,c){return t=Pd(n,r,!0,t,i,s,o,a,c),t.context=d1(null),n=t.current,r=vt(),i=ir(n),s=Tn(r,i),s.callback=e??null,nr(n,s,i),t.current.lanes=i,co(t,i,r),Rt(t,r),t}function ca(t,e,n,r){var i=e.current,s=vt(),o=ir(i);return n=d1(n),e.context===null?e.context=n:e.pendingContext=n,e=Tn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=nr(i,e,o),t!==null&&(tn(t,i,o,s),nl(t,i,o)),o}function Nl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Wh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Fd(t,e){Wh(t,e),(t=t.alternate)&&Wh(t,e)}function l_(){return null}var h1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Md(t){this._internalRoot=t}ua.prototype.render=Md.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));ca(t,e,null,null)};ua.prototype.unmount=Md.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wr(function(){ca(null,t,null,null)}),e[In]=null}};function ua(t){this._internalRoot=t}ua.prototype.unstable_scheduleHydration=function(t){if(t){var e=Hm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hn.length&&e!==0&&e<Hn[n].priority;n++);Hn.splice(n,0,t),n===0&&Ym(t)}};function Od(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function da(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Uh(){}function a_(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Nl(o);s.call(u)}}var o=f1(e,r,t,0,null,!1,!1,"",Uh);return t._reactRootContainer=o,t[In]=o.current,$s(t.nodeType===8?t.parentNode:t),Wr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Nl(c);a.call(u)}}var c=Pd(t,0,!1,null,null,!1,!1,"",Uh);return t._reactRootContainer=c,t[In]=c.current,$s(t.nodeType===8?t.parentNode:t),Wr(function(){ca(e,c,n,r)}),c}function fa(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=Nl(o);a.call(c)}}ca(e,o,t,i)}else o=a_(n,e,t,i,r);return Nl(o)}Wm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=vs(e.pendingLanes);n!==0&&(nd(e,n|1),Rt(e,ze()),!(ce&6)&&(Mi=ze()+500,vr()))}break;case 13:Wr(function(){var r=An(t,1);if(r!==null){var i=vt();tn(r,t,1,i)}}),Fd(t,1)}};rd=function(t){if(t.tag===13){var e=An(t,134217728);if(e!==null){var n=vt();tn(e,t,134217728,n)}Fd(t,134217728)}};Um=function(t){if(t.tag===13){var e=ir(t),n=An(t,e);if(n!==null){var r=vt();tn(n,t,e,r)}Fd(t,e)}};Hm=function(){return me};Vm=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};$c=function(t,e,n){switch(e){case"input":if(Pc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=na(r);if(!i)throw Error(L(90));Sm(r),Pc(r,i)}}}break;case"textarea":Cm(t,n);break;case"select":e=n.value,e!=null&&_i(t,!!n.multiple,e,!1)}};Am=Id;Nm=Wr;var c_={usingClientEntryPoint:!1,Events:[fo,fi,na,jm,Im,Id]},ds={findFiberByHostInstance:Ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},u_={bundleType:ds.bundleType,version:ds.version,rendererPackageName:ds.rendererPackageName,rendererConfig:ds.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Fm(t),t===null?null:t.stateNode},findFiberByHostInstance:ds.findFiberByHostInstance||l_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qo.isDisabled&&Qo.supportsFiber)try{Jl=Qo.inject(u_),dn=Qo}catch{}}Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c_;Dt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Od(e))throw Error(L(200));return o_(t,e,null,n)};Dt.createRoot=function(t,e){if(!Od(t))throw Error(L(299));var n=!1,r="",i=h1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Pd(t,1,!1,null,null,n,!1,r,i),t[In]=e.current,$s(t.nodeType===8?t.parentNode:t),new Md(e)};Dt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=Fm(e),t=t===null?null:t.stateNode,t};Dt.flushSync=function(t){return Wr(t)};Dt.hydrate=function(t,e,n){if(!da(e))throw Error(L(200));return fa(null,t,e,!0,n)};Dt.hydrateRoot=function(t,e,n){if(!Od(t))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=h1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=f1(e,null,t,1,n??null,i,!1,s,o),t[In]=e.current,$s(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ua(e)};Dt.render=function(t,e,n){if(!da(e))throw Error(L(200));return fa(null,t,e,!1,n)};Dt.unmountComponentAtNode=function(t){if(!da(t))throw Error(L(40));return t._reactRootContainer?(Wr(function(){fa(null,null,t,!1,function(){t._reactRootContainer=null,t[In]=null})}),!0):!1};Dt.unstable_batchedUpdates=Id;Dt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!da(n))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return fa(t,e,n,!1,r)};Dt.version="18.3.1-next-f1338f8080-20240426";function p1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(p1)}catch(t){console.error(t)}}p1(),pm.exports=Dt;var d_=pm.exports,m1,Hh=d_;m1=Hh.createRoot,Hh.hydrateRoot;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $=function(t,e){if(!t)throw Qi(e)},Qi=function(t){return new Error("Firebase Database ("+g1.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},f_=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Bd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,f=s>>2,d=(s&3)<<4|a>>4;let h=(a&15)<<2|u>>6,x=u&63;c||(x=64,o||(h=64)),r.push(n[f],n[d],n[h],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(y1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):f_(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new h_;const h=s<<2|a>>4;if(r.push(h),u!==64){const x=a<<4&240|u>>2;if(r.push(x),d!==64){const v=u<<6&192|d;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class h_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const v1=function(t){const e=y1(t);return Bd.encodeByteArray(e,!0)},Dl=function(t){return v1(t).replace(/\./g,"")},_u=function(t){try{return Bd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(t){return x1(void 0,t)}function x1(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!m_(n)||(t[n]=x1(t[n],e[n]));return t}function m_(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_=()=>g_().__FIREBASE_DEFAULTS__,v_=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},x_=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&_u(t[1]);return e&&JSON.parse(e)},_1=()=>{try{return y_()||v_()||x_()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},__=t=>{var e,n;return(n=(e=_1())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},b_=t=>{const e=__(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},b1=()=>{var t;return(t=_1())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Dl(JSON.stringify(n)),Dl(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function S1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(w_())}function C_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function w1(){return g1.NODE_ADMIN===!0}function E_(){try{return typeof indexedDB=="object"}catch{return!1}}function k_(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="FirebaseError";class mo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=T_,Object.setPrototypeOf(this,mo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,C1.prototype.create)}}class C1{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?R_(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new mo(i,a,r)}}function R_(t,e){return t.replace(j_,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const j_=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(t){return JSON.parse(t)}function Qe(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=qs(_u(s[0])||""),n=qs(_u(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},I_=function(t){const e=E1(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},A_=function(t){const e=E1(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Oi(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Vh(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pl(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function bu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Yh(s)&&Yh(o)){if(!bu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Yh(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,f;for(let d=0;d<80;d++){d<40?d<20?(u=a^s&(o^a),f=1518500249):(u=s^o^a,f=1859775393):d<60?(u=s&o|a&(s|o),f=2400959708):(u=s^o^a,f=3395469782);const h=(i<<5|i>>>27)+u+c+f+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function ha(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,$(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},pa=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(t){return t&&t._delegate?t._delegate:t}class Xs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new po;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(O_(e))try{this.getOrInitializeService({instanceIdentifier:Rr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Rr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Rr){return this.instances.has(e)}getOptions(e=Rr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:M_(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Rr){return this.component?this.component.multipleInstances?e:Rr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function M_(t){return t===Rr?void 0:t}function O_(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new F_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const z_={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},L_=xe.INFO,$_={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},W_=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=$_[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class k1{constructor(e){this.name=e,this._logLevel=L_,this._logHandler=W_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?z_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const U_=(t,e)=>e.some(n=>t instanceof n);let Gh,Qh;function H_(){return Gh||(Gh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V_(){return Qh||(Qh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const T1=new WeakMap,Su=new WeakMap,R1=new WeakMap,uc=new WeakMap,zd=new WeakMap;function Y_(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(or(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&T1.set(n,t)}).catch(()=>{}),zd.set(e,t),e}function G_(t){if(Su.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Su.set(t,e)}let wu={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Su.get(t);if(e==="objectStoreNames")return t.objectStoreNames||R1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return or(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Q_(t){wu=t(wu)}function K_(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(dc(this),e,...n);return R1.set(r,e.sort?e.sort():[e]),or(r)}:V_().includes(t)?function(...e){return t.apply(dc(this),e),or(T1.get(this))}:function(...e){return or(t.apply(dc(this),e))}}function q_(t){return typeof t=="function"?K_(t):(t instanceof IDBTransaction&&G_(t),U_(t,H_())?new Proxy(t,wu):t)}function or(t){if(t instanceof IDBRequest)return Y_(t);if(uc.has(t))return uc.get(t);const e=q_(t);return e!==t&&(uc.set(t,e),zd.set(e,t)),e}const dc=t=>zd.get(t);function X_(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=or(o);return r&&o.addEventListener("upgradeneeded",c=>{r(or(o.result),c.oldVersion,c.newVersion,or(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const J_=["get","getKey","getAll","getAllKeys","count"],Z_=["put","add","delete","clear"],fc=new Map;function Kh(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(fc.get(e))return fc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Z_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||J_.includes(n)))return;const s=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&c.done]))[0]};return fc.set(e,s),s}Q_(t=>({...t,get:(e,n,r)=>Kh(e,n)||t.get(e,n,r),has:(e,n)=>!!Kh(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tb(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function tb(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cu="@firebase/app",qh="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn=new k1("@firebase/app"),nb="@firebase/app-compat",rb="@firebase/analytics-compat",ib="@firebase/analytics",sb="@firebase/app-check-compat",ob="@firebase/app-check",lb="@firebase/auth",ab="@firebase/auth-compat",cb="@firebase/database",ub="@firebase/data-connect",db="@firebase/database-compat",fb="@firebase/functions",hb="@firebase/functions-compat",pb="@firebase/installations",mb="@firebase/installations-compat",gb="@firebase/messaging",yb="@firebase/messaging-compat",vb="@firebase/performance",xb="@firebase/performance-compat",_b="@firebase/remote-config",bb="@firebase/remote-config-compat",Sb="@firebase/storage",wb="@firebase/storage-compat",Cb="@firebase/firestore",Eb="@firebase/vertexai-preview",kb="@firebase/firestore-compat",Tb="firebase",Rb="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu="[DEFAULT]",jb={[Cu]:"fire-core",[nb]:"fire-core-compat",[ib]:"fire-analytics",[rb]:"fire-analytics-compat",[ob]:"fire-app-check",[sb]:"fire-app-check-compat",[lb]:"fire-auth",[ab]:"fire-auth-compat",[cb]:"fire-rtdb",[ub]:"fire-data-connect",[db]:"fire-rtdb-compat",[fb]:"fire-fn",[hb]:"fire-fn-compat",[pb]:"fire-iid",[mb]:"fire-iid-compat",[gb]:"fire-fcm",[yb]:"fire-fcm-compat",[vb]:"fire-perf",[xb]:"fire-perf-compat",[_b]:"fire-rc",[bb]:"fire-rc-compat",[Sb]:"fire-gcs",[wb]:"fire-gcs-compat",[Cb]:"fire-fst",[kb]:"fire-fst-compat",[Eb]:"fire-vertex","fire-js":"fire-js",[Tb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=new Map,Ib=new Map,ku=new Map;function Xh(t,e){try{t.container.addComponent(e)}catch(n){Dn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ml(t){const e=t.name;if(ku.has(e))return Dn.debug(`There were multiple attempts to register component ${e}.`),!1;ku.set(e,t);for(const n of Fl.values())Xh(n,t);for(const n of Ib.values())Xh(n,t);return!0}function Ab(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},lr=new C1("app","Firebase",Nb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb=Rb;function j1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Eu,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw lr.create("bad-app-name",{appName:String(i)});if(n||(n=b1()),!n)throw lr.create("no-options");const s=Fl.get(i);if(s){if(bu(n,s.options)&&bu(r,s.config))return s;throw lr.create("duplicate-app",{appName:i})}const o=new B_(i);for(const c of ku.values())o.addComponent(c);const a=new Db(n,r,o);return Fl.set(i,a),a}function Fb(t=Eu){const e=Fl.get(t);if(!e&&t===Eu&&b1())return j1();if(!e)throw lr.create("no-app",{appName:t});return e}function ki(t,e,n){var r;let i=(r=jb[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dn.warn(a.join(" "));return}Ml(new Xs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb="firebase-heartbeat-database",Ob=1,Js="firebase-heartbeat-store";let hc=null;function I1(){return hc||(hc=X_(Mb,Ob,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Js)}catch(n){console.warn(n)}}}}).catch(t=>{throw lr.create("idb-open",{originalErrorMessage:t.message})})),hc}async function Bb(t){try{const n=(await I1()).transaction(Js),r=await n.objectStore(Js).get(A1(t));return await n.done,r}catch(e){if(e instanceof mo)Dn.warn(e.message);else{const n=lr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dn.warn(n.message)}}}async function Jh(t,e){try{const r=(await I1()).transaction(Js,"readwrite");await r.objectStore(Js).put(e,A1(t)),await r.done}catch(n){if(n instanceof mo)Dn.warn(n.message);else{const r=lr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Dn.warn(r.message)}}}function A1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=1024,Lb=30*24*60*60*1e3;class $b{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ub(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Zh();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Lb}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Dn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Zh(),{heartbeatsToSend:r,unsentEntries:i}=Wb(this._heartbeatsCache.heartbeats),s=Dl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Dn.warn(n),""}}}function Zh(){return new Date().toISOString().substring(0,10)}function Wb(t,e=zb){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ep(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ep(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Ub{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return E_()?k_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Bb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Jh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Jh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ep(t){return Dl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(t){Ml(new Xs("platform-logger",e=>new eb(e),"PRIVATE")),Ml(new Xs("heartbeat",e=>new $b(e),"PRIVATE")),ki(Cu,qh,t),ki(Cu,qh,"esm2017"),ki("fire-js","")}Hb("");var Vb="firebase",Yb="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ki(Vb,Yb,"app");const tp="@firebase/database",np="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let N1="";function Gb(t){N1=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Qe(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:qs(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return hn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Qb(e)}}catch{}return new Kb},Dr=D1("localStorage"),Tu=D1("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti=new k1("@firebase/database"),qb=function(){let t=1;return function(){return t++}}(),P1=function(t){const e=P_(t),n=new D_;n.update(e);const r=n.digest();return Bd.encodeByteArray(r)},go=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=go.apply(null,r):typeof r=="object"?e+=Qe(r):e+=r,e+=" "}return e};let Mr=null,rp=!0;const Xb=function(t,e){$(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ti.logLevel=xe.VERBOSE,Mr=Ti.log.bind(Ti),e&&Tu.set("logging_enabled",!0)):typeof t=="function"?Mr=t:(Mr=null,Tu.remove("logging_enabled"))},lt=function(...t){if(rp===!0&&(rp=!1,Mr===null&&Tu.get("logging_enabled")===!0&&Xb(!0)),Mr){const e=go.apply(null,t);Mr(e)}},yo=function(t){return function(...e){lt(t,...e)}},Ru=function(...t){const e="FIREBASE INTERNAL ERROR: "+go(...t);Ti.error(e)},Pn=function(...t){const e=`FIREBASE FATAL ERROR: ${go(...t)}`;throw Ti.error(e),new Error(e)},xt=function(...t){const e="FIREBASE WARNING: "+go(...t);Ti.warn(e)},Jb=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&xt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ld=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Zb=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Bi="[MIN_NAME]",Ur="[MAX_NAME]",Kr=function(t,e){if(t===e)return 0;if(t===Bi||e===Ur)return-1;if(e===Bi||t===Ur)return 1;{const n=ip(t),r=ip(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},e2=function(t,e){return t===e?0:t<e?-1:1},fs=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Qe(e))},$d=function(t){if(typeof t!="object"||t===null)return Qe(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Qe(e[r]),n+=":",n+=$d(t[e[r]]);return n+="}",n},F1=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function ut(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const M1=function(t){$(!Ld(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const f=u.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(f.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},t2=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},n2=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function r2(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const i2=new RegExp("^-?(0*)\\d{1,10}$"),s2=-2147483648,o2=2147483647,ip=function(t){if(i2.test(t)){const e=Number(t);if(e>=s2&&e<=o2)return e}return null},Ki=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw xt("Exception was thrown by user callback.",n),e},Math.floor(0))}},l2=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},js=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){xt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(lt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xt(e)}}class Ri{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ri.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd="5",O1="v",B1="s",z1="r",L1="f",$1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,W1="ls",U1="p",ju="ac",H1="websocket",V1="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Dr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Dr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function u2(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function G1(t,e,n){$(typeof e=="string","typeof type must == string"),$(typeof n=="object","typeof params must == object");let r;if(e===H1)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===V1)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);u2(t)&&(n.ns=t.namespace);const i=[];return ut(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(){this.counters_={}}incrementCounter(e,n=1){hn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return p_(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc={},mc={};function Ud(t){const e=t.toString();return pc[e]||(pc[e]=new d2),pc[e]}function f2(t,e){const n=t.toString();return mc[n]||(mc[n]=e()),mc[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ki(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="start",p2="close",m2="pLPCommand",g2="pRTLPCB",Q1="id",K1="pw",q1="ser",y2="cb",v2="seg",x2="ts",_2="d",b2="dframe",X1=1870,J1=30,S2=X1-J1,w2=25e3,C2=3e4;class xi{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=yo(e),this.stats_=Ud(n),this.urlFn=c=>(this.appCheckToken&&(c[ju]=this.appCheckToken),G1(n,V1,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new h2(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(C2)),Zb(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Hd((...s)=>{const[o,a,c,u,f]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===sp)this.id=a,this.password=c;else if(o===p2)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[sp]="t",r[q1]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[y2]=this.scriptTagHolder.uniqueCallbackIdentifier),r[O1]=Wd,this.transportSessionId&&(r[B1]=this.transportSessionId),this.lastSessionId&&(r[W1]=this.lastSessionId),this.applicationId&&(r[U1]=this.applicationId),this.appCheckToken&&(r[ju]=this.appCheckToken),typeof location<"u"&&location.hostname&&$1.test(location.hostname)&&(r[z1]=L1);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){xi.forceAllow_=!0}static forceDisallow(){xi.forceDisallow_=!0}static isAvailable(){return xi.forceAllow_?!0:!xi.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!t2()&&!n2()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Qe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=v1(n),i=F1(r,S2);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[b2]="t",r[Q1]=e,r[K1]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Qe(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Hd{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=qb(),window[m2+this.uniqueCallbackIdentifier]=e,window[g2+this.uniqueCallbackIdentifier]=n,this.myIFrame=Hd.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){lt("frame writing exception"),a.stack&&lt(a.stack),lt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||lt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Q1]=this.myID,e[K1]=this.myPW,e[q1]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+J1+r.length<=X1;){const o=this.pendingSegs.shift();r=r+"&"+v2+i+"="+o.seg+"&"+x2+i+"="+o.ts+"&"+_2+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(w2)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{lt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2=16384,k2=45e3;let Ol=null;typeof MozWebSocket<"u"?Ol=MozWebSocket:typeof WebSocket<"u"&&(Ol=WebSocket);class Jt{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=yo(this.connId),this.stats_=Ud(n),this.connURL=Jt.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[O1]=Wd,typeof location<"u"&&location.hostname&&$1.test(location.hostname)&&(o[z1]=L1),n&&(o[B1]=n),r&&(o[W1]=r),i&&(o[ju]=i),s&&(o[U1]=s),G1(e,H1,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Dr.set("previous_websocket_failure",!0);try{let r;w1(),this.mySock=new Ol(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Jt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Ol!==null&&!Jt.forceDisallow_}static previouslyFailed(){return Dr.isInMemoryStorage||Dr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Dr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=qs(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if($(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Qe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=F1(n,E2);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(k2))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Jt.responsesRequiredToBeHealthy=2;Jt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[xi,Jt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Jt&&Jt.isAvailable();let r=n&&!Jt.previouslyFailed();if(e.webSocketOnly&&(n||xt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Jt];else{const i=this.transports_=[];for(const s of Zs.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Zs.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Zs.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=6e4,R2=5e3,j2=10*1024,I2=100*1024,gc="t",op="d",A2="s",lp="r",N2="e",ap="o",cp="a",up="n",dp="p",D2="h";class P2{constructor(e,n,r,i,s,o,a,c,u,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=yo("c:"+this.id+":"),this.transportManager_=new Zs(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=js(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>I2?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>j2?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(gc in e){const n=e[gc];n===cp?this.upgradeIfSecondaryHealthy_():n===lp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===ap&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=fs("t",e),r=fs("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:dp,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:cp,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:up,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=fs("t",e),r=fs("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=fs(gc,e);if(op in e){const r=e[op];if(n===D2){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===up){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===A2?this.onConnectionShutdown_(r):n===lp?this.onReset_(r):n===N2?Ru("Server Error: "+r):n===ap?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ru("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Wd!==r&&xt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),js(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(T2))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):js(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(R2))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:dp,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Dr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e){this.allowedEvents_=e,this.listeners_={},$(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){$(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl extends e0{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!S1()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Bl}getInitialEvent(e){return $(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp=32,hp=768;class ge{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function de(){return new ge("")}function ne(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function fr(t){return t.pieces_.length-t.pieceNum_}function _e(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ge(t.pieces_,e)}function Vd(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function F2(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function eo(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function t0(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ge(e,0)}function Fe(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ge)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ge(n,0)}function se(t){return t.pieceNum_>=t.pieces_.length}function yt(t,e){const n=ne(t),r=ne(e);if(n===null)return e;if(n===r)return yt(_e(t),_e(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function M2(t,e){const n=eo(t,0),r=eo(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=Kr(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function Yd(t,e){if(fr(t)!==fr(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function $t(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(fr(t)>fr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class O2{constructor(e,n){this.errorPrefix_=n,this.parts_=eo(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=pa(this.parts_[r]);n0(this)}}function B2(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=pa(e),n0(t)}function z2(t){const e=t.parts_.pop();t.byteLength_-=pa(e),t.parts_.length>0&&(t.byteLength_-=1)}function n0(t){if(t.byteLength_>hp)throw new Error(t.errorPrefix_+"has a key path longer than "+hp+" bytes ("+t.byteLength_+").");if(t.parts_.length>fp)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+fp+") or object contains a cycle "+jr(t))}function jr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd extends e0{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Gd}getInitialEvent(e){return $(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs=1e3,L2=60*5*1e3,pp=30*1e3,$2=1.3,W2=3e4,U2="server_kill",mp=3;class Rn extends Z1{constructor(e,n,r,i,s,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Rn.nextPersistentConnectionId_++,this.log_=yo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=hs,this.maxReconnectDelay_=L2,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!w1())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Gd.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Bl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Qe(s)),$(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new po,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),$(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),$(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const c=a.d,u=a.s;Rn.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&hn(e,"w")){const r=Oi(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();xt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||A_(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=pp)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=I_(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),$(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Qe(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Ru("Unrecognized action received from server: "+Qe(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){$(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=hs,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=hs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>W2&&(this.reconnectDelay_=hs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*$2)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Rn.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},u=function(d){$(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:u};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);o?lt("getToken() completed but was canceled"):(lt("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new P2(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,x=>{xt(x+" ("+this.repoInfo_.toString()+")"),this.interrupt(U2)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&xt(d),c())}}}interrupt(e){lt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){lt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Vh(this.interruptReasons_)&&(this.reconnectDelay_=hs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>$d(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new ge(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){lt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=mp&&(this.reconnectDelay_=pp,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){lt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=mp&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+N1.replace(/\./g,"-")]=1,S1()?e["framework.cordova"]=1:C_()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Bl.getInstance().currentlyOnline();return Vh(this.interruptReasons_)&&e}}Rn.nextPersistentConnectionId_=0;Rn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new re(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new re(Bi,e),i=new re(Bi,n);return this.compare(r,i)!==0}minPost(){return re.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ko;class r0 extends ma{static get __EMPTY_NODE(){return Ko}static set __EMPTY_NODE(e){Ko=e}compare(e,n){return Kr(e.name,n.name)}isDefinedOn(e){throw Qi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return re.MIN}maxPost(){return new re(Ur,Ko)}makePost(e,n){return $(typeof e=="string","KeyIndex indexValue must always be a string."),new re(e,Ko)}toString(){return".key"}}const ji=new r0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class nt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??nt.RED,this.left=i??Et.EMPTY_NODE,this.right=s??Et.EMPTY_NODE}copy(e,n,r,i,s){return new nt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Et.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Et.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}nt.RED=!0;nt.BLACK=!1;class H2{copy(e,n,r,i,s){return this}insert(e,n,r){return new nt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Et{constructor(e,n=Et.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Et(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,nt.BLACK,null,null))}remove(e){return new Et(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,nt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new qo(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new qo(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new qo(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new qo(this.root_,null,this.comparator_,!0,e)}}Et.EMPTY_NODE=new H2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(t,e){return Kr(t.name,e.name)}function Qd(t,e){return Kr(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iu;function Y2(t){Iu=t}const i0=function(t){return typeof t=="number"?"number:"+M1(t):"string:"+t},s0=function(t){if(t.isLeafNode()){const e=t.val();$(typeof e=="string"||typeof e=="number"||typeof e=="object"&&hn(e,".sv"),"Priority must be a string or number.")}else $(t===Iu||t.isEmpty(),"priority of unexpected type.");$(t===Iu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gp;class et{constructor(e,n=et.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,$(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),s0(this.priorityNode_)}static set __childrenNodeConstructor(e){gp=e}static get __childrenNodeConstructor(){return gp}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new et(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:et.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return se(e)?this:ne(e)===".priority"?this.priorityNode_:et.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:et.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=ne(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:($(r!==".priority"||fr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,et.__childrenNodeConstructor.EMPTY_NODE.updateChild(_e(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+i0(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=M1(this.value_):e+=this.value_,this.lazyHash_=P1(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===et.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof et.__childrenNodeConstructor?-1:($(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=et.VALUE_TYPE_ORDER.indexOf(n),s=et.VALUE_TYPE_ORDER.indexOf(r);return $(i>=0,"Unknown leaf type: "+n),$(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}et.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o0,l0;function G2(t){o0=t}function Q2(t){l0=t}class K2 extends ma{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Kr(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return re.MIN}maxPost(){return new re(Ur,new et("[PRIORITY-POST]",l0))}makePost(e,n){const r=o0(e);return new re(n,new et("[PRIORITY-POST]",r))}toString(){return".priority"}}const Me=new K2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=Math.log(2);class X2{constructor(e){const n=s=>parseInt(Math.log(s)/q2,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const zl=function(t,e,n,r){t.sort(e);const i=function(c,u){const f=u-c;let d,h;if(f===0)return null;if(f===1)return d=t[c],h=n?n(d):d,new nt(h,d.node,nt.BLACK,null,null);{const x=parseInt(f/2,10)+c,v=i(c,x),w=i(x+1,u);return d=t[x],h=n?n(d):d,new nt(h,d.node,nt.BLACK,v,w)}},s=function(c){let u=null,f=null,d=t.length;const h=function(v,w){const E=d-v,g=d;d-=v;const p=i(E+1,g),y=t[E],b=n?n(y):y;x(new nt(b,y.node,w,null,p))},x=function(v){u?(u.left=v,u=v):(f=v,u=v)};for(let v=0;v<c.count;++v){const w=c.nextBitIsOne(),E=Math.pow(2,c.count-(v+1));w?h(E,nt.BLACK):(h(E,nt.BLACK),h(E,nt.RED))}return f},o=new X2(t.length),a=s(o);return new Et(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yc;const si={};class kn{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return $(si&&Me,"ChildrenNode.ts has not been loaded"),yc=yc||new kn({".priority":si},{".priority":Me}),yc}get(e){const n=Oi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Et?n:null}hasIndex(e){return hn(this.indexSet_,e.toString())}addIndex(e,n){$(e!==ji,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(re.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=zl(r,e.getCompare()):a=si;const c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;const f=Object.assign({},this.indexes_);return f[c]=a,new kn(f,u)}addToIndexes(e,n){const r=Pl(this.indexes_,(i,s)=>{const o=Oi(this.indexSet_,s);if($(o,"Missing index implementation for "+s),i===si)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(re.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),zl(a,o.getCompare())}else return si;else{const a=n.get(e.name);let c=i;return a&&(c=c.remove(new re(e.name,a))),c.insert(e,e.node)}});return new kn(r,this.indexSet_)}removeFromIndexes(e,n){const r=Pl(this.indexes_,i=>{if(i===si)return i;{const s=n.get(e.name);return s?i.remove(new re(e.name,s)):i}});return new kn(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ps;class G{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&s0(this.priorityNode_),this.children_.isEmpty()&&$(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ps||(ps=new G(new Et(Qd),null,kn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ps}updatePriority(e){return this.children_.isEmpty()?this:new G(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ps:n}}getChild(e){const n=ne(e);return n===null?this:this.getImmediateChild(n).getChild(_e(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if($(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new re(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?ps:this.priorityNode_;return new G(i,o,s)}}updateChild(e,n){const r=ne(e);if(r===null)return n;{$(ne(e)!==".priority"||fr(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(_e(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Me,(o,a)=>{n[o]=a.val(e),r++,s&&G.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+i0(this.getPriority().val())+":"),this.forEachChild(Me,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":P1(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new re(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new re(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new re(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,re.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,re.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===vo?-1:0}withIndex(e){if(e===ji||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new G(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ji||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Me),i=n.getIterator(Me);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===ji?null:this.indexMap_.get(e.toString())}}G.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class J2 extends G{constructor(){super(new Et(Qd),G.EMPTY_NODE,kn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return G.EMPTY_NODE}isEmpty(){return!1}}const vo=new J2;Object.defineProperties(re,{MIN:{value:new re(Bi,G.EMPTY_NODE)},MAX:{value:new re(Ur,vo)}});r0.__EMPTY_NODE=G.EMPTY_NODE;et.__childrenNodeConstructor=G;Y2(vo);Q2(vo);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=!0;function Ge(t,e=null){if(t===null)return G.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),$(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new et(n,Ge(e))}if(!(t instanceof Array)&&Z2){const n=[];let r=!1;if(ut(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=Ge(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new re(o,c)))}}),n.length===0)return G.EMPTY_NODE;const s=zl(n,V2,o=>o.name,Qd);if(r){const o=zl(n,Me.getCompare());return new G(s,Ge(e),new kn({".priority":o},{".priority":Me}))}else return new G(s,Ge(e),kn.Default)}else{let n=G.EMPTY_NODE;return ut(t,(r,i)=>{if(hn(t,r)&&r.substring(0,1)!=="."){const s=Ge(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Ge(e))}}G2(Ge);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS extends ma{constructor(e){super(),this.indexPath_=e,$(!se(e)&&ne(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Kr(e.name,n.name):s}makePost(e,n){const r=Ge(e),i=G.EMPTY_NODE.updateChild(this.indexPath_,r);return new re(n,i)}maxPost(){const e=G.EMPTY_NODE.updateChild(this.indexPath_,vo);return new re(Ur,e)}toString(){return eo(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS extends ma{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Kr(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return re.MIN}maxPost(){return re.MAX}makePost(e,n){const r=Ge(e);return new re(n,r)}toString(){return".value"}}const nS=new tS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(t){return{type:"value",snapshotNode:t}}function zi(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function to(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function no(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function rS(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){$(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(to(n,a)):$(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(zi(n,r)):o.trackChildChange(no(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Me,(i,s)=>{n.hasChild(i)||r.trackChildChange(to(i,s))}),n.isLeafNode()||n.forEachChild(Me,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(no(i,s,o))}else r.trackChildChange(zi(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?G.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.indexedFilter_=new Kd(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ro.getStartPost_(e),this.endPost_=ro.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new re(n,r))||(r=G.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=G.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(G.EMPTY_NODE);const s=this;return n.forEachChild(Me,(o,a)=>{s.matches(new re(o,a))||(i=i.updateImmediateChild(o,G.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new ro(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new re(n,r))||(r=G.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=G.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=G.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(G.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,G.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,x)=>d(x,h)}else o=this.index_.getCompare();const a=e;$(a.numChildren()===this.limit_,"");const c=new re(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),f=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=i.getChildAfterChild(this.index_,u,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const x=h==null?1:o(h,c);if(f&&!r.isEmpty()&&x>=0)return s!=null&&s.trackChildChange(no(n,r,d)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(to(n,d));const w=a.updateImmediateChild(n,G.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s!=null&&s.trackChildChange(zi(h.name,h.node)),w.updateImmediateChild(h.name,h.node)):w}}else return r.isEmpty()?e:f&&o(u,c)>=0?(s!=null&&(s.trackChildChange(to(u.name,u.node)),s.trackChildChange(zi(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,G.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Me}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return $(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return $(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Bi}hasEnd(){return this.endSet_}getIndexEndValue(){return $(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return $(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ur}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return $(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Me}copy(){const e=new qd;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function sS(t){return t.loadsAllData()?new Kd(t.getIndex()):t.hasLimit()?new iS(t):new ro(t)}function yp(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Me?n="$priority":t.index_===nS?n="$value":t.index_===ji?n="$key":($(t.index_ instanceof eS,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Qe(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Qe(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Qe(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Qe(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Qe(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function vp(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Me&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends Z1{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=yo("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:($(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Ll.getListenId_(e,r),a={};this.listens_[o]=a;const c=yp(e._queryParams);this.restRequest_(s+".json",c,(u,f)=>{let d=f;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),Oi(this.listens_,o)===a){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",i(h,null)}})}unlisten(e,n){const r=Ll.getListenId_(e,n);delete this.listens_[r]}get(e){const n=yp(e._queryParams),r=e._path.toString(),i=new po;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+N_(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=qs(a.responseText)}catch{xt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&xt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(){this.rootNode_=G.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(){return{value:null,children:new Map}}function c0(t,e,n){if(se(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=ne(e);t.children.has(r)||t.children.set(r,$l());const i=t.children.get(r);e=_e(e),c0(i,e,n)}}function Au(t,e,n){t.value!==null?n(e,t.value):lS(t,(r,i)=>{const s=new ge(e.toString()+"/"+r);Au(i,s,n)})}function lS(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ut(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp=10*1e3,cS=30*1e3,uS=5*60*1e3;class dS{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new aS(e);const r=xp+(cS-xp)*Math.random();js(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;ut(e,(i,s)=>{s>0&&hn(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),js(this.reportStats_.bind(this),Math.floor(Math.random()*2*uS))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Zt||(Zt={}));function Xd(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Jd(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Zd(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Zt.ACK_USER_WRITE,this.source=Xd()}operationForChild(e){if(se(this.path)){if(this.affectedTree.value!=null)return $(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ge(e));return new Wl(de(),n,this.revert)}}else return $(ne(this.path)===e,"operationForChild called for unrelated child."),new Wl(_e(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n){this.source=e,this.path=n,this.type=Zt.LISTEN_COMPLETE}operationForChild(e){return se(this.path)?new io(this.source,de()):new io(this.source,_e(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Zt.OVERWRITE}operationForChild(e){return se(this.path)?new Hr(this.source,de(),this.snap.getImmediateChild(e)):new Hr(this.source,_e(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Zt.MERGE}operationForChild(e){if(se(this.path)){const n=this.children.subtree(new ge(e));return n.isEmpty()?null:n.value?new Hr(this.source,de(),n.value):new Li(this.source,de(),n)}else return $(ne(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Li(this.source,_e(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(se(e))return this.isFullyInitialized()&&!this.filtered_;const n=ne(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function hS(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(rS(o.childName,o.snapshotNode))}),ms(t,i,"child_removed",e,r,n),ms(t,i,"child_added",e,r,n),ms(t,i,"child_moved",s,r,n),ms(t,i,"child_changed",e,r,n),ms(t,i,"value",e,r,n),i}function ms(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,c)=>mS(t,a,c)),o.forEach(a=>{const c=pS(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function pS(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function mS(t,e,n){if(e.childName==null||n.childName==null)throw Qi("Should only compare child_ events.");const r=new re(e.childName,e.snapshotNode),i=new re(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(t,e){return{eventCache:t,serverCache:e}}function Is(t,e,n,r){return ga(new hr(e,n,r),t.serverCache)}function u0(t,e,n,r){return ga(t.eventCache,new hr(e,n,r))}function Ul(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Vr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vc;const gS=()=>(vc||(vc=new Et(e2)),vc);class ve{constructor(e,n=gS()){this.value=e,this.children=n}static fromObject(e){let n=new ve(null);return ut(e,(r,i)=>{n=n.set(new ge(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:de(),value:this.value};if(se(e))return null;{const r=ne(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(_e(e),n);return s!=null?{path:Fe(new ge(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(se(e))return this;{const n=ne(e),r=this.children.get(n);return r!==null?r.subtree(_e(e)):new ve(null)}}set(e,n){if(se(e))return new ve(n,this.children);{const r=ne(e),s=(this.children.get(r)||new ve(null)).set(_e(e),n),o=this.children.insert(r,s);return new ve(this.value,o)}}remove(e){if(se(e))return this.children.isEmpty()?new ve(null):new ve(null,this.children);{const n=ne(e),r=this.children.get(n);if(r){const i=r.remove(_e(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new ve(null):new ve(this.value,s)}else return this}}get(e){if(se(e))return this.value;{const n=ne(e),r=this.children.get(n);return r?r.get(_e(e)):null}}setTree(e,n){if(se(e))return n;{const r=ne(e),s=(this.children.get(r)||new ve(null)).setTree(_e(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new ve(this.value,o)}}fold(e){return this.fold_(de(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Fe(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,de(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(se(e))return null;{const s=ne(e),o=this.children.get(s);return o?o.findOnPath_(_e(e),Fe(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,de(),n)}foreachOnPath_(e,n,r){if(se(e))return this;{this.value&&r(n,this.value);const i=ne(e),s=this.children.get(i);return s?s.foreachOnPath_(_e(e),Fe(n,i),r):new ve(null)}}foreach(e){this.foreach_(de(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Fe(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.writeTree_=e}static empty(){return new nn(new ve(null))}}function As(t,e,n){if(se(e))return new nn(new ve(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=yt(i,e);return s=s.updateChild(o,n),new nn(t.writeTree_.set(i,s))}else{const i=new ve(n),s=t.writeTree_.setTree(e,i);return new nn(s)}}}function Nu(t,e,n){let r=t;return ut(n,(i,s)=>{r=As(r,Fe(e,i),s)}),r}function _p(t,e){if(se(e))return nn.empty();{const n=t.writeTree_.setTree(e,new ve(null));return new nn(n)}}function Du(t,e){return qr(t,e)!=null}function qr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(yt(n.path,e)):null}function bp(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Me,(r,i)=>{e.push(new re(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new re(r,i.value))}),e}function ar(t,e){if(se(e))return t;{const n=qr(t,e);return n!=null?new nn(new ve(n)):new nn(t.writeTree_.subtree(e))}}function Pu(t){return t.writeTree_.isEmpty()}function $i(t,e){return d0(de(),t.writeTree_,e)}function d0(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?($(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=d0(Fe(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Fe(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(t,e){return m0(e,t)}function yS(t,e,n,r,i){$(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=As(t.visibleWrites,e,n)),t.lastWriteId=r}function vS(t,e,n,r){$(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Nu(t.visibleWrites,e,n),t.lastWriteId=r}function xS(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function _S(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);$(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&bS(a,r.path)?i=!1:$t(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return SS(t),!0;if(r.snap)t.visibleWrites=_p(t.visibleWrites,r.path);else{const a=r.children;ut(a,c=>{t.visibleWrites=_p(t.visibleWrites,Fe(r.path,c))})}return!0}else return!1}function bS(t,e){if(t.snap)return $t(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&$t(Fe(t.path,n),e))return!0;return!1}function SS(t){t.visibleWrites=f0(t.allWrites,wS,de()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function wS(t){return t.visible}function f0(t,e,n){let r=nn.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)$t(n,o)?(a=yt(n,o),r=As(r,a,s.snap)):$t(o,n)&&(a=yt(o,n),r=As(r,de(),s.snap.getChild(a)));else if(s.children){if($t(n,o))a=yt(n,o),r=Nu(r,a,s.children);else if($t(o,n))if(a=yt(o,n),se(a))r=Nu(r,de(),s.children);else{const c=Oi(s.children,ne(a));if(c){const u=c.getChild(_e(a));r=As(r,de(),u)}}}else throw Qi("WriteRecord should have .snap or .children")}}return r}function h0(t,e,n,r,i){if(!r&&!i){const s=qr(t.visibleWrites,e);if(s!=null)return s;{const o=ar(t.visibleWrites,e);if(Pu(o))return n;if(n==null&&!Du(o,de()))return null;{const a=n||G.EMPTY_NODE;return $i(o,a)}}}else{const s=ar(t.visibleWrites,e);if(!i&&Pu(s))return n;if(!i&&n==null&&!Du(s,de()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&($t(u.path,e)||$t(e,u.path))},a=f0(t.allWrites,o,e),c=n||G.EMPTY_NODE;return $i(a,c)}}}function CS(t,e,n){let r=G.EMPTY_NODE;const i=qr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Me,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=ar(t.visibleWrites,e);return n.forEachChild(Me,(o,a)=>{const c=$i(ar(s,new ge(o)),a);r=r.updateImmediateChild(o,c)}),bp(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=ar(t.visibleWrites,e);return bp(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function ES(t,e,n,r,i){$(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Fe(e,n);if(Du(t.visibleWrites,s))return null;{const o=ar(t.visibleWrites,s);return Pu(o)?i.getChild(n):$i(o,i.getChild(n))}}function kS(t,e,n,r){const i=Fe(e,n),s=qr(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=ar(t.visibleWrites,i);return $i(o,r.getNode().getImmediateChild(n))}else return null}function TS(t,e){return qr(t.visibleWrites,e)}function RS(t,e,n,r,i,s,o){let a;const c=ar(t.visibleWrites,e),u=qr(c,de());if(u!=null)a=u;else if(n!=null)a=$i(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const f=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let x=h.getNext();for(;x&&f.length<i;)d(x,r)!==0&&f.push(x),x=h.getNext();return f}else return[]}function jS(){return{visibleWrites:nn.empty(),allWrites:[],lastWriteId:-1}}function Hl(t,e,n,r){return h0(t.writeTree,t.treePath,e,n,r)}function ef(t,e){return CS(t.writeTree,t.treePath,e)}function Sp(t,e,n,r){return ES(t.writeTree,t.treePath,e,n,r)}function Vl(t,e){return TS(t.writeTree,Fe(t.treePath,e))}function IS(t,e,n,r,i,s){return RS(t.writeTree,t.treePath,e,n,r,i,s)}function tf(t,e,n){return kS(t.writeTree,t.treePath,e,n)}function p0(t,e){return m0(Fe(t.treePath,e),t.writeTree)}function m0(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;$(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),$(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,no(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,to(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,zi(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,no(r,e.snapshotNode,i.oldSnap));else throw Qi("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const g0=new NS;class nf{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new hr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return tf(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Vr(this.viewCache_),s=IS(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t){return{filter:t}}function PS(t,e){$(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),$(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function FS(t,e,n,r,i){const s=new AS;let o,a;if(n.type===Zt.OVERWRITE){const u=n;u.source.fromUser?o=Fu(t,e,u.path,u.snap,r,i,s):($(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!se(u.path),o=Yl(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===Zt.MERGE){const u=n;u.source.fromUser?o=OS(t,e,u.path,u.children,r,i,s):($(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=Mu(t,e,u.path,u.children,r,i,a,s))}else if(n.type===Zt.ACK_USER_WRITE){const u=n;u.revert?o=LS(t,e,u.path,r,i,s):o=BS(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===Zt.LISTEN_COMPLETE)o=zS(t,e,n.path,r,s);else throw Qi("Unknown operation type: "+n.type);const c=s.getChanges();return MS(e,o,c),{viewCache:o,changes:c}}function MS(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Ul(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(a0(Ul(e)))}}function y0(t,e,n,r,i,s){const o=e.eventCache;if(Vl(r,n)!=null)return e;{let a,c;if(se(n))if($(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Vr(e),f=u instanceof G?u:G.EMPTY_NODE,d=ef(r,f);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const u=Hl(r,Vr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=ne(n);if(u===".priority"){$(fr(n)===1,"Can't have a priority with additional path components");const f=o.getNode();c=e.serverCache.getNode();const d=Sp(r,n,f,c);d!=null?a=t.filter.updatePriority(f,d):a=o.getNode()}else{const f=_e(n);let d;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();const h=Sp(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(u).updateChild(f,h):d=o.getNode().getImmediateChild(u)}else d=tf(r,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,f,i,s):a=o.getNode()}}return Is(e,a,o.isFullyInitialized()||se(n),t.filter.filtersNodes())}}function Yl(t,e,n,r,i,s,o,a){const c=e.serverCache;let u;const f=o?t.filter:t.filter.getIndexedFilter();if(se(n))u=f.updateFullNode(c.getNode(),r,null);else if(f.filtersNodes()&&!c.isFiltered()){const x=c.getNode().updateChild(n,r);u=f.updateFullNode(c.getNode(),x,null)}else{const x=ne(n);if(!c.isCompleteForPath(n)&&fr(n)>1)return e;const v=_e(n),E=c.getNode().getImmediateChild(x).updateChild(v,r);x===".priority"?u=f.updatePriority(c.getNode(),E):u=f.updateChild(c.getNode(),x,E,v,g0,null)}const d=u0(e,u,c.isFullyInitialized()||se(n),f.filtersNodes()),h=new nf(i,d,s);return y0(t,d,n,i,h,a)}function Fu(t,e,n,r,i,s,o){const a=e.eventCache;let c,u;const f=new nf(i,e,s);if(se(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Is(e,u,!0,t.filter.filtersNodes());else{const d=ne(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=Is(e,u,a.isFullyInitialized(),a.isFiltered());else{const h=_e(n),x=a.getNode().getImmediateChild(d);let v;if(se(h))v=r;else{const w=f.getCompleteChild(d);w!=null?Vd(h)===".priority"&&w.getChild(t0(h)).isEmpty()?v=w:v=w.updateChild(h,r):v=G.EMPTY_NODE}if(x.equals(v))c=e;else{const w=t.filter.updateChild(a.getNode(),d,v,h,f,o);c=Is(e,w,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function wp(t,e){return t.eventCache.isCompleteForChild(e)}function OS(t,e,n,r,i,s,o){let a=e;return r.foreach((c,u)=>{const f=Fe(n,c);wp(e,ne(f))&&(a=Fu(t,a,f,u,i,s,o))}),r.foreach((c,u)=>{const f=Fe(n,c);wp(e,ne(f))||(a=Fu(t,a,f,u,i,s,o))}),a}function Cp(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Mu(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;se(n)?u=r:u=new ve(null).setTree(n,r);const f=e.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(f.hasChild(d)){const x=e.serverCache.getNode().getImmediateChild(d),v=Cp(t,x,h);c=Yl(t,c,new ge(d),v,i,s,o,a)}}),u.children.inorderTraversal((d,h)=>{const x=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!f.hasChild(d)&&!x){const v=e.serverCache.getNode().getImmediateChild(d),w=Cp(t,v,h);c=Yl(t,c,new ge(d),w,i,s,o,a)}}),c}function BS(t,e,n,r,i,s,o){if(Vl(i,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(se(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Yl(t,e,n,c.getNode().getChild(n),i,s,a,o);if(se(n)){let u=new ve(null);return c.getNode().forEachChild(ji,(f,d)=>{u=u.set(new ge(f),d)}),Mu(t,e,n,u,i,s,a,o)}else return e}else{let u=new ve(null);return r.foreach((f,d)=>{const h=Fe(n,f);c.isCompleteForPath(h)&&(u=u.set(f,c.getNode().getChild(h)))}),Mu(t,e,n,u,i,s,a,o)}}function zS(t,e,n,r,i){const s=e.serverCache,o=u0(e,s.getNode(),s.isFullyInitialized()||se(n),s.isFiltered());return y0(t,o,n,r,g0,i)}function LS(t,e,n,r,i,s){let o;if(Vl(r,n)!=null)return e;{const a=new nf(r,e,i),c=e.eventCache.getNode();let u;if(se(n)||ne(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=Hl(r,Vr(e));else{const d=e.serverCache.getNode();$(d instanceof G,"serverChildren would be complete if leaf node"),f=ef(r,d)}f=f,u=t.filter.updateFullNode(c,f,s)}else{const f=ne(n);let d=tf(r,f,e.serverCache);d==null&&e.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),d!=null?u=t.filter.updateChild(c,f,d,_e(n),a,s):e.eventCache.getNode().hasChild(f)?u=t.filter.updateChild(c,f,G.EMPTY_NODE,_e(n),a,s):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Hl(r,Vr(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||Vl(r,de())!=null,Is(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Kd(r.getIndex()),s=sS(r);this.processor_=DS(s);const o=n.serverCache,a=n.eventCache,c=i.updateFullNode(G.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(G.EMPTY_NODE,a.getNode(),null),f=new hr(c,o.isFullyInitialized(),i.filtersNodes()),d=new hr(u,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=ga(d,f),this.eventGenerator_=new fS(this.query_)}get query(){return this.query_}}function WS(t){return t.viewCache_.serverCache.getNode()}function US(t){return Ul(t.viewCache_)}function HS(t,e){const n=Vr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!se(e)&&!n.getImmediateChild(ne(e)).isEmpty())?n.getChild(e):null}function Ep(t){return t.eventRegistrations_.length===0}function VS(t,e){t.eventRegistrations_.push(e)}function kp(t,e,n){const r=[];if(n){$(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Tp(t,e,n,r){e.type===Zt.MERGE&&e.source.queryId!==null&&($(Vr(t.viewCache_),"We should always have a full cache before handling merges"),$(Ul(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=FS(t.processor_,i,e,n,r);return PS(t.processor_,s.viewCache),$(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,v0(t,s.changes,s.viewCache.eventCache.getNode(),null)}function YS(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Me,(s,o)=>{r.push(zi(s,o))}),n.isFullyInitialized()&&r.push(a0(n.getNode())),v0(t,r,n.getNode(),e)}function v0(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return hS(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gl;class x0{constructor(){this.views=new Map}}function GS(t){$(!Gl,"__referenceConstructor has already been defined"),Gl=t}function QS(){return $(Gl,"Reference.ts has not been loaded"),Gl}function KS(t){return t.views.size===0}function rf(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return $(s!=null,"SyncTree gave us an op for an invalid query."),Tp(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(Tp(o,e,n,r));return s}}function _0(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Hl(n,i?r:null),c=!1;a?c=!0:r instanceof G?(a=ef(n,r),c=!1):(a=G.EMPTY_NODE,c=!1);const u=ga(new hr(a,c,!1),new hr(r,i,!1));return new $S(e,u)}return o}function qS(t,e,n,r,i,s){const o=_0(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),VS(o,n),YS(o,n)}function XS(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=pr(t);if(i==="default")for(const[c,u]of t.views.entries())o=o.concat(kp(u,n,r)),Ep(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||s.push(u.query));else{const c=t.views.get(i);c&&(o=o.concat(kp(c,n,r)),Ep(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!pr(t)&&s.push(new(QS())(e._repo,e._path)),{removed:s,events:o}}function b0(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function cr(t,e){let n=null;for(const r of t.views.values())n=n||HS(r,e);return n}function S0(t,e){if(e._queryParams.loadsAllData())return va(t);{const r=e._queryIdentifier;return t.views.get(r)}}function w0(t,e){return S0(t,e)!=null}function pr(t){return va(t)!=null}function va(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ql;function JS(t){$(!Ql,"__referenceConstructor has already been defined"),Ql=t}function ZS(){return $(Ql,"Reference.ts has not been loaded"),Ql}let ew=1;class Rp{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ve(null),this.pendingWriteTree_=jS(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function C0(t,e,n,r,i){return yS(t.pendingWriteTree_,e,n,r,i),i?qi(t,new Hr(Xd(),e,n)):[]}function tw(t,e,n,r){vS(t.pendingWriteTree_,e,n,r);const i=ve.fromObject(n);return qi(t,new Li(Xd(),e,i))}function Qn(t,e,n=!1){const r=xS(t.pendingWriteTree_,e);if(_S(t.pendingWriteTree_,e)){let s=new ve(null);return r.snap!=null?s=s.set(de(),!0):ut(r.children,o=>{s=s.set(new ge(o),!0)}),qi(t,new Wl(r.path,s,n))}else return[]}function xo(t,e,n){return qi(t,new Hr(Jd(),e,n))}function nw(t,e,n){const r=ve.fromObject(n);return qi(t,new Li(Jd(),e,r))}function rw(t,e){return qi(t,new io(Jd(),e))}function iw(t,e,n){const r=of(t,n);if(r){const i=lf(r),s=i.path,o=i.queryId,a=yt(s,e),c=new io(Zd(o),a);return af(t,s,c)}else return[]}function Kl(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||w0(o,e))){const c=XS(o,e,n,r);KS(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=c.removed;if(a=c.events,!i){const f=u.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(h,x)=>pr(x));if(f&&!d){const h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){const x=lw(h);for(let v=0;v<x.length;++v){const w=x[v],E=w.query,g=R0(t,w);t.listenProvider_.startListening(Ns(E),so(t,E),g.hashFn,g.onComplete)}}}!d&&u.length>0&&!r&&(f?t.listenProvider_.stopListening(Ns(e),null):u.forEach(h=>{const x=t.queryToTagMap.get(xa(h));t.listenProvider_.stopListening(Ns(h),x)}))}aw(t,u)}return a}function E0(t,e,n,r){const i=of(t,r);if(i!=null){const s=lf(i),o=s.path,a=s.queryId,c=yt(o,e),u=new Hr(Zd(a),c,n);return af(t,o,u)}else return[]}function sw(t,e,n,r){const i=of(t,r);if(i){const s=lf(i),o=s.path,a=s.queryId,c=yt(o,e),u=ve.fromObject(n),f=new Li(Zd(a),c,u);return af(t,o,f)}else return[]}function Ou(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,x)=>{const v=yt(h,i);s=s||cr(x,v),o=o||pr(x)});let a=t.syncPointTree_.get(i);a?(o=o||pr(a),s=s||cr(a,de())):(a=new x0,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=G.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((x,v)=>{const w=cr(v,de());w&&(s=s.updateImmediateChild(x,w))}));const u=w0(a,e);if(!u&&!e._queryParams.loadsAllData()){const h=xa(e);$(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const x=cw();t.queryToTagMap.set(h,x),t.tagToQueryMap.set(x,h)}const f=ya(t.pendingWriteTree_,i);let d=qS(a,e,n,f,s,c);if(!u&&!o&&!r){const h=S0(a,e);d=d.concat(uw(t,e,h))}return d}function sf(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=yt(o,e),u=cr(a,c);if(u)return u});return h0(i,e,s,n,!0)}function ow(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,f)=>{const d=yt(u,n);r=r||cr(f,d)});let i=t.syncPointTree_.get(n);i?r=r||cr(i,de()):(i=new x0,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new hr(r,!0,!1):null,a=ya(t.pendingWriteTree_,e._path),c=_0(i,e,a,s?o.getNode():G.EMPTY_NODE,s);return US(c)}function qi(t,e){return k0(e,t.syncPointTree_,null,ya(t.pendingWriteTree_,de()))}function k0(t,e,n,r){if(se(t.path))return T0(t,e,n,r);{const i=e.get(de());n==null&&i!=null&&(n=cr(i,de()));let s=[];const o=ne(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const u=n?n.getImmediateChild(o):null,f=p0(r,o);s=s.concat(k0(a,c,u,f))}return i&&(s=s.concat(rf(i,t,r,n))),s}}function T0(t,e,n,r){const i=e.get(de());n==null&&i!=null&&(n=cr(i,de()));let s=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,u=p0(r,o),f=t.operationForChild(o);f&&(s=s.concat(T0(f,a,c,u)))}),i&&(s=s.concat(rf(i,t,r,n))),s}function R0(t,e){const n=e.query,r=so(t,n);return{hashFn:()=>(WS(e)||G.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?iw(t,n._path,r):rw(t,n._path);{const s=r2(i,n);return Kl(t,n,null,s)}}}}function so(t,e){const n=xa(e);return t.queryToTagMap.get(n)}function xa(t){return t._path.toString()+"$"+t._queryIdentifier}function of(t,e){return t.tagToQueryMap.get(e)}function lf(t){const e=t.indexOf("$");return $(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ge(t.substr(0,e))}}function af(t,e,n){const r=t.syncPointTree_.get(e);$(r,"Missing sync point for query tag that we're tracking");const i=ya(t.pendingWriteTree_,e);return rf(r,n,i,null)}function lw(t){return t.fold((e,n,r)=>{if(n&&pr(n))return[va(n)];{let i=[];return n&&(i=b0(n)),ut(r,(s,o)=>{i=i.concat(o)}),i}})}function Ns(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(ZS())(t._repo,t._path):t}function aw(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=xa(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function cw(){return ew++}function uw(t,e,n){const r=e._path,i=so(t,e),s=R0(t,n),o=t.listenProvider_.startListening(Ns(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)$(!pr(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((u,f,d)=>{if(!se(u)&&f&&pr(f))return[va(f).query];{let h=[];return f&&(h=h.concat(b0(f).map(x=>x.query))),ut(d,(x,v)=>{h=h.concat(v)}),h}});for(let u=0;u<c.length;++u){const f=c[u];t.listenProvider_.stopListening(Ns(f),so(t,f))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new cf(n)}node(){return this.node_}}class uf{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Fe(this.path_,e);return new uf(this.syncTree_,n)}node(){return sf(this.syncTree_,this.path_)}}const dw=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},jp=function(t,e,n){if(!t||typeof t!="object")return t;if($(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return fw(t[".sv"],e,n);if(typeof t[".sv"]=="object")return hw(t[".sv"],e);$(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},fw=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:$(!1,"Unexpected server value: "+t)}},hw=function(t,e,n){t.hasOwnProperty("increment")||$(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&$(!1,"Unexpected increment value: "+r);const i=e.node();if($(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},j0=function(t,e,n,r){return df(e,new uf(n,t),r)},I0=function(t,e,n){return df(t,new cf(e),n)};function df(t,e,n){const r=t.getPriority().val(),i=jp(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=jp(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new et(a,Ge(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new et(i))),o.forEachChild(Me,(a,c)=>{const u=df(c,e.getImmediateChild(a),n);u!==c&&(s=s.updateImmediateChild(a,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function hf(t,e){let n=e instanceof ge?e:new ge(e),r=t,i=ne(n);for(;i!==null;){const s=Oi(r.node.children,i)||{children:{},childCount:0};r=new ff(i,r,s),n=_e(n),i=ne(n)}return r}function Xi(t){return t.node.value}function A0(t,e){t.node.value=e,Bu(t)}function N0(t){return t.node.childCount>0}function pw(t){return Xi(t)===void 0&&!N0(t)}function _a(t,e){ut(t.node.children,(n,r)=>{e(new ff(n,t,r))})}function D0(t,e,n,r){n&&!r&&e(t),_a(t,i=>{D0(i,e,!0,r)}),n&&r&&e(t)}function mw(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function _o(t){return new ge(t.parent===null?t.name:_o(t.parent)+"/"+t.name)}function Bu(t){t.parent!==null&&gw(t.parent,t.name,t)}function gw(t,e,n){const r=pw(n),i=hn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Bu(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Bu(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw=/[\[\].#$\/\u0000-\u001F\u007F]/,vw=/[\[\].#$\u0000-\u001F\u007F]/,xc=10*1024*1024,pf=function(t){return typeof t=="string"&&t.length!==0&&!yw.test(t)},P0=function(t){return typeof t=="string"&&t.length!==0&&!vw.test(t)},xw=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),P0(t)},_w=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Ld(t)||t&&typeof t=="object"&&hn(t,".sv")},F0=function(t,e,n,r){r&&e===void 0||ba(ha(t,"value"),e,n)},ba=function(t,e,n){const r=n instanceof ge?new O2(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+jr(r));if(typeof e=="function")throw new Error(t+"contains a function "+jr(r)+" with contents = "+e.toString());if(Ld(e))throw new Error(t+"contains "+e.toString()+" "+jr(r));if(typeof e=="string"&&e.length>xc/3&&pa(e)>xc)throw new Error(t+"contains a string greater than "+xc+" utf8 bytes "+jr(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(ut(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!pf(o)))throw new Error(t+" contains an invalid key ("+o+") "+jr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);B2(r,o),ba(t,a,r),z2(r)}),i&&s)throw new Error(t+' contains ".value" child '+jr(r)+" in addition to actual children.")}},bw=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=eo(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!pf(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(M2);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&$t(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},Sw=function(t,e,n,r){if(r&&e===void 0)return;const i=ha(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];ut(e,(o,a)=>{const c=new ge(o);if(ba(i,a,Fe(n,c)),Vd(c)===".priority"&&!_w(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(c)}),bw(i,s)},M0=function(t,e,n,r){if(!(r&&n===void 0)&&!P0(n))throw new Error(ha(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},ww=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),M0(t,e,n,r)},O0=function(t,e){if(ne(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Cw=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!pf(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!xw(n))throw new Error(ha(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Sa(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Yd(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function B0(t,e,n){Sa(t,n),z0(t,r=>Yd(r,e))}function Vt(t,e,n){Sa(t,n),z0(t,r=>$t(r,e)||$t(e,r))}function z0(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(kw(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function kw(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Mr&&lt("event: "+n.toString()),Ki(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="repo_interrupt",Rw=25;class jw{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ew,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$l(),this.transactionQueueTree_=new ff,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Iw(t,e,n){if(t.stats_=Ud(t.repoInfo_),t.forceRestClient_||l2())t.server_=new Ll(t.repoInfo_,(r,i,s,o)=>{Ip(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Ap(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Qe(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Rn(t.repoInfo_,e,(r,i,s,o)=>{Ip(t,r,i,s,o)},r=>{Ap(t,r)},r=>{Aw(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=f2(t.repoInfo_,()=>new dS(t.stats_,t.server_)),t.infoData_=new oS,t.infoSyncTree_=new Rp({startListening:(r,i,s,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=xo(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),mf(t,"connected",!1),t.serverSyncTree_=new Rp({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{const u=o(a,c);Vt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function L0(t){const n=t.infoData_.getNode(new ge(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function wa(t){return dw({timestamp:L0(t)})}function Ip(t,e,n,r,i){t.dataUpdateCount++;const s=new ge(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const c=Pl(n,u=>Ge(u));o=sw(t.serverSyncTree_,s,c,i)}else{const c=Ge(n);o=E0(t.serverSyncTree_,s,c,i)}else if(r){const c=Pl(n,u=>Ge(u));o=nw(t.serverSyncTree_,s,c)}else{const c=Ge(n);o=xo(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Wi(t,s)),Vt(t.eventQueue_,a,o)}function Ap(t,e){mf(t,"connected",e),e===!1&&Fw(t)}function Aw(t,e){ut(e,(n,r)=>{mf(t,n,r)})}function mf(t,e,n){const r=new ge("/.info/"+e),i=Ge(n);t.infoData_.updateSnapshot(r,i);const s=xo(t.infoSyncTree_,r,i);Vt(t.eventQueue_,r,s)}function gf(t){return t.nextWriteId_++}function Nw(t,e,n){const r=ow(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=Ge(i).withIndex(e._queryParams.getIndex());Ou(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=xo(t.serverSyncTree_,e._path,s);else{const a=so(t.serverSyncTree_,e);o=E0(t.serverSyncTree_,e._path,s,a)}return Vt(t.eventQueue_,e._path,o),Kl(t.serverSyncTree_,e,n,null,!0),s},i=>(bo(t,"get for query "+Qe(e)+" failed: "+i),Promise.reject(new Error(i))))}function Dw(t,e,n,r,i){bo(t,"set",{path:e.toString(),value:n,priority:r});const s=wa(t),o=Ge(n,r),a=sf(t.serverSyncTree_,e),c=I0(o,a,s),u=gf(t),f=C0(t.serverSyncTree_,e,c,u,!0);Sa(t.eventQueue_,f),t.server_.put(e.toString(),o.val(!0),(h,x)=>{const v=h==="ok";v||xt("set at "+e+" failed: "+h);const w=Qn(t.serverSyncTree_,u,!v);Vt(t.eventQueue_,e,w),zu(t,i,h,x)});const d=vf(t,e);Wi(t,d),Vt(t.eventQueue_,d,[])}function Pw(t,e,n,r){bo(t,"update",{path:e.toString(),value:n});let i=!0;const s=wa(t),o={};if(ut(n,(a,c)=>{i=!1,o[a]=j0(Fe(e,a),Ge(c),t.serverSyncTree_,s)}),i)lt("update() called with empty data.  Don't do anything."),zu(t,r,"ok",void 0);else{const a=gf(t),c=tw(t.serverSyncTree_,e,o,a);Sa(t.eventQueue_,c),t.server_.merge(e.toString(),n,(u,f)=>{const d=u==="ok";d||xt("update at "+e+" failed: "+u);const h=Qn(t.serverSyncTree_,a,!d),x=h.length>0?Wi(t,e):e;Vt(t.eventQueue_,x,h),zu(t,r,u,f)}),ut(n,u=>{const f=vf(t,Fe(e,u));Wi(t,f)}),Vt(t.eventQueue_,e,[])}}function Fw(t){bo(t,"onDisconnectEvents");const e=wa(t),n=$l();Au(t.onDisconnect_,de(),(i,s)=>{const o=j0(i,s,t.serverSyncTree_,e);c0(n,i,o)});let r=[];Au(n,de(),(i,s)=>{r=r.concat(xo(t.serverSyncTree_,i,s));const o=vf(t,i);Wi(t,o)}),t.onDisconnect_=$l(),Vt(t.eventQueue_,de(),r)}function Mw(t,e,n){let r;ne(e._path)===".info"?r=Ou(t.infoSyncTree_,e,n):r=Ou(t.serverSyncTree_,e,n),B0(t.eventQueue_,e._path,r)}function Np(t,e,n){let r;ne(e._path)===".info"?r=Kl(t.infoSyncTree_,e,n):r=Kl(t.serverSyncTree_,e,n),B0(t.eventQueue_,e._path,r)}function Ow(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Tw)}function bo(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),lt(n,...e)}function zu(t,e,n,r){e&&Ki(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function $0(t,e,n){return sf(t.serverSyncTree_,e,n)||G.EMPTY_NODE}function yf(t,e=t.transactionQueueTree_){if(e||Ca(t,e),Xi(e)){const n=U0(t,e);$(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&Bw(t,_o(e),n)}else N0(e)&&_a(e,n=>{yf(t,n)})}function Bw(t,e,n){const r=n.map(u=>u.currentWriteId),i=$0(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const f=n[u];$(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const d=yt(e,f.path);s=s.updateChild(d,f.currentOutputSnapshotRaw)}const a=s.val(!0),c=e;t.server_.put(c.toString(),a,u=>{bo(t,"transaction put response",{path:c.toString(),status:u});let f=[];if(u==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,f=f.concat(Qn(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Ca(t,hf(t.transactionQueueTree_,e)),yf(t,t.transactionQueueTree_),Vt(t.eventQueue_,e,f);for(let h=0;h<d.length;h++)Ki(d[h])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{xt("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}Wi(t,e)}},o)}function Wi(t,e){const n=W0(t,e),r=_o(n),i=U0(t,n);return zw(t,i,r),r}function zw(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],u=yt(n,c.path);let f=!1,d;if($(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)f=!0,d=c.abortReason,i=i.concat(Qn(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Rw)f=!0,d="maxretry",i=i.concat(Qn(t.serverSyncTree_,c.currentWriteId,!0));else{const h=$0(t,c.path,o);c.currentInputSnapshot=h;const x=e[a].update(h.val());if(x!==void 0){ba("transaction failed: Data returned ",x,c.path);let v=Ge(x);typeof x=="object"&&x!=null&&hn(x,".priority")||(v=v.updatePriority(h.getPriority()));const E=c.currentWriteId,g=wa(t),p=I0(v,h,g);c.currentOutputSnapshotRaw=v,c.currentOutputSnapshotResolved=p,c.currentWriteId=gf(t),o.splice(o.indexOf(E),1),i=i.concat(C0(t.serverSyncTree_,c.path,p,c.currentWriteId,c.applyLocally)),i=i.concat(Qn(t.serverSyncTree_,E,!0))}else f=!0,d="nodata",i=i.concat(Qn(t.serverSyncTree_,c.currentWriteId,!0))}Vt(t.eventQueue_,n,i),i=[],f&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Ca(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Ki(r[a]);yf(t,t.transactionQueueTree_)}function W0(t,e){let n,r=t.transactionQueueTree_;for(n=ne(e);n!==null&&Xi(r)===void 0;)r=hf(r,n),e=_e(e),n=ne(e);return r}function U0(t,e){const n=[];return H0(t,e,n),n.sort((r,i)=>r.order-i.order),n}function H0(t,e,n){const r=Xi(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);_a(e,i=>{H0(t,i,n)})}function Ca(t,e){const n=Xi(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,A0(e,n.length>0?n:void 0)}_a(e,r=>{Ca(t,r)})}function vf(t,e){const n=_o(W0(t,e)),r=hf(t.transactionQueueTree_,e);return mw(r,i=>{_c(t,i)}),_c(t,r),D0(r,i=>{_c(t,i)}),n}function _c(t,e){const n=Xi(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?($(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):($(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Qn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?A0(e,void 0):n.length=s+1,Vt(t.eventQueue_,_o(e),i);for(let o=0;o<r.length;o++)Ki(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function $w(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):xt(`Invalid query segment '${n}' in query '${t}'`)}return e}const Dp=function(t,e){const n=Ww(t),r=n.namespace;n.domain==="firebase.com"&&Pn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Pn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Jb();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Y1(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new ge(n.pathString)}},Ww=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let f=t.indexOf("/");f===-1&&(f=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(f,d)),f<d&&(i=Lw(t.substring(f,d)));const h=$w(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const x=e.slice(0,u);if(x.toLowerCase()==="localhost")n="localhost";else if(x.split(".").length<=2)n=x;else{const v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Uw=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Pp.charAt(n%64),n=Math.floor(n/64);$(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=Pp.charAt(e[i]);return $(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Qe(this.snapshot.exportVal())}}class Y0{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return $(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return se(this._path)?null:Vd(this._path)}get ref(){return new pn(this._repo,this._path)}get _queryIdentifier(){const e=vp(this._queryParams),n=$d(e);return n==="{}"?"default":n}get _queryObject(){return vp(this._queryParams)}isEqual(e){if(e=Qr(e),!(e instanceof xf))return!1;const n=this._repo===e._repo,r=Yd(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+F2(this._path)}}class pn extends xf{constructor(e,n){super(e,n,new qd,!1)}get parent(){const e=t0(this._path);return e===null?null:new pn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ui{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ge(e),r=Hi(this.ref,e);return new Ui(this._node.getChild(n),r,Me)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Ui(i,Hi(this.ref,r),Me)))}hasChild(e){const n=new ge(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function F(t,e){return t=Qr(t),t._checkNotDeleted("ref"),e!==void 0?Hi(t._root,e):t._root}function Hi(t,e){return t=Qr(t),ne(t._path)===null?ww("child","path",e,!1):M0("child","path",e,!1),new pn(t._repo,Fe(t._path,e))}function Hw(t,e){t=Qr(t),O0("push",t._path),F0("push",e,t._path,!0);const n=L0(t._repo),r=Uw(n),i=Hi(t,r),s=Hi(t,r);let o;return e!=null?o=V(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function V(t,e){t=Qr(t),O0("set",t._path),F0("set",e,t._path,!1);const n=new po;return Dw(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Xr(t,e){Sw("update",e,t._path,!1);const n=new po;return Pw(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function he(t){t=Qr(t);const e=new G0(()=>{}),n=new Ea(e);return Nw(t._repo,t,n).then(r=>new Ui(r,new pn(t._repo,t._path),t._queryParams.getIndex()))}class Ea{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new V0("value",this,new Ui(e.snapshotNode,new pn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Y0(this,e,n):null}matches(e){return e instanceof Ea?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class _f{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Y0(this,e,n):null}createEvent(e,n){$(e.childName!=null,"Child events should have a childName.");const r=Hi(new pn(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new V0(e.type,this,new Ui(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof _f?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function Vw(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const c=n,u=(f,d)=>{Np(t._repo,t,a),c(f,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new G0(n,s||void 0),a=e==="value"?new Ea(o):new _f(e,o);return Mw(t._repo,t,a),()=>Np(t._repo,t,a)}function Se(t,e,n,r){return Vw(t,"value",e,n,r)}GS(pn);JS(pn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="FIREBASE_DATABASE_EMULATOR_HOST",Lu={};let Gw=!1;function Qw(t,e,n,r){t.repoInfo_=new Y1(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Kw(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Pn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),lt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Dp(s,i),a=o.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[Yw]),u?(c=!0,s=`http://${u}?ns=${a.namespace}`,o=Dp(s,i),a=o.repoInfo):c=!o.repoInfo.secure;const f=i&&c?new Ri(Ri.OWNER):new c2(t.name,t.options,e);Cw("Invalid Firebase Database URL",o),se(o.path)||Pn("Database URL must point to the root of a Firebase Database (not including a child path).");const d=Xw(a,t,f,new a2(t.name,n));return new Jw(d,t)}function qw(t,e){const n=Lu[e];(!n||n[t.key]!==t)&&Pn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Ow(t),delete n[t.key]}function Xw(t,e,n,r){let i=Lu[e.name];i||(i={},Lu[e.name]=i);let s=i[t.toURLString()];return s&&Pn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new jw(t,Gw,n,r),i[t.toURLString()]=s,s}class Jw{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Iw(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new pn(this._repo,de())),this._rootInternal}_delete(){return this._rootInternal!==null&&(qw(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Pn("Cannot call "+e+" on a deleted database.")}}function ee(t=Fb(),e){const n=Ab(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=b_("database");r&&Zw(n,...r)}return n}function Zw(t,e,n,r={}){t=Qr(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Pn("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Pn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ri(Ri.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:S_(r.mockUserToken,t.app.options.projectId);s=new Ri(o)}Qw(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(t){Gb(Pb),Ml(new Xs("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return Kw(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),ki(tp,np,t),ki(tp,np,"esm2017")}Rn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Rn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};eC();const tC={apiKey:"AIzaSyBWHR3Nu1jaQO_Z9wZOSzMF7S11DbZK1f8",authDomain:"biblecrew-dev.firebaseapp.com",databaseURL:"https://biblecrew-dev-default-rtdb.firebaseio.com",projectId:"biblecrew-dev",storageBucket:"biblecrew-dev.firebasestorage.app",messagingSenderId:"983375235150",appId:"1:983375235150:web:1d743658a6fa7abe16db1f",measurementId:"G-97Z8886EPP"},nC=j1(tC),ue=ee(nC),bf=[{crewKey:"",label:"(40)"},{crewKey:"",label:"(30)"},{crewKey:"(A)",label:"A(15)"},{crewKey:"(B)",label:"B(15)"},{crewKey:"",label:"(9)"},{crewKey:"",label:"(9)"},{crewKey:"",label:"(5)"}],fe=bf.map(t=>t.crewKey);function Ve(t){const e=bf.find(n=>n.crewKey===t);return e?e.label:t}function rC(t){const e=F(ue,"classNotices");return Se(e,r=>t(r.val()||{}))}async function iC(t){if(!t)return null;const e=ee();return(await he(F(e,`classNotices/${t}`))).val()||null}async function sC(t,e){if(!t||!e)return 0;const n=ee(),i=(await he(F(n,`users/${t}/seenNotices/${e}`))).val();return typeof i=="number"?i:parseInt(i||"0",10)||0}async function oC(t,e,n){if(!t||!e)return!1;const r=typeof n=="number"?n:parseInt(n||"0",10)||0,i=ee();return await V(F(i,`users/${t}/seenNotices/${e}`),r),!0}async function lC(t,e){if(!t)return!1;const n=ee(),r=!!(e!=null&&e.enabled),i=((e==null?void 0:e.content)||"").toString(),s=((e==null?void 0:e.title)||"").toString(),o=Date.now();if(t==="all"){const c=(await he(F(n,"classNotices/all"))).val()||{},u=(parseInt(c.version||"0",10)||0)+1,f={enabled:r,title:s,content:i,version:u,updatedAt:o},d={};d["classNotices/all"]=f;for(const h of fe){const v=(await he(F(n,`classNotices/${h}`))).val()||{},w=(parseInt(v.version||"0",10)||0)+1;d[`classNotices/${h}`]={enabled:r,title:s,content:i,version:w,updatedAt:o}}return await Xr(F(n),d),f}else{const c=(await he(F(n,`classNotices/${t}`))).val()||{},u=(parseInt(c.version||"0",10)||0)+1,f={enabled:r,title:s,content:i,version:u,updatedAt:o};return await V(F(n,`classNotices/${t}`),f),f}}function Q0(t,e,n){const r=F(ue,`crews/${t}/users/${e}/checks`);return Se(r,s=>n(s.val()||{}))}function aC(t,e){if(!t)return()=>{};const n=F(ue,`crews/${t}`);return Se(n,i=>e(i.val()||{}))}function K0(t,e,n,r){const i=F(ue,`crews/${t}/users/${e}/checks/${n}`);return V(i,r)}function Fp(t,e,n){const r=F(ue,`crews/${t}/users/${e}/checks`);return Se(r,s=>n(s.val()||{}))}function ka(t){const e=F(ue,"users");return Se(e,r=>t(r.val()||{}))}function cC(t,e){const n=F(ue,`users/${t}/crew`),r=F(ue,`users/${t}/hiddenUnassigned`),i=F(ue,`users/${t}/status`);return Promise.all([V(n,e),V(r,!1),V(i,"active")])}function uC(t){const e=F(ue,`users/${t}/crew`),n=F(ue,`users/${t}/hiddenUnassigned`),r=F(ue,`users/${t}/status`);return Promise.all([V(e,null),V(n,!1),he(r).then(i=>i.val()==="inactive"?!0:V(r,"active"))])}async function dC(t){const e=ee(),n=F(e,`users/${t}`),s={...(await he(n)).val()||{},crew:null,hiddenUnassigned:!1,status:"inactive",deactivatedAt:Date.now()};return await V(n,s),{uid:t,...s}}async function fC(t){const e=ee(),n=F(e,`users/${t}`),s={...(await he(n)).val()||{},hiddenUnassigned:!1,status:"active",restoredAt:Date.now()};return await V(n,s),{uid:t,...s}}async function hC(t){const e=ee(),n=[];return n.push(V(F(e,`users/${t}`),null)),fe.forEach(r=>{n.push(V(F(e,`crews/${r}/users/${t}`),null))}),n.push(V(F(e,`userBookmarks/${t}`),null)),await Promise.all(n),!0}function pC(t,e){const n=F(ue,`comments/${t}`),r=Hw(n);return V(r,e)}function mC(t,e,n){if(!t||!e)return Promise.resolve(!1);const r=F(ue,`comments/${t}/${e}`);return Xr(r,n||{})}function gC(t,e){if(!t||!e)return Promise.resolve(!1);const n=F(ue,`comments/${t}/${e}`);return V(n,null)}function yC(t){if(!t)return Promise.resolve(!1);const e=F(ue,`comments/${t}`);return V(e,null)}function vC(t,e){const n=F(ue,`comments/${t}`);return Se(n,i=>{const s=i.val()||{},o=Object.entries(s).map(([a,c])=>({id:a,...c}));o.sort((a,c)=>(c.timestamp||0)-(a.timestamp||0)),e(o.slice(0,300))})}function xC(t){const e=F(ue,"comments");return Se(e,r=>{const i=r.val()||{},s=[];Object.entries(i).forEach(([o,a])=>{Object.entries(a||{}).forEach(([c,u])=>{s.push({id:`${o}_${c}`,crew:o,...u})})}),s.sort((o,a)=>(a.timestamp||0)-(o.timestamp||0)),t(s.slice(0,500))})}async function _C(t=3){const e=Math.max(1,Number(t)||3),n=Date.now()-e*24*60*60*1e3,r=ee(),s=(await he(F(r,"comments"))).val()||{},o={};return Object.entries(s).forEach(([a,c])=>{Object.entries(c||{}).forEach(([u,f])=>{const d=f&&f.timestamp||0;d&&d<n&&(o[`comments/${a}/${u}`]=null)})}),Object.keys(o).length===0?{deleted:0}:(await Xr(F(r),o),{deleted:Object.keys(o).length})}function bC(){const t=F(ue,"comments");return V(t,null)}function q0(t){const e=F(ue,"crews");return Se(e,r=>t(r.val()||{}))}function SC(t,e){if(!t)return()=>{};const n=F(ue,`hallOfFame/${t}`);return Se(n,i=>e(i.val()||{}))}function X0(t,e){if(!t)return()=>{};const n=F(ue,`hallOfFame/monthly/${t}`);return Se(n,i=>e(i.val()||{}))}function wC(t,e){return X0(t,e)}async function J0(t,e,n,r=[]){const i=ee(),s=String(e).padStart(2,"0"),o=`${t}-${s}`,a={gold:[],silver:[],bronze:[]},c={gold:{},silver:{},bronze:{}},u=[];for(const f of n||[]){if(!f.medal||!f.uid)continue;const d=f.medal,h=f.name||"",x=f.crew||"";a[d].push({name:h,crew:x}),c[d][f.uid]={name:h,crew:x,chapters:f.chapters||0};const v=`${o}_${x}`,w=F(i,`users/${f.uid}/earnedMedals/${v}`),E=F(i,`users/${f.uid}/medals/${d}`),p=(await he(w)).val();if(p!==d)if(p&&p!==d){const y=F(i,`users/${f.uid}/medals/${p}`);u.push((async()=>{const b=await he(y),T=await he(E);await V(y,Math.max(0,(b.val()||0)-1)),await V(E,(T.val()||0)+1),await V(w,d)})())}else u.push((async()=>{const y=await he(E);await V(E,(y.val()||0)+1),await V(w,d)})())}for(const f of["gold","silver","bronze"])u.push(V(F(i,`hallOfFame/${t}/monthlyResults/${s}/${f}`),a[f]));return u.push(V(F(i,`hallOfFame/${t}/monthlyResults/${s}/dokAchievers`),r)),u.push(V(F(i,`hallOfFame/monthly/${t}/${e}`),c)),await Promise.all(u),!0}async function CC(t,e,n,r,i){if(!t||!e||!n||!i)return!1;const s=ee(),o=String(e).padStart(2,"0"),a=`${t}-${o}`,c=`${a}_${i}`,u=F(s,`monthlyReports/${a}`),d=(await he(u)).val()||null,h=F(s,`hallOfFame/monthly/${t}/${e}`),v=(await he(h)).val()||{gold:{},silver:{},bronze:{}},w=F(s,`hallOfFame/${t}/monthlyResults/${o}`),g=(await he(w)).val()||{gold:[],silver:[],bronze:[]},p=["gold","silver","bronze"],y=F(s,`users/${n}/earnedMedals/${c}`),T=(await he(y)).val();let S=n;const j=(await he(F(s,`users/${n}`))).val()||{};S=j.name||n,p.forEach(I=>{v[I]&&v[I][n]&&v[I][n].crew===i&&delete v[I][n],Array.isArray(g[I])&&(g[I]=g[I].filter(M=>{const A=typeof M=="object"?M.name:M,H=typeof M=="object"?M.crew:"";return!(A===S&&H===i)}))}),r&&r!=="none"&&(v[r]||(v[r]={}),v[r][n]={name:S,crew:i,chapters:0},Array.isArray(g[r])||(g[r]=[]),g[r].push({name:S,crew:i}));const P=[];if(T&&p.includes(T)){const I=F(s,`users/${n}/medals/${T}`);P.push(he(I).then(M=>{const A=M.val()||0;return V(I,Math.max(0,A-1))}))}if(r&&r!=="none"&&p.includes(r)){const I=F(s,`users/${n}/medals/${r}`);P.push(he(I).then(M=>{const A=M.val()||0;return V(I,A+1)})),P.push(V(y,r))}else r==="none"&&P.push(V(y,null));if(P.push(V(h,v)),P.push(V(w,g)),d&&d[n]){const I=r&&r!=="none",M={...d[n],stateLabel:I?"":""};if(j.medals){const A={...j.medals};T&&A[T]>0&&A[T]--,I&&(A[r]=(A[r]||0)+1),M.totalMedals=(A.gold||0)+(A.silver||0)+(A.bronze||0)}P.push(V(F(s,`monthlyReports/${a}/${n}`),M))}return await Promise.all(P),!0}function Z0(){const t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0");return`${e}-${n}`}function So(){const t=new Date;let e=t.getFullYear(),n=t.getMonth()+2;n>12&&(e+=1,n=1);const r=String(n).padStart(2,"0");return`${e}-${r}`}function $u(t,e,n){const r=F(ue,`approvals/${e}/${t}`);return Se(r,s=>{n(s.val()||{})})}function Kn(t){return(t||"").toString().trim().replace(/^[,\s]+/,"").replace(/\s+/g,"")}async function EC(t,e,n){if(!n||n.length===0)return;const r=ee(),i={};return n.forEach(s=>{const o=Kn(s.name);o&&(i[`approvals/${e}/${t}/${o}`]=!0,s.uid&&(i[`applicationHistory/${e}/${s.uid}/${t}`]={name:s.name,crew:t,ymKey:e,createdAt:Date.now(),method:"manual_approval_immediate"},i[`users/${s.uid}/crew`]=t,i[`users/${s.uid}/hiddenUnassigned`]=!1,i[`users/${s.uid}/status`]="active"))}),Xr(F(r),i)}function kC(t,e){const n=F(ue,`approvals/${e}/${t}`);return V(n,null)}function TC(t,e,n,r){const i=F(ue,`approvals/${e}/${t}/${n}`);return Se(i,o=>{r(!!o.val())})}async function RC(t,e){if(!t||!/^[-a-zA-Z]+$/.test(t)){const d=new Error("     . (, ,  )");throw d.code="INVALID_NAME",d}const r=ee(),i=t,s=F(r,`users/${i}`);let a=(await he(s)).val();const c=e!=null?String(e):"",u=c.trim();if(!a){if(!u){const h=new Error("     .");throw h.code="EMPTY_PASSWORD",h}const d={name:t,password:u,crew:null,status:"active",isAdmin:!1,hiddenUnassigned:!1,mustChangePassword:!1,createdAt:Date.now()};return await V(s,d),{uid:i,...d}}const f=!!a.isAdmin;if(a.password){if(a.password!==c&&a.password!==u){const d=new Error("  .");throw d.code="WRONG_PASSWORD",d}}else{if(!u){const d=new Error("  .");throw d.code="EMPTY_PASSWORD",d}a.password=u,a.mustChangePassword=!1,await V(s,a)}return{uid:i,isAdmin:f,...a}}async function jC(t){const e=ee(),n=F(e,`users/${t}`),s={...(await he(n)).val()||{},password:"0000",mustChangePassword:!0};return await V(n,s),{uid:t,...s}}async function IC(t,e){const n=ee(),r=F(n,`users/${t}`),o={...(await he(r)).val()||{},password:e,mustChangePassword:!1};return await V(r,o),{uid:t,...o}}const AC="8395";async function NC(t){if(t===AC)return{ok:!0,usedMaster:!0};const e=ee(),n=F(e,"/admin/password"),s=(await he(n)).val()||"1234";if(t===s)return{ok:!0,usedMaster:!1};const o=new Error("   .");throw o.code="WRONG_ADMIN_PASSWORD",o}async function DC(t){const e=ee(),n=F(e,"/admin/password");return await V(n,t),!0}async function PC(t,e){if(!t)return!1;const n=ee();return await Xr(F(n,`users/${t}`),{isAdmin:!!e}),!0}async function FC(t,e,n){if(!(!t||!e))return await Sf(e,null),ey(t,e,n)}function ey(t,e,n){if(!t||!e)return Promise.resolve();const r=ee(),i=So(),s={name:n||"",crew:t,ymKey:i,createdAt:Date.now()},o=F(r,`/nextMonthApplications/${i}/${t}/${e}`),a=F(r,`/nextMonthApplicationsByUser/${i}/${e}/${t}`),c=F(r,`/applicationHistory/${i}/${e}/${t}`),u=Kn(n),f=F(r,`/approvals/${i}/${t}/${u}`);return Promise.all([V(o,s),V(a,s),V(c,s),u?V(f,!0):Promise.resolve()])}function MC(t,e){if(!t)return e(null),()=>{};const n=ee(),r=So(),i=F(n,`/nextMonthApplicationsByUser/${r}/${t}`);return Se(i,s=>{e(s.val()||null)})}function Sf(t,e=null){if(!t)return Promise.resolve();const n=ee(),r=So();if(e){const s=F(n,`/nextMonthApplications/${r}/${e}/${t}`),o=F(n,`/nextMonthApplicationsByUser/${r}/${t}/${e}`),a=F(n,`/applicationHistory/${r}/${t}/${e}`);return he(o).then(c=>{const u=c.val(),f=u?u.name:"",d=Kn(f),h=F(n,`/approvals/${r}/${e}/${d}`);return Promise.all([V(s,null),V(o,null),V(a,null),d?V(h,null):Promise.resolve()])})}const i=F(n,`/nextMonthApplicationsByUser/${r}/${t}`);return he(i).then(s=>{const o=s.val()||{},a=[];return a.push(V(i,null)),Object.keys(o).forEach(c=>{const u=F(n,`/nextMonthApplications/${r}/${c}/${t}`),f=F(n,`/applicationHistory/${r}/${t}/${c}`),d=o[c]?o[c].name:"",h=Kn(d);if(h){const x=F(n,`/approvals/${r}/${c}/${h}`);a.push(V(x,null))}a.push(V(u,null)),a.push(V(f,null))}),Promise.all(a)})}function OC(t){const e=ee(),n=So(),r=F(e,`/nextMonthApplications/${n}`);return Se(r,i=>{t(i.val()||{})})}async function BC(t,e){const n=ee(),r={},i=Date.now();for(const[s,o]of Object.entries(e))!o||!Array.isArray(o)||o.forEach(a=>{r[`users/${a}/crew`]=s,r[`users/${a}/hiddenUnassigned`]=!1,r[`users/${a}/status`]="active"});return r[`applicationHistory/${t}/snapshot`]=e,r[`applicationHistory/${t}/appliedAt`]=i,await Xr(F(n),r),!0}function zC(t,e){const n=ee(),r=F(n,`/applicationHistory/${t}/appliedAt`);return Se(r,i=>e(i.val()||null))}async function Mp(t){const e=ee();return(await he(F(e,`/applicationHistory/${t}/snapshot`))).val()||{}}function ty(t){const e=ee(),n=F(e,"/notice");return Se(n,r=>t(r.val()||null))}function LC(t,e){const n=ee(),r=F(n,"/notice"),i={title:t||"",content:e||"",timestamp:Date.now()};return V(r,i)}function $C(t,e){if(!t)return e({}),()=>{};const n=ee(),r=F(n,`/users/${t}/medals`);return Se(r,i=>{e(i.val()||{})})}function WC(t,e){const n=ee();return V(F(n,`/settings/approval/${t}`),e)}function UC(t){const e=ee(),n=F(e,"/settings/approval");return Se(n,r=>t(r.val()||{}))}function wf(t){const e=ee(),n=F(e,"/settings");return Se(n,r=>t(r.val()||{}))}function HC(t){const e=ee();return V(F(e,"/settings/churchName"),t)}function VC(t){const e=ee();return V(F(e,"/settings/appDescription"),t)}function YC(t){const e=ee();return V(F(e,"/settings/bulletinUrl"),t||"")}function GC(t,e){if(!t)return Promise.resolve();const n=F(ue,`userBookmarks/${t}`);return V(n,{bookId:e.bookId,chapter:e.chapter,updatedAt:Date.now()})}function QC(t,e){if(!t)return e(null),()=>{};const n=F(ue,`userBookmarks/${t}`),r=Se(n,i=>{e(i.val()||null)},i=>e(null));return()=>r()}async function KC(t,e,n){const r=ee(),i=F(r,`monthlyReports/${t}-${String(e).padStart(2,"0")}`);return await V(i,n),!0}async function Op(){const t=ee(),e=F(t,"monthlyReports"),r=(await he(e)).val()||{};return Object.keys(r).sort().reverse()}async function qC(t){const e=ee(),n=F(e,`monthlyReports/${t}`);return(await he(n)).val()||{}}async function XC(t){const e=ee(),n=F(e,`hallOfFame/${t}/monthlyResults`);return(await he(n)).val()||{}}/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oo(){return oo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oo.apply(this,arguments)}var qn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qn||(qn={}));const Bp="popstate";function JC(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:c=""}=Jr(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Wu("",{pathname:o,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let c=i.location.href,u=c.indexOf("#");a=u===-1?c:c.slice(0,u)}return a+"#"+(typeof s=="string"?s:ny(s))}function r(i,s){Ta(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return eE(e,n,r,t)}function qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ta(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZC(){return Math.random().toString(36).substr(2,8)}function zp(t,e){return{usr:t.state,key:t.key,idx:e}}function Wu(t,e,n,r){return n===void 0&&(n=null),oo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Jr(e):e,{state:n,key:e&&e.key||r||ZC()})}function ny(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Jr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function eE(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=qn.Pop,c=null,u=f();u==null&&(u=0,o.replaceState(oo({},o.state,{idx:u}),""));function f(){return(o.state||{idx:null}).idx}function d(){a=qn.Pop;let E=f(),g=E==null?null:E-u;u=E,c&&c({action:a,location:w.location,delta:g})}function h(E,g){a=qn.Push;let p=Wu(w.location,E,g);n&&n(p,E),u=f()+1;let y=zp(p,u),b=w.createHref(p);try{o.pushState(y,"",b)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(b)}s&&c&&c({action:a,location:w.location,delta:1})}function x(E,g){a=qn.Replace;let p=Wu(w.location,E,g);n&&n(p,E),u=f();let y=zp(p,u),b=w.createHref(p);o.replaceState(y,"",b),s&&c&&c({action:a,location:w.location,delta:0})}function v(E){let g=i.location.origin!=="null"?i.location.origin:i.location.href,p=typeof E=="string"?E:ny(E);return p=p.replace(/ $/,"%20"),qe(g,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,g)}let w={get action(){return a},get location(){return t(i,o)},listen(E){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Bp,d),c=E,()=>{i.removeEventListener(Bp,d),c=null}},createHref(E){return e(i,E)},createURL:v,encodeLocation(E){let g=v(E);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:x,go(E){return o.go(E)}};return w}var Lp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Lp||(Lp={}));function tE(t,e,n){return n===void 0&&(n="/"),nE(t,e,n,!1)}function nE(t,e,n,r){let i=typeof e=="string"?Jr(e):e,s=sy(i.pathname||"/",n);if(s==null)return null;let o=ry(t);rE(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=pE(s);a=fE(o[c],u,r)}return a}function ry(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let c={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(qe(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Or([r,c.relativePath]),f=n.concat(c);s.children&&s.children.length>0&&(qe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),ry(s.children,e,f,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:uE(u,s.index),routesMeta:f})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let c of iy(s.path))i(s,o,c)}),e}function iy(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=iy(r.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function rE(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:dE(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const iE=/^:[\w-]+$/,sE=3,oE=2,lE=1,aE=10,cE=-2,$p=t=>t==="*";function uE(t,e){let n=t.split("/"),r=n.length;return n.some($p)&&(r+=cE),e&&(r+=oE),n.filter(i=>!$p(i)).reduce((i,s)=>i+(iE.test(s)?sE:s===""?lE:aE),r)}function dE(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function fE(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",d=Wp({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),h=c.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=Wp({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Or([s,d.pathname]),pathnameBase:bE(Or([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=Or([s,d.pathnameBase]))}return o}function Wp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=hE(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,f,d)=>{let{paramName:h,isOptional:x}=f;if(h==="*"){let w=a[d]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const v=a[d];return x&&!v?u[h]=void 0:u[h]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function hE(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ta(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function pE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ta(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function sy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const mE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gE=t=>mE.test(t);function yE(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Jr(t):t,s;if(n)if(gE(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Ta(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=Up(n.substring(1),"/"):s=Up(n,e)}else s=e;return{pathname:s,search:SE(r),hash:wE(i)}}function Up(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function bc(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xE(t,e){let n=vE(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function _E(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Jr(t):(i=oo({},t),qe(!i.pathname||!i.pathname.includes("?"),bc("?","pathname","search",i)),qe(!i.pathname||!i.pathname.includes("#"),bc("#","pathname","hash",i)),qe(!i.search||!i.search.includes("#"),bc("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=yE(i,a),u=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const Or=t=>t.join("/").replace(/\/\/+/g,"/"),bE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),SE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,wE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function CE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const oy=["post","put","patch","delete"];new Set(oy);const EE=["get",...oy];new Set(EE);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lo(){return lo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lo.apply(this,arguments)}const Cf=_.createContext(null),kE=_.createContext(null),Ra=_.createContext(null),ja=_.createContext(null),Ji=_.createContext({outlet:null,matches:[],isDataRoute:!1}),ly=_.createContext(null);function Ia(){return _.useContext(ja)!=null}function Ef(){return Ia()||qe(!1),_.useContext(ja).location}function ay(t){_.useContext(Ra).static||_.useLayoutEffect(t)}function mn(){let{isDataRoute:t}=_.useContext(Ji);return t?zE():TE()}function TE(){Ia()||qe(!1);let t=_.useContext(Cf),{basename:e,future:n,navigator:r}=_.useContext(Ra),{matches:i}=_.useContext(Ji),{pathname:s}=Ef(),o=JSON.stringify(xE(i,n.v7_relativeSplatPath)),a=_.useRef(!1);return ay(()=>{a.current=!0}),_.useCallback(function(u,f){if(f===void 0&&(f={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let d=_E(u,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Or([e,d.pathname])),(f.replace?r.replace:r.push)(d,f.state,f)},[e,r,o,s,t])}function RE(t,e){return jE(t,e)}function jE(t,e,n,r){Ia()||qe(!1);let{navigator:i}=_.useContext(Ra),{matches:s}=_.useContext(Ji),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Ef(),f;if(e){var d;let E=typeof e=="string"?Jr(e):e;c==="/"||(d=E.pathname)!=null&&d.startsWith(c)||qe(!1),f=E}else f=u;let h=f.pathname||"/",x=h;if(c!=="/"){let E=c.replace(/^\//,"").split("/");x="/"+h.replace(/^\//,"").split("/").slice(E.length).join("/")}let v=tE(t,{pathname:x}),w=PE(v&&v.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:Or([c,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?c:Or([c,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),s,n,r);return e&&w?_.createElement(ja.Provider,{value:{location:lo({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:qn.Pop}},w):w}function IE(){let t=BE(),e=CE(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:i},n):null,s)}const AE=_.createElement(IE,null);class NE extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(Ji.Provider,{value:this.props.routeContext},_.createElement(ly.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function DE(t){let{routeContext:e,match:n,children:r}=t,i=_.useContext(Cf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(Ji.Provider,{value:e},r)}function PE(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let f=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);f>=0||qe(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let d=o[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=f),d.route.id){let{loaderData:h,errors:x}=n,v=d.route.loader&&h[d.route.id]===void 0&&(!x||x[d.route.id]===void 0);if(d.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((f,d,h)=>{let x,v=!1,w=null,E=null;n&&(x=a&&d.route.id?a[d.route.id]:void 0,w=d.route.errorElement||AE,c&&(u<0&&h===0?(LE("route-fallback",!1),v=!0,E=null):u===h&&(v=!0,E=d.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,h+1)),p=()=>{let y;return x?y=w:v?y=E:d.route.Component?y=_.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=f,_.createElement(DE,{match:d,routeContext:{outlet:f,matches:g,isDataRoute:n!=null},children:y})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?_.createElement(NE,{location:n.location,revalidation:n.revalidation,component:w,error:x,children:p(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):p()},null)}var cy=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(cy||{}),ql=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ql||{});function FE(t){let e=_.useContext(Cf);return e||qe(!1),e}function ME(t){let e=_.useContext(kE);return e||qe(!1),e}function OE(t){let e=_.useContext(Ji);return e||qe(!1),e}function uy(t){let e=OE(),n=e.matches[e.matches.length-1];return n.route.id||qe(!1),n.route.id}function BE(){var t;let e=_.useContext(ly),n=ME(ql.UseRouteError),r=uy(ql.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function zE(){let{router:t}=FE(cy.UseNavigateStable),e=uy(ql.UseNavigateStable),n=_.useRef(!1);return ay(()=>{n.current=!0}),_.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,lo({fromRouteId:e},s)))},[t,e])}const Hp={};function LE(t,e,n){!e&&!Hp[t]&&(Hp[t]=!0)}function $E(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Le(t){qe(!1)}function WE(t){let{basename:e="/",children:n=null,location:r,navigationType:i=qn.Pop,navigator:s,static:o=!1,future:a}=t;Ia()&&qe(!1);let c=e.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:c,navigator:s,static:o,future:lo({v7_relativeSplatPath:!1},a)}),[c,a,s,o]);typeof r=="string"&&(r=Jr(r));let{pathname:f="/",search:d="",hash:h="",state:x=null,key:v="default"}=r,w=_.useMemo(()=>{let E=sy(f,c);return E==null?null:{location:{pathname:E,search:d,hash:h,state:x,key:v},navigationType:i}},[c,f,d,h,x,v,i]);return w==null?null:_.createElement(Ra.Provider,{value:u},_.createElement(ja.Provider,{children:n,value:w}))}function UE(t){let{children:e,location:n}=t;return RE(Uu(e),n)}new Promise(()=>{});function Uu(t,e){e===void 0&&(e=[]);let n=[];return _.Children.forEach(t,(r,i)=>{if(!_.isValidElement(r))return;let s=[...e,i];if(r.type===_.Fragment){n.push.apply(n,Uu(r.props.children,s));return}r.type!==Le&&qe(!1),!r.props.index||!r.props.children||qe(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Uu(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const HE="6";try{window.__reactRouterVersion=HE}catch{}const VE="startTransition",Vp=ev[VE];function YE(t){let{basename:e,children:n,future:r,window:i}=t,s=_.useRef();s.current==null&&(s.current=JC({window:i,v5Compat:!0}));let o=s.current,[a,c]=_.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},f=_.useCallback(d=>{u&&Vp?Vp(()=>c(d)):c(d)},[c,u]);return _.useLayoutEffect(()=>o.listen(f),[o,f]),_.useEffect(()=>$E(r),[r]),_.createElement(WE,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var Yp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Yp||(Yp={}));var Gp;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Gp||(Gp={}));function Xn(t={}){const e={:0,:0,"(A)":0,"(B)":0,:0};Object.keys(t).forEach(s=>{const o=s.split("_");if(o.length<2)return;const a=o[1];e.hasOwnProperty(a)&&e[a]++});let n=0,r={...e};for(;r.>0;)n++,r.--;for(;r.>0&&r.>0;)n++,r.--,r.--;for(;r["(A)"]>0&&r["(B)"]>0&&r.>0;)n++,r["(A)"]--,r["(B)"]--,r.--;const i=Object.entries(r).filter(([s,o])=>o>0).map(([s,o])=>({name:s,count:o}));return{totalDok:n,fragments:i,remaining:r}}function GE({user:t}){const e=mn(),[n,r]=_.useState([]),[i,s]=_.useState(!1),[o,a]=_.useState(null);_.useEffect(()=>{const P=xC(r),I=ty(a);return()=>{typeof P=="function"&&P(),typeof I=="function"&&I()}},[]);const c=(n||[]).slice(0,20),u=new Date;u.setHours(0,0,0,0);const f=u.getTime(),d=(n||[]).filter(P=>(P.timestamp||0)>=f),h=i?d:c,x=(t==null?void 0:t.name)||"",[v,w]=_.useState(!1),[E,g]=_.useState(""),[p,y]=_.useState(null);_.useEffect(()=>{if(!t||!t.uid)return;const P=MC(t.uid,I=>{y(I||{})});return()=>{typeof P=="function"&&P()}},[t]);function b(){if(!t||!t.uid){alert("   .");return}if(!E){alert("   .");return}const P=` '${E}'() ?
(       .)`;window.confirm(P)&&FC(E,t.uid,t.name||"").then(()=>{alert(`${E}  .`),g("")})}function T(){!t||!t.uid||window.confirm("     ?")&&Sf(t.uid,null).then(()=>{alert(".")})}const S=Object.keys(p||{}),C=S.length>0;function j(P){if(!P)return"";const I=new Date(P),M=I.getFullYear(),A=String(I.getMonth()+1).padStart(2,"0"),H=String(I.getDate()).padStart(2,"0"),Q=String(I.getHours()).padStart(2,"0"),ie=String(I.getMinutes()).padStart(2,"0");return`${M}-${A}-${H} ${Q}:${ie}`}return l.jsxs("div",{style:{padding:25,minHeight:"100vh",background:"#E5F3E6",color:"#034732"},children:[l.jsx("h1",{style:{fontSize:32,marginBottom:10,textAlign:"center"},children:" "}),l.jsxs("p",{style:{textAlign:"center",marginBottom:20},children:[", ",x,""]}),!t&&l.jsxs("p",{style:{textAlign:"center",marginBottom:20},children:[" ",l.jsx("button",{onClick:()=>e("/login"),style:{textDecoration:"underline",cursor:"pointer",background:"none",border:"none",padding:0,color:"#0B8457"},children:""}),"  ."]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:30},children:[l.jsx("button",{style:Ot("#1B9C5A"),onClick:()=>e("/"),children:" (40)"}),l.jsx("button",{style:Ot("#1B9C5A"),onClick:()=>e("/"),children:" (30)"}),l.jsx("button",{style:Ot("#136F63"),onClick:()=>e("/A"),children:" A(15)"}),l.jsx("button",{style:Ot("#136F63"),onClick:()=>e("/B"),children:" B(15)"}),l.jsx("button",{style:Ot("#136F63"),onClick:()=>e("/"),children:" (9)"}),l.jsx("button",{style:Ot("#FF9F1C"),onClick:()=>e("/"),children:"  "}),l.jsx("button",{style:Ot("#0B4F6C"),onClick:()=>e("/"),children:" (5)"}),l.jsx("button",{style:Ot("#0B4F6C"),onClick:()=>e("/"),children:" (9)"}),l.jsx("button",{style:Ot("#0F3455"),onClick:()=>e("/records"),children:"  "}),l.jsx("button",{style:Ot("#0F3455"),onClick:()=>{t!=null&&t.isAdmin?e("/admin"):e("/admin-login")},children:"  "})]}),l.jsx("button",{style:{...Ot("#0B4F6C"),marginBottom:8},onClick:()=>w(P=>!P),children:"   "}),v&&l.jsxs("div",{style:{marginTop:4,marginBottom:24,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)"},children:[l.jsx("h3",{style:{marginTop:0,marginBottom:8},children:"   "}),l.jsx("p",{style:{fontSize:12,color:"#555",marginBottom:12},children:"     . (     )"}),l.jsxs("div",{style:{display:"flex",gap:8,marginBottom:12},children:[l.jsxs("select",{value:E,onChange:P=>g(P.target.value),style:{flex:1,padding:8,borderRadius:8,border:"1px solid #ccc"},children:[l.jsx("option",{value:"",children:" "}),l.jsx("option",{value:"",children:"(40)"}),l.jsx("option",{value:"",children:"(30)"}),l.jsx("option",{value:"(A)",children:"A(15)"}),l.jsx("option",{value:"(B)",children:"B(15)"}),l.jsx("option",{value:"",children:"(9)"}),l.jsx("option",{value:"",children:"(9)"}),l.jsx("option",{value:"",children:"(5)"})]}),l.jsx("button",{type:"button",onClick:b,style:{padding:"0 20px",borderRadius:8,border:"none",background:"#0B8457",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:"()"})]}),C?l.jsxs("div",{style:{marginTop:16,borderTop:"1px solid #eee",paddingTop:10},children:[l.jsx("div",{style:{fontSize:13,fontWeight:"bold",color:"#333",marginBottom:6},children:"   "}),l.jsx("div",{style:{marginBottom:10,color:"#0B8457",fontWeight:600},children:S.map(P=>Ve(P)).join(", ")}),l.jsx("button",{onClick:T,style:{width:"100%",padding:"10px",borderRadius:8,border:"1px solid #ccc",background:"#f5f5f5",color:"#333",cursor:"pointer",fontWeight:"bold"},children:" "})]}):l.jsx("div",{style:{fontSize:13,color:"#999",marginTop:10},children:"  ."})]}),l.jsxs("div",{style:{marginTop:10,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 10px rgba(0,0,0,0.06)"},children:[o&&l.jsxs("div",{style:{marginBottom:12,padding:12,borderRadius:8,background:"#FFF3CD",border:"1px solid #FFEEBA"},children:[l.jsxs("div",{style:{fontWeight:"bold",marginBottom:4},children:["<>"," ",o.title||""]}),l.jsx("div",{style:{fontSize:14,whiteSpace:"pre-line"},children:o.content||""})]}),l.jsx("button",{style:{...Ot("#1E7F74"),marginBottom:12,padding:14,fontSize:16},onClick:()=>e("/crew-members"),children:"   "}),l.jsx("h3",{style:{marginTop:0,marginBottom:10},children:"  "}),h.length===0&&l.jsx("p",{style:{color:"#666"},children:"   .       ."}),l.jsxs("div",{style:{display:"flex",gap:8,marginBottom:8},children:[l.jsx("button",{onClick:()=>s(P=>!P),style:{padding:"8px 12px",borderRadius:10,border:"1px solid #0B8457",background:i?"#0B8457":"#fff",color:i?"#fff":"#0B8457",cursor:"pointer",fontWeight:700},children:i?"":" ()"}),i&&l.jsx("div",{style:{fontSize:12,color:"#555",alignSelf:"center"},children:"    ."})]}),l.jsx("ul",{style:{paddingLeft:18},children:h.map(P=>l.jsxs("li",{style:{marginBottom:4},children:[l.jsxs("span",{style:{fontWeight:"bold"},children:["[",P.crew,"] ",P.user]}),": ",P.text,P.timestamp&&l.jsxs("span",{style:{fontSize:12,color:"#555",marginLeft:4},children:["(",j(P.timestamp),")"]})]},P.id))})]})]})}function Ot(t){return{width:"100%",height:63,padding:"0 6px",borderRadius:12,border:"none",fontSize:17,fontWeight:"bold",background:t,color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",wordBreak:"keep-all",lineHeight:1.2}}function sn(t,e){const n=[],r=new Date(t,e,0).getDate();for(let i=1;i<=r;i++){const s=`${t}-${String(e).padStart(2,"0")}-${String(i).padStart(2,"0")}`;n.push(s)}return n}function QE(){const[t,e]=_.useState(null),[n,r]=_.useState(null),[i,s]=_.useState({}),[o,a]=_.useState([]),[c,u]=_.useState(null),[f,d]=_.useState(null),[h,x]=_.useState([]),[v,w]=_.useState({}),E=_.useRef(new Set);_.useRef(new Set),_.useEffect(()=>{const S=new Date().getFullYear(),C=F(ue,"settings/currentHallOfFameYear"),j=Se(C,async P=>{const I=P.val();if(typeof I!="number"){await V(C,S);return}if(I!==S){await V(C,S);return}u(I)});return()=>{typeof j=="function"&&j()}},[]),_.useEffect(()=>{const S=F(ue,"hallOfFame"),C=F(ue,"hallOfFame/monthly"),j=[],P=(A,H)=>{const Q=new Date().getFullYear(),ie=[...A||[],...H||[],Q].filter(O=>Number.isFinite(O));return Array.from(new Set(ie)).sort((O,Y)=>Y-O)};let I=[],M=[];return j.push(Se(S,A=>{const H=A.val()||{};I=Object.keys(H).map(Q=>parseInt(Q,10)).filter(Q=>Number.isFinite(Q)),x(P(I,M))})),j.push(Se(C,A=>{const H=A.val()||{};M=Object.keys(H).map(Q=>parseInt(Q,10)).filter(Q=>Number.isFinite(Q)),x(P(I,M))})),()=>j.forEach(A=>typeof A=="function"?A():null)},[]),_.useEffect(()=>{const S=ka(C=>w(C||{}));return()=>{typeof S=="function"&&S()}},[]),_.useEffect(()=>{c&&d(S=>S??c)},[c]),_.useEffect(()=>{if(!f)return;e(null),r(null);const S=SC(f,j=>{e(j||null)}),C=X0(f,j=>{r(j||null)});return()=>{typeof S=="function"&&S(),typeof C=="function"&&C()}},[f]),_.useEffect(()=>{if(!c||!f)return;if(c!==f){s({});return}const S=new Date,C=S.getFullYear(),j=S.getMonth()+1,P=sn(C,j),I=`${C}-${String(j).padStart(2,"0")}-${String(S.getDate()).padStart(2,"0")}`,M=P.filter(ie=>ie<=I),A={gold:[""],silver:[""],bronze:fe.filter(ie=>String(ie).includes("")||String(ie).includes(""))},H=F(ue,"crews"),Q=Se(H,ie=>{const O=ie.val()||{},Y={gold:{challengers:0,success:0,fail:0},silver:{challengers:0,success:0,fail:0},bronze:{challengers:0,success:0,fail:0}};if(["gold","silver","bronze"].forEach(N=>{(A[N]||[]).forEach(W=>{var Z;const q=((Z=O==null?void 0:O[W])==null?void 0:Z.users)||{};Object.entries(q).forEach(([De,we])=>{we&&we.name,Y[N].challengers+=1;const Oe=we&&we.checks||{};M.every(ke=>!!Oe[ke])?Y[N].success+=1:Y[N].fail+=1})})}),s(Y),S.getDate()===1){const N=new Date(C,j-2,1),B=N.getFullYear(),W=N.getMonth()+1,q=String(W).padStart(2,"0"),Z=`${B}-${q}`;if(!E.current.has(Z)){E.current.add(Z);const De=sn(B,W),we={gold:[],silver:[],bronze:[]};["gold","silver","bronze"].forEach(Oe=>{(A[Oe]||[]).forEach(ke=>{var _r;const xr=((_r=O==null?void 0:O[ke])==null?void 0:_r.users)||{};Object.entries(xr).forEach(([Zr,Mn])=>{const br=Mn&&Mn.name||Zr,Zi=Mn&&Mn.checks||{};De.every(Sr=>!!Zi[Sr])&&we[Oe].push({name:br,crew:ke})})})}),(async()=>{const Oe=[];["gold","silver","bronze"].forEach(Xe=>{(we[Xe]||[]).forEach(ke=>{Oe.push({uid:ke.name,name:ke.name,crew:ke.crew,medal:Xe})})}),Oe.length>0&&await J0(B,W,Oe)})().catch(()=>{})}}});return()=>{typeof Q=="function"&&Q()}},[c,f]),_.useEffect(()=>{if(!f){a([]);return}const S=t&&t.monthlyResults?t.monthlyResults:null,C={};S&&typeof S=="object"?Object.entries(S).forEach(([M,A])=>{!A||typeof A!="object"||(C[M]={gold:Array.isArray(A.gold)?A.gold.filter(Boolean):[],silver:Array.isArray(A.silver)?A.silver.filter(Boolean):[],bronze:Array.isArray(A.bronze)?A.bronze.filter(Boolean):[]})}):n&&typeof n=="object"&&Object.entries(n).forEach(([M,A])=>{const H=String(M).padStart(2,"0");if(!A||typeof A!="object")return;const Q=ie=>!ie||typeof ie!="object"?[]:Object.values(ie).map(O=>O==null?void 0:O.name).filter(Boolean);C[H]={gold:Q(A.gold),silver:Q(A.silver),bronze:Q(A.bronze)}});const j={},P=(M,A)=>{if(!M)return;const H=typeof M=="string"?M:M.name;H&&(j[H]||(j[H]={name:H,gold:0,silver:0,bronze:0,points:0}),A==="gold"&&(j[H].gold+=1,j[H].points+=3),A==="silver"&&(j[H].silver+=1,j[H].points+=2),A==="bronze"&&(j[H].bronze+=1,j[H].points+=1))};Object.values(C).forEach(M=>{(M.gold||[]).forEach(A=>P(A,"gold")),(M.silver||[]).forEach(A=>P(A,"silver")),(M.bronze||[]).forEach(A=>P(A,"bronze"))});const I=Object.values(j).map(M=>{let A=v[M.name];A||(A=Object.values(v).find(Q=>Q.name===M.name));const H=Xn((A==null?void 0:A.earnedMedals)||{});return{...M,totalDok:H.totalDok}});I.sort((M,A)=>A.totalDok!==M.totalDok?A.totalDok-M.totalDok:A.points!==M.points?A.points-M.points:A.gold!==M.gold?A.gold-M.gold:A.silver!==M.silver?A.silver-M.silver:A.bronze!==M.bronze?A.bronze-M.bronze:String(M.name).localeCompare(String(A.name),"ko")),a(I.slice(0,10))},[t,n,f,v]);const g=_.useMemo(()=>[1,2,3,4,5,6,7,8,9,10,11,12],[]),[p,y]=_.useState(new Date().getMonth()+1),b=_.useMemo(()=>{if(!(t!=null&&t.monthlyResults))return null;const S=String(p).padStart(2,"0");return t.monthlyResults[S]||null},[t,p]),T=_.useMemo(()=>(b==null?void 0:b.dokAchievers)||[],[b]);return l.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0F172A 0%, #1E293B 100%)",color:"#F8FAFC",padding:"40px 20px",fontFamily:"'Outfit', 'Roboto', sans-serif"},children:l.jsxs("div",{style:{maxWidth:800,margin:"0 auto"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:40},children:[l.jsx("h1",{style:{fontSize:42,fontWeight:900,background:"linear-gradient(to right, #F59E0B, #FBBF24, #F59E0B)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",letterSpacing:-1,marginBottom:10},children:"  "}),l.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:15},children:[l.jsx("select",{value:f||"",onChange:S=>d(Number(S.target.value)),style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"#fff",padding:"8px 16px",borderRadius:12,fontSize:18,fontWeight:700,cursor:"pointer"},children:h.map(S=>l.jsxs("option",{value:S,style:{color:"#000"},children:[S,""]},S))}),l.jsx("div",{style:{fontSize:20,color:"#94A3B8",fontWeight:500},children:"  "})]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:30},children:[l.jsxs("section",{style:{background:"rgba(255,255,255,0.03)",borderRadius:24,padding:30,border:"1px solid rgba(255,255,255,0.05)",boxShadow:"0 20px 50px rgba(0,0,0,0.3)"},children:[l.jsxs("h2",{style:{fontSize:24,fontWeight:800,marginBottom:5,display:"flex",alignItems:"center",gap:10},children:[l.jsx("span",{style:{color:"#F59E0B"},children:""})," ",f,"   (TOP 10)"]}),l.jsx("p",{style:{fontSize:14,color:"#94A3B8",marginBottom:20,marginLeft:34},children:"  -   "}),o.length===0?l.jsx("p",{style:{color:"#64748B",textAlign:"center"},children:"   ."}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:o.map((S,C)=>l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px 20px",background:C===0?"linear-gradient(90deg, rgba(245,158,11,0.15) 0%, rgba(245,158,11,0.05) 100%)":"rgba(255,255,255,0.02)",borderRadius:16,border:C===0?"1px solid rgba(245,158,11,0.3)":"1px solid rgba(255,255,255,0.05)"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:15},children:[l.jsx("div",{style:{width:34,height:34,display:"flex",alignItems:"center",justifyContent:"center",fontSize:C<3?24:14,color:C<3?"inherit":"#64748B",fontWeight:900,background:C<3?"transparent":"rgba(255,255,255,0.05)",borderRadius:8},children:C===0?"":C===1?"":C===2?"":C+1}),l.jsx("div",{style:{fontSize:18,fontWeight:C<3?800:600},children:S.name})]}),l.jsx("div",{style:{display:"flex",alignItems:"center",gap:15},children:l.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[l.jsxs("div",{style:{display:"flex",gap:4},children:[S.gold>0&&l.jsxs("span",{children:["",S.gold]}),S.silver>0&&l.jsxs("span",{children:["",S.silver]}),S.bronze>0&&l.jsxs("span",{children:["",S.bronze]})]}),(()=>{let j=v[S.name];j||(j=Object.values(v).find(I=>I.name===S.name));const P=Xn((j==null?void 0:j.earnedMedals)||{});return P.totalDok>0?l.jsxs("span",{style:{fontSize:13,fontWeight:800,color:"#E9C46A",background:"rgba(233,196,106,0.1)",padding:"2px 8px",borderRadius:6},children:[" ",P.totalDok,""]}):null})()]})})]},S.name))})]}),l.jsxs("section",{children:[l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:20,justifyContent:"center"},children:g.map(S=>l.jsxs("button",{onClick:()=>y(S),style:{padding:"8px 14px",borderRadius:10,border:"none",background:p===S?"#F59E0B":"rgba(255,255,255,0.05)",color:p===S?"#000":"#94A3B8",fontWeight:800,cursor:"pointer",transition:"0.2s"},children:[S,""]},S))}),l.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:24,padding:30,border:"1px solid rgba(255,255,255,0.05)"},children:[l.jsxs("h3",{style:{fontSize:22,fontWeight:800,marginBottom:25,textAlign:"center"},children:[" ",p,"  "]}),b?l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:30},children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:20},children:[l.jsx(Sc,{title:"  ()",items:b.gold,color:"#F59E0B"}),l.jsx(Sc,{title:"  ()",items:b.silver,color:"#94A3B8"}),l.jsx(Sc,{title:"  (/)",items:b.bronze,color:"#B45309"})]}),l.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.05)",paddingTop:20},children:[l.jsx("h4",{style:{fontSize:18,fontWeight:800,marginBottom:15,color:"#E9C46A"},children:"   "}),l.jsx("p",{style:{fontSize:14,color:"#94A3B8",marginBottom:12},children:"*    1  ."}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:10},children:T.length===0?l.jsx("span",{style:{color:"#64748B",fontSize:14},children:"    ."}):T.map((S,C)=>l.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(233,196,106,0.2) 0%, rgba(233,196,106,0.05) 100%)",padding:"10px 18px",borderRadius:12,border:"1px solid rgba(233,196,106,0.3)",display:"flex",alignItems:"center",gap:8},children:[l.jsx("span",{style:{fontSize:16,fontWeight:800,color:"#E9C46A"},children:S.name}),l.jsxs("span",{style:{fontSize:12,fontWeight:900,background:"#E9C46A",color:"#000",padding:"2px 6px",borderRadius:4},children:[S.dokCount," "]})]},C))})]})]}):l.jsx("div",{style:{textAlign:"center",padding:"40px 0",color:"#64748B"},children:"    ."})]})]})]}),l.jsx("div",{style:{marginTop:50,textAlign:"center"},children:l.jsx("button",{onClick:()=>window.history.back(),style:{padding:"12px 30px",borderRadius:999,border:"1px solid rgba(255,255,255,0.2)",background:"transparent",color:"#fff",fontWeight:700,cursor:"pointer"},children:"  "})})]})})}function Sc({title:t,items:e,color:n}){return!e||e.length===0?null:l.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",padding:20,borderRadius:18,border:`1px solid ${n}33`},children:[l.jsx("div",{style:{fontSize:16,fontWeight:800,color:n,marginBottom:12,borderBottom:`1px solid ${n}22`,paddingBottom:8},children:t}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6},children:e.map((r,i)=>{const s=typeof r=="string"?r:r.name,o=typeof r=="string"?"":r.crew;return l.jsxs("div",{style:{fontSize:14,fontWeight:600},children:[s," ",o&&l.jsxs("span",{style:{fontSize:11,color:"#64748B",fontWeight:400},children:["(",o.replace("",""),")"]})]},i)})})]})}const KE=[{day:1,mainTitle:"  ",sections:[{subTitle:" ",bibleRef:" 1-3"},{subTitle:" ,  ",bibleRef:" 4-5"},{subTitle:"   ",bibleRef:" 6-9"}]},{day:2,mainTitle:"  ",sections:[{subTitle:"   ",bibleRef:" 11-13"},{subTitle:"   ",bibleRef:" 14-16"},{subTitle:"    ",bibleRef:" 17-18"}]},{day:3,mainTitle:"   ",sections:[{subTitle:"   ",bibleRef:" 19-21"},{subTitle:"    ",bibleRef:" 22-24"},{subTitle:"    ",bibleRef:" 27-28"}]},{day:4,mainTitle:"  ",sections:[{subTitle:"    ",bibleRef:" 29-31"},{subTitle:"    ",bibleRef:" 32-33"},{subTitle:"    ",bibleRef:" 35-37"}]},{day:5,mainTitle:"   ",sections:[{subTitle:"   ",bibleRef:" 38-39"},{subTitle:"    ",bibleRef:" 40-41"},{subTitle:"   ",bibleRef:" 42-44"}]},{day:6,mainTitle:" ",sections:[{subTitle:"    ",bibleRef:" 45-47"},{subTitle:"   ",bibleRef:" 48-50"},{subTitle:"   ",bibleRef:" 1-3"}]},{day:7,mainTitle:"   ",sections:[{subTitle:"    ",bibleRef:" 4-7"},{subTitle:"    ",bibleRef:" 8-11"},{subTitle:"  ",bibleRef:" 12"}]},{day:8,mainTitle:"   ",sections:[{subTitle:"    ",bibleRef:" 13-16"},{subTitle:"   ",bibleRef:" 17-20"},{subTitle:" ",bibleRef:" 24"}]},{day:9,mainTitle:"  ",sections:[{subTitle:"   ",bibleRef:" 32-34"},{subTitle:"  ",bibleRef:" 40"},{subTitle:"   ",bibleRef:" 11, 16, 19, 23,  6"}]},{day:10,mainTitle:"  ",sections:[{subTitle:"   ",bibleRef:" 11-12"},{subTitle:"12  40 ",bibleRef:" 13-14"},{subTitle:"     ",bibleRef:" 16-17, 20"}]},{day:11,mainTitle:"  ",sections:[{subTitle:"   ",bibleRef:" 21-24"},{subTitle:"   ",bibleRef:" 6, 8, 30, 34"},{subTitle:" ",bibleRef:" 1"}]},{day:12,mainTitle:"  ",sections:[{subTitle:"  ",bibleRef:" 2-8"},{subTitle:"    ",bibleRef:" 9-11"},{subTitle:"  ",bibleRef:" 14, 20"}]},{day:13,mainTitle:"  ",sections:[{subTitle:"    ",bibleRef:" 23-24,  2"},{subTitle:", , ",bibleRef:" 4, 6-7, 13-16"},{subTitle:"  ",bibleRef:" 1-4"}]},{day:14,mainTitle:"  ",sections:[{subTitle:"   ",bibleRef:" 1-3"},{subTitle:"   ",bibleRef:" 4-7"},{subTitle:"    ",bibleRef:" 8-10"}]},{day:15,mainTitle:"   ",sections:[{subTitle:"   ",bibleRef:" 13, 15-16"},{subTitle:"    ",bibleRef:" 17-19"},{subTitle:"    ",bibleRef:" 20, 24, 26"}]},{day:16,mainTitle:"  ",sections:[{subTitle:"   ",bibleRef:" 31,  1-2, 5"},{subTitle:"   ",bibleRef:" 6-7"},{subTitle:"   ",bibleRef:" 9-10"}]},{day:17,mainTitle:"  ",sections:[{subTitle:"    ",bibleRef:" 11-12"},{subTitle:"   ",bibleRef:" 13, 15-18"},{subTitle:"   ",bibleRef:" 24,  22, 29"}]},{day:18,mainTitle:"  :   ",sections:[{subTitle:"   ",bibleRef:" 3-6, 8"},{subTitle:":  ",bibleRef:" 1-4"}]},{day:19,mainTitle:" :  ,  ",sections:[{subTitle:":     ",bibleRef:" 1-3, 12"},{subTitle:":  ",bibleRef:" 2"},{subTitle:":   ",bibleRef:" 1-2, 38, 42"}]},{day:20,mainTitle:" ",sections:[{subTitle:":     ",bibleRef:" 1, 19, 23, 51, 103, 150"},{subTitle:"   ",bibleRef:" 11-12"},{subTitle:" ",bibleRef:" 13"}]},{day:21,mainTitle:"  :   ",sections:[{subTitle:"   ",bibleRef:" 17-18"},{subTitle:"  ",bibleRef:" 19"},{subTitle:"   ",bibleRef:" 2, 4-5, 6"}]},{day:22,mainTitle:"  :   ",sections:[{subTitle:":   ",bibleRef:" 1-4"},{subTitle:":  ",bibleRef:" 5, 9"},{subTitle:":   ",bibleRef:" 1-3"},{subTitle:" ",bibleRef:" 17"}]},{day:23,mainTitle:" ",sections:[{subTitle:"   ",bibleRef:" 18-20"},{subTitle:"   ",bibleRef:" 1, 6-7, 9, 11, 36"}]},{day:24,mainTitle:" 2 :   ",sections:[{subTitle:"  ",bibleRef:" 40, 43"},{subTitle:"  ",bibleRef:" 53, 55"},{subTitle:"  ",bibleRef:" 60-61, 65-66"}]},{day:25,mainTitle:"   :  ",sections:[{subTitle:"   ",bibleRef:" 21-23"},{subTitle:"   ",bibleRef:" 1, 7"},{subTitle:"  ",bibleRef:" 1-3,  3"}]},{day:26,mainTitle:"   :  ",sections:[{subTitle:"   ",bibleRef:" 24-25"},{subTitle:"    ",bibleRef:" 29, 31, 33, 52"},{subTitle:":   ",bibleRef:" 3"}]},{day:27,mainTitle:"  :  ",sections:[{subTitle:"   ",bibleRef:" 1, 3, 6, 9"},{subTitle:":     ",bibleRef:" 1, 36, 37, 47"}]},{day:28,mainTitle:"   :  ",sections:[{subTitle:"  1 ",bibleRef:" 1, 3-4"},{subTitle:"   ",bibleRef:" 1-2,  4, 9"},{subTitle:" ",bibleRef:" 6"}]},{day:29,mainTitle:"  :   ",sections:[{subTitle:"   ",bibleRef:" 1-9"},{subTitle:" 2   ",bibleRef:" 7, 9-10"}]},{day:30,mainTitle:"  :   ",sections:[{subTitle:"  ",bibleRef:" 1-4, 6"},{subTitle:"   ",bibleRef:" 8, 13"},{subTitle:":   ",bibleRef:" 1, 3-4"}]}],qE=[{day:1,mainTitle:" ",sections:[{subTitle:"  ",bibleRef:" 1"},{subTitle:"  ",bibleRef:" 1-2"},{subTitle:" ",bibleRef:" 2"}]},{day:2,mainTitle:" ",sections:[{subTitle:"  ",bibleRef:" 3-4"},{subTitle:"   ",bibleRef:" 2"},{subTitle:" ",bibleRef:" 3"}]},{day:3,mainTitle:" ",sections:[{subTitle:" ",bibleRef:" 4"},{subTitle:"   ",bibleRef:" 5"},{subTitle:"  ",bibleRef:" 5"}]},{day:4,mainTitle:"",sections:[{subTitle:"  ",bibleRef:" 5"},{subTitle:", , ",bibleRef:" 6"},{subTitle:"  ",bibleRef:" 7"},{subTitle:" ",bibleRef:" 7"}]},{day:5,mainTitle:" ",sections:[{subTitle:" ",bibleRef:" 4"},{subTitle:"   ",bibleRef:" 5"},{subTitle:"  ",bibleRef:" 10"},{subTitle:"    ",bibleRef:" 11-12"}]},{day:6,mainTitle:"  ",sections:[{subTitle:"    ",bibleRef:" 13"},{subTitle:"   ",bibleRef:" 14"},{subTitle:" ",bibleRef:" 6"}]},{day:7,mainTitle:" ",sections:[{subTitle:" ",bibleRef:" 16"},{subTitle:" ",bibleRef:" 17"},{subTitle:"   ",bibleRef:" 9"}]},{day:8,mainTitle:"  ",sections:[{subTitle:"  ",bibleRef:" 10"},{subTitle:" , , ",bibleRef:" 15"},{subTitle:"  ",bibleRef:" 16"}]},{day:9,mainTitle:" ",sections:[{subTitle:" ",bibleRef:" 11"},{subTitle:"  ",bibleRef:" 12"},{subTitle:" ",bibleRef:" 19"},{subTitle:"   ",bibleRef:" 21"}]},{day:10,mainTitle:"  ",sections:[{subTitle:"   ",bibleRef:" 22"},{subTitle:"   ",bibleRef:" 23"},{subTitle:" ",bibleRef:" 24"},{subTitle:"   ",bibleRef:" 25"}]},{day:11,mainTitle:" ",sections:[{subTitle:"  ",bibleRef:" 13"},{subTitle:"  ",bibleRef:" 14"},{subTitle:" ",bibleRef:" 15"},{subTitle:"   ",bibleRef:" 16-17"}]},{day:12,mainTitle:"  ",sections:[{subTitle:"  ",bibleRef:" 26"},{subTitle:"  ",bibleRef:" 27"}]},{day:13,mainTitle:" ",sections:[{subTitle:"   ",bibleRef:" 20"},{subTitle:"  ",bibleRef:" 21"},{subTitle:"  ",bibleRef:" 24"},{subTitle:" ",bibleRef:" 28"}]},{day:14,mainTitle:" ",sections:[{subTitle:"  ",bibleRef:" 1"},{subTitle:"  ",bibleRef:" 2"},{subTitle:"  ",bibleRef:" 3"},{subTitle:"  ",bibleRef:" 4"}]},{day:15,mainTitle:" ",sections:[{subTitle:" ",bibleRef:" 5"},{subTitle:"   ",bibleRef:" 6-7"},{subTitle:"  ",bibleRef:" 8"},{subTitle:" ",bibleRef:" 9"}]},{day:16,mainTitle:"  ",sections:[{subTitle:"  ",bibleRef:" 10"},{subTitle:"   ",bibleRef:" 11"},{subTitle:":  ",bibleRef:" 1-2"}]},{day:17,mainTitle:"1   :  ",sections:[{subTitle:"  ",bibleRef:" 13"},{subTitle:" ",bibleRef:" 14"},{subTitle:":   ",bibleRef:" 1-3"}]},{day:18,mainTitle:"2   :  ",sections:[{subTitle:" ",bibleRef:" 15"},{subTitle:"  ",bibleRef:" 16"},{subTitle:"  ",bibleRef:" 17"},{subTitle:":  ",bibleRef:" 4"}]},{day:19,mainTitle:"3   :   ",sections:[{subTitle:"  ",bibleRef:" 18"},{subTitle:"  ",bibleRef:" 19"},{subTitle:":  ",bibleRef:" 1, 13, 15"}]},{day:20,mainTitle:" :   ",sections:[{subTitle:"  ",bibleRef:" 20"},{subTitle:":  ",bibleRef:" 4-5"},{subTitle:"   ",bibleRef:" 12"}]},{day:21,mainTitle:" 1 :  ",sections:[{subTitle:"   ",bibleRef:" 1-2"},{subTitle:"   ",bibleRef:" 3"},{subTitle:"  ",bibleRef:" 4-5"}]},{day:22,mainTitle:" 2 :  ",sections:[{subTitle:"   ",bibleRef:" 6"},{subTitle:"   ",bibleRef:" 8"},{subTitle:"    ",bibleRef:" 12"}]},{day:23,mainTitle:"  :  ",sections:[{subTitle:"   ",bibleRef:" 21-22"},{subTitle:"    ",bibleRef:" 23"},{subTitle:"   ",bibleRef:" 26"}]},{day:24,mainTitle:"   :  ",sections:[{subTitle:"  ",bibleRef:" 27"},{subTitle:"   ",bibleRef:" 28"},{subTitle:":   ",bibleRef:" 1, 3"}]},{day:25,mainTitle:"  :  ",sections:[{subTitle:":    ",bibleRef:" 1-2"},{subTitle:" ",bibleRef:" 6"},{subTitle:":  ",bibleRef:" 1"}]},{day:26,mainTitle:" :  ",sections:[{subTitle:"  ",bibleRef:" 1"},{subTitle:" ",bibleRef:" 2"},{subTitle:" ",bibleRef:" 3"},{subTitle:"    ",bibleRef:" 4"}]},{day:27,mainTitle:"  :   ",sections:[{subTitle:":  ",bibleRef:" 6"},{subTitle:":    ",bibleRef:" 1-2"},{subTitle:"   ",bibleRef:" 4"}]},{day:28,mainTitle:" :   ",sections:[{subTitle:"  ",bibleRef:" 1"},{subTitle:"  ",bibleRef:" 4"},{subTitle:"  ",bibleRef:" 11"},{subTitle:"    ",bibleRef:" 12"}]},{day:29,mainTitle:" :  ",sections:[{subTitle:":  ",bibleRef:" 1"},{subTitle:":   ",bibleRef:" 1"},{subTitle:" ",bibleRef:" 4"},{subTitle:":   ",bibleRef:" 3-5"}]},{day:30,mainTitle:" :  ",sections:[{subTitle:" ",bibleRef:" 1"},{subTitle:" ",bibleRef:" 4"},{subTitle:"   ",bibleRef:" 21"},{subTitle:"   ",bibleRef:" 22"}]}],Aa=[{name:"",chapters:50},{name:"",chapters:40},{name:"",chapters:27},{name:"",chapters:36},{name:"",chapters:34},{name:"",chapters:24},{name:"",chapters:21},{name:"",chapters:4},{name:"",chapters:31},{name:"",chapters:24},{name:"",chapters:22},{name:"",chapters:25},{name:"",chapters:29},{name:"",chapters:36},{name:"",chapters:10},{name:"",chapters:13},{name:"",chapters:10},{name:"",chapters:42},{name:"",chapters:150},{name:"",chapters:31},{name:"",chapters:12},{name:"",chapters:8},{name:"",chapters:66},{name:"",chapters:52},{name:"",chapters:5},{name:"",chapters:48},{name:"",chapters:12},{name:"",chapters:14},{name:"",chapters:3},{name:"",chapters:9},{name:"",chapters:1},{name:"",chapters:4},{name:"",chapters:7},{name:"",chapters:3},{name:"",chapters:3},{name:"",chapters:3},{name:"",chapters:2},{name:"",chapters:14},{name:"",chapters:4},{name:"",chapters:28},{name:"",chapters:16},{name:"",chapters:24},{name:"",chapters:21},{name:"",chapters:28},{name:"",chapters:16},{name:"",chapters:16},{name:"",chapters:13},{name:"",chapters:6},{name:"",chapters:6},{name:"",chapters:4},{name:"",chapters:4},{name:"",chapters:5},{name:"",chapters:3},{name:"",chapters:6},{name:"",chapters:4},{name:"",chapters:3},{name:"",chapters:1},{name:"",chapters:13},{name:"",chapters:5},{name:"",chapters:5},{name:"",chapters:3},{name:"1",chapters:5},{name:"2",chapters:1},{name:"3",chapters:1},{name:"",chapters:1},{name:"",chapters:22}],XE=Aa.slice(0,39),dy=Aa.slice(39),fy=XE.reduce((t,e)=>t+e.chapters,0),hy=dy.reduce((t,e)=>t+e.chapters,0),JE=fy+hy,ZE=461,ek=468;function tk(t){if(t<=0)return[];if(t===1)return[Array.from({length:31},(s,o)=>o+1)];const n=[],r=Math.max(0,t-1);for(let s=1;s<=r;s++)n.push([s]);const i=[];for(let s=r+1;s<=31;s++)i.push(s);return n.push(i),n}const nk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",1:"",2:"",3:"",:"",:""};function Qp(t){return nk[t]||t}function rk(t){return Aa.find(e=>e.name===t)}function ik(t,e){const n=[];for(let r=1;r<=e;r++)n.push({book:t,chapter:r});return n}function sk(t){const e=[];return t.forEach(n=>{n&&e.push(...ik(n.name,n.chapters))}),e}function Kp(t){if(!t||t.length===0)return"";const e=[];let n={book:t[0].book,start:t[0].chapter,end:t[0].chapter};for(let i=1;i<t.length;i++){const s=t[i];s.book===n.book&&s.chapter===n.end+1?n.end=s.chapter:(e.push(n),n={book:s.book,start:s.chapter,end:s.chapter})}return e.push(n),e.map(i=>i.start===i.end?`${i.book} ${i.start}`:`${i.book} ${i.start}~${i.end}`).join(" / ")}function ok(t,e){const n=Math.floor(t/e);let r=t%e;const i=[];for(let s=0;s<e;s++)i.push(n+(r>0?1:0)),r>0&&r--;return i}function lk(t,e){const n=e.length,r=ok(t.length,n);let i=0;const s=[];for(let o=0;o<n;o++){const a=r[o],c=t.slice(i,i+a);i+=a,s.push({date:e[o],items:c})}return s}const py=["","","","","","","","","","","","","","",""],my=["","","","","","","","","","","","","","","","","","","","","","",""],ak=[...py,...my],qp=[...Aa.filter(t=>t.name!=="").map(t=>t.name)],ck=dy.map(t=>t.name);function oi(t){return sk(t.map(rk))}const wc={};function uk(t){if(wc[t])return wc[t];let e=[];return t===""?e=oi(qp):t===""?e=oi(ak):t===""?e=oi(ck):t==="(A)"?e=oi(py):t==="(B)"?e=oi(my):e=oi(qp),wc[t]=e,e}function dk(t){return t===""||t===""||t==="(B)"}function fk(t){const e=[],n=t.split(",");let r="";for(let i of n){if(i=i.trim(),!i)continue;i=i.replace(/\([^)]*\)/g,"").trim();const s=i.match(/^([-]+(?:\s?[-]+)?)/);if(s&&(r=s[1].trim(),i=i.substring(r.length).trim()),i=i.replace(//g,"").trim(),i.includes("-")){const[o,a]=i.split("-"),c=parseInt(o,10),u=parseInt(a,10);if(!isNaN(c)&&!isNaN(u))for(let f=c;f<=u;f++)r&&e.push({book:r,chapter:f})}else{const o=parseInt(i,10);isNaN(o)||r&&e.push({book:r,chapter:o})}}return e}function Cc(t,e){return t?e?{day:t.day,mainTitle:`${t.mainTitle} & ${e.mainTitle}`,sections:[...t.sections||[],...e.sections||[]]}:t:e}function mr(t,e){if(t===""||t===""){const o=t===""?KE:qE,a=e.length;let c=[];if(a===31)c=[...o,{day:31,mainTitle:"  ",sections:[{subTitle:"    ",bibleRef:""}]}];else if(a===30)c=[...o];else if(a===29){const u=Cc(o[25],o[26]);c=[...o.slice(0,25),u,...o.slice(27)]}else if(a===28){const u=Cc(o[4],o[5]),f=Cc(o[25],o[26]);c=[...o.slice(0,4),u,...o.slice(6,25),f,...o.slice(27,30)]}else c=o.slice(0,a);return e.map((u,f)=>{const d=f;if(d>=c.length)return{date:u,items:[],chapters:0,label:" "};const h=c[d];let x=[];const v=h.sections.map(g=>{const p=fk(g.bibleRef);return x=[...x,...p],{...g,items:p}}),w=x.filter((g,p,y)=>y.findIndex(b=>b.book===g.book&&b.chapter===g.chapter)===p),E=Kp(w);return{date:u,items:w,chapters:w.length,label:`[${h.mainTitle}] ${E}`,panorama:{...h,parsedSections:v}}})}const n=uk(t),r=lk(n,e),i=dk(t),s=i?tk(e.length):[];return r.map((o,a)=>{let c=o.items;if(i){const x=(s[a]||[]).map(v=>({book:"",chapter:v}));c=[...c,...x]}const u=c.length,d=`${Kp(c)} ( ${u})`;return{date:o.date,items:c,chapters:u,label:d}})}function hk(t={},e={},n,r){const i=sn(n,r);if(!i||i.length===0)return{ranking:[],medalCounts:{gold:0,silver:0,bronze:0}};const s=fe,o={};s.forEach(f=>{const d=mr(f,i),h={};(d||[]).forEach(x=>{!x||!x.date||(h[x.date]=x)}),o[f]=h});const a={};s.forEach(f=>{const d=t&&t[f],h=d&&d.users;if(!h)return;const x=o[f]||{};Object.entries(h).forEach(([v,w])=>{const E=w&&w.checks||{};let g=0;i.forEach(p=>{if(E[p]){const y=x[p];y&&typeof y.chapters=="number"&&y.chapters>0&&(g+=y.chapters)}}),a[v]||(a[v]={uid:v,crew:f,chapters:0}),a[v].chapters+=g})});const c=Object.values(a).map(f=>{const d=e[f.uid]||{},h=d.crew||f.crew;let x=null;const v=o[h]||{};let w=0;return Object.values(v).forEach(g=>{w+=g.chapters||0}),f.chapters>=w&&w>0&&(h===""?x="gold":h===""?x="silver":(h===""||h.includes("")||h.includes(""))&&(x="bronze")),{uid:f.uid,name:d.name||"",crew:h,chapters:f.chapters,medal:x}});c.sort((f,d)=>d.chapters-f.chapters);const u={gold:0,silver:0,bronze:0};return c.forEach(f=>{f.medal==="gold"&&u.gold++,f.medal==="silver"&&u.silver++,f.medal==="bronze"&&u.bronze++}),{ranking:c,medalCounts:u}}function kf({dates:t,todayKey:e,userChecks:n,userDailyActivity:r}){const i=n||{},s=r||{},o=!!i[e],a=!!(s[e]&&s[e].biblePageVisited),c=Array.isArray(t)?t.indexOf(e):-1,u=c>=0?t.slice(0,c+1):[],f=c>0?t.slice(0,c):[],d=u.length>0&&u.every(v=>!!i[v]),h=f.length===0?!0:f.every(v=>!!i[v]),x=f.some(v=>!i[v]);return d?{key:"success",label:" "}:a&&!o?{key:"running",label:"  .."}:h&&!o?{key:"ready",label:" "}:x?{key:"missed",label:" !"}:{key:"ready",label:" "}}function pk({user:t}){const e=mn();_.useEffect(()=>{(!t||!t.isAdmin)&&(console.warn("  .   ."),e("/admin-login"))},[t,e]);const[n,r]=_.useState({}),[i,s]=_.useState({}),[o,a]=_.useState(()=>{const m={};return fe.forEach(k=>m[k]=[]),m}),[c,u]=_.useState(null),[f,d]=_.useState({}),[h,x]=_.useState(""),[v,w]=_.useState("");_.useState({year:null,month:null});const[E,g]=_.useState({}),[p,y]=_.useState(""),[b,T]=_.useState(""),[S,C]=_.useState(""),[j,P]=_.useState({:"",:"",:""}),[I,M]=_.useState({:"manual",:"manual",:"manual"}),[A,H]=_.useState({:[],:[],:[]}),[Q,ie]=_.useState({:[],:[],:[]}),[O,Y]=_.useState({});_.useState([]),_.useState("");const[N,B]=_.useState({}),[W,q]=_.useState(!1);_.useState("");const[Z,De]=_.useState(""),[we,Oe]=_.useState(new Date().getFullYear()),[Xe,ke]=_.useState(new Date().getMonth()+1),[xr,_r]=_.useState(""),[Zr,Mn]=_.useState("gold"),[br,Zi]=_.useState(!1),[ei,Sr]=_.useState(new Date().getFullYear()),[wr,wo]=_.useState(new Date().getMonth()+1),[on,Ft]=_.useState(""),[Na,Co]=_.useState({}),On=_.useRef(null),[We,Eo]=_.useState(""),Je=Z0(),gn=So(),[ko,Bn]=_.useState([]),[Cr,To]=_.useState(""),[ti,es]=_.useState(null),[Da,Ro]=_.useState(!1),[yn,ts]=_.useState(""),[D,X]=_.useState(""),[le,Te]=_.useState([]),[Ue,dt]=_.useState(!1),[Ze,ln]=_.useState("all"),[vn,xn]=_.useState(new Date().getFullYear()),[Yt,_n]=_.useState(!1),[St,ni]=_.useState(!1),[Er,it]=_.useState(!1),[Gt,Pa]=_.useState(!1),[ri,ns]=_.useState(null),[Tf,Rf]=_.useState(!1),[gy,jf]=_.useState({}),[bn,yy]=_.useState("group1"),jo=_.useRef(null);_.useEffect(()=>{const m=new Date,k=m.getFullYear(),R=m.getMonth()+1,z=sn(k,R);if(!z||z.length===0){const ye={};fe.forEach(st=>ye[st]=[]),a(ye);return}const K=m.getDate(),J=z.slice(0,K),te=`${k}-${String(R).padStart(2,"0")}-${String(K).padStart(2,"0")}`,He=fe,Re={};He.forEach(ye=>{const st=mr(ye,z),Be={};st.forEach(Mt=>{Be[Mt.date]=Mt}),Re[ye]=Be}),He.forEach(ye=>{});const ae={};fe.forEach(ye=>ae[ye]=[]);const pe=new Set;fe.forEach(ye=>{(A[ye]||[]).forEach(Be=>{n[Be],pe.add(Be),If(ye,Be,n,i,Re,J,z,te,ae)})}),Object.entries(n||{}).forEach(([ye,st])=>{if(pe.has(ye))return;const Be=st.crew;Be&&fe.includes(Be)&&If(Be,ye,n,i,Re,J,z,te,ae)}),Object.keys(ae).forEach(ye=>{ae[ye].sort((st,Be)=>Be.chapters-st.chapters)}),a(ae)},[i,n,A]);function If(m,k,R,z,K,J,te,He,Re){const ae=z[m]||{},ye=(ae.users&&ae.users[k]||{}).checks||{};let st=0,Be=0;J.forEach(Ff=>{const Ao=K[m]&&K[m][Ff];Ao&&typeof Ao.chapters=="number"&&(Be+=Ao.chapters,ye[Ff]&&(st+=Ao.chapters))});const Mt=R&&R[k]?R[k]:{},Io=Mt.name||k,Fy=Be>0?Math.round(st/Be*100):0,Pf=kf({dates:te,todayKey:He,userChecks:ye,userDailyActivity:Mt.dailyActivity||{}}),My=Xn(Mt.earnedMedals||{});Re[m].push({uid:k,name:Io,chapters:st,progress:Fy,stateKey:Pf.key,stateLabel:Pf.label,medals:Mt.medals||{},dokStatus:My})}_.useEffect(()=>{const m=UC(k=>{const R=k||{},z={};fe.forEach(K=>{z[K]=R[K]||"manual"}),M(z)});return()=>{typeof m=="function"&&m()}},[]),_.useEffect(()=>{const m=OC(k=>{Y(k||{})});return()=>{typeof m=="function"&&m()}},[]),_.useEffect(()=>{async function m(){if(Je){q(!0);try{const k=await Mp(Je);B(k||{})}catch(k){console.error("  ",k)}finally{q(!1)}}}m()},[Je,ri]),_.useEffect(()=>{const m=zC(Je,k=>{ns(k),k?Mp(Je).then(jf):jf({})});return()=>{m&&m()}},[Je]);async function Af(m,k){if(window.confirm(`${m}    ?
(     ,   .)`)){Rf(!0);try{await BC(m,k),alert(`${m}    .`)}catch(R){console.error(R),alert("    .")}finally{Rf(!1)}}}_.useEffect(()=>{const m=ka(r),k=ty(R=>{R?(x(R.title||""),w(R.content||"")):(x(""),w(""))});return()=>{typeof m=="function"&&m(),typeof k=="function"&&k()}},[]),_.useEffect(()=>{if(bn!=="group3"){s({});return}const m=q0(s);return()=>{typeof m=="function"&&m()}},[bn]),_.useEffect(()=>{const m=wf(k=>{const R=k||{};g(R),y(R.churchName||""),T(R.appDescription||""),C(R.bulletinUrl||"")});return()=>{typeof m=="function"&&m()}},[]),_.useEffect(()=>{const m=fe,k=[];return m.forEach(R=>{const z=$u(R,Je,K=>{const J=K?Object.keys(K):[];H(te=>({...te,[R]:J}))});typeof z=="function"&&k.push(z)}),()=>{k.forEach(R=>{try{R()}catch{}})}},[Je]),_.useEffect(()=>{const m=fe,k=[];return m.forEach(R=>{const z=$u(R,gn,K=>{const J=K?Object.keys(K):[];ie(te=>({...te,[R]:J}))});typeof z=="function"&&k.push(z)}),()=>{k.forEach(R=>{try{R()}catch{}})}},[gn]),Object.entries(n||{}).map(([m,k])=>({uid:m,...k}));function vy(m){const R=(j[m]||"").toString().split(/[,,\s]+/).map(te=>te.trim()).filter(Boolean);if(R.length===0)return;const z=/^[-a-zA-Z]+$/,K=R.filter(te=>!z.test(te));if(K.length>0){alert(`    (, ,  )  :
${K.join(", ")}

(  )  .`);return}const J=R.map(te=>{const He=Object.entries(n||{}).find(([Re,ae])=>ae.name===te);return{name:te,uid:He?He[0]:null}});EC(m,Je,J).then(()=>{P(te=>({...te,[m]:""}))})}function Fa(m,k){WC(m,k).then(()=>{}).catch(R=>{console.error(R),alert("     .")})}async function xy(m){if(window.confirm(`${m}    ? (   .)`))try{const R=(A[m]||[]).map(z=>cC(z,null));await Promise.all(R),await kC(m,Je),alert(`${m}   ,     .`)}catch(k){console.error(k),alert("   .")}}function _y(m,k=null){const R=n[m];if(jo.current){try{jo.current()}catch{}jo.current=null}if(u({uid:m,...R}),Ft(k||(R==null?void 0:R.crew)||""),R&&R.crew){const z=Fp(R.crew,m,d);typeof z=="function"&&(jo.current=z)}else d({})}_.useEffect(()=>{if(!(c!=null&&c.uid)||!on){Co({});return}if(On.current){try{On.current()}catch{}On.current=null}const m=Fp(on,c.uid,Co);return On.current=m,()=>{if(On.current)try{On.current()}catch{}}},[c==null?void 0:c.uid,ei,wr,on]);function by(m,k){if(!(c!=null&&c.uid)||!on)return;const R=!k;K0(on,c.uid,m,R).catch(z=>{console.error("  ",z),alert("  .")})}async function Nf(m,k){if(!m)return;const R=k?`(${k})`:"";window.confirm(` ? ${R}

- : 0000
-      .`)&&(await jC(m),alert(" 0000 ."))}async function Sy(m,k){if(!m)return;const R=k?`(${k})`:"";window.confirm(` ? ${R}

-   ' ' .
-    .`)&&(await dC(m),alert("() ."))}async function wy(m,k){if(!m)return;const R=k?`(${k})`:"";window.confirm(`  ? ${R}`)&&(await fC(m),alert("."))}async function Cy(m,k){if(!m)return;const R=k?`(${k})`:"";window.confirm(`  ? ${R}

- users  .
-  (  )   .
-   .`)&&(await hC(m),alert(" ."))}async function Ey(){const m=window.prompt("    .");m&&(await DC(m),alert("  . (  8395  .)"))}function ky(){window.confirm("   ?")&&bC().then(()=>{alert("  .")})}async function Ty(){if(window.confirm(`3   DB  .
  .

?`))try{const k=await _C(3);alert(` : ${(k==null?void 0:k.deleted)||0} .`)}catch(k){console.error("  ",k),alert("   .   .")}}function Ry(m){const k=Ve(m);window.confirm(`${k}    .
  .

?`)&&yC(m).then(()=>{alert(`${k}    .`)})}function jy(){const m=new Date;let k=m.getFullYear(),R=m.getMonth()+1;R===1?(k=k-1,R=12):R=R-1;const{ranking:z}=hk(i,n,k,R);if(!z||z.length===0){alert("   .");return}const K=String(R).padStart(2,"0"),J=`${k}-${K}`,te=[];z.forEach(pe=>{if(!pe.medal)return;const ye=n[pe.uid];if(!ye)return;const st=ye.earnedMedals||{},Be=Xn({...st,[`${J}_${pe.crew}`]:pe.medal}),Mt=Xn(st);Be.totalDok>Mt.totalDok&&te.push({name:pe.name,uid:pe.uid,dokCount:Be.totalDok})});const He=J0(k,R,z,te),Re={};z.forEach(pe=>{var Mt,Io;const ye=((Mt=n[pe.uid])==null?void 0:Mt.medals)||{},st=(ye.gold||0)+(ye.silver||0)+(ye.bronze||0),Be=Xn(((Io=n[pe.uid])==null?void 0:Io.earnedMedals)||{});Re[pe.uid]={uid:pe.uid,name:pe.name,crew:pe.crew,chapters:pe.chapters,progress:100,stateLabel:pe.medal?"":"",totalMedals:st,totalDok:Be.totalDok}});const ae=KC(k,R,Re);Promise.all([He,ae]).then(()=>{alert(`${k} ${R}      .`),Op().then(Bn)})}async function Iy(){if(!Z||!we||!Xe||!xr){alert(", , ,   / .");return}const m=Math.min(12,Math.max(1,Number(Xe)||0)),R=Object.entries(n||{}).find(([K,J])=>(J&&J.name)===Z);if(!R){alert("     . (   )");return}const[z]=R;Zi(!0);try{const K=await CC(we,m,z,Zr,xr);alert(K?"      .":"  .    .")}catch(K){console.error(K),alert("    .")}}_.useEffect(()=>{Op().then(Bn)},[]);async function Ay(m){if(To(m),!m){es(null);return}Ro(!0);try{const k=await qC(m);es(k)}catch(k){console.error(k),alert("    .")}finally{Ro(!1)}}async function Ma(m){const k=m||vn;dt(!0);try{const R=await XC(k),z={};Object.entries(R).forEach(([J,te])=>{["gold","silver","bronze"].forEach(He=>{(te[He]||[]).forEach(Re=>{const ae=Re.name,pe=Re.crew;z[ae]||(z[ae]={name:ae,crews:{},totalBible:0,cnt:{adv:0,int:0,nt:0,ota:0,otb:0}}),z[ae].crews[pe]=(z[ae].crews[pe]||0)+1,pe===""&&z[ae].cnt.adv++,pe===""&&z[ae].cnt.int++,pe===""&&z[ae].cnt.nt++,pe==="(A)"&&z[ae].cnt.ota++,pe==="(B)"&&z[ae].cnt.otb++})})});const K=Object.values(z).map(J=>{let te=0,He=J.cnt.nt;te+=J.cnt.adv;const Re=Math.min(J.cnt.int,He);te+=Re,He-=Re;const ae=Math.min(J.cnt.ota,J.cnt.otb,He);return te+=ae,{...J,totalBible:te}});Te(K.sort((J,te)=>te.totalBible-J.totalBible||J.name.localeCompare(te.name)))}catch(R){console.error(R),alert("     .")}finally{dt(!1)}}_.useEffect(()=>{Ma()},[]);const Ny=le.filter(m=>Ze==="all"?!0:Ze==="full"?m.totalBible>0:(m.crews[Ze]||0)>0),rs=Object.entries(n||{}).filter(([m,k])=>{if(!k||(k.status||"active")==="inactive")return!1;const R=Object.values(A).some(z=>Array.isArray(z)&&z.includes(m));return!k.crew&&!R}).map(([m,k])=>({uid:m,...k})),Oa=Object.entries(n||{}).filter(([m,k])=>k&&(k.status||"")==="inactive").map(([m,k])=>({uid:m,...k}));async function Dy(){if(!yn||!D){alert("    .");return}const m=Object.entries(n).find(([z,K])=>(K.name||"").trim()===yn.trim());if(!m){alert("     . (   )");return}const[k,R]=m;if(window.confirm(`${yn}  ${Ve(D)}   ?`))try{await ey(D,k,R.name),alert(" .       ."),ts(""),X("")}catch(z){console.error(z),alert(" : "+(z.message||z))}}async function Py(){if(!yn){alert("  .");return}const m=(yn||"").trim(),k=Object.entries(n).find(([Re,ae])=>(ae.name||"").trim()===m);if(!k){alert("     .");return}const[R,z]=k,K=Kn(z.name);let J=D,te="";for(const[Re,ae]of Object.entries(Q))if(Array.isArray(ae)&&ae.some(pe=>Kn(pe)===K)){J=Re,te="( )";break}if(!te&&O){for(const[Re,ae]of Object.entries(O))if(ae&&ae[R]){J=Re,te="(  )";break}}if(!J){alert("  /    .");return}const He=Ve(J);if(window.confirm(`${yn}  ${He}  ? ${te}`))try{await Sf(R,J),alert("."),ts(""),X("")}catch(Re){console.error(Re),alert(" : "+(Re.message||Re))}}async function Df(m,k,R){const z=R?"":"";if(window.confirm(`${k}  ${z} ?
(      .)`))try{await PC(m,!R),alert(`${k}  ${z} .`)}catch(K){console.error(K),alert(" .")}}return l.jsxs("div",{style:{padding:20,minHeight:"100vh",background:"#F1FAEE"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[l.jsx("h2",{style:{color:"#1D3557",margin:0},children:"  "}),l.jsx("button",{onClick:()=>e("/home"),style:{padding:"8px 16px",borderRadius:10,border:"none",background:"#457B9D",color:"#fff",fontSize:14,fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:"  "})]}),l.jsx("p",{style:{marginBottom:20},children:"  ,  , /     ."}),l.jsx("div",{style:{display:"flex",gap:8,marginBottom:24,overflowX:"auto",paddingBottom:8,flexWrap:"nowrap",WebkitOverflowScrolling:"touch"},children:[{id:"group1",label:"1.   ",icon:""},{id:"group2",label:"2.   ",icon:""},{id:"group3",label:"3.   ",icon:""},{id:"group4",label:"4.   ",icon:""}].map(m=>l.jsxs("button",{onClick:()=>yy(m.id),style:{padding:"12px 18px",borderRadius:12,border:"none",background:bn===m.id?"#1D3557":"#fff",color:bn===m.id?"#fff":"#457B9D",fontWeight:800,fontSize:14,cursor:"pointer",boxShadow:bn===m.id?"0 4px 12px rgba(29, 53, 87, 0.3)":"0 4px 6px rgba(0,0,0,0.05)",whiteSpace:"nowrap",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:6},children:[l.jsx("span",{children:m.icon})," ",m.label]},m.id))}),bn==="group1"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{marginBottom:18},children:l.jsx("button",{type:"button",onClick:()=>e("/admin/class-notice"),style:{padding:"10px 14px",borderRadius:10,border:"none",background:"#111827",color:"#fff",fontSize:14,fontWeight:800,cursor:"pointer",boxShadow:"0 6px 16px rgba(0,0,0,0.10)",marginBottom:10},children:"   "})}),l.jsxs("div",{style:{marginBottom:20,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)"},children:[l.jsx("h3",{style:{marginBottom:8,color:"#1D3557"},children:"[1]   "}),l.jsxs("div",{style:{marginBottom:8},children:[l.jsx("label",{style:{fontSize:13,display:"block",marginBottom:4},children:" "}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("input",{style:{flex:1,padding:8,borderRadius:6,border:"1px solid #ccc"},value:p,onChange:m=>y(m.target.value),placeholder:": "}),l.jsx("button",{type:"button",onClick:()=>{HC(p||""),alert("  .")},style:{padding:"8px 12px",borderRadius:6,border:"none",background:"#1D3557",color:"#fff",fontSize:13,cursor:"pointer"},children:""})]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{fontSize:13,display:"block",marginBottom:4},children:"   "}),l.jsx("textarea",{style:{width:"100%",minHeight:80,padding:8,borderRadius:6,border:"1px solid #ccc",resize:"vertical"},value:b,onChange:m=>T(m.target.value),placeholder:"     ."}),l.jsx("button",{type:"button",onClick:()=>{VC(b||""),alert("  .")},style:{marginTop:8,padding:"8px 12px",borderRadius:6,border:"none",background:"#457B9D",color:"#fff",fontSize:13,cursor:"pointer"},children:" "})]}),l.jsxs("div",{style:{marginTop:14},children:[l.jsx("label",{style:{fontSize:13,display:"block",marginBottom:4},children:"   (URL)"}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("input",{style:{flex:1,padding:8,borderRadius:6,border:"1px solid #ccc"},value:S,onChange:m=>C(m.target.value),placeholder:": https://... (PDF/ )"}),l.jsx("button",{type:"button",onClick:()=>{YC(S||""),alert("  .")},style:{padding:"8px 12px",borderRadius:6,border:"none",background:"#457B9D",color:"#fff",fontSize:13,cursor:"pointer",whiteSpace:"nowrap"},children:""})]}),l.jsx("div",{style:{marginTop:6,fontSize:12,color:"#666"},children:"           ."})]}),l.jsxs("div",{style:{marginTop:16},children:[l.jsx("h4",{style:{marginBottom:6,color:"#1D3557"},children:"  "}),l.jsx("input",{style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #ccc",marginBottom:6},placeholder:" ",value:h,onChange:m=>x(m.target.value)}),l.jsx("textarea",{style:{width:"100%",minHeight:70,padding:8,borderRadius:6,border:"1px solid #ccc",resize:"vertical"},placeholder:"      .",value:v,onChange:m=>w(m.target.value)}),l.jsx("button",{type:"button",onClick:()=>{LC(h||"",v||""),alert("   . (   .)")},style:{marginTop:8,padding:"8px 12px",borderRadius:6,border:"none",background:"#E76F51",color:"#fff",fontSize:13,cursor:"pointer"},children:" "})]}),l.jsxs("div",{style:{marginTop:16},children:[l.jsx("h4",{style:{marginBottom:6,color:"#1D3557"},children:"    "}),l.jsx("p",{style:{fontSize:12,marginBottom:8,color:"#666"},children:"        ."}),l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:12},children:[l.jsx("button",{type:"button",onClick:Ey,style:{padding:"8px 12px",borderRadius:8,border:"none",background:"#264653",color:"#fff",fontSize:13,fontWeight:"bold",cursor:"pointer"},children:"  "}),l.jsx("button",{onClick:ky,style:{padding:"8px 12px",borderRadius:8,border:"none",background:"#B91C1C",color:"#fff",fontSize:13,fontWeight:"bold",cursor:"pointer"},children:"  "}),l.jsx("button",{onClick:Ty,style:{padding:"8px 12px",borderRadius:8,border:"1px solid #0B8457",background:"#fff",color:"#0B8457",fontSize:13,fontWeight:"bold",cursor:"pointer"},children:"3   "})]}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6,marginTop:10},children:fe.map(m=>l.jsxs("button",{onClick:()=>Ry(m),style:{padding:"6px 10px",borderRadius:6,border:"none",background:"#E63946",color:"#fff",fontSize:11,cursor:"pointer"},children:[Ve(m),"  "]},m))})]}),l.jsxs("div",{style:{marginTop:24,padding:16,borderRadius:12,background:"#f8f9fa",border:"1px solid #dee2e6"},children:[l.jsx("h4",{style:{marginTop:0,marginBottom:10,color:"#333"},children:"[11]   "}),l.jsx("p",{style:{fontSize:12,marginBottom:12,color:"#666"},children:"      ."}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:15},children:Object.entries(n||{}).filter(([m,k])=>k.isAdmin).map(([m,k])=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"4px 10px",background:"#fff",borderRadius:20,border:"1px solid #ddd"},children:[l.jsx("span",{style:{fontWeight:"bold",fontSize:12},children:k.name||m}),l.jsx("button",{onClick:()=>Df(m,k.name,!0),style:{border:"none",background:"none",cursor:"pointer",fontSize:12,color:"#E63946"},children:""})]},m))}),l.jsxs("div",{style:{display:"flex",gap:6,maxWidth:250},children:[l.jsx("input",{placeholder:" ",id:"newAdminNameInput",style:{flex:1,padding:6,borderRadius:6,border:"1px solid #ccc",fontSize:12}}),l.jsx("button",{onClick:()=>{const m=document.getElementById("newAdminNameInput"),k=(m.value||"").trim(),R=Object.entries(n).find(([z,K])=>K.name===k);R?(Df(R[0],R[1].name,!1),m.value=""):alert("   .")},style:{padding:"6px 12px",borderRadius:6,border:"none",background:"#333",color:"#fff",fontSize:12,cursor:"pointer"},children:""})]})]})]})]}),bn==="group2"&&l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:20},children:[l.jsxs("div",{style:{padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)"},children:[l.jsx("h3",{style:{marginBottom:8,color:"#1D3557"},children:"[2]  "}),l.jsx("p",{style:{fontSize:12,marginBottom:12,color:"#555"},children:"      .        ."}),fe.map(m=>l.jsxs("div",{style:{marginBottom:12},children:[l.jsxs("div",{style:{fontWeight:"bold",marginBottom:4},children:[Ve(m),"  "]}),l.jsxs("div",{style:{display:"flex",gap:8,marginBottom:4,flexWrap:"wrap",fontSize:12},children:[l.jsx("span",{style:{alignSelf:"center"},children:" :"}),l.jsx("button",{type:"button",onClick:()=>Fa(m,"manual"),style:{padding:"6px 10px",borderRadius:999,border:I[m]==="manual"?"2px solid #2E7D32":"1px solid #ccc",background:I[m]==="manual"?"#E8F5E9":"#fff",color:"#2E7D32",fontWeight:"bold",cursor:"pointer"},children:"()"}),l.jsx("button",{type:"button",onClick:()=>Fa(m,"all"),style:{padding:"6px 10px",borderRadius:999,border:I[m]==="all"?"2px solid #1E88E5":"1px solid #ccc",background:I[m]==="all"?"#E3F2FD":"#fff",color:"#1E88E5",fontWeight:"bold",cursor:"pointer"},children:""}),l.jsx("button",{type:"button",onClick:()=>Fa(m,"closed"),style:{padding:"6px 10px",borderRadius:999,border:I[m]==="closed"?"2px solid #D32F2F":"1px solid #ccc",background:I[m]==="closed"?"#FFEBEE":"#fff",color:"#D32F2F",fontWeight:"bold",cursor:"pointer"},children:"()"})]}),l.jsxs("div",{style:{display:"flex",gap:8,marginBottom:4},children:[l.jsx("input",{style:{flex:1,padding:8,borderRadius:6,border:"1px solid #ccc"},placeholder:" ",value:j[m]||"",onChange:k=>P(R=>({...R,[m]:k.target.value}))}),l.jsx("button",{type:"button",onClick:()=>vy(m),style:{padding:"8px 12px",borderRadius:6,border:"none",background:"#2E7D32",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:""}),l.jsx("button",{type:"button",onClick:()=>xy(m),style:{padding:"8px 12px",borderRadius:6,border:"none",background:"#D32F2F",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:""})]}),A[m]&&A[m].length>0&&l.jsxs("div",{style:{fontSize:12,color:"#333"},children:[l.jsx("span",{children:"   : "}),A[m].join(", ")]})]},m)),l.jsxs("div",{style:{marginTop:18},children:[l.jsx("h4",{style:{marginBottom:6},children:"() "}),!Oa||Oa.length===0?l.jsx("p",{style:{fontSize:12,color:"#666"},children:"  ."}):l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"left",padding:4},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"center",padding:4},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"center",padding:4},children:""})]})}),l.jsx("tbody",{children:Oa.map(m=>l.jsxs("tr",{children:[l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4},children:m.name||m.uid}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"center"},children:l.jsx("button",{type:"button",onClick:()=>wy(m.uid,m.name),style:{padding:"4px 8px",borderRadius:8,border:"none",background:"#457B9D",color:"#fff",fontSize:11,cursor:"pointer"},children:""})}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"center"},children:l.jsx("button",{type:"button",onClick:()=>Cy(m.uid,m.name),style:{padding:"4px 8px",borderRadius:8,border:"none",background:"#B71C1C",color:"#fff",fontSize:11,cursor:"pointer"},children:""})})]},m.uid))})]})]})]}),l.jsxs("div",{style:{padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)"},children:[l.jsx("h3",{style:{marginBottom:8,color:"#1D3557"},children:"[3]      "}),l.jsx("p",{style:{fontSize:12,marginBottom:12,color:"#555"},children:"        . (     )"}),l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:[l.jsx("input",{placeholder:" ",value:yn,onChange:m=>ts(m.target.value),style:{padding:8,borderRadius:6,border:"1px solid #ccc"}}),l.jsxs("select",{value:D,onChange:m=>X(m.target.value),style:{padding:8,borderRadius:6,border:"1px solid #ccc"},children:[l.jsx("option",{value:"",children:" "}),fe.map(m=>l.jsx("option",{value:m,children:Ve(m)},m))]}),l.jsx("button",{onClick:Dy,style:{padding:"8px 16px",borderRadius:6,border:"none",background:"#0B8457",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:""}),l.jsx("button",{onClick:Py,style:{padding:"8px 16px",borderRadius:6,border:"1px solid #D32F2F",background:"#fff",color:"#D32F2F",fontWeight:"bold",cursor:"pointer"},children:""})]})]}),l.jsxs("div",{style:{marginBottom:20,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)",borderLeft:"5px solid #2E7D32"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[l.jsxs("h3",{style:{margin:0,color:"#1D3557"},children:["[4]      (",gn,")"]}),(()=>{const m=new Date,z=`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}`>=gn;return l.jsx("button",{onClick:()=>Af(gn,Q),disabled:!z||Tf,style:{padding:"8px 16px",borderRadius:8,border:"none",background:z?"#2E7D32":"#ccc",color:"#fff",fontWeight:"bold",cursor:z?"pointer":"not-allowed",fontSize:13},children:Tf?" ...":`[${gn}]    (  )`})})()]}),l.jsxs("p",{style:{fontSize:12,color:"#666",marginBottom:12},children:["     . ",l.jsxs("strong",{children:[gn," 1  "]}),"       ."]}),fe.map(m=>{const k=Q[m]||[];return k.length===0?null:l.jsxs("div",{style:{marginBottom:10,fontSize:13},children:[l.jsxs("span",{style:{fontWeight:"bold",marginRight:8},children:[Ve(m),":"]}),l.jsx("span",{style:{color:"#333"},children:k.join(", ")})]},m)}),Object.values(Q).every(m=>m.length===0)&&l.jsx("div",{style:{fontSize:12,color:"#999"},children:"   ."})]}),l.jsxs("div",{style:{marginBottom:20,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)"},children:[l.jsxs("h3",{style:{marginBottom:8,color:"#1D3557"},children:["[5]      (",Je,")"]}),l.jsx("p",{style:{fontSize:12,marginBottom:12,color:"#555"},children:"    [4]        . ( ([2])      .)"}),ri?l.jsxs("div",{children:[l.jsxs("div",{style:{fontSize:11,color:"#2E7D32",marginBottom:15,fontWeight:"bold"},children:["   : ",new Date(ri).toLocaleString()]}),fe.map(m=>{const k=gy[m]||[],R=A[m]||[],z=new Set(k.map(K=>Kn(K)));return l.jsxs("div",{style:{marginBottom:20,fontSize:13},children:[l.jsxs("div",{style:{fontWeight:800,borderBottom:"2px solid #eee",paddingBottom:4,color:"#1D3557",display:"flex",justifyContent:"space-between"},children:[l.jsx("span",{children:Ve(m)}),l.jsxs("span",{style:{color:"#2E7D32"},children:[R.length,""]})]}),l.jsx("div",{style:{marginTop:8,display:"flex",flexWrap:"wrap",gap:"6px 12px",lineHeight:1.5},children:R.length===0?l.jsx("span",{style:{color:"#999",fontStyle:"italic"},children:"  "}):R.sort().map(K=>{const J=!z.has(Kn(K));return l.jsx("span",{style:{color:J?"#E63946":"#444",fontWeight:J?"bold":"normal",textDecoration:J?"underline":"none"},children:K},K)})})]},m)}),l.jsxs("div",{style:{marginTop:24,padding:"12px 14px",borderRadius:8,background:"#f8f9fa",border:"1px solid #dee2e6",display:"flex",justifyContent:"space-between",alignItems:"center",fontWeight:900,fontSize:16,color:"#1D3557"},children:[l.jsx("span",{children:"    "}),l.jsxs("span",{style:{color:"#2E7D32",fontSize:20},children:[fe.reduce((m,k)=>{var R;return m+(((R=A[k])==null?void 0:R.length)||0)},0),""]})]}),l.jsx("p",{style:{fontSize:11,color:"#E63946",marginTop:10},children:"*  :       ."})]}):l.jsxs("div",{style:{fontSize:13,color:"#777",background:"#F1F3F5",padding:"30px 20px",borderRadius:12,border:"1px dashed #CED4DA",textAlign:"center"},children:[l.jsxs("p",{style:{marginBottom:15,fontWeight:"bold",color:"#495057"},children:["  (",Je,")     ."]}),l.jsxs("p",{style:{marginBottom:20,fontSize:12,color:"#868E96"},children:["        ,",l.jsx("br",{}),"    ([2] )        ."]}),l.jsx("button",{onClick:()=>Af(Je,A),style:{padding:"12px 24px",background:"#457B9D",color:"#fff",border:"none",borderRadius:8,fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",transition:"all 0.2s"},onMouseOver:m=>m.target.style.background="#1D3557",onMouseOut:m=>m.target.style.background="#457B9D",children:"<2  5 >"}),l.jsx("p",{style:{fontSize:11,marginTop:15,color:"#ADB5BD"},children:"         [5]       ."})]})]})]}),bn==="group3"&&l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:20},children:[l.jsxs("div",{style:{marginBottom:10,padding:"12px 16px",borderRadius:12,background:"#F1F3F5",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsx("span",{style:{fontSize:14,fontWeight:"bold",color:"#1D3557"},children:"   ( )"}),l.jsx("button",{onClick:jy,style:{padding:"8px 16px",borderRadius:8,border:"none",background:"#1D3557",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:"   "})]}),l.jsxs("div",{style:{marginTop:24,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 10px rgba(0,0,0,0.06)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[l.jsx("h3",{style:{margin:0},children:"[6]     "}),l.jsx("button",{onClick:()=>it(!Er),style:{padding:"6px 12px",borderRadius:8,border:"1px solid #1D3557",background:Er?"#f1f1f1":"#fff",color:"#1D3557",fontSize:12,fontWeight:"bold",cursor:"pointer"},children:Er?" ":" "})]}),Er&&l.jsxs(l.Fragment,{children:[l.jsx("p",{style:{fontSize:12,marginBottom:10},children:"         ."}),fe.map(m=>l.jsxs("div",{style:{marginBottom:16},children:[l.jsx("h4",{style:{marginBottom:6},children:Ve(m)}),(!o[m]||o[m].length===0)&&l.jsx("p",{style:{fontSize:12,color:"#666"},children:"  ."}),o[m]&&o[m].length>0&&l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"left",padding:4},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"right",padding:4},children:" "}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"right",padding:4},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"center",padding:4},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"center",padding:4,minWidth:100},children:"/1"}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"center",padding:4},children:" "})]})}),l.jsx("tbody",{children:o[m].map(k=>l.jsxs("tr",{children:[l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4},children:k.name}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"right"},children:k.chapters}),l.jsxs("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"right"},children:[k.progress,"%"]}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"center"},children:(()=>{const R=k.stateLabel||" ",z=k.stateKey||"",K=z==="success"||R.includes(""),J=z==="ready"||R.includes(""),te=z==="running"||R.includes("");if(z==="fail"||R.includes("!"),J)return l.jsx("span",{style:{color:"#166534",fontWeight:600},children:R});const He={display:"inline-block",borderRadius:8,padding:"4px 16px",fontWeight:600,backgroundColor:K?"#DCFCE7":te?"#DBEAFE":"#E5E7EB",color:K?"#166534":te?"#1D4ED8":"#111827"};return l.jsx("span",{style:He,children:R})})()}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"center"},children:l.jsxs("div",{style:{fontSize:11},children:[k.medals.gold||k.medals.silver||k.medals.bronze?l.jsxs("div",{style:{marginBottom:2},children:[k.medals.gold>0&&`${k.medals.gold} `,k.medals.silver>0&&`${k.medals.silver} `,k.medals.bronze>0&&`${k.medals.bronze}`]}):null,k.dokStatus&&l.jsxs("div",{style:{fontWeight:800,color:"#1D3557"},children:[" ",k.dokStatus.totalDok,"",k.dokStatus.fragments&&k.dokStatus.fragments.length>0&&l.jsxs("div",{style:{fontSize:9,fontWeight:400,color:"#666"},children:["(+",k.dokStatus.fragments.map(R=>R.name.replace("","")).join(","),")"]})]})]})}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"center"},children:l.jsx("button",{type:"button",onClick:()=>Nf(k.uid,k.name),style:{padding:"4px 8px",borderRadius:8,border:"none",background:"#8D99AE",color:"#fff",fontSize:11,cursor:"pointer"},children:" 0000"})})]},k.uid))})]})]},m))]}),l.jsxs("div",{style:{marginTop:16},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[l.jsx("h4",{style:{margin:0},children:" "}),l.jsx("button",{onClick:()=>Pa(!Gt),style:{padding:"4px 10px",borderRadius:8,border:"1px solid #1D3557",background:Gt?"#f1f1f1":"#fff",color:"#1D3557",fontSize:11,fontWeight:"bold",cursor:"pointer"},children:Gt?" ":" "})]}),Gt&&l.jsxs(l.Fragment,{children:[(!rs||rs.length===0)&&l.jsx("p",{style:{fontSize:12,color:"#666"},children:"  ."}),rs&&rs.length>0&&l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"left",padding:4},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"center",padding:4},children:" "}),l.jsx("th",{style:{borderBottom:"1px solid #ccc",textAlign:"center",padding:4},children:""})]})}),l.jsx("tbody",{children:rs.map(m=>l.jsxs("tr",{children:[l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4},children:m.name||m.uid}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"center"},children:l.jsx("button",{type:"button",onClick:()=>Nf(m.uid,m.name),style:{padding:"4px 8px",borderRadius:8,border:"none",background:"#8D99AE",color:"#fff",fontSize:11,cursor:"pointer"},children:" 0000"})}),l.jsx("td",{style:{borderBottom:"1px solid #eee",padding:4,textAlign:"center"},children:l.jsx("button",{type:"button",onClick:()=>Sy(m.uid,m.name),style:{padding:"4px 8px",borderRadius:8,border:"none",background:"#E63946",color:"#fff",fontSize:11,cursor:"pointer"},children:""})})]},m.uid))})]})]})]})]}),l.jsxs("div",{style:{marginTop:24,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 10px rgba(0,0,0,0.06)"},children:[l.jsx("h3",{style:{marginTop:0,marginBottom:10},children:"[7]    "}),l.jsx("p",{style:{fontSize:12,marginBottom:10,color:"#555"},children:"     ,      .         ."}),l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:8},children:[l.jsx("input",{type:"number",value:we,onChange:m=>Oe(Number(m.target.value)||0),placeholder:"(: 2025)",style:{width:110,padding:6,borderRadius:8,border:"1px solid #ccc"}}),l.jsx("input",{type:"number",value:Xe,onChange:m=>{const k=Number(m.target.value)||0,R=Math.min(12,Math.max(1,k));ke(R)},placeholder:"(1~12)",style:{width:80,padding:6,borderRadius:8,border:"1px solid #ccc"}}),l.jsx("input",{type:"text",value:Z,onChange:m=>De(m.target.value),placeholder:" ",style:{flex:1,minWidth:120,padding:6,borderRadius:8,border:"1px solid #ccc"}}),l.jsxs("select",{value:xr,onChange:m=>_r(m.target.value),style:{width:140,padding:6,borderRadius:8,border:"1px solid #ccc"},children:[l.jsx("option",{value:"",children:" "}),fe.map(m=>l.jsx("option",{value:m,children:Ve(m)},m))]}),l.jsxs("select",{value:Zr,onChange:m=>Mn(m.target.value),style:{width:120,padding:6,borderRadius:8,border:"1px solid #ccc"},children:[l.jsx("option",{value:"gold",children:" "}),l.jsx("option",{value:"silver",children:" "}),l.jsx("option",{value:"bronze",children:" "}),l.jsx("option",{value:"none",children:" "})]})]}),l.jsx("button",{onClick:Iy,disabled:br,style:{padding:"8px 16px",borderRadius:8,border:"none",background:br?"#A8A8A8":"#1D3557",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:br?" ...":"    "})]}),l.jsxs("div",{style:{marginBottom:20,padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)",borderLeft:"5px solid #1D3557",marginTop:24},children:[l.jsx("h3",{style:{marginTop:0,marginBottom:10,color:"#1D3557"},children:"[10]     "}),l.jsxs("p",{style:{fontSize:12,marginBottom:16,color:"#555"},children:["           .",l.jsx("br",{}),l.jsx("strong",{children:"     "})," ."]}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:20},children:[l.jsx("div",{style:{position:"relative",width:"100%",maxWidth:350},children:l.jsx("input",{type:"text",placeholder:"    (: )",value:We,onChange:m=>Eo(m.target.value),style:{width:"100%",padding:"12px 15px",borderRadius:8,border:"1px solid #1D3557",fontSize:15,background:"#fff",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.05)"}})}),l.jsxs("select",{value:c?`${c.uid}|${on}`:"",onChange:m=>{const k=m.target.value;if(!k)return;const[R,z]=k.split("|");_y(R,z)},style:{width:"100%",maxWidth:350,padding:"10px",borderRadius:8,border:"1px solid #1D3557",fontSize:14,fontWeight:"bold",background:We?"#FFF9DB":"#fff"},children:[l.jsx("option",{value:"",children:We?`-- '${We}'   --`:"--    --"}),(()=>{const m=(We||"").trim().toLowerCase();if(!m)return null;const k=[];return Object.entries(n||{}).forEach(([R,z])=>{if((z.name||"").toLowerCase().includes(m)){const K=fe.filter(J=>(A[J]||[]).includes(R));z.crew&&!K.includes(z.crew)&&K.push(z.crew),K.length===0?k.push({uid:R,name:z.name,crew:""}):K.forEach(J=>k.push({uid:R,name:z.name,crew:J}))}}),k.sort((R,z)=>R.name!==z.name?R.name.localeCompare(z.name):Ve(R.crew).localeCompare(Ve(z.crew))).map((R,z)=>l.jsxs("option",{value:`${R.uid}|${R.crew}`,children:[R.name," (",Ve(R.crew),")"]},`${R.uid}_${R.crew}_${z}`))})()]})]}),c?l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:10,marginBottom:16,alignItems:"center"},children:[l.jsxs("span",{style:{fontWeight:"bold",fontSize:15,color:"#1D3557"},children:[" : ",c.name," "]}),l.jsxs("div",{style:{display:"flex",gap:6},children:[l.jsx("select",{value:ei,onChange:m=>Sr(Number(m.target.value)),style:{padding:6,borderRadius:8,border:"1px solid #ccc"},children:[2025,2026,2027].map(m=>l.jsxs("option",{value:m,children:[m,""]},m))}),l.jsx("select",{value:wr,onChange:m=>wo(Number(m.target.value)),style:{padding:6,borderRadius:8,border:"1px solid #ccc"},children:Array.from({length:12},(m,k)=>k+1).map(m=>l.jsxs("option",{value:m,children:[m,""]},m))}),l.jsxs("select",{value:on,onChange:m=>Ft(m.target.value),style:{padding:6,borderRadius:8,border:"1px solid #ccc"},children:[l.jsx("option",{value:"",children:" "}),fe.map(m=>l.jsx("option",{value:m,children:Ve(m)},m))]})]})]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(60px, 1fr))",gap:8,padding:10,background:"#f1f3f5",borderRadius:12},children:sn(ei,wr).map(m=>{const k=Na[m],R=m.split("-")[2];return l.jsxs("button",{onClick:()=>by(m,k),style:{padding:"12px 0",borderRadius:8,border:k?"none":"1px solid #dee2e6",background:k?"#1D3557":"#fff",color:k?"#fff":"#495057",fontWeight:"bold",fontSize:13,cursor:"pointer",transition:"all 0.2s"},children:[R,"",l.jsx("div",{style:{fontSize:10,marginTop:2,opacity:.8},children:k?"V":"-"})]},m)})})]}):l.jsx("div",{style:{padding:"20px",textAlign:"center",background:"#f8f9fa",borderRadius:8,color:"#999"},children:"   ."})]})]}),bn==="group4"&&l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:20},children:[l.jsxs("div",{style:{padding:16,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 12px rgba(0,0,0,0.04)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[l.jsx("h3",{style:{margin:0,color:"#1D3557"},children:"[8]    (  )"}),l.jsx("button",{onClick:()=>_n(!Yt),style:{padding:"8px 14px",borderRadius:8,border:"1px solid #1D3557",background:Yt?"#f1f1f1":"#fff",color:"#1D3557",fontSize:13,fontWeight:"bold",cursor:"pointer"},children:Yt?"  ":"  "})]}),!Yt&&l.jsx("p",{style:{fontSize:12,color:"#666",margin:0},children:"          ."}),Yt&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{marginTop:16,marginBottom:16},children:[l.jsx("label",{style:{fontSize:13,marginRight:8},children:" :"}),l.jsxs("select",{value:Cr,onChange:m=>Ay(m.target.value),style:{padding:"6px 10px",borderRadius:8,border:"1px solid #ccc"},children:[l.jsx("option",{value:"",children:"--   --"}),ko.map(m=>l.jsx("option",{value:m,children:m},m))]})]}),Da&&l.jsx("p",{children:"  ..."}),ti&&l.jsx("div",{style:{overflowX:"auto"},children:l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:13},children:[l.jsx("thead",{children:l.jsxs("tr",{style:{background:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[l.jsx("th",{style:{padding:10,textAlign:"left"},children:""}),l.jsx("th",{style:{padding:10,textAlign:"left"},children:""}),l.jsx("th",{style:{padding:10,textAlign:"center"},children:" "}),l.jsx("th",{style:{padding:10,textAlign:"center"},children:""}),l.jsx("th",{style:{padding:10,textAlign:"center"},children:""}),l.jsx("th",{style:{padding:10,textAlign:"center"},children:" "})]})}),l.jsx("tbody",{children:Object.values(ti).sort((m,k)=>m.crew.localeCompare(k.crew)||m.name.localeCompare(k.name)).map(m=>l.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[l.jsx("td",{style:{padding:10},children:m.crew}),l.jsx("td",{style:{padding:10,fontWeight:"bold"},children:m.name}),l.jsxs("td",{style:{padding:10,textAlign:"center"},children:[m.chapters,""]}),l.jsxs("td",{style:{padding:10,textAlign:"center"},children:[m.progress,"%"]}),l.jsx("td",{style:{padding:10,textAlign:"center"},children:l.jsx("span",{style:{padding:"2px 6px",borderRadius:4,fontSize:11,color:"#fff",background:m.stateLabel===""?"#2E7D32":m.stateLabel===""?"#1E88E5":"#D32F2F"},children:m.stateLabel})}),l.jsxs("td",{style:{padding:10,textAlign:"center"},children:[m.totalMedals,""]})]},m.uid))})]})})]})]}),l.jsxs("div",{style:{marginBottom:20,padding:16,borderRadius:12,background:"#ffffff",boxShadow:"0 4px 12px rgba(0,0,0,0.04)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:14},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[l.jsx("h3",{style:{margin:0,color:"#1D3557"},children:"[9]    ( 1 )"}),l.jsx("select",{value:vn,onChange:m=>{const k=Number(m.target.value);xn(k),Ma(k)},style:{padding:"4px 8px",borderRadius:8,border:"1px solid #ccc",fontSize:13},children:[2024,2025,2026,2027].map(m=>l.jsxs("option",{value:m,children:[m,""]},m))})]}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("button",{onClick:()=>Ma(),style:{padding:"6px 12px",borderRadius:8,border:"1px solid #457B9D",background:"#fff",color:"#457B9D",fontSize:12,cursor:"pointer"},children:"  "}),l.jsx("button",{onClick:()=>ni(!St),style:{padding:"6px 12px",borderRadius:8,border:"1px solid #1D3557",background:St?"#f1f1f1":"#fff",color:"#1D3557",fontSize:12,fontWeight:"bold",cursor:"pointer"},children:St?" ":" "})]})]}),St&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",gap:6,marginBottom:16,flexWrap:"wrap"},children:[l.jsx("button",{onClick:()=>ln("all"),style:Ec(Ze==="all"),children:" "}),l.jsx("button",{onClick:()=>ln("full"),style:Ec(Ze==="full"),children:" 1  "}),fe.map(m=>l.jsxs("button",{onClick:()=>ln(m),style:Ec(Ze===m),children:[Ve(m)," "]},m))]}),Ue?l.jsx("p",{children:" ..."}):l.jsx("div",{style:{overflowX:"auto"},children:l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:13},children:[l.jsx("thead",{children:l.jsxs("tr",{style:{background:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[l.jsx("th",{style:{padding:10,textAlign:"left"},children:""}),l.jsx("th",{style:{padding:10,textAlign:"center"},children:"  "}),l.jsx("th",{style:{padding:10,textAlign:"center"},children:" 1"}),l.jsx("th",{style:{padding:10,textAlign:"left",fontSize:11,color:"#666"},children:"  "})]})}),l.jsx("tbody",{children:Ny.map(m=>l.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[l.jsx("td",{style:{padding:10,fontWeight:"bold"},children:m.name}),l.jsxs("td",{style:{padding:10,textAlign:"center"},children:[Object.values(m.crews).reduce((k,R)=>k+R,0)," "]}),l.jsx("td",{style:{padding:10,textAlign:"center"},children:l.jsxs("span",{style:{padding:"4px 8px",borderRadius:20,background:m.totalBible>0?"#E9C46A":"#f0f0f0",color:m.totalBible>0?"#000":"#888",fontWeight:"bold",fontSize:12},children:[" ",m.totalBible,""]})}),l.jsx("td",{style:{padding:10,fontSize:11},children:Object.entries(m.crews).map(([k,R])=>l.jsxs("span",{style:{marginRight:8,display:"inline-block"},children:[k,"(",R,")"]},k))})]},m.name))})]})})]})]})]})]})}const Ec=t=>({padding:"6px 12px",borderRadius:20,border:"1px solid #457B9D",background:t?"#457B9D":"#fff",color:t?"#fff":"#457B9D",fontSize:12,fontWeight:t?"bold":"normal",cursor:"pointer"});function mk(){const t=mn(),[e,n]=_.useState({}),[r,i]=_.useState(""),[s,o]=_.useState(!0),[a,c]=_.useState(""),[u,f]=_.useState(""),[d,h]=_.useState(!1),[x,v]=_.useState(""),[w,E]=_.useState("");_.useEffect(()=>{const T=rC(S=>n(S||{}));return()=>{typeof T=="function"&&T()}},[]);const g=_.useMemo(()=>e&&e[r]||null,[e,r]);_.useEffect(()=>{const T=g||{};o(!!T.enabled),c((T.title||"").toString()),f((T.content||"").toString()),v(""),E("")},[g,r]);const p=_.useMemo(()=>{const T=g==null?void 0:g.version;return parseInt(T||"0",10)||0},[g]),y=_.useMemo(()=>{const T=g==null?void 0:g.updatedAt;if(!T)return"";const S=new Date(T),C=S.getFullYear(),j=String(S.getMonth()+1).padStart(2,"0"),P=String(S.getDate()).padStart(2,"0"),I=String(S.getHours()).padStart(2,"0"),M=String(S.getMinutes()).padStart(2,"0");return`${C}-${j}-${P} ${I}:${M}`},[g]);async function b(){h(!0),v(""),E("");try{await lC(r,{enabled:s,title:(a||"").trim(),content:(u||"").toString()}),v(". ( )"),setTimeout(()=>v(""),2e3)}catch(T){console.error("   ",T),E("   .")}finally{h(!1)}}return l.jsx("div",{style:{minHeight:"100vh",background:"#F8F9FF",padding:"22px 16px 40px",boxSizing:"border-box"},children:l.jsxs("div",{style:{maxWidth:760,margin:"0 auto"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},children:[l.jsx("button",{onClick:()=>t("/admin"),style:{border:"none",background:"#111827",color:"#fff",borderRadius:12,padding:"10px 14px",fontWeight:700,cursor:"pointer"},children:"  "}),l.jsx("div",{style:{fontSize:20,fontWeight:900,color:"#111827"},children:"  "}),l.jsx("div",{style:{width:90}})]}),l.jsxs("div",{style:{marginTop:16,background:"#FFFFFF",borderRadius:16,padding:16,boxShadow:"0 10px 24px rgba(0,0,0,0.08)",border:"1px solid rgba(0,0,0,0.06)"},children:[l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:10,alignItems:"center",justifyContent:"space-between"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[l.jsx("div",{style:{fontWeight:800,color:"#111827"},children:" "}),l.jsxs("select",{value:r,onChange:T=>i(T.target.value),style:{padding:"10px 12px",borderRadius:12,border:"1px solid rgba(0,0,0,0.18)",fontWeight:700},children:[l.jsx("option",{value:"all",style:{color:"#2563EB",fontWeight:900},children:"   "}),bf.map(T=>l.jsx("option",{value:T.crewKey,children:Ve(T.crewKey)},T.crewKey))]})]}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:10,fontWeight:800,color:"#111827"},children:[" ",l.jsx("input",{type:"checkbox",checked:s,onChange:T=>o(T.target.checked),style:{width:18,height:18}})]})]}),l.jsxs("div",{style:{marginTop:12,display:"flex",gap:12,flexWrap:"wrap"},children:[l.jsxs("div",{style:{fontSize:13,color:"#6B7280"},children:[" : ",l.jsx("b",{children:p})]}),y&&l.jsxs("div",{style:{fontSize:13,color:"#6B7280"},children:[" : ",y]})]}),l.jsxs("div",{style:{marginTop:14},children:[l.jsx("div",{style:{fontSize:14,fontWeight:800,color:"#111827",marginBottom:8},children:" ()"}),l.jsx("input",{value:a,onChange:T=>c(T.target.value),placeholder:":  ",style:{width:"100%",padding:"12px 14px",borderRadius:12,border:"1px solid rgba(0,0,0,0.18)",fontSize:15,boxSizing:"border-box"}})]}),l.jsxs("div",{style:{marginTop:14},children:[l.jsx("div",{style:{fontSize:14,fontWeight:800,color:"#111827",marginBottom:8},children:" "}),l.jsx("textarea",{value:u,onChange:T=>f(T.target.value),rows:10,placeholder:"     .\\n(   .)",style:{width:"100%",padding:"12px 14px",borderRadius:12,border:"1px solid rgba(0,0,0,0.18)",fontSize:15,lineHeight:1.6,boxSizing:"border-box",resize:"vertical"}})]}),l.jsxs("div",{style:{marginTop:14,display:"flex",gap:10,alignItems:"center"},children:[l.jsx("button",{onClick:b,disabled:d,style:{border:"none",background:d?"#9CA3AF":"#2563EB",color:"#fff",borderRadius:12,padding:"12px 14px",fontWeight:900,cursor:d?"not-allowed":"pointer",minWidth:120},children:d?"...":""}),x&&l.jsx("div",{style:{fontSize:14,color:"#065F46",fontWeight:800},children:x}),w&&l.jsx("div",{style:{fontSize:14,color:"#B91C1C",fontWeight:800},children:w})]}),l.jsxs("div",{style:{marginTop:18,background:"#F3F4F6",borderRadius:12,padding:12,fontSize:13,color:"#374151",lineHeight:1.6},children:[l.jsx("b",{children:" "}),l.jsxs("div",{children:["  ",l.jsx("b",{children:"ON"}),",  ,    ",l.jsx("b",{children:""}),"    ."]}),l.jsx("div",{children:"     +1 . (   )"})]})]})]})})}function gk(){const[t,e]=_.useState(""),n=mn();async function r(i){i.preventDefault();try{const s=await NC(t);s&&s.ok&&n("/admin")}catch(s){alert(s&&s.message?s.message:"   .")}}return l.jsxs("div",{style:{minHeight:"100vh",background:"#E8F5E9",padding:24,textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center"},children:[l.jsx("h2",{style:{color:"#1B5E20",marginBottom:24,fontSize:26},children:" "}),l.jsxs("form",{onSubmit:r,style:{maxWidth:420,margin:"0 auto"},children:[l.jsx("input",{placeholder:"",type:"password",value:t,onChange:i=>e(i.target.value),style:{width:"100%",padding:16,borderRadius:10,border:"1px solid #ccc",marginBottom:14,fontSize:18}}),l.jsx("button",{type:"submit",style:{width:"100%",padding:16,borderRadius:10,background:"#1B5E20",color:"#fff",border:"none",fontSize:18},children:""}),l.jsx("div",{style:{marginTop:20},children:l.jsx("button",{type:"button",onClick:()=>n("/home"),style:{background:"none",border:"none",color:"#1565C0",cursor:"pointer",fontSize:14},children:"  "})})]})]})}function Ln({src:t,alt:e}){return l.jsx("img",{src:t,alt:e,style:{width:34,height:34,objectFit:"contain",flexShrink:0},loading:"lazy"})}function kc(){return l.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",style:{width:18,height:18,verticalAlign:"middle"},children:[l.jsx("circle",{cx:"12",cy:"5",r:"2"}),l.jsx("circle",{cx:"12",cy:"12",r:"2"}),l.jsx("circle",{cx:"12",cy:"19",r:"2"})]})}function Xp(){return l.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",style:{width:18,height:18,verticalAlign:"middle"},children:l.jsx("path",{d:"M4 6h16M4 12h16M4 18h16",stroke:"currentColor",strokeWidth:"2"})})}function Tc(){return l.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",style:{width:18,height:18,verticalAlign:"middle"},children:[l.jsx("path",{d:"M12 3v10",stroke:"currentColor",strokeWidth:"2"}),l.jsx("path",{d:"M8 7l4-4 4 4",fill:"none",stroke:"currentColor",strokeWidth:"2"}),l.jsx("rect",{x:"5",y:"11",width:"14",height:"10",rx:"2",ry:"2",fill:"none",stroke:"currentColor",strokeWidth:"2"})]})}function Jp(){return l.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",style:{width:18,height:18,verticalAlign:"middle"},children:[l.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"currentColor",strokeWidth:"2"}),l.jsx("path",{d:"M12 7v10M7 12h10",stroke:"currentColor",strokeWidth:"2"})]})}function yk(){return l.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",style:{width:20,height:20,verticalAlign:"middle"},children:l.jsx("path",{d:"M12 4c-4.4 0-8 2.7-8 6s3.6 6 8 6c.5 0 1-.04 1.5-.12L17 19l-.8-3.2C18.3 14.7 20 12.9 20 10c0-3.3-3.6-6-8-6z",fill:"#3C1E1E"})})}function vk(){return l.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":"true",style:{width:20,height:20,verticalAlign:"middle"},children:[l.jsx("rect",{x:"2",y:"2",width:"8",height:"8",rx:"1"}),l.jsx("rect",{x:"4",y:"4",width:"4",height:"4",fill:"currentColor"}),l.jsx("rect",{x:"14",y:"2",width:"8",height:"8",rx:"1"}),l.jsx("rect",{x:"16",y:"4",width:"4",height:"4",fill:"currentColor"}),l.jsx("rect",{x:"2",y:"14",width:"8",height:"8",rx:"1"}),l.jsx("rect",{x:"4",y:"16",width:"4",height:"4",fill:"currentColor"}),l.jsx("rect",{x:"12",y:"12",width:"2",height:"2"}),l.jsx("rect",{x:"15",y:"12",width:"2",height:"2"}),l.jsx("rect",{x:"18",y:"12",width:"2",height:"2"}),l.jsx("rect",{x:"12",y:"15",width:"2",height:"2"}),l.jsx("rect",{x:"14",y:"17",width:"2",height:"2"}),l.jsx("rect",{x:"18",y:"18",width:"2",height:"2"})]})}function xk(){const[t,e]=_.useState(null),n=({children:a})=>l.jsx("div",{style:{background:"#FFFFFF",border:"1px solid rgba(0,0,0,0.08)",borderRadius:14,padding:14,marginTop:12,boxShadow:"0 6px 18px rgba(0,0,0,0.06)"},children:a}),r=({left:a,children:c})=>l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"8px 0"},children:[a,l.jsx("div",{style:{flex:1,color:"#1B5E20",fontSize:16,lineHeight:1.35},children:c})]}),i=({children:a})=>l.jsx("div",{style:{fontWeight:800,color:"#1B5E20",marginTop:8,marginBottom:4,fontSize:16},children:a}),s=({kind:a,bg:c,fg:u,icon:f,label:d})=>{const h=t===a;return l.jsxs("button",{type:"button",onClick:()=>e(h?null:a),style:{width:"100%",maxWidth:320,padding:"14px 16px",borderRadius:14,border:"none",background:c,color:u,fontWeight:900,fontSize:20,display:"flex",alignItems:"center",justifyContent:"center",gap:10,cursor:"pointer"},children:[l.jsx("span",{style:{display:"inline-flex",alignItems:"center"},children:f}),l.jsx("span",{children:d})]})},o=l.jsx("span",{style:{margin:"0 6px",color:"#1B5E20",fontWeight:900},children:""});return l.jsxs("div",{style:{maxWidth:520,margin:"0 auto 18px auto"},children:[l.jsx("div",{style:{textAlign:"center",color:"#1B5E20",fontWeight:900,fontSize:18},children:"   "}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:10,marginTop:12},children:[l.jsx(s,{kind:"kakao",bg:"#FEE500",fg:"#3C1E1E",icon:l.jsx(yk,{}),label:"   "}),l.jsx(s,{kind:"qr",bg:"#1565c0",fg:"#fff",icon:l.jsx(vk,{}),label:"QR   "})]}),t==="kakao"&&l.jsxs(n,{children:[l.jsx(i,{children:"1:    "}),l.jsxs(r,{left:l.jsx(Ln,{src:"/icons/galaxy.png",alt:""}),children:[l.jsx("strong",{children:"  "}),"     ",l.jsx(kc,{}),o,"  "]}),l.jsxs(r,{left:l.jsx(Ln,{src:"/icons/apple.png",alt:""}),children:[l.jsx("strong",{children:""}),"    ",l.jsx(Tc,{}),o," "]}),l.jsx(i,{children:"2:    "}),l.jsxs(r,{left:l.jsx(Ln,{src:"/icons/samsung-internet.png",alt:""}),children:[l.jsx("strong",{children:""}),"    ",l.jsx(Xp,{}),o,l.jsx("strong",{children:"+ "})," ",l.jsx(Jp,{}),o,""]}),l.jsxs(r,{left:l.jsx(Ln,{src:"/icons/chrome.png",alt:""}),children:[l.jsx("strong",{children:""}),"     ",l.jsx(kc,{}),o," "]}),l.jsxs(r,{left:l.jsx(Ln,{src:"/icons/safari.png",alt:""}),children:[l.jsx("strong",{children:""}),"    ",l.jsx(Tc,{}),o," "]})]}),t==="qr"&&l.jsxs(n,{children:[l.jsx(i,{children:"   "}),l.jsxs(r,{left:l.jsx(Ln,{src:"/icons/safari.png",alt:""}),children:[l.jsx("strong",{children:""}),"    ",l.jsx(Tc,{}),o," "]}),l.jsxs(r,{left:l.jsx(Ln,{src:"/icons/samsung-internet.png",alt:""}),children:[l.jsx("strong",{children:""}),"    ",l.jsx(Xp,{}),o,l.jsx("strong",{children:"+ "})," ",l.jsx(Jp,{}),o,""]}),l.jsxs(r,{left:l.jsx(Ln,{src:"/icons/chrome.png",alt:""}),children:[l.jsx("strong",{children:""}),"     ",l.jsx(kc,{}),o," "]})]})]})}function Zp({onLogin:t}){const[e,n]=_.useState(""),[r,i]=_.useState(""),[s,o]=_.useState({}),a=mn();_.useEffect(()=>{const h=wf(x=>o(x||{}));return()=>{typeof h=="function"&&h()}},[]);const c=s.churchName||"",u=s.appDescription||"  .",f=(s.bulletinUrl||"").trim();async function d(h){h.preventDefault();const x=e.trim(),v=(r??"").trim();if(!x){alert("  .");return}if(!/^[-A-Za-z]+$/.test(x)){alert(`     .
(//  )`);return}if(!v){alert(`  .
        .`);return}try{if(t){const E=await t(x,v);E&&E.mustChangePassword?a("/change-password"):a("/home")}}catch(E){alert(E&&E.message?E.message:" .")}}return l.jsxs("div",{style:{minHeight:"100vh",background:"#E8F5E9",padding:24,display:"flex",flexDirection:"column",justifyContent:"center"},children:[l.jsx(xk,{}),l.jsx("h1",{style:{textAlign:"center",color:"#1B5E20",marginBottom:18,fontSize:28},children:" "}),l.jsxs("form",{onSubmit:d,style:{maxWidth:480,margin:"0 auto"},children:[f?l.jsx("a",{href:f,target:"_blank",rel:"noopener noreferrer",style:{display:"block",width:"100%",padding:14,marginBottom:12,borderRadius:10,textAlign:"center",textDecoration:"none",background:"#1D3557",color:"#fff",fontSize:18,fontWeight:700},children:" "}):null,l.jsx("input",{placeholder:"",value:e,onChange:h=>n(h.target.value),style:{width:"100%",padding:16,borderRadius:10,border:"1px solid #ccc",marginBottom:14,fontSize:18}}),l.jsx("input",{placeholder:"",type:"password",value:r,onChange:h=>i(h.target.value),style:{width:"100%",padding:16,borderRadius:10,border:"1px solid #ccc",marginBottom:14,fontSize:18}}),l.jsx("button",{type:"submit",style:{width:"100%",padding:16,background:"#2E7D32",color:"#fff",border:"none",borderRadius:10,fontWeight:"bold",fontSize:18},children:""}),l.jsx("div",{style:{marginTop:20,textAlign:"center",color:"#1B5E20"},children:c}),l.jsx("p",{style:{textAlign:"center",whiteSpace:"pre-line",marginTop:20,color:"#1B5E20"},children:u})]})]})}function _k({user:t}){const[e,n]=_.useState(""),[r,i]=_.useState(""),s=mn();_.useEffect(()=>{(!t||!t.uid)&&s("/login")},[t,s]);async function o(a){if(a.preventDefault(),!e||!r){alert("   .");return}if(e!==r){alert("   .");return}try{await IC(t.uid,e),alert(" ."),s("/home")}catch(c){alert(c&&c.message?c.message:"  .")}}return l.jsxs("div",{style:{minHeight:"100vh",background:"#E3F2FD",padding:20},children:[l.jsx("h2",{style:{textAlign:"center",color:"#1565C0",marginBottom:16},children:" "}),l.jsx("p",{style:{textAlign:"center",marginBottom:24},children:"       ."}),l.jsxs("form",{onSubmit:o,style:{maxWidth:400,margin:"0 auto",background:"#fff",padding:20,borderRadius:12,boxShadow:"0 4px 12px rgba(0,0,0,0.08)"},children:[l.jsxs("div",{style:{marginBottom:12},children:[l.jsx("label",{style:{display:"block",marginBottom:4,fontSize:14},children:" "}),l.jsx("input",{type:"password",value:e,onChange:a=>n(a.target.value),style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ccc"}})]}),l.jsxs("div",{style:{marginBottom:20},children:[l.jsx("label",{style:{display:"block",marginBottom:4,fontSize:14},children:"  "}),l.jsx("input",{type:"password",value:r,onChange:a=>i(a.target.value),style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ccc"}})]}),l.jsx("button",{type:"submit",style:{width:"100%",padding:12,borderRadius:6,border:"none",background:"#1565C0",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:"  "})]})]})}function bk(){const[t,e]=_.useState(null);return _.useEffect(()=>{const n=wf(r=>{e(r||{})});return()=>{typeof n=="function"&&n()}},[]),t}const em={:{1:" ",2:" ",3:"    ",4:" ",5:" ",6:" ",7:"",8:" ",9:"   ",10:"  ( 1:5-23)",11:"",12:"  ",13:"   ",14:"  ",15:"   ",16:" ",17:": ",18:"  ",19:" ",20:" ",21:"  ",22:"   ",23:"   ",24:"   ",25:" ",26:"  ",27:"  ",28:"   ",29:"   ",30:"   ",31:"  ",32:"    ",33:"  ",34:"   ",35:"   ",36:" ( 1:34-37)",37:" ",38:" ",39:"  ",40:"   ",41:"   ",42:"   ",43:"    ",44:" ",45:"   ",46:"   ",47:"  ",48:"   ",49:"  ",50:"  "},:{2:" ",3:"  ",4:"   ",5:"    ",6:"  ",7:"   ",8:"  :  ",9:"  :  ",10:"  :   ",11:"    ",12:"",13:"",14:" ",15:" ",16:" ",17:"  ( 20:1-13)",18:"  ",19:"    ",20:"( 5:1-21)",21:"  ( 15:12-18)",22:"  ",23:"  ",24:"   ",25:"  ",26:"( 36:8-38)",27:"( 38:1-7)",28:" ( 39:1-7)",29:"  ( 8:1-36)",30:" ( 37:25-28)",31:"   ( 35:30-36:1)",32:" ( 9:6-29)",33:"   ",34:"  ( 10:1-5)",35:" ",36:"   ",37:" ( 25:10-22)",38:" ( 27:1-8)",39:"  ( 28:1-14)",40:" "},:{2:" ",3:" ",4:"  ",5:"  ",6:"  ",7:"  ",8:"    ",9:"   ",10:"    ",11:"   ",12:"    ",13:"    ",14:"    ",15:"  ",16:"",17:"  ",18:"   ",19:" ",20:"   ",21:"   ",22:"  ",23:"   ",24:"   ",25:"",26:" ",27:"  "},:{1:"   ",2:"    ",3:" ",4:"  ",5:"  ",6:" ",7:"   ",8:"   ",9:"  ",10:" ",11:"",12:"  ",13:"  ( 1:19-33)",14:" ",15:"  ",16:"   ",17:" ",18:"  ",19:"  ",20:"   ( 17:1-7)",21:" ",22:"   ",23:"   ",24:"  ",25:"  ",26:"   ",27:" ",28:"  ( 29:38-46)",29:"  ( 23:23-25)",30:"  ",31:"   ",32:"   ( 3:12-22)",33:" ",34:"  ",35:"   ",36:"   "},:{1:"  ( 18:13-17)",2:"   ",3:"    ( 21:21-35)",4:"   ",5:"( 20:1-17)",6:"   ",7:"  ( 34:11-16)",8:"   ",9:" ",10:"   ( 34:1-10)",11:"   ",12:"  ",14:" ",15:"   ( 25:1-7)",16:"( 12:1-20)",17:" ",18:"   ",19:"( 35:9-28;  20:1-9)",20:"   ",21:"   ",22:"  ",23:"   ",24:" ",25:"   ",26:" ",27:"   ",28:"  ( 26:3-13;  7:12-24)",29:"   ",30:"  ",31:"   ",33:" ",34:" "},:{1:"   ",2:"   ",3:"   ",4:"   ",5:"   ",6:"  ",7:" ",8:"  ",9:"   ",10:"  ",11:"  ",12:"  ",13:"  ",14:"   ",15:"  ",16:"    ",17:"   ",18:"  ",19:"  ",20:"",21:"  ",22:"   ",23:"  ",24:"    "},:{1:"    ",2:"   ",3:"    ",4:" ",5:"  ",6:" ",7:"  ",8:"   ",9:"",10:" ",11:" ",12:"  ",13:" ",14:"  ",15:"  ",16:"  ",17:"  ",18:"  ",19:"    ",20:"   ",21:"  "},:{1:"   ",2:"  ",3:"  ",4:"  "},:{1:" ",2:" ",3:"  ",4:" ",5:"   ",6:" ",7:"  ",8:"  ",9:"  ",10:"  ",11:"   ",12:"  ",13:"  ",14:"  ",15:"  ",16:"   ",17:"   ",18:"   ",19:"   ",20:"  ",21:"   ",22:"   ",23:"  ",24:"   ",25:" ",26:"    ",27:"   ",28:"   ",29:"    ",30:"  ",31:"  ( 10:1-14)"},:{1:"     ",2:"   ",3:" ( 3:1-4)",4:" ",5:"    ( 11:1-3)",6:"    ( 13:1-14; 15:25-16:6, 43)",7:"   ( 17:1-15)",8:"   ( 18:1-17)",9:" ",10:"  ( 19:1-19)",11:" ",12:"   ",13:" ",14:"  ",15:" ",16:" ",17:"    ",18:" ",19:"  ",20:" ",21:"     ",22:" (",23:"  ",24:" ( 21:1-27)"},:{1:"   ",2:"   ",3:"  ( 1:3-12)",4:"  ",5:"   ( 2:1-18)",6:"  ",7:" ",8:"  ( 5:2-6:2)",9:"   ",10:"   ( 9:1-12)",11:"   ",12:"  ( 10:1-19)",13:"  ",14:"  ",15:"  ( 13:1-14:1)",16:"  ",17:" ",18:"  ",19:"  ",20:"  ",21:" ",22:"   ( 18:2-27)"},:{2:"  ",3:"  ",4:"  ",5:"  ",6:" ",7:"  ",8:"  ",9:"   ",10:"  ",11:"  ( 22:10-23:15)",12:"  ( 24:1-16)",13:"  ",14:"  ( 25:1-24)",15:"  ( 26:1-23)",16:"  ( 28:1-27)",17:"  ",18:"  ( 29:1-2; 31:1)",19:"    ( 37:1-7)",20:"  ( 32:24-26;  38:1-8, 21-22)",21:"  ( 33:1-20)",22:"  ( 34:1-2)",23:"   ( 34:3-7, 29-33)",24:"  ( 36:9-10)",25:" ( 36:13-21;  52:3-11)"},:{1:" ( 25:12-16)",2:" ",3:"   ",4:" ",5:" ",6:" ",7:" ",8:" ",9:"   ",10:"  ( 31:1-13)",11:"    ( 5:1-10)",12:"    ",13:"  ( 6:1-11)",14:"  ( 5:11-16)",15:"   ",16:" ( 105:1-15; 96:1-13; 106:47-48)",17:"    ( 7:1-17)",18:"  ( 8:1-18)",19:"   ( 10:1-19)",20:"  ( 12:26-31)",21:"  ( 24:1-25)",22:"  ",23:"  ",24:"   ",25:"  ",26:" ",27:"   ",28:"   ",29:"   "},:{1:" ( 10:26-29)",2:"  ( 5:1-18)",3:" ( 7:15-22)",4:"   ( 7:23-51)",5:"  ( 8:1-9)",6:" ( 8:12-21)",7:" ( 8:62-66)",8:" ( 9:10-28)",9:"   ( 10:1-13)",10:"  ( 12:1-20)",11:"   ( 12:21-24)",12:"  ( 14:25-28)",13:"  ( 15:1-8)",14:"   ",15:" ",16:"  ( 15:17-22)",17:"   ",18:"    ( 22:1-28)",19:"   ",20:"  ",21:"  ( 8:17-24)",22:"  ( 8:25-29; 9:21-28)",23:"  ( 11:4-16)",24:"  ( 12:1-16)",25:"  ( 14:2-6)",26:"   ( 14:21-22; 15:1-7)",27:"  ( 15:32-38)",28:"  ( 16:1-5)",29:"    ( 18:1-3)",30:" ",31:" ",32:"   ( 18:13-37; 19:14-19, 35-37;  36:1-22; 37:8-38)",33:"  ( 21:1-9)",34:"   ( 22:1-2)",35:"  ( 23:21-23)",36:"  ( 23:30-35)"},:{1:"   ",2:" ( 7:4-73)",3:"   ",4:"   ",5:"   ",6:"    ",7:"  ",8:"   ",9:"  ",10:"     "},:{2:"  ",3:"  ",4:" ",5:"  ",6:"  ",7:"  ",9:"  ",10:"  ",11:"  ",12:"  ",13:" "},:{2:"  ",3:"    ",4:"   ",5:"    ",6:"   ",7:" ",8:"    ",9:"   ",10:"   "},:{1:"   ",2:"   ",3:"   ",4:"  ",6:" ",8:"  ",9:" ",11:"  ",12:" ",13:" ",15:"   ",16:" ",18:"   ",19:" ",20:"   ",21:" ",22:"   ",23:" ",25:"   ",26:" ",27:"    ",28:" ",29:"  ",32:"  (32:1-37:24)",33:"   ",38:"  ",42:" "},:{3:"       ",4:" ,     ",5:" ,     ",6:" ,       ",7:" ,       ",8:" ,     ",9:" ,     ",11:" ,    ",12:" ,      ",13:" ,    ",14:" ,    ",15:" ",16:" ",17:" ",18:"   ,    ,                  ",19:" ,    ",20:" ,    ",21:" ,    ",22:" ,     ",23:" ",24:" ",25:" ",26:" ",27:" ",28:" ",29:" ",30:" ,   ",31:" ,    ",32:" ",34:"       ",35:" ",36:"   ,    ",37:" ",38:"  ",39:" ,      ",40:" ,    ",41:" ,    ",44:"  ,    ",45:"  ,  ,     ",46:"  ,     ",47:"  ,    ",48:"    ",49:"  ,    ",50:" ",51:" ,    ,         ",52:" ,    ,           ",53:" ,     ",54:" ,     ,             ",55:" ,     ",56:"  ,       ,     ",57:"  ,     ,      ",58:"  ,     ",59:"  ,     ,         ",60:"    ,     ,                 ",61:" ,     ",62:" ,       ",63:" ,    ",64:" ,    ",65:" ,    ",66:",    ",67:"  ,     ",68:" ,    ",69:" ,     ",70:"      ",72:" ",74:" ",75:" ,     ",76:" ,     ",77:" ,       ",78:" ",79:" ",80:" ,     ",81:" ,     ",82:" ",83:"   ",84:"  ,     ",85:"  ,    ",86:" ",87:"    ",88:"       ,     ",89:"  ",98:"",100:" ",101:" ",102:"          ",103:" ",108:"  ",109:" ,    ",110:" ",120:"  ",121:"  ",122:"     ",123:"  ",124:"     ",125:"  ",126:"  ",127:"     ",128:"  ",129:"  ",130:"  ",131:"     ",132:"  ",133:"     ",134:"  ",138:" ",139:" ,    ",140:" ,    ",141:" ",142:"       ",143:" ",144:" ",145:" "},:{1:"  ",2:"  ",3:"  ",4:"  ",5:"   ",6:" ",7:"   ",8:"  ",9:" ",10:" ",25:" ",30:" ",31:"   "},:{1:"   ",2:" ",3:"   ",4:", , ",5:" ",7:"  ",8:" ",9:"     ",11:" ",12:" "},:{},:{1:" ",2:"   ",3:" ",4:"   ",5:" ",6:"  ",7:"    ",8:" ",9:" ",10:"  ",11:" ",12:" ",13:"  ",14:" ",15:"   ",16:"  ",17:"   ",18:"    ",19:"  ",20:"  ",21:"   ",22:"   ",23:"   ",24:"  ",25:"",26:"   ",28:"  ",29:"  ",30:"   ",32:"  ",33:"  ",34:"  ",35:" ",36:"  ( 18:13-27;  32:1-19)",37:"    ( 19:1-7)",38:"   ( 20:1-11;  32:24-26)",39:"  ( 20:12-19)",40:" ",41:"  ",42:" ",43:" ",44:"    ",45:"  ",47:" ",48:"   ",49:"  ",50:"  ",51:" ",52:"  ",54:"  ",55:" ",56:"  ",57:"  ",58:"  ",59:"   ",60:"  ",61:"  ",63:" ",65:"   ",66:"  "},:{1:"   ",2:" ",3:"  ",4:" ",5:"  ",6:"   ",7:"  ",8:" ",9:"    ",10:"    ",11:"   ",12:" ",13:" ",14:" ",15:"   ",16:"  ",17:"  ",18:" ",19:" ",20:" ",21:"     ",22:"   ",23:"  ",24:"   ",25:"     ",26:"    ",27:"   ",28:" ",29:"   ",30:"   ",31:"   ",32:"    ",33:"    ",34:"   ",35:"  ",36:"    ",37:"    ",38:"  ",39:" ( 25:1-12;  52:4-16)",40:"  ( 25:22-24)",42:"   ",43:"  ",44:"    ",45:"   ",46:"   ",47:"   ",48:" ",49:"  ",50:"  ",51:"  ",52:"  ( 24:18-25:7)"},:{2:"   ",3:", , ",4:"  ",5:"  "},:{2:"  ",3:" ( 33:1-9)",4:"  ",5:"   ",6:"   ",7:"  ",8:"  ",9:"   ",10:"   ",11:"  ",12:"    ",13:"  ",14:"   ",15:"     ",16:" ",17:"  ",18:"   ",19:"",20:" ,  ",21:" ",22:"  ",23:"  ",24:"  ",25:"  ",26:"  ",27:"  ",28:"   ",29:"  ",30:"  ",31:"   ",32:"   ",33:"   ( 3:16-21)",34:"   ",35:"   ",36:"  ",37:"  ",38:"  ",39:"  ",40:"   ",41:"  ",42:" ",43:"  ",44:"    ",45:" ",46:" ",47:"  ",48:"    "},:{2:" ",3:"  ",4:"    ",5:"   ",6:"   ",7:"  ",8:"  ",9:" ",10:"    ",11:"    ",12:""},:{1:"  ",2:" ",3:"   ",4:" ",5:"  ",6:"  ",7:"  ",8:"  ",9:"   ",10:"    ",11:"   ",12:"   ",13:"   ",14:"   "},:{1:"   ",2:"    ",3:"  "},:{1:"    ",2:"  ",3:"   ",4:"   ",5:"",6:" ",7:",  ",8:",    ",9:",   "},:{1:" "},:{1:" ",3:"  ",4:"   "},:{1:"   ",2:" ",3:"   ",4:"  ",5:"   ",6:"  ",7:" "},:{1:"   ",2:" "},:{1:" ",2:" ",3:" "},:{1:" ",2:"  ",3:"   "},:{1:"  "},:{1:"   ",2:"  ",3:"    ",4:"   ",5:" ",6:" ",7:"   ",8:"   ",9:"     ",10:"  ",11:" ",12:" ",13:"  ",14:"  "},:{1:"  ",2:"  ",3:"",4:"  "},:{1:"  ( 2:1-7)",2:"   ",3:"   ( 1:1-8;  3:1-18;  1:19-28)",4:" ( 1:12-13;  4:1-13)",5:"  ( 6:20-23)",6:"  ",7:" ( 6:37-38, 41-42)",8:"  ( 1:40-45;  5:12-16)",9:" ( 2:1-12;  5:17-26)",10:"  ( 3:13-19;  6:12-16)",11:" ( 7:18-35)",12:"   ( 2:23-28;  6:1-5)",13:"     ( 4:1-9;  8:4-8)",14:"  ( 6:14-29;  9:7-9)",15:" ( 7:1-23)",16:"   ( 8:11-13;  12:54-56)",17:"  ( 9:2-13;  9:28-36)",18:"  ( 9:33-37, 42-48;  9:46-48; 15:3-7; 17:1-2)",19:"  ( 10:1-12)",20:" ",21:" ( 11:1-11;  19:28-38;  12:12-19)",22:"  ( 14:15-24)",23:"  ( 12:38-40;  11:37-52; 20:45-47)",24:"   ( 13:1-2;  21:5-6)",25:"  ",26:"  ( 14:1-2;  22:1-2;  11:45-53)",27:"  ( 15:1;  23:1-2;  18:28-32)",28:"( 16:1-8;  24:1-12;  20:1-10)"},:{1:" ( 3:13-17;  3:21-22)",2:" ( 9:1-8;  5:17-26)",3:"    ( 12:9-14;  6:6-11)",4:"     ( 13:1-9;  8:4-8)",5:"   ( 8:28-34;  8:26-39)",6:"  ( 13:53-58;  4:16-30)",7:" ( 15:1-20)",8:"  ( 15:32-39)",9:"  ( 17:1-13;  9:28-36)",10:"  ( 19:1-12)",11:" ( 21:1-11;  19:28-40;  12:12-19)",12:"  ( 21:33-46;  20:9-19)",13:"   ( 24:1-2;  21:5-6)",14:"   ( 26:1-5;  22:1-2;  11:45-53)",15:"  ( 27:1-2, 11-14;  23:1-5;  18:28-38)",16:"( 28:1-10;  24:1-12;  20:1-18)"},:{1:"   ",2:" ( 1:18-25)",3:"  ( 3:1-12;  1:1-8;  1:19-28)",4:" ( 4:1-11;  1:12-13)",5:"  ( 4:18-22;  1:16-20)",6:"   ( 12:1-8;  2:23-28)",7:"  ( 8:5-13;  4:43-54)",8:"   ",9:"  ( 10:5-15;  6:7-13)",10:"   ( 11:20-24)",11:" ( 6:9-15; 7:7-11)",12:"  ( 10:26-33; 12:32; 10:19-20)",13:"  ",14:"   ",15:"    ( 18:12-14)",16:"   ",17:", ,   ( 18:6-7; 21:22;  9:42)",18:"  ",19:" ",20:"   ( 21:23-27;  11:27-33)",21:"  ( 12:41-44)",22:" ( 26:1-5, 14-16;  14:1-2, 10-11;  11:45-53)",23:"  ( 27:1-2, 11-14;  15:1-5;  18:28-38)",24:"   ( 16:12-13)"},:{1:"  ( 3:1-12;  1:7-8;  3:15-17)",2:" ",3:" ",4:"  ",5:"  ",6:"  ( 14:13-21;  6:30-44;  9:10-17)",7:"   ",8:"  ",9:"     ",10:"  ",11:"  ",12:"   ( 26:6-13;  14:3-9)",13:"  ",14:"    ",15:"   ",16:" ",17:"",18:"( 26:47-56;  14:43-50;  22:47-53)",19:"  ( 27:32-44;  15:21-32;  23:26-43)",20:"( 28:1-10;  16:1-8;  24:1-2)",21:"  "},:{1:"  ",2:" ",3:"      ",4:"    ",5:" ",6:"  ",7:" ",8:"  ",9:" ( 22:6-16; 26:12-18)",10:"  ",11:"   ",12:"   ",13:"  ",14:"   ",15:" ",16:"   ",17:"  ",18:"  ",19:"  ",20:"   ",21:"  ",22:" ( 9:1-19; 26:12-18)",23:"  ",24:" ",25:"  ",26:" ( 9:1-19; 22:6-16)",27:"  ",28:"  "},:{1:"   ",2:" ",3:"   ",4:"    ",5:"    ",6:"    ",7:"    ",8:"  ",9:"  ",10:"   ",11:"  ",12:"    ",13:"  ",14:"  ",15:"   ",16:""},:{1:"  ",2:"   ",3:" ",4:" ",5:"  ",6:"   ",7:"  ",8:"  ",9:" ",10:"   ",11:"   ",12:" ",13:"",14:" ",15:" ",16:"  "},:{1:"   ",2:"   ",3:"  ",4:"  ",5:"  ",6:"    ",7:"   ",8:" ",9:"   ",10:"   ",11:"  ",12:"    ",13:"  "},:{1:"  ",2:"   ",3:"  ",4:"   ",5:"  ",6:"  "},:{1:"   ",2:"    ",3:"   ",4:"   ",5:"  ",6:" "},:{1:"   ",2:" ",3:"  ",4:""},:{1:"  ",2:"  ",3:"  ",4:""},:{1:"   ",2:"   ",4:"   ",5:"  "},:{1:"   ",2:" ",3:"  "},:{1:"   ",2:"  ",3:"  ",4:" ",5:"  ",6:"   "},:{1:"   ",2:"   ",3:" ",4:" "},:{1:"    ",2:"  ",3:"  "},:{1:"  "},:{2:" ",3:"  ",4:"  ",5:" ",6:"  ",7:"",8:"  ",9:"    ",10:"  ",11:"",12:"  ",13:"  "},:{1:" ",2:"  ",3:"   ",4:"  ",5:"   "},:{1:" ",2:"   ",3:" ",4:"    ",5:"   "},:{1:"   ",2:"   ( 4-13)",3:" "},1:{},2:{},3:{},:{1:"   ( 2:1-17)"},:{1:" ",2:"   ",3:"   ",4:" ",5:"  ",6:"   ",7:"    ",8:"   ",10:"  ",11:" ",12:" ",13:"  ",14:"    ",16:"  ",17:"   ",18:" ",19:"   ",20:"  ",21:"   ",22:"  "}},Sk={:[{start:1,end:11,theme:",   "},{start:12,end:25,theme:"  "},{start:26,end:36,theme:"   "},{start:37,end:50,theme:"   "}],:[{start:1,end:18,theme:"   "},{start:19,end:40,theme:"  "}],:[{start:1,end:7,theme:"  "},{start:8,end:10,theme:"  "},{start:11,end:27,theme:"   "}],:[{start:1,end:10,theme:"  "},{start:11,end:25,theme:"  "},{start:26,end:36,theme:"   "}],:[{start:1,end:4,theme:"   "},{start:5,end:26,theme:"   "},{start:27,end:34,theme:"   "}],:[{start:1,end:5,theme:"   "},{start:6,end:12,theme:"   "},{start:13,end:24,theme:"   "}],:[{start:1,end:2,theme:"  "},{start:3,end:16,theme:"   "},{start:17,end:21,theme:",   "}],:[{start:1,end:4,theme:"()  "}],:[{start:1,end:7,theme:"   "},{start:8,end:15,theme:"    "},{start:16,end:31,theme:"   "}],:[{start:1,end:10,theme:"   "},{start:11,end:24,theme:"  , "}],:[{start:1,end:11,theme:"   "},{start:12,end:22,theme:"   "}],:[{start:1,end:17,theme:"   "},{start:18,end:25,theme:"   "}],:[{start:1,end:9,theme:"  "},{start:10,end:29,theme:"    "}],:[{start:1,end:9,theme:"   "},{start:10,end:36,theme:"    "}],:[{start:1,end:10,theme:"   "}],:[{start:1,end:13,theme:"   "}],:[{start:1,end:10,theme:"    "}],:[{start:1,end:42,theme:"    "}],:[{start:1,end:150,theme:"   "}],:[{start:1,end:31,theme:"   "}],:[{start:1,end:12,theme:"   "}],:[{start:1,end:8,theme:"   "}],:[{start:1,end:39,theme:"    "},{start:40,end:66,theme:"     "}],:[{start:1,end:25,theme:"    "},{start:26,end:52,theme:"    "}],:[{start:1,end:5,theme:"    "}],:[{start:1,end:24,theme:"   "},{start:25,end:32,theme:"   "},{start:33,end:48,theme:"    "}],:[{start:1,end:6,theme:"    "},{start:7,end:12,theme:"    "}],:[{start:1,end:14,theme:"    "}],:[{start:1,end:3,theme:"   "}],:[{start:1,end:9,theme:"    "}],:[{start:1,end:1,theme:"   "}],:[{start:1,end:4,theme:"   "}],:[{start:1,end:7,theme:" ,  "}],:[{start:1,end:3,theme:"   "}],:[{start:1,end:3,theme:"  "}],:[{start:1,end:3,theme:"    "}],:[{start:1,end:2,theme:"  "}],:[{start:1,end:14,theme:"   "}],:[{start:1,end:4,theme:"   "}],:[{start:1,end:4,theme:"   "},{start:5,end:7,theme:":   "},{start:8,end:25,theme:"    "},{start:26,end:28,theme:"   "}],:[{start:1,end:10,theme:"   "},{start:11,end:16,theme:"   "}],:[{start:1,end:3,theme:"   "},{start:4,end:19,theme:"    "},{start:20,end:24,theme:"  ,  "}],:[{start:1,end:12,theme:"   "},{start:13,end:21,theme:"     "}],:[{start:1,end:7,theme:"    "},{start:8,end:12,theme:"   "},{start:13,end:28,theme:"    "}],:[{start:1,end:8,theme:"   "},{start:9,end:11,theme:"   "},{start:12,end:16,theme:"   "}],:[{start:1,end:4,theme:"   "},{start:5,end:10,theme:"    "},{start:11,end:16,theme:" , ,  "}],:[{start:1,end:7,theme:"    "},{start:8,end:9,theme:"   "},{start:10,end:13,theme:"   "}],:[{start:1,end:2,theme:"   "},{start:3,end:4,theme:"   "},{start:5,end:6,theme:"   "}],:[{start:1,end:3,theme:"    "},{start:4,end:6,theme:"    "}],:[{start:1,end:2,theme:"    "},{start:3,end:4,theme:"   "}],:[{start:1,end:2,theme:"   "},{start:3,end:4,theme:"     "}],:[{start:1,end:3,theme:"    "},{start:4,end:5,theme:"    "}],:[{start:1,end:2,theme:"     "},{start:3,end:3,theme:"    "}],:[{start:1,end:3,theme:"   "},{start:4,end:6,theme:"   "}],:[{start:1,end:2,theme:"   "},{start:3,end:4,theme:"    "}],:[{start:1,end:3,theme:"   "}],:[{start:1,end:1,theme:"   "}],:[{start:1,end:10,theme:"   "},{start:11,end:13,theme:"   "}],:[{start:1,end:5,theme:"    "}],:[{start:1,end:5,theme:"     "}],:[{start:1,end:3,theme:"    "}],1:[{start:1,end:5,theme:"    "}],2:[{start:1,end:1,theme:"   "}],3:[{start:1,end:1,theme:"    "}],:[{start:1,end:1,theme:"    "}],:[{start:1,end:3,theme:"   "},{start:4,end:18,theme:"    "},{start:19,end:22,theme:"    "}]},wk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"()",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",1:"",2:"",3:"",:"",:""},Ck={:"   ",:"   ",:"   ",:"   ",:"   ",:"   ","()":"   ",:"   ",:"    ",:"      "};function Ek({todayPortion:t,todayKey:e,checks:n,toggle:r,isApproved:i,isMobile:s}){if(!t)return null;const{sections:o}=_.useMemo(()=>{const u=v=>v?v.replace(//g,"").replace(/([-]{2,})/g,w=>Qp(w)):"",f=v=>{if(!v)return 0;const E=v.replace(/[~]/g,"-").split(",");let g=0;return E.forEach(p=>{const y=p.replace(/[^0-9-]/g," "),b=y.match(/(\d+)\s*-\s*(\d+)/);b?g+=parseInt(b[2])-parseInt(b[1])+1:y.match(/(\d+)/)&&(g+=1)}),g};let d=[];if(t.panorama&&t.panorama.parsedSections)d=t.panorama.parsedSections.map(v=>({subTitle:v.subTitle||"",bibleRef:v.bibleRef}));else{const v=t.items||[],w=[];for(const E of v){if(!E||!E.book||typeof E.chapter!="number")continue;const g=w[w.length-1];g&&g.book===E.book&&E.chapter===g.to+1?g.to=E.chapter:w.push({book:E.book,from:E.chapter,to:E.chapter})}d=w.map(E=>({subTitle:"",bibleRef:E.from===E.to?`${E.book} ${E.from}`:`${E.book} ${E.from}~${E.to}`}))}let h=[];d.forEach(v=>{if(v.bibleRef.includes(",")){const w=v.bibleRef.split(","),E=w[0].match(/^([-a-zA-Z]+)/),g=E?E[1]:"";w.forEach((p,y)=>{let b=p.trim();y>0&&g&&!b.match(/^[-a-zA-Z]+/)&&(b=`${g} ${b}`),h.push({subTitle:v.subTitle,bibleRef:b})})}else h.push(v)});let x=[];if(h.length>0){let v=h.map(p=>({...p,count:f(p.bibleRef),abbreviations:[u(p.bibleRef)]}));const w=p=>{const b=p.bibleRef.replace(//g,"").replace(/[~]/g,"-").match(/^([-\s\u00A0a-zA-Z]+)\s*(\d+)(?:\s*-\s*(\d+))?/);if(b){const T=b[1].trim(),S=parseInt(b[2]),C=b[3]?parseInt(b[3]):S,j=C-S+1;if(j>=2){const P=Math.floor(j/2),I=S+P-1,M=S===I?`${T} ${S}`:`${T} ${S}~${I}`,A=I+1===C?`${T} ${C}`:`${T} ${I+1}~${C}`;return[{...p,bibleRef:M,count:I-S+1,abbreviations:[u(M)],subTitle:p.subTitle},{...p,bibleRef:A,count:C-(I+1)+1,abbreviations:[u(A)],subTitle:""}]}}return[p]};for(;v.length>4;){let p=-1,y=1/0;for(let b=0;b<v.length-1;b++){const T=v[b].count+v[b+1].count;T<y&&(y=T,p=b)}if(p!==-1){const b=v[p],T=v[p+1];v.splice(p,2,{...b,count:b.count+T.count,abbreviations:[...b.abbreviations,...T.abbreviations],subTitle:b.subTitle&&T.subTitle&&b.subTitle!==T.subTitle?`${b.subTitle} & ${T.subTitle}`:b.subTitle||T.subTitle})}else break}for(let p=0;p<5&&v.length<3;p++){let y=-1,b=-1;for(let T=0;T<v.length;T++)v[T].count>b&&(b=v[T].count,y=T);if(y!==-1&&v[y].count>=2){const T=w(v[y]);if(T.length>1)v.splice(y,1,...T);else break}else break}let E=0;const g=new Set;x=v.map(p=>{var T;E+=p.count;const y=p.abbreviations.reduce((S,C,j)=>{const P=C.replace(/\s+/g,"");if(j===0)return P;const I=p.abbreviations[j-1],M=I.includes("-"),A=C.includes("-"),H=I.match(/^([^\d]+)\s*\d+/),Q=C.match(/^([^\d]+)\s*\d+/);if(H&&Q&&H[1]===Q[1]&&!M&&!A){const O=C.replace(Q[1],"").trim();return`${S}, ${O.replace(/\s+/g,"")}`}else return H&&Q&&H[1]===""&&Q[1]===""?`${S}, ${P}`:`${S}
${P}`},"");let b=p.subTitle||"";if(!b)try{const C=(p.abbreviations[0]||"").match(/^([-]+)[\u00A0\s](\d+)/);if(C){const j=C[1],P=parseInt(C[2]),I=Object.keys(em).find(A=>Qp(A)===j)||j,M=Sk[I];if(M){const A=M.find(H=>P>=H.start&&P<=H.end);A&&(b=A.theme)}if(!b)if(p.count<=5)b=((T=em[I])==null?void 0:T[String(P)])||"";else{const A=wk[I];b=Ck[A]||""}}}catch(S){console.error("Subtitle auto-gen failed:",S)}return b&&g.has(b)?b="":b&&g.add(b),{...p,bibleRef:y,displayCount:E,subTitle:b}})}return{sections:x}},[t]),a=u=>[-50,30,-55,35][u%4],c=50;return l.jsx("div",{style:{marginTop:18,width:"100%",position:"relative",padding:"10px 0",overflow:"hidden"},children:l.jsxs("div",{style:{position:"relative",width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[o.length===1&&l.jsx("div",{style:{width:"100%",height:40,position:"relative",marginBottom:5},children:l.jsxs("svg",{style:{position:"absolute",top:0,left:"50%",width:200,height:40,transform:"translateX(-50%)"},children:[l.jsx("path",{d:`M 100 0 Q 100 20, ${100+a(0)} 40`,fill:"none",stroke:"rgba(255,255,255,0.7)",strokeWidth:"9",strokeLinecap:"round"}),l.jsx("path",{d:`M 100 0 Q 100 20, ${100+a(0)} 40`,fill:"none",stroke:"rgba(3,71,50,0.2)",strokeWidth:"2.5",strokeDasharray:"6,6"})]})}),o.map((u,f)=>{const d=a(f),h=f===o.length-1;return l.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",position:"relative",marginBottom:h?o.length===1?50:0:c},children:[f===1&&l.jsx("img",{src:"/runner_v2.png",alt:"runner",style:{position:"absolute",right:"22%",top:5,width:28,height:48,zIndex:3}}),f===2&&l.jsx("img",{src:"/sign_v2.png",alt:"sign",style:{position:"absolute",left:"15%",top:-35,width:50,height:"auto",zIndex:3}}),f>=4&&(f%2===0?l.jsx("span",{style:{position:"absolute",right:"1.2%",top:-5,fontSize:36,opacity:1,zIndex:3},children:""}):l.jsx("span",{style:{position:"absolute",left:"1.2%",top:-5,fontSize:36,opacity:1,zIndex:3},children:""})),l.jsxs("div",{style:{transform:`translateX(${d}px)`,transition:"transform 0.5s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",zIndex:2},children:[l.jsx("div",{style:{minWidth:48,height:48,padding:"0 8px",borderRadius:24,background:n[e]?"#1B9C5A":"#034732",border:n[e]?"4px solid rgba(255,255,255,0.2)":"4px solid #F3F4F6",display:"flex",alignItems:"center",justifyContent:"center",fontSize:19,fontWeight:900,color:"#ffffff",boxShadow:"none"},children:u.displayCount}),l.jsxs("div",{style:{position:"absolute",...[1,3].includes(f)?{right:52}:{left:52},width:190,textAlign:[1,3].includes(f)?"right":"left",display:"flex",flexDirection:"column"},children:[u.subTitle&&l.jsx("div",{style:{fontSize:11,fontWeight:900,letterSpacing:"-0.05em",color:"#FFEB3B",opacity:1,textShadow:"0 1px 2px rgba(0,0,0,0.4)",marginBottom:2,lineHeight:1.2,wordBreak:"keep-all"},children:u.subTitle}),l.jsx("div",{style:{fontSize:19,fontWeight:900,color:"#ffffff",textShadow:"0 1px 2px rgba(0,0,0,0.3)",whiteSpace:"pre-wrap",wordBreak:"keep-all",lineHeight:1.2},children:u.bibleRef})]})]}),!h&&l.jsxs("svg",{style:{position:"absolute",top:40,left:"50%",width:260,height:c+8,transform:"translateX(-50%)",zIndex:1,pointerEvents:"none"},children:[l.jsx("path",{d:`M ${130+d} 0 Q ${130+(d+a(f+1))/2+(f%2===0?45:-45)} ${c/2}, ${130+a(f+1)} ${c}`,fill:"none",stroke:n[e]?"rgba(255,255,255,0.4)":"rgba(255,255,255,0.8)",strokeWidth:"10",strokeLinecap:"round"}),l.jsx("path",{d:`M ${130+d} 0 Q ${130+(d+a(f+1))/2+(f%2===0?45:-45)} ${c/2}, ${130+a(f+1)} ${c}`,fill:"none",stroke:n[e]?"rgba(255,255,255,0.75)":"rgba(3,71,50,0.3)",strokeWidth:"2.5",strokeDasharray:"6,8",strokeLinecap:"round"})]}),h&&o.length===1&&l.jsxs("svg",{style:{position:"absolute",top:40,left:"50%",width:200,height:60,transform:"translateX(-50%)",zIndex:1},children:[l.jsx("path",{d:`M ${100+a(0)} 0 Q ${100+a(0)} 30, 100 60`,fill:"none",stroke:"rgba(255,255,255,0.7)",strokeWidth:"9",strokeLinecap:"round"}),l.jsx("path",{d:`M ${100+a(0)} 0 Q ${100+a(0)} 30, 100 60`,fill:"none",stroke:"rgba(3,71,50,0.2)",strokeWidth:"2.5",strokeDasharray:"6,6"})]})]},f)})]})})}function $n({crewName:t,user:e}){const n=`${Ve(t)} `,[r,i]=_.useState({}),[s,o]=_.useState(new Date),[a,c]=_.useState([]),[u,f]=_.useState(!1),[d,h]=_.useState(""),[x,v]=_.useState(null),[w,E]=_.useState(""),[g,p]=_.useState(!1),[y,b]=_.useState(!1),[T,S]=_.useState(!1),[C,j]=_.useState(null),[P,I]=_.useState(!1),[M,A]=_.useState([]),[H,Q]=_.useState({}),[ie,O]=_.useState({}),[Y,N]=_.useState([]);_.useState(!1);const[B,W]=_.useState(!1),q=bk(),De=(q&&q.approval||{})[t]||"manual";_.useEffect(()=>{if(typeof window>"u")return;const D=window.matchMedia("(max-width: 768px)"),X=le=>W(le.matches);return W(D.matches),D.addEventListener("change",X),()=>D.removeEventListener("change",X)},[]);const we=mn(),Oe=Z0();function Xe(D){if(!D)return"";const X=new Date(D);X.getFullYear();const le=String(X.getMonth()+1).padStart(2,"0"),Te=String(X.getDate()).padStart(2,"0"),Ue=String(X.getHours()).padStart(2,"0"),dt=String(X.getMinutes()).padStart(2,"0");return`${le}-${Te} ${Ue}:${dt}`}let ke=JE;t===""?ke=fy:t===""?ke=hy:t==="(A)"?ke=ZE:t==="(B)"?ke=ek:t===""?ke=270:t===""&&(ke=124),_.useEffect(()=>{if(!(e!=null&&e.uid))return;const D=TC(t,Oe,e.uid,X=>{b(X),S(!0)});return()=>{typeof D=="function"&&D()}},[e,t,Oe]),_.useEffect(()=>{if(!(e!=null&&e.uid)||!t||!T)return;if(!(De!=="manual"||y)){I(!1);return}let X=!0;return(async()=>{try{const le=await iC(t);if(!X)return;if(!le||!le.enabled){I(!1);return}const Te=parseInt(le.version||"0",10)||0,Ue=await sC(e.uid,t);if(!X)return;!!((le.title||"").trim()||(le.content||"").trim())&&Te>(Ue||0)?(j({...le,version:Te}),I(!0)):I(!1)}catch(le){console.error("    ",le)}})(),()=>{X=!1}},[e==null?void 0:e.uid,t,T,y,De]);async function xr(){try{e!=null&&e.uid&&t&&(C!=null&&C.version)&&await oC(e.uid,t,C.version)}catch(D){console.error("      ",D)}finally{I(!1)}}_.useEffect(()=>{e!=null&&e.uid&&T&&(y||e.crew===t&&uC(e.uid).catch(D=>console.error("crew  ",D)))},[e,t,T,y]),_.useEffect(()=>{if(!(e!=null&&e.uid))return;if(!T||!y){i({});return}const D=Q0(t,e.uid,i);return()=>{typeof D=="function"&&D()}},[e,t,T,y]),_.useEffect(()=>{const D=ka(Te=>O(Te||{})),X=aC(t,Te=>{Q({[t]:Te})}),le=$u(t,Oe,Te=>{const Ue=Te?Object.keys(Te):[];N(Ue)});return()=>{typeof D=="function"&&D(),typeof X=="function"&&X(),typeof le=="function"&&le()}},[t,Oe]),_.useEffect(()=>{if(!t){A([]);return}const X=(H||{})[t],le=X&&X.users||{},Te=new Date,Ue=Te.getFullYear(),dt=Te.getMonth()+1,Ze=sn(Ue,dt);if(!Ze||Ze.length===0){A([]);return}const ln=Te.getDate(),vn=Ze.slice(0,ln),xn=`${Ue}-${String(dt).padStart(2,"0")}-${String(ln).padStart(2,"0")}`,Yt=mr(t,Ze),_n={};(Yt||[]).forEach(it=>{!it||!it.date||(_n[it.date]=it.chapters||0)});const St=[],ni=new Set;(Y||[]).forEach(it=>{ie[it],ni.add(it),_r(it,St,le,_n,vn,ie,Ze,xn)}),Object.entries(ie||{}).forEach(([it,Gt])=>{ni.has(it)||Gt.crew===t&&_r(it,St,le,_n,vn,ie,Ze,xn)}),St.sort((it,Gt)=>(Gt.chapters||0)-(it.chapters||0)),A(St)},[t,H,ie,Y]);function _r(D,X,le,Te,Ue,dt,Ze,ln){const xn=(le[D]||{}).checks||{};let Yt=0,_n=0;Ue.forEach(ri=>{const ns=Te[ri]||0;ns&&(_n+=ns,xn[ri]&&(Yt+=ns))});const St=dt[D]||{},ni=St.name||D,Er=St.medals||{},it=_n>0?Math.round(Yt/_n*100):0,Gt=kf({dates:Ze,todayKey:ln,userChecks:xn,userDailyActivity:St.dailyActivity||{}}),Pa=Xn(St.earnedMedals||{});X.push({uid:D,name:ni,chapters:Yt,progress:it,stateKey:Gt.key,stateLabel:Gt.label,medals:Er,dokStatus:Pa})}_.useEffect(()=>{const D=vC(t,c);return()=>{typeof D=="function"&&D()}},[t]);const Zr=3*24*60*60*1e3,Mn=Date.now()-Zr,br=(a||[]).slice(0,20),Zi=(a||[]).filter(D=>(D.timestamp||0)>=Mn),ei=u?Zi:br;if(!e||!e.uid)return l.jsxs("div",{style:{padding:20,background:"#F8F9FF",minHeight:"100vh"},children:[l.jsxs("h2",{style:{color:"#034732",fontSize:32,fontWeight:800,textAlign:"center"},children:[" ",n]}),l.jsx("p",{children:"    ."})]});if(De==="manual"&&!y)return l.jsxs("div",{style:{padding:20,background:"#F8F9FF",minHeight:"100vh"},children:[l.jsxs("h2",{style:{color:"#034732",fontSize:32,fontWeight:800,textAlign:"center"},children:[t," "]}),l.jsx("p",{style:{textAlign:"center",marginTop:20,fontSize:16},children:"     ."})]});if(!T)return l.jsxs("div",{style:{padding:20,background:"#F8F9FF",minHeight:"100vh"},children:[l.jsxs("h2",{style:{color:"#034732",fontSize:32,fontWeight:800,textAlign:"center"},children:[" ",n]}),l.jsx("p",{children:"   ..."})]});if(De==="manual"&&!y)return l.jsxs("div",{style:{padding:20,background:"#F8F9FF",minHeight:"100vh"},children:[l.jsxs("h2",{style:{color:"#034732",fontSize:32,fontWeight:800,textAlign:"center"},children:[t," "]}),l.jsx("p",{style:{textAlign:"center",marginTop:20,fontSize:16},children:"     ."})]});if(De==="closed")return l.jsxs("div",{style:{padding:20,background:"#F8F9FF",minHeight:"100vh"},children:[l.jsxs("h2",{style:{color:"#034732",fontSize:32,fontWeight:800,textAlign:"center"},children:[" ",n]}),l.jsx("p",{children:"     .   ."}),l.jsx("button",{onClick:()=>we("/home"),style:{marginTop:20,padding:"8px 16px",borderRadius:8,border:"none",background:"#1565C0",color:"#fff",fontWeight:"bold",cursor:"pointer"},children:" "})]});if(De==="manual"&&!y)return l.jsxs("div",{style:{padding:20,background:"#F8F9FF",minHeight:"100vh"},children:[l.jsxs("h2",{style:{color:"#034732",fontSize:32,fontWeight:800,textAlign:"center"},children:[t," "]}),l.jsx("p",{style:{textAlign:"center",marginTop:20,fontSize:16},children:"     ."})]});const Sr=s.getFullYear(),wr=s.getMonth()+1,wo=sn(Sr,wr),on=mr(t,wo),Ft=`${Sr}-${String(wr).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,Na=String(Sr).slice(2),Co=["","","","","","",""][s.getDay()],On=`${Na} ${String(wr).padStart(2,"0")} ${String(s.getDate())}(${Co})`,We=on.find(D=>D.date===Ft),Eo={};on.forEach(D=>{Eo[D.date]=D.chapters||0});let Je=0;wo.forEach(D=>{r[D]&&(Je+=Eo[D]||0)});const gn=(Je/10).toFixed(1),ko=Math.min(100,Math.round(Je/ke*100)||0);let Bn=We&&(We.startLabel||""),Cr=We&&(We.endLabel||""),To=0;if(We&&(To=We.chapters||We.chapterCount||0),(!Bn||!Cr)&&We&&We.label){const D=String(We.label).split("~");D.length===2?(Bn=D[0].trim(),Cr=D[1].trim()):(Bn=We.label,Cr="");const X=le=>le?le.replace(/\(\s*\d+\)\s*$/,"").trim():"";Bn=X(Bn),Cr=X(Cr)}function ti(D){y&&K0(t,e.uid,D,!(r[D]??!1))}function es(D){const X=new Date(s);X.setDate(X.getDate()+D),o(X)}function Da(){const D=d.trim();if(!D)return;const X={text:D,user:e.name||"",uid:e.uid,timestamp:Date.now()};pC(t,X).then(()=>{h("")})}function Ro(D){!D||D.uid!==e.uid||(v(D.id),E(D.text||""))}async function yn(D){if(!D||D.uid!==e.uid)return;const X=(w||"").trim();if(!X){alert("  .");return}try{p(!0),await mC(t,D.id,{text:X,editedAt:Date.now()}),v(null),E("")}catch(le){console.error(le),alert("   .")}finally{p(!1)}}async function ts(D){if(!(!D||D.uid!==e.uid||!window.confirm("     . ?")))try{p(!0),await gC(t,D.id)}catch(le){console.error(le),alert("   .")}finally{p(!1)}}return l.jsxs("div",{style:{minHeight:"100vh",padding:B?"20px 16px 32px":"24px 30px 40px",background:"#E5F3E6",display:"flex",flexDirection:"column",boxSizing:"border-box"},children:[P&&C&&l.jsx("div",{onClick:xr,style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.45)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:B?18:24},children:l.jsxs("div",{style:{width:"100%",maxWidth:520,background:"#FFFFFF",borderRadius:18,boxShadow:"0 18px 40px rgba(0,0,0,0.22)",padding:B?"18px 18px 16px":"22px 22px 18px",border:"1px solid rgba(0,0,0,0.06)"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},children:[l.jsx("div",{style:{fontSize:18,fontWeight:800,color:"#111827"},children:(C.title||`${t} `).toString()}),l.jsx("div",{style:{fontSize:12,color:"#6B7280"},children:" "})]}),l.jsx("div",{style:{marginTop:14,fontSize:15,lineHeight:1.7,color:"#111827",whiteSpace:"pre-wrap"},children:C.content})]})}),l.jsx("h2",{style:{color:"#034732",fontSize:32,fontWeight:800,textAlign:"center",marginBottom:t===""||t===""?10:0},children:n}),t===""&&l.jsx("div",{style:{color:"#4B5563",fontSize:15,fontWeight:500,textAlign:"center",marginBottom:10},children:"30  1"}),t===""&&l.jsx("div",{style:{color:"#4B5563",fontSize:15,fontWeight:500,textAlign:"center",marginBottom:10},children:"30  1"}),(t==="(A)"||t==="(B)")&&l.jsx("div",{style:{color:"#4B5563",fontSize:15,fontWeight:500,textAlign:"center",marginBottom:10},children:"30   "}),t===""&&l.jsx("div",{style:{color:"#4B5563",fontSize:15,fontWeight:500,textAlign:"center",marginBottom:10},children:"30  1"}),t===""&&l.jsx("div",{style:{color:"#4B5563",fontSize:14,fontWeight:500,textAlign:"center",lineHeight:1.6,maxWidth:600,margin:"0 auto"},children:"<   ,            >"}),t===""&&l.jsx("div",{style:{color:"#4B5563",fontSize:14,fontWeight:500,textAlign:"center",lineHeight:1.6,maxWidth:600,margin:"0 auto"},children:"<   ,          >"}),l.jsxs("div",{style:{marginTop:24,display:"flex",alignItems:"center",justifyContent:"center",gap:24},children:[l.jsxs("svg",{width:120,height:120,children:[l.jsx("circle",{stroke:"#E5E7EB",fill:"transparent",strokeWidth:14,r:50,cx:60,cy:60}),l.jsx("circle",{stroke:"#6366F1",fill:"transparent",strokeWidth:14,strokeLinecap:"round",r:50,cx:60,cy:60,strokeDasharray:2*Math.PI*50,strokeDashoffset:2*Math.PI*50-ko/100*(2*Math.PI*50),style:{transition:"stroke-dashoffset 0.4s ease"}})]}),l.jsxs("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[l.jsx("p",{style:{margin:0,fontSize:15,color:"#4B5563"},children:"  "}),l.jsxs("div",{style:{marginTop:6,display:"flex",alignItems:"baseline",gap:12},children:[l.jsxs("span",{style:{fontSize:28,fontWeight:700},children:[ko,"%"]}),l.jsxs("span",{style:{fontSize:20,fontWeight:600},children:[gn,"km"]})]}),l.jsxs("div",{style:{marginTop:4,fontSize:16,color:"#4B5563"},children:["(",Je," / ",ke,")"]})]})]}),l.jsx("div",{style:{marginTop:28,width:"100%",display:"flex",justifyContent:"center",position:"relative"},children:l.jsxs("div",{onClick:()=>ti(Ft),style:{width:B?"96%":"86%",maxWidth:B?"none":540,background:r[Ft]?"linear-gradient(135deg, #2C3E50 0%, #000000 100%)":"linear-gradient(135deg, #1B9C5A 0%, #15803D 100%)",borderRadius:34,padding:B?"20px 8px 60px":"24px 30px 40px",color:"#ffffff",textAlign:"center",boxShadow:"0 12px 28px rgba(0,0,0,0.15)",cursor:y?"pointer":"not-allowed",opacity:y?1:.6,position:"relative",minHeight:B?330:280,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:"0 auto",overflow:"hidden"},children:[l.jsx("button",{onClick:D=>{D.stopPropagation(),es(-1)},style:{position:"absolute",left:0,top:"50%",transform:"translateY(-50%)",width:50,height:80,background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"0 12px 12px 0",cursor:"pointer",zIndex:10,display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx("div",{style:{width:20,height:20,borderLeft:"6px solid #fff",borderBottom:"6px solid #fff",transform:"rotate(45deg)",opacity:1}})}),l.jsx("button",{onClick:D=>{D.stopPropagation(),es(1)},style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",width:50,height:80,background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"12px 0 0 12px",cursor:"pointer",zIndex:10,display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx("div",{style:{width:20,height:20,borderRight:"6px solid #fff",borderBottom:"6px solid #fff",transform:"rotate(-45deg)",opacity:1}})}),l.jsx("div",{style:{position:"absolute",bottom:40,left:10,fontSize:24,opacity:.15},children:""}),l.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.85)",padding:"16px 24px",borderRadius:"24px",boxShadow:"0 8px 20px rgba(0,0,0,0.06)",marginBottom:"20px",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.5)",backdropFilter:"blur(4px)",width:B?"90%":"85%",maxWidth:500,boxSizing:"border-box",zIndex:5},children:[l.jsx("div",{style:{fontSize:22,fontWeight:800,color:r[Ft]?"#2C3E50":"#034732"},children:On}),l.jsxs("div",{style:{marginTop:4,fontSize:B?17:19,fontWeight:700,color:r[Ft]?"#555":"#1B9C5A"},children:[" ( ",To,")"]})]}),We&&l.jsx(Ek,{todayPortion:We,todayKey:Ft,checks:r,toggle:ti,isApproved:y,isMobile:B}),l.jsx("div",{style:{position:"absolute",left:18,bottom:16,zIndex:5},children:l.jsx("div",{onClick:()=>ti(Ft),style:{width:60,height:60,borderRadius:"50%",border:"4px solid #F3F4F6",background:"#FFFFFF",boxShadow:"0 4px 10px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",cursor:"pointer",transition:"all 0.3s"},children:l.jsx("span",{style:{fontSize:11,fontWeight:700,color:"rgba(0,0,0,0.25)"},children:"()"})})}),r[Ft]&&l.jsx("div",{style:{position:"absolute",left:-52,bottom:-54,zIndex:10,pointerEvents:"none",width:200,height:200,display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx("img",{src:"/stamps/stamps_source_clean.png",alt:"stamp",style:{width:190,height:190,objectFit:"contain",transform:"rotate(-10deg)",filter:"drop-shadow(0 4px 12px rgba(0,0,0,0.3))",animation:"popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275)"}})})]})}),l.jsx("div",{style:{marginTop:10,textAlign:"center",fontSize:15,fontWeight:500,color:"#555"},children:"   "}),l.jsxs("div",{style:{marginTop:14,fontSize:15,lineHeight:1.5,fontWeight:500,textAlign:"center",color:"#555"},children:["     .",l.jsx("br",{}),"    "]}),l.jsx("div",{style:{marginTop:12,background:"#FFFFFF",borderRadius:24,padding:B?"6px 8px 8px":"12px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:10,maxWidth:520,width:"88%",marginLeft:"auto",marginRight:"auto"},children:l.jsxs("div",{style:{marginTop:8,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:B?8:16},children:[l.jsxs("button",{onClick:()=>we(`/?crew=${encodeURIComponent(t)}&date=${Ft}`),style:{background:"#F7C948",borderRadius:28,padding:B?"20px 26px":"22px 32px",border:"none",color:"#000",fontSize:19,fontWeight:700,lineHeight:1.35,cursor:"pointer",boxShadow:"0 4px 10px rgba(0,0,0,0.15)",minWidth:B?130:170,textAlign:"center"},children:["",l.jsx("br",{}),""]}),l.jsx("img",{src:"/runner.png",alt:"runner",style:{width:B?80:125,height:"auto",objectFit:"contain"}})]})}),l.jsxs("div",{style:{marginTop:32},children:[l.jsx("p",{style:{margin:0,fontWeight:700,fontSize:15},children:" "}),l.jsx("textarea",{value:d,onChange:D=>h(D.target.value),rows:3,placeholder:"    ",style:{width:"100%",marginTop:10,padding:12,borderRadius:12,border:"1px solid #CBD5E1",fontSize:14,resize:"vertical"}}),l.jsx("button",{onClick:Da,style:{marginTop:10,padding:"10px 18px",border:"none",borderRadius:10,background:"#1B9C5A",color:"#fff",fontSize:15,fontWeight:600,cursor:"pointer"},children:""})]}),l.jsxs("div",{style:{marginTop:24},children:[l.jsx("p",{style:{fontWeight:700,marginBottom:8},children:"  "}),l.jsxs("div",{style:{display:"flex",gap:8,marginBottom:10},children:[l.jsx("button",{onClick:()=>f(D=>!D),style:{padding:"8px 12px",borderRadius:10,border:"1px solid #1B9C5A",background:u?"#1B9C5A":"#fff",color:u?"#fff":"#1B9C5A",cursor:"pointer",fontWeight:700},children:u?"":" ( 3)"}),u&&l.jsx("div",{style:{fontSize:12,color:"#555",alignSelf:"center"},children:" 3    ."})]}),l.jsx("ul",{style:{listStyle:"none",padding:0,margin:0,display:"flex",flexDirection:"column",gap:4},children:ei.map(D=>{const X=D&&D.uid&&e&&D.uid===e.uid,le=x===D.id;return l.jsxs("li",{style:{padding:10,borderRadius:10,background:"#F1F5F9",fontSize:13,display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:10},children:[l.jsxs("div",{style:{flex:1,minWidth:0},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:6},children:[l.jsx("span",{style:{fontWeight:700},children:D.user}),D.timestamp&&l.jsxs("span",{style:{fontSize:12,color:"#6B7280"},children:[Xe(D.timestamp),D.editedAt?" ()":""]})]}),le?l.jsxs("div",{style:{marginTop:6},children:[l.jsx("textarea",{value:w,onChange:Te=>E(Te.target.value),rows:3,style:{width:"100%",padding:10,borderRadius:10,border:"1px solid #CBD5E1",fontSize:13,resize:"vertical",boxSizing:"border-box",background:"#fff"},disabled:g}),l.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[l.jsx("button",{onClick:()=>yn(D),disabled:g,style:{padding:"8px 12px",borderRadius:10,border:"none",background:"#1B9C5A",color:"#fff",fontWeight:700,cursor:"pointer",opacity:g?.6:1},children:""}),l.jsx("button",{onClick:()=>{v(null),E("")},disabled:g,style:{padding:"8px 12px",borderRadius:10,border:"1px solid #CBD5E1",background:"#fff",color:"#111827",fontWeight:700,cursor:"pointer",opacity:g?.6:1},children:""})]})]}):l.jsx("div",{style:{marginTop:4,color:"#374151",wordBreak:"break-word"},children:D.text})]}),X&&!le&&l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,flexShrink:0},children:[l.jsx("button",{onClick:()=>Ro(D),disabled:g,style:{padding:"6px 10px",borderRadius:10,border:"1px solid #CBD5E1",background:"#fff",fontWeight:700,cursor:"pointer",opacity:g?.6:1},children:""}),l.jsx("button",{onClick:()=>ts(D),disabled:g,style:{padding:"6px 10px",borderRadius:10,border:"none",background:"#E63946",color:"#fff",fontWeight:800,cursor:"pointer",opacity:g?.6:1},children:""})]})]},D.id)})})]}),l.jsxs("div",{style:{marginTop:28},children:[l.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:15},children:l.jsx("p",{style:{fontWeight:800,fontSize:18,margin:0},children:"    "})}),(()=>M.length===0?l.jsx("div",{style:{padding:"40px 20px",textAlign:"center",background:"rgba(255,255,255,0.5)",borderRadius:20,border:"1px dashed #CBD5E1",color:"#64748B",fontSize:14},children:"   ."}):l.jsx("div",{style:{overflowX:"auto"},children:l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12,background:"#F8FAFF",borderRadius:12},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"left",width:"20%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"right",width:"12%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"right",width:"15%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"center",width:"20%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"center",width:"33%",whiteSpace:"nowrap"},children:""})]})}),l.jsx("tbody",{children:M.map(D=>{var X,le,Te;return l.jsxs("tr",{children:[l.jsx("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",maxWidth:65,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:D.name}),l.jsxs("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",textAlign:"right"},children:[D.progress,"%"]}),l.jsxs("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",textAlign:"right",whiteSpace:"nowrap"},children:[D.chapters,""]}),l.jsx("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",textAlign:"center"},children:(()=>{const Ue=D.stateLabel||" ",dt=D.stateKey||"",Ze=dt==="success"||Ue.includes(""),ln=dt==="ready"||Ue.includes(""),vn=dt==="running"||Ue.includes("");if(dt==="fail"||Ue.includes("!"),ln)return l.jsx("span",{style:{color:"#166534",fontWeight:600},children:Ue});const xn={display:"inline-block",borderRadius:6,padding:"2px 5px",fontWeight:700,fontSize:11,backgroundColor:Ze?"#DCFCE7":vn?"#DBEAFE":"#E5E7EB",color:Ze?"#166534":vn?"#1D4ED8":"#111827",whiteSpace:"nowrap"};return l.jsx("span",{style:xn,children:Ue})})()}),l.jsx("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px",textAlign:"center"},children:l.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:3,fontSize:13},children:[(((X=D.medals)==null?void 0:X.gold)||0)>0&&l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[l.jsx("span",{children:""}),l.jsx("b",{style:{marginLeft:1},children:D.medals.gold})]}),(((le=D.medals)==null?void 0:le.silver)||0)>0&&l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[l.jsx("span",{children:""}),l.jsx("b",{style:{marginLeft:1},children:D.medals.silver})]}),(((Te=D.medals)==null?void 0:Te.bronze)||0)>0&&l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[l.jsx("span",{children:""}),l.jsx("b",{style:{marginLeft:1},children:D.medals.bronze})]})]})})]},D.uid)})})]})}))()]}),l.jsx("div",{style:{marginTop:20,textAlign:"center"},children:l.jsx("button",{onClick:()=>we("/home"),style:{padding:"10px 24px",borderRadius:999,border:"none",background:"#1565C0",color:"#fff",fontWeight:"bold",cursor:"pointer",fontSize:15,boxShadow:"0 6px 12px rgba(0,0,0,0.2)"},children:" "})})]})}const tm=fe;function kk({user:t}){const e=mn(),[n,r]=_.useState({}),[i,s]=_.useState({}),[o,a]=_.useState({});if(_.useEffect(()=>{if(!t||!t.uid)return;const S=$C(t.uid,C=>s(C||{}));return()=>{typeof S=="function"&&S()}},[t]),_.useEffect(()=>{if(!t||!t.uid)return;const C=new Date().getFullYear(),j=wC(C,P=>{a(P||{})});return()=>{typeof j=="function"&&j()}},[t]),_.useEffect(()=>{if(!t||!t.uid)return;const S=[];return tm.forEach(C=>{const j=Q0(C,t.uid,P=>{r(I=>({...I,[C]:P||{}}))});typeof j=="function"&&S.push(j)}),()=>{S.forEach(C=>{try{C()}catch{}})}},[t]),!t||!t.uid)return l.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0F172A 0%, #1E293B 100%)",color:"#F8FAFC",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:20,fontFamily:"'Outfit', 'Roboto', sans-serif"},children:[l.jsx("h2",{style:{fontSize:32,fontWeight:800,marginBottom:20},children:"  "}),l.jsx("p",{style:{color:"#94A3B8",marginBottom:30},children:"    ."}),l.jsx("button",{onClick:()=>e("/login"),style:{padding:"12px 30px",borderRadius:12,border:"none",background:"#1B9C5A",color:"#fff",fontWeight:700,cursor:"pointer"},children:" "})]});const c=new Date,u=c.getFullYear(),f=c.getMonth()+1,d=`${u}-${String(f).padStart(2,"0")}-${String(c.getDate()).padStart(2,"0")}`;let h=0,x=0,v=0;const w={};if(tm.forEach(S=>{const C=n[S]||{};Object.entries(C).forEach(([j,P])=>{if(!P)return;const[I,M]=j.split("-"),A=Number(I),H=Number(M);if(!A||!H)return;const Q=`${S}_${I}-${M}`;if(!w[Q]){const O=sn(A,H),Y=mr(S,O),N={};Y.forEach(B=>{N[B.date]=B.chapters||0}),w[Q]=N}const ie=w[Q][j]||0;j===d&&(h+=ie),A===u&&H===f&&(x+=ie),A===u&&(v+=ie)})}),t&&t.uid&&o&&t.crew){const S=o[f];if(S){let C=0;const j=S.gold&&S.gold[t.uid],P=S.silver&&S.silver[t.uid],I=S.bronze&&S.bronze[t.uid];if(j||P||I){const M=`${t.crew}_${u}-${f}`;if(!w[M]){const H=sn(u,f),Q=mr(t.crew,H),ie={};Q.forEach(O=>{ie[O.date]=O.chapters||0}),w[M]=ie}const A=w[M];C=Object.values(A).reduce((H,Q)=>H+Q,0)}if(C>0&&C>x){const M=C-x;x=C,v+=M}}}const E=(h/10).toFixed(1),g=(x/10).toFixed(1),p=(v/10).toFixed(1),y={background:"rgba(255, 255, 255, 0.05)",padding:"24px",borderRadius:"20px",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)",flex:1},b={color:"#94A3B8",fontSize:14,fontWeight:500,marginBottom:8},T={fontSize:24,fontWeight:800,color:"#F8FAFC"};return l.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0F172A 0%, #1E293B 100%)",color:"#F8FAFC",padding:"40px 20px",fontFamily:"'Outfit', 'Roboto', sans-serif"},children:l.jsxs("div",{style:{maxWidth:800,margin:"0 auto"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:40},children:[l.jsx("h1",{style:{fontSize:42,fontWeight:900,background:"linear-gradient(to right, #10B981, #34D399, #10B981)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",letterSpacing:-1,marginBottom:10},children:"   "}),l.jsxs("p",{style:{color:"#94A3B8",fontSize:18},children:[t.name,"    "]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:20,marginBottom:30},children:[l.jsxs("div",{style:y,children:[l.jsx("div",{style:b,children:"   "}),l.jsxs("div",{style:T,children:[h," ",l.jsxs("span",{style:{fontSize:16,color:"#34D399"},children:["(",E,"km)"]})]})]}),l.jsxs("div",{style:y,children:[l.jsx("div",{style:b,children:"   "}),l.jsxs("div",{style:T,children:[x," ",l.jsxs("span",{style:{fontSize:16,color:"#34D399"},children:["(",g,"km)"]})]})]}),l.jsxs("div",{style:y,children:[l.jsx("div",{style:b,children:"   "}),l.jsxs("div",{style:T,children:[v," ",l.jsxs("span",{style:{fontSize:16,color:"#34D399"},children:["(",p,"km)"]})]})]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:20},children:[l.jsxs("div",{style:{...y,border:"1px solid rgba(245, 158, 11, 0.2)"},children:[l.jsxs("h3",{style:{fontSize:20,fontWeight:800,marginBottom:20,display:"flex",alignItems:"center",gap:10},children:[l.jsx("span",{style:{color:"#F59E0B"},children:""}),"   "]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",padding:"10px 0"},children:[l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:32,marginBottom:5},children:""}),l.jsx("div",{style:{fontSize:20,fontWeight:800},children:i.gold||0}),l.jsx("div",{style:{fontSize:12,color:"#94A3B8"},children:"Gold"})]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:32,marginBottom:5},children:""}),l.jsx("div",{style:{fontSize:20,fontWeight:800},children:i.silver||0}),l.jsx("div",{style:{fontSize:12,color:"#94A3B8"},children:"Silver"})]}),l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx("div",{style:{fontSize:32,marginBottom:5},children:""}),l.jsx("div",{style:{fontSize:20,fontWeight:800},children:i.bronze||0}),l.jsx("div",{style:{fontSize:12,color:"#94A3B8"},children:"Bronze"})]})]})]}),l.jsxs("div",{style:{...y,border:"1px solid rgba(16, 185, 129, 0.3)"},children:[l.jsxs("h3",{style:{fontSize:20,fontWeight:800,marginBottom:20,display:"flex",alignItems:"center",gap:10},children:[l.jsx("span",{style:{color:"#10B981"},children:""}),"   "]}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:12},children:(()=>{const S=String(new Date().getFullYear()),C=(t==null?void 0:t.earnedMedals)||{},j={};Object.keys(C).forEach(I=>{if(I.startsWith(S)){const M=I.split("_"),A=M.length>1?M[1]:"";A&&(j[A]=(j[A]||0)+1)}});const P=Object.entries(j).sort((I,M)=>I[0].localeCompare(M[0]));return P.length===0?l.jsx("span",{style:{color:"#94A3B8"},children:"    ."}):P.map(([I,M],A)=>l.jsxs("div",{style:{fontSize:14,fontWeight:700,background:"rgba(255,255,255,0.03)",padding:"12px 20px",borderRadius:16,border:"1px solid rgba(16, 185, 129, 0.2)",display:"flex",alignItems:"center",gap:12,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[l.jsx("span",{children:I}),l.jsxs("span",{style:{background:"linear-gradient(135deg, #F59E0B 0%, #D97706 100%)",color:"#000",padding:"4px 12px",borderRadius:10,fontSize:16,fontWeight:900,boxShadow:"0 2px 8px rgba(245, 158, 11, 0.4)"},children:["x",M]})]},A))})()})]}),l.jsxs("div",{style:{...y,border:"1px solid rgba(233, 196, 106, 0.3)",background:"linear-gradient(135deg, rgba(233, 196, 106, 0.05) 0%, rgba(30, 41, 59, 0.5) 100%)"},children:[l.jsxs("h3",{style:{fontSize:20,fontWeight:800,marginBottom:20,display:"flex",alignItems:"center",gap:10},children:[l.jsx("span",{style:{color:"#E9C46A"},children:""}),"    "]}),(()=>{const S=Xn((t==null?void 0:t.earnedMedals)||{});return l.jsxs("div",{children:[l.jsx("div",{style:{textAlign:"center",padding:"10px 0",marginBottom:20},children:l.jsxs("div",{style:{fontSize:44,fontWeight:900,color:"#E9C46A",textShadow:"0 0 20px rgba(233, 196, 106, 0.3)"},children:[S.totalDok,l.jsx("span",{style:{fontSize:20,marginLeft:4},children:" "})]})}),S.fragments&&S.fragments.length>0&&l.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:15,borderRadius:12},children:[l.jsx("div",{style:{fontSize:13,color:"#E9C46A",fontWeight:700,marginBottom:10},children:"    "}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:S.fragments.map(C=>l.jsxs("div",{style:{fontSize:12,background:"rgba(255,255,255,0.05)",padding:"4px 10px",borderRadius:6,border:"1px solid rgba(255,255,255,0.1)",color:"#CBD5E1"},children:[C.name.replace("","")," ",l.jsxs("span",{style:{fontWeight:800,color:"#fff"},children:["x",C.count]})]},C.name))})]})]})})()]})]}),l.jsx("div",{style:{marginTop:50,textAlign:"center"},children:l.jsx("button",{onClick:()=>e("/home"),style:{padding:"12px 40px",borderRadius:999,border:"1px solid rgba(255,255,255,0.2)",background:"rgba(255,255,255,0.05)",color:"#fff",fontWeight:700,cursor:"pointer",transition:"0.2s"},children:"  "})})]})})}function Tk(t){const[e,n]=_.useState(null),[r,i]=_.useState(!0);_.useEffect(()=>{if(!t){n(null),i(!1);return}const o=QC(t,a=>{n(a),i(!1)});return()=>{try{o&&o()}catch{}}},[t]);const s=_.useCallback(async o=>{t&&await GC(t,o)},[t]);return{bookmark:e,loading:r,saveBookmark:s}}function Rk(){const{search:t}=Ef();return fm.useMemo(()=>new URLSearchParams(t),[t])}function jk({user:t}){const e=Rk(),n=mn(),r=t&&t.uid?t.uid:null,{bookmark:i,loading:s,saveBookmark:o}=Tk(r),[a,c]=_.useState(!1),u=e.get("crew")||"",f=e.get("date");_.useEffect(()=>{if(!r||!f||!/^\d{4}-\d{2}-\d{2}$/.test(f))return;const O=F(ue,`users/${r}/dailyActivity/${f}`);Xr(O,{biblePageVisited:!0,visitedAt:Date.now()}).catch(Y=>{console.error("[dailyActivity] failed to mark biblePageVisited",Y)})},[r,f]);const[d,h]=_.useState(null),[x,v]=_.useState(null),[w,E]=_.useState(!0),[g,p]=_.useState(()=>{const O=localStorage.getItem("bibleFont");return O?parseInt(O):18}),[y,b]=_.useState(""),[T,S]=_.useState({book:null,chapter:null}),[C,j]=_.useState(!1);_.useEffect(()=>{localStorage.setItem("bibleFont",g)},[g]),_.useEffect(()=>{async function O(){try{if(!f){b("  ."),E(!1);return}const Y=new Date(f+"T00:00:00");if(isNaN(Y.getTime())){b("   ."),E(!1);return}const N=Y.getFullYear(),B=Y.getMonth()+1,W=sn(N,B),Z=mr(u,W).find(Oe=>Oe.date===f);if(!Z){b("      ."),E(!1);return}const De=await fetch("/bible_kor.json");if(!De.ok)throw new Error("   .");const we=await De.json();v(we),h(Z),E(!1)}catch(Y){console.error(Y),b("    ."),E(!1)}}O()},[u,f]);const P=()=>{const O=document.querySelectorAll("[id^='pos-']");if(!O||O.length===0)return null;let Y=null,N=1/0;if(O.forEach(W=>{const q=W.getBoundingClientRect();if(q.bottom<=0)return;const Z=Math.abs(q.top-80);Z<N&&(N=Z,Y=W)}),!Y)return null;const B=Y.id.replace("pos-","").split("-");return{book:B[0],chapter:parseInt(B[1],10)}},I=async()=>{if(!r){alert(" .");return}if(!d){alert("   .    .");return}const O=P();if(!O||!O.book||!O.chapter){alert("       .");return}await o({bookId:O.book,chapter:O.chapter}),c(!0),setTimeout(()=>c(!1),1500)},M=()=>{if(!i||!i.bookId||!i.chapter)return;const O=document.getElementById(`pos-${i.bookId}-${i.chapter}`);O?O.scrollIntoView({behavior:"smooth",block:"start"}):alert("     .")},A=O=>{if(!O)return"";const Y=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],N=new RegExp("("+Y.join("|")+")\\d+:\\d+"),B=O.match(N);if(B){const W=O.indexOf(B[0]);if(W>10)return O.substring(0,W).trim()}return O};if(w)return l.jsxs("div",{style:{minHeight:"100vh",padding:20,background:"#E5FFF5"},children:[l.jsx("h2",{style:{marginTop:0},children:"  "}),l.jsx("p",{children:"  ..."})]});if(y||!d||!x)return l.jsxs("div",{style:{minHeight:"100vh",padding:20,background:"#E5FFF5"},children:[l.jsx("h2",{style:{marginTop:0},children:"  "}),l.jsx("p",{style:{color:"#b91c1c"},children:y||"   ."}),l.jsx("button",{onClick:()=>n(-1),style:{marginTop:16,padding:"8px 16px",borderRadius:999,border:"none",background:"#2563EB",color:"#0f172a",fontWeight:600,cursor:"pointer"},children:" "})]});const H=[];(d.items||[]).forEach(O=>{if(!(O!=null&&O.book)||!(O!=null&&O.chapter))return;const Y=`${O.book}:${O.chapter}`;H.includes(Y)||H.push(Y)});const Q=H.map(O=>{var q;const[Y,N]=O.split(":"),B=parseInt(N,10),W=(q=x==null?void 0:x[Y])==null?void 0:q[String(B)];return{book:Y,chapter:B,verses:W||{}}}),ie=d.panorama?d.panorama.parsedSections.map(O=>({...O,chapters:O.items.map(Y=>{var B;const N=(B=x==null?void 0:x[Y.book])==null?void 0:B[String(Y.chapter)];return{book:Y.book,chapter:Y.chapter,verses:N||{}}})})):null;return l.jsx("div",{style:{fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Text", "Apple SD Gothic Neo", system-ui',background:C?"#050509":"#f2f2f7",minHeight:"100vh"},children:l.jsxs("div",{style:{maxWidth:820,margin:"0 auto",minHeight:"100vh",padding:"12px 12px 24px",display:"flex",flexDirection:"column",gap:12},children:[l.jsxs("div",{style:{position:"sticky",top:0,zIndex:20,padding:"8px 4px 10px",marginBottom:4,display:"flex",alignItems:"center",justifyContent:"space-between",backdropFilter:"blur(18px)",WebkitBackdropFilter:"blur(18px)",background:C?"rgba(15,23,42,0.9)":"rgba(242,242,247,0.9)",borderBottom:C?"1px solid rgba(15,23,42,0.9)":"1px solid rgba(226,232,240,0.9)"},children:[l.jsx("button",{onClick:()=>n(-1),style:{width:54,padding:"6px 8px",borderRadius:14,border:"none",background:C?"rgba(15,23,42,0.8)":"#ffffff",boxShadow:C?"0 4px 10px rgba(0,0,0,0.45)":"0 4px 10px rgba(148,163,184,0.55)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:0,fontSize:18,cursor:"pointer",color:C?"#E5E7EB":"#111827"},children:""}),l.jsxs("button",{onClick:()=>j(O=>!O),"aria-label":C?"  ":" ",style:{padding:"6px 10px",borderRadius:999,border:"1px solid",borderColor:C?"rgba(255,255,255,0.18)":"rgba(15,23,42,0.12)",background:C?"rgba(255,255,255,0.08)":"rgba(15,23,42,0.06)",color:C?"#E5E7EB":"#111827",fontSize:13,fontWeight:700,display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[l.jsx("span",{style:{fontSize:16,lineHeight:1},children:C?"":""}),l.jsx("span",{style:{whiteSpace:"nowrap",lineHeight:1.2,letterSpacing:"0.01em"},children:C?" ":""})]})]}),l.jsxs("div",{style:{borderRadius:18,padding:14,color:C?"#E5E7EB":"#0f172a",background:C?"rgba(15,23,42,0.95)":"rgba(255,255,255,0.96)",boxShadow:C?"0 10px 25px rgba(0,0,0,0.7)":"0 8px 22px rgba(148,163,184,0.35)",display:"flex",flexDirection:"column",gap:10},children:[!s&&l.jsxs("div",{style:{padding:"9px 11px",borderRadius:12,color:C?"#E5E7EB":"#0f172a",background:C?"rgba(15,23,42,0.9)":"rgba(248,250,252,0.95)",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:13,gap:8},children:[l.jsx("span",{children:i?`  : ${i.bookId} ${i.chapter}`:"   ."}),i&&l.jsx("button",{onClick:M,style:{padding:"6px 10px",borderRadius:999,border:"none",background:"#4a6cf7",color:"#F9FAFB",fontSize:12,cursor:"pointer",whiteSpace:"nowrap"},children:" "})]}),l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8},children:[l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("button",{onClick:()=>p(O=>Math.max(14,O-2)),style:{padding:"6px 10px",borderRadius:10,border:"none",background:C?"#020617":"#E5E7EB",color:C?"#E5E7EB":"#111827",fontWeight:600,cursor:"pointer"},children:"A-"}),l.jsx("button",{onClick:()=>p(O=>Math.min(26,O+2)),style:{padding:"6px 10px",borderRadius:10,border:"none",background:C?"#020617":"#E5E7EB",color:C?"#E5E7EB":"#111827",fontWeight:600,cursor:"pointer"},children:"A+"})]}),l.jsxs("div",{style:{fontSize:12,opacity:.8},children:[": ",f]})]}),d.panorama?l.jsxs("div",{style:{marginTop:8},children:[l.jsx("div",{style:{fontSize:26,fontWeight:800,color:"#1F8A70",letterSpacing:"-0.02em",marginBottom:8},children:d.panorama.mainTitle}),l.jsx("div",{style:{fontSize:16,fontWeight:600,opacity:.9,display:"flex",flexWrap:"wrap",gap:"8px 10px"},children:d.panorama.sections.map((O,Y)=>l.jsxs("span",{style:{background:C?"rgba(31,138,112,0.25)":"#E5F3E6",color:C?"#86EFAC":"#1F8A70",padding:"4px 10px",borderRadius:10,border:C?"1px solid rgba(134,239,172,0.2)":"none"},children:[O.subTitle," (",O.bibleRef,")"]},Y))})]}):l.jsxs("div",{style:{marginTop:12,fontSize:Math.max(22,g+4),letterSpacing:"0.01em",fontWeight:800},children:[u,"  ",d.label]})]})]}),l.jsx("div",{style:{flex:1,overflowY:"auto",background:C?"rgba(15,23,42,0.98)":"#ffffff",color:C?"#E5E7EB":"#0f172a",borderRadius:22,padding:18,boxShadow:C?"0 16px 40px rgba(0,0,0,0.8)":"0 16px 40px rgba(148,163,184,0.45)"},children:ie?ie.map((O,Y)=>l.jsxs("div",{style:{marginBottom:40},children:[l.jsxs("div",{style:{padding:"8px 12px",background:C?"rgba(31,138,112,0.2)":"#E5F3E6",borderRadius:12,marginBottom:16,borderLeft:"4px solid #1F8A70"},children:[l.jsxs("div",{style:{fontSize:13,color:"#1F8A70",fontWeight:700,marginBottom:2},children:["SECTION ",Y+1]}),l.jsxs("div",{style:{fontSize:18,fontWeight:800},children:[O.subTitle," (",O.bibleRef,")"]})]}),O.chapters.map(N=>l.jsxs("div",{id:`pos-${N.book}-${N.chapter}`,style:{marginBottom:22},children:[l.jsxs("h3",{style:{margin:"0 0 10px",fontSize:18,fontWeight:700},children:[N.book," ",N.chapter,""]}),Object.keys(N.verses).sort((B,W)=>parseInt(B,10)-parseInt(W,10)).map(B=>{const W=N.verses[B]||"",q=W.match(/^<([^>]+)>\s*(.*)$/),Z=q?q[1]:null,De=q?q[2]:W;return l.jsxs("div",{style:{margin:"6px 0"},children:[Z&&l.jsxs("div",{style:{color:"#1F8A70",fontWeight:700,fontSize:"1.05em",marginBottom:4},children:["[ ",Z," ]"]}),l.jsxs("p",{style:{margin:"2px 0",fontSize:g,letterSpacing:"0.01em",lineHeight:1.65},children:[l.jsxs("strong",{children:[B,"."]})," ",A(De)]})]},B)})]},N.book+N.chapter))]},Y)):Q.map(O=>{const Y=Object.keys(O.verses).sort((N,B)=>parseInt(N,10)-parseInt(B,10));return l.jsxs("div",{id:`pos-${O.book}-${O.chapter}`,style:{marginBottom:22},onMouseEnter:()=>S({book:O.book,chapter:O.chapter}),children:[l.jsxs("h3",{style:{margin:"0 0 10px",fontSize:18,fontWeight:700},children:[O.book," ",O.chapter,""]}),Y.map(N=>{const B=O.verses[N]||"",W=B.match(/^<([^>]+)>\s*(.*)$/),q=W?W[1]:null,Z=W?W[2]:B;return l.jsxs("div",{style:{margin:"6px 0"},children:[q&&l.jsxs("div",{style:{color:"#1F8A70",fontWeight:700,fontSize:"1.05em",marginBottom:4},children:["[ ",q," ]"]}),l.jsxs("p",{style:{margin:"2px 0",fontSize:g,letterSpacing:"0.01em",lineHeight:1.65},children:[l.jsxs("strong",{children:[N,"."]})," ",A(Z)]})]},N)})]},O.book+O.chapter)})}),l.jsx("div",{style:{height:40}}),l.jsxs("button",{onClick:I,style:{position:"fixed",right:20,bottom:24,zIndex:9999,padding:"10px 16px",borderRadius:999,border:"none",background:"rgba(255,255,255,0.9)",color:"#0f172a",fontWeight:"bold",fontSize:14,boxShadow:"0 14px 30px rgba(15,23,42,0.35)",cursor:"pointer",display:"flex",alignItems:"center",gap:8},children:[l.jsx("span",{style:{fontSize:18},children:""}),l.jsx("span",{children:" "})]}),a&&l.jsx("div",{style:{position:"fixed",inset:0,zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.25)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)"},children:l.jsxs("div",{style:{width:"85%",maxWidth:340,padding:"16px 18px",borderRadius:28,background:"rgba(255,255,255,0.85)",color:"#0f172a",boxShadow:"0 20px 40px rgba(0,0,0,0.35)",textAlign:"center"},children:[l.jsx("div",{style:{width:48,height:48,margin:"0 auto 10px",borderRadius:24,background:"#34C759",display:"flex",alignItems:"center",justifyContent:"center",fontSize:24,color:"#fff"},children:""}),l.jsx("div",{style:{fontSize:16,fontWeight:700,marginBottom:4},children:" "}),l.jsx("div",{style:{fontSize:13,color:"#475569"},children:"      "})]})})]})})}function Ik({user:t}){const e=mn(),[n,r]=_.useState({}),[i,s]=_.useState({}),[o,a]=_.useState({});_.useEffect(()=>{const u=q0(v=>r(v||{})),f=ka(v=>s(v||{})),d=new Date,h=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}`,x=[];return fe.forEach(v=>{const w=F(ue,`approvals/${h}/${v}`),E=Se(w,g=>{const p=g.val()?Object.keys(g.val()):[];a(y=>({...y,[v]:p}))});x.push(E)}),()=>{typeof u=="function"&&u(),typeof f=="function"&&f(),x.forEach(v=>v())}},[]);const c=_.useMemo(()=>{const u=new Date,f=u.getFullYear(),d=u.getMonth()+1,h=sn(f,d);if(!h||h.length===0)return{dates:[],todayKey:"",byCrew:{}};const x=u.getDate(),v=`${f}-${String(d).padStart(2,"0")}-${String(x).padStart(2,"0")}`,w=h.slice(0,x),E={};fe.forEach(b=>E[b]=[]);const g=new Set,p={};fe.forEach(b=>{const T=mr(b,h),S={};(T||[]).forEach(C=>{!C||!C.date||(S[C.date]=typeof C.chapters=="number"?C.chapters:0)}),p[b]=S});const y=(b,T,S)=>{if(!b||!E[b])return;const C=n[b]||{},j=C.users&&C.users[T]||{},P=p[b]||{},M=(j||{}).checks||{};let A=0,H=0;w.forEach(N=>{const B=P[N]||0;B&&(H+=B,M[N]&&(A+=B))});const Q=S.name||T,ie=S.medals||{},O=H>0?Math.round(A/H*100):0,Y=kf({dates:h,todayKey:v,userChecks:M,userDailyActivity:S.dailyActivity||{}});E[b].push({uid:T,name:Q,chapters:A,progress:O,stateKey:Y.key,stateLabel:Y.label,medals:ie})};return fe.forEach(b=>{(o[b]||[]).forEach(S=>{g.add(S);const C=(i||{})[S];C&&y(b,S,C)})}),Object.entries(i||{}).forEach(([b,T])=>{if(g.has(b))return;const S=T.crew;S&&E[S]&&y(S,b,T)}),Object.keys(E).forEach(b=>{E[b].sort((T,S)=>(S.chapters||0)-(T.chapters||0))}),{dates:h,todayKey:v,byCrew:E}},[n,i,o]);return l.jsxs("div",{style:{padding:25,minHeight:"100vh",background:"#E5F3E6",color:"#034732"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[l.jsx("h2",{style:{margin:0,fontSize:26},children:"   "}),l.jsx("button",{onClick:()=>e("/home"),style:{padding:"10px 14px",borderRadius:12,border:"none",background:"#E8F6F0",color:"#1E7F74",fontWeight:900,cursor:"pointer"},children:"  "})]}),l.jsxs("div",{style:{fontSize:12,color:"#2F3A33",marginBottom:14},children:[" ",l.jsx("b",{children:"  /   .. /   /  !"}),"  ."]}),fe.map(u=>{const f=c.byCrew&&c.byCrew[u]||[];return l.jsxs("div",{style:{marginBottom:16,padding:14,borderRadius:12,background:"#FFFFFF",boxShadow:"0 4px 10px rgba(0,0,0,0.06)"},children:[l.jsx("h3",{style:{margin:0,marginBottom:10},children:Ve(u)}),f.length===0?l.jsx("div",{style:{fontSize:12,color:"#64748B"},children:"    ."}):l.jsx("div",{style:{overflowX:"auto"},children:l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12,background:"#F8FAFF",borderRadius:12},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"left",width:"20%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"right",width:"12%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"right",width:"15%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"center",width:"20%",whiteSpace:"nowrap"},children:""}),l.jsx("th",{style:{borderBottom:"1px solid #CBD5E1",padding:"6px 2px",textAlign:"center",width:"33%",whiteSpace:"nowrap"},children:""})]})}),l.jsx("tbody",{children:f.map(d=>{var h,x,v;return l.jsxs("tr",{children:[l.jsx("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",maxWidth:65,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:d.name}),l.jsxs("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",textAlign:"right"},children:[d.progress,"%"]}),l.jsxs("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",textAlign:"right",whiteSpace:"nowrap"},children:[d.chapters,""]}),l.jsx("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px 2px",textAlign:"center"},children:(()=>{const w=d.stateLabel||" ",E=d.stateKey||"",g=E==="success"||w.includes(""),p=E==="ready"||w.includes(""),y=E==="running"||w.includes("");if(E==="fail"||w.includes("!"),p)return l.jsx("span",{style:{color:"#166534",fontWeight:600},children:w});const b={display:"inline-block",borderRadius:6,padding:"2px 5px",fontWeight:700,fontSize:11,backgroundColor:g?"#DCFCE7":y?"#DBEAFE":"#E5E7EB",color:g?"#166534":y?"#1D4ED8":"#111827",whiteSpace:"nowrap"};return l.jsx("span",{style:b,children:w})})()}),l.jsx("td",{style:{borderBottom:"1px solid #E2E8F0",padding:"4px",textAlign:"center"},children:l.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:3,fontSize:13},children:[(((h=d.medals)==null?void 0:h.gold)||0)>0&&l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[l.jsx("span",{children:""}),l.jsx("b",{style:{marginLeft:1},children:d.medals.gold})]}),(((x=d.medals)==null?void 0:x.silver)||0)>0&&l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[l.jsx("span",{children:""}),l.jsx("b",{style:{marginLeft:1},children:d.medals.silver})]}),(((v=d.medals)==null?void 0:v.bronze)||0)>0&&l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[l.jsx("span",{children:""}),l.jsx("b",{style:{marginLeft:1},children:d.medals.bronze})]})]})})]},d.uid)})})]})})]},u)})]})}function Ak(){const[t,e]=_.useState(null);_.useEffect(()=>{const r=localStorage.getItem("biblecrew_user");if(r)try{const i=JSON.parse(r);if(i&&i.uid){const s=ee(),o=F(s,`users/${i.uid}`),a=Se(o,c=>{const u=c.val();if(u){const f={uid:i.uid,name:u.name||i.name,crew:u.crew||null,isAdmin:!!u.isAdmin,medals:u.medals||{},earnedMedals:u.earnedMedals||{},mustChangePassword:!!u.mustChangePassword};e(f),localStorage.setItem("biblecrew_user",JSON.stringify(f))}});return()=>a()}}catch(i){console.error("   ",i)}},[]);async function n(r,i){const s=(r||"").trim();if(!s)return null;const o=await RC(s,i||""),a={uid:o.uid,name:o.name||s,crew:o.crew||null,isAdmin:!!o.isAdmin,medals:o.medals||{},earnedMedals:o.earnedMedals||{},mustChangePassword:!!o.mustChangePassword};return e(a),localStorage.setItem("biblecrew_user",JSON.stringify(a)),a}return l.jsx(YE,{children:l.jsxs(UE,{children:[l.jsx(Le,{path:"/admin-login",element:l.jsx(gk,{})}),l.jsx(Le,{path:"/",element:l.jsx(Zp,{onLogin:n})}),l.jsx(Le,{path:"/login",element:l.jsx(Zp,{onLogin:n})}),l.jsx(Le,{path:"/home",element:l.jsx(GE,{user:t})}),l.jsx(Le,{path:"/crew-members",element:l.jsx(Ik,{user:t})}),l.jsx(Le,{path:"/change-password",element:l.jsx(_k,{user:t})}),l.jsx(Le,{path:"/",element:l.jsx($n,{crewName:"",user:t})}),l.jsx(Le,{path:"/",element:l.jsx($n,{crewName:"",user:t})}),l.jsx(Le,{path:"/A",element:l.jsx($n,{crewName:"(A)",user:t})}),l.jsx(Le,{path:"/B",element:l.jsx($n,{crewName:"(B)",user:t})}),l.jsx(Le,{path:"/",element:l.jsx($n,{crewName:"",user:t})}),l.jsx(Le,{path:"/",element:l.jsx($n,{crewName:"",user:t})}),l.jsx(Le,{path:"/",element:l.jsx($n,{crewName:"",user:t})}),l.jsx(Le,{path:"/",element:l.jsx($n,{crewName:"",user:t})}),l.jsx(Le,{path:"/",element:l.jsx(QE,{})}),l.jsx(Le,{path:"/records",element:l.jsx(kk,{user:t})}),l.jsx(Le,{path:"/",element:l.jsx(jk,{user:t})}),l.jsx(Le,{path:"/admin",element:l.jsx(pk,{user:t})}),l.jsx(Le,{path:"/admin/class-notice",element:l.jsx(mk,{})})]})})}const Nk=document.getElementById("root"),Dk=m1(Nk);Dk.render(l.jsx(Ak,{}));
