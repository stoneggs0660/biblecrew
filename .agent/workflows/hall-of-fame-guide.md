---
description: 성경 완독(1-dok) 계산 로직 및 명예의 전당 관리 가이드
---

# 성경 완독(1-dok) 및 명예의 전당 시스템 가이드

이 문서는 성경러닝크루 앱의 성경 완독(1-dok) 계산 엔진과 명예의 전당 데이터 관리 방법을 설명합니다.

## 1. 성경 완독(1-dok) 계산 로직 (`src/utils/dokUtils.js`)

성경 완독은 사용자가 획득한 수료 기록(`earnedMedals`)을 기반으로 탐욕 알고리즘(Greedy Algorithm)을 통해 계산됩니다.

### 우선순위 및 규칙
1.  **1순위 (고급반):** `고급반` 수료 기록 1개당 **1독** 인정.
2.  **2순위 (중급반 세트):** `중급반` + `초급반(신약)` (또는 구버전 `초급반`) 세트 1개당 **1독** 인정.
3.  **3순위 (초급반 풀세트):** `초급반(구약A)` + `초급반(구약B)` + `초급반(신약)` 세트 1개당 **1독** 인정.

### 특징
-   **중복 사용 불가:** 한 번 완독 계산에 사용된 수료 기록(조각)은 다른 완독 계산에 재사용되지 않습니다.
-   **수료 조각(Fragments):** 완독 세트를 구성하지 못하고 남은 기록들은 '수료 조각'으로 분류되어 관리자 페이지와 내 기록 페이지에 표시됩니다.
-   **실시간성:** 원본 데이터를 수정하지 않고, 렌더링 시점에 실시간으로 계산하여 표시합니다.

## 2. 메달 수여 기준 (`src/utils/rankingUtils.js`)

-   **변경 사항:** 기존의 절대 장수 기준에서 **목표 대비 100% 달성** 기준으로 변경되었습니다.
-   해당 월의 각 반별 스케줄 합계와 사용자의 체크 기록 합계가 일치할 때만 메달을 수여합니다.

## 3. 명예의 전당 관리 (`src/pages/HallOfFame.jsx`)

### 데이터 구조
-   `hallOfFame/{year}/monthlyResults/{month}/`:
    -   `gold`, `silver`, `bronze`: 각 메달별 수여자 명단 (이름, 반 정보 포함).
    -   `dokAchievers`: 해당 월에 수료 조각이 추가되어 **새롭게 1독을 달성한 인원** 목록.

### 자동화 로직
-   관리자가 **[월 종료 갈무리]** 버튼을 누를 때, 시스템은 `calculateDokStatus`를 이용해 "이번 달 수료로 인해 1독 횟수가 증가한 사람"을 자동으로 추출하여 `dokAchievers`에 저장합니다.

## 4. 관련 파일 위치
-   로직 엔진: `src/utils/dokUtils.js`, `src/utils/rankingUtils.js`
-   데이터 동기화: `src/firebaseSync.js` (특히 `saveMonthlyHallOfFame` 함수)
-   UI 컴포넌트: `src/pages/HallOfFame.jsx`, `src/pages/Home.jsx`, `src/pages/Records.jsx`, `src/pages/AdminPage.jsx`

---
*이 가이드는 시스템의 무결성을 유지하고 향후 유지보수를 돕기 위해 작성되었습니다.*
